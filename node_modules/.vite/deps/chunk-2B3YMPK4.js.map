{
  "version": 3,
  "sources": ["../../@kitware/vtk.js/Rendering/OpenGL/Texture.js", "../../@kitware/vtk.js/Rendering/OpenGL/Texture/Constants.js", "../../@kitware/vtk.js/Common/Core/HalfFloat.js", "../../@kitware/vtk.js/Rendering/SceneGraph/ViewNode.js", "../../@kitware/vtk.js/Rendering/SceneGraph/ViewNodeFactory.js", "../../@kitware/vtk.js/Rendering/OpenGL/ViewNodeFactory.js", "../../@kitware/vtk.js/Rendering/OpenGL/Texture/supportsNorm16Linear.js", "../../@kitware/vtk.js/Rendering/WebGPU/Sampler.js", "../../@kitware/vtk.js/Rendering/WebGPU/Types.js", "../../@kitware/vtk.js/Rendering/WebGPU/TextureView.js", "../../@kitware/vtk.js/Rendering/Core/Texture.js", "../../@kitware/vtk.js/Rendering/WebGPU/Texture.js", "../../gl-matrix/esm/common.js", "../../gl-matrix/esm/mat3.js", "../../gl-matrix/esm/mat4.js", "../../gl-matrix/esm/quat.js", "../../gl-matrix/esm/vec3.js", "../../gl-matrix/esm/vec4.js", "../../gl-matrix/esm/vec2.js", "../../@kitware/vtk.js/Rendering/OpenGL/Actor.js", "../../@kitware/vtk.js/Rendering/OpenGL/Actor2D.js", "../../@kitware/vtk.js/Rendering/OpenGL/Camera.js", "../../d3-array/src/ascending.js", "../../d3-array/src/descending.js", "../../d3-array/src/bisector.js", "../../d3-array/src/number.js", "../../d3-array/src/bisect.js", "../../d3-array/src/blur.js", "../../d3-array/src/array.js", "../../d3-array/src/ticks.js", "../../d3-array/src/shuffle.js", "../../d3-scale/src/init.js", "../../d3-scale/src/ordinal.js", "../../d3-color/src/define.js", "../../d3-color/src/color.js", "../../d3-color/src/math.js", "../../d3-color/src/lab.js", "../../d3-color/src/cubehelix.js", "../../d3-interpolate/src/basis.js", "../../d3-interpolate/src/basisClosed.js", "../../d3-interpolate/src/constant.js", "../../d3-interpolate/src/color.js", "../../d3-interpolate/src/rgb.js", "../../d3-interpolate/src/numberArray.js", "../../d3-interpolate/src/array.js", "../../d3-interpolate/src/date.js", "../../d3-interpolate/src/number.js", "../../d3-interpolate/src/object.js", "../../d3-interpolate/src/string.js", "../../d3-interpolate/src/value.js", "../../d3-interpolate/src/round.js", "../../d3-interpolate/src/transform/decompose.js", "../../d3-interpolate/src/transform/parse.js", "../../d3-interpolate/src/transform/index.js", "../../d3-interpolate/src/zoom.js", "../../d3-interpolate/src/hsl.js", "../../d3-interpolate/src/hcl.js", "../../d3-interpolate/src/cubehelix.js", "../../d3-scale/src/constant.js", "../../d3-scale/src/number.js", "../../d3-scale/src/continuous.js", "../../d3-format/src/formatDecimal.js", "../../d3-format/src/exponent.js", "../../d3-format/src/formatGroup.js", "../../d3-format/src/formatNumerals.js", "../../d3-format/src/formatSpecifier.js", "../../d3-format/src/formatTrim.js", "../../d3-format/src/formatPrefixAuto.js", "../../d3-format/src/formatRounded.js", "../../d3-format/src/formatTypes.js", "../../d3-format/src/identity.js", "../../d3-format/src/locale.js", "../../d3-format/src/defaultLocale.js", "../../d3-format/src/precisionFixed.js", "../../d3-format/src/precisionPrefix.js", "../../d3-format/src/precisionRound.js", "../../d3-scale/src/tickFormat.js", "../../d3-scale/src/linear.js", "../../d3-time/src/interval.js", "../../d3-time/src/millisecond.js", "../../d3-time/src/duration.js", "../../d3-time/src/second.js", "../../d3-time/src/minute.js", "../../d3-time/src/hour.js", "../../d3-time/src/day.js", "../../d3-time/src/week.js", "../../d3-time/src/month.js", "../../d3-time/src/year.js", "../../d3-time/src/ticks.js", "../../d3-time-format/src/locale.js", "../../d3-time-format/src/defaultLocale.js", "../../d3-time-format/src/isoFormat.js", "../../d3-time-format/src/isoParse.js", "../../@kitware/vtk.js/Common/DataModel/ImplicitFunction.js", "../../@kitware/vtk.js/Common/DataModel/Plane.js", "../../@kitware/vtk.js/Common/DataModel/BoundingBox.js", "../../@kitware/vtk.js/Rendering/Core/Prop/Constants.js", "../../@kitware/vtk.js/Rendering/Core/Prop.js", "../../@kitware/vtk.js/Rendering/Core/Prop3D.js", "../../@kitware/vtk.js/Rendering/Core/Property/Constants.js", "../../@kitware/vtk.js/Rendering/Core/Property.js", "../../@kitware/vtk.js/Rendering/Core/Actor.js", "../../@kitware/vtk.js/Rendering/Core/AbstractMapper.js", "../../@kitware/vtk.js/Rendering/Core/AbstractMapper3D.js", "../../@kitware/vtk.js/Common/DataModel/DataSetAttributes/FieldData.js", "../../@kitware/vtk.js/Common/DataModel/DataSetAttributes/Constants.js", "../../@kitware/vtk.js/Common/DataModel/DataSetAttributes.js", "../../@kitware/vtk.js/Common/DataModel/DataSet/Constants.js", "../../@kitware/vtk.js/Common/DataModel/DataSet.js", "../../@kitware/vtk.js/Common/DataModel/StructuredData/Constants.js", "../../@kitware/vtk.js/Common/DataModel/StructuredData.js", "../../@kitware/vtk.js/Common/DataModel/ImageData.js", "../../@kitware/vtk.js/Common/Core/ScalarsToColors/Constants.js", "../../@kitware/vtk.js/Rendering/Core/Mapper/Constants.js", "../../@kitware/vtk.js/Common/Core/ScalarsToColors.js", "../../@kitware/vtk.js/Common/Core/LookupTable.js", "../../@kitware/vtk.js/Rendering/Core/Mapper/Static.js", "../../@kitware/vtk.js/Rendering/Core/Mapper/CoincidentTopologyHelper.js", "../../@kitware/vtk.js/Rendering/OpenGL/HardwareSelector/Constants.js", "../../@kitware/vtk.js/Rendering/Core/Mapper.js", "../../@kitware/vtk.js/Common/Core/CellArray.js", "../../@kitware/vtk.js/Common/Core/Points.js", "../../@kitware/vtk.js/Common/DataModel/Cell.js", "../../@kitware/vtk.js/Common/DataModel/CellLinks.js", "../../@kitware/vtk.js/Common/DataModel/CellTypes/Constants.js", "../../@kitware/vtk.js/Common/DataModel/CellTypes.js", "../../@kitware/vtk.js/Common/DataModel/Line/Constants.js", "../../@kitware/vtk.js/Common/DataModel/Line.js", "../../@kitware/vtk.js/Common/DataModel/PointSet.js", "../../@kitware/vtk.js/Common/DataModel/PolyLine.js", "../../@kitware/vtk.js/Common/Core/PriorityQueue.js", "../../@kitware/vtk.js/Common/DataModel/Polygon/Constants.js", "../../@kitware/vtk.js/Common/DataModel/Polygon.js", "../../@kitware/vtk.js/Common/DataModel/Triangle.js", "../../@kitware/vtk.js/Common/DataModel/Quad.js", "../../@kitware/vtk.js/Common/DataModel/TriangleStrip.js", "../../@kitware/vtk.js/Common/DataModel/PolyData/Constants.js", "../../@kitware/vtk.js/Common/DataModel/PolyData.js", "../../@kitware/vtk.js/Rendering/Core/CubeAxesActor.js", "../../@kitware/vtk.js/Rendering/OpenGL/CubeAxesActor.js", "../../@kitware/vtk.js/Rendering/OpenGL/BufferObject/Constants.js", "../../@kitware/vtk.js/Rendering/OpenGL/BufferObject.js", "../../@kitware/vtk.js/Rendering/OpenGL/CellArrayBufferObject/helpers.js", "../../@kitware/vtk.js/Rendering/OpenGL/CellArrayBufferObject.js", "../../@kitware/vtk.js/Rendering/OpenGL/Shader.js", "../../@kitware/vtk.js/Rendering/OpenGL/ShaderProgram.js", "../../@kitware/vtk.js/Rendering/OpenGL/VertexArrayObject.js", "../../@kitware/vtk.js/Rendering/OpenGL/Helper.js", "../../@kitware/vtk.js/Rendering/OpenGL/glsl/vtkPolyDataVS.glsl.js", "../../@kitware/vtk.js/Rendering/OpenGL/glsl/vtkPolyDataFS.glsl.js", "../../@kitware/vtk.js/Rendering/OpenGL/ReplacementShaderMapper.js", "../../@kitware/vtk.js/Rendering/OpenGL/PolyDataMapper.js", "../../@kitware/vtk.js/Rendering/OpenGL/PixelSpaceCallbackMapper.js", "../../@kitware/vtk.js/Rendering/OpenGL/glsl/vtkPolyData2DFS.glsl.js", "../../@kitware/vtk.js/Rendering/OpenGL/glsl/vtkPolyData2DVS.glsl.js", "../../@kitware/vtk.js/Rendering/Core/Property2D/Constants.js", "../../@kitware/vtk.js/Rendering/OpenGL/PolyDataMapper2D.js", "../../@kitware/vtk.js/Rendering/OpenGL/Renderer.js", "../../@kitware/vtk.js/Rendering/Core/ScalarBarActor/Constants.js", "../../@kitware/vtk.js/Rendering/Core/ScalarBarActor.js", "../../@kitware/vtk.js/Rendering/OpenGL/ScalarBarActor.js", "../../@kitware/vtk.js/Rendering/OpenGL/Skybox.js", "../../@kitware/vtk.js/Rendering/WebGPU/ViewNodeFactory.js", "../../@kitware/vtk.js/Rendering/WebGPU/Actor.js", "../../@kitware/vtk.js/Rendering/WebGPU/Actor2D.js", "../../@kitware/vtk.js/Rendering/WebGPU/Camera.js", "../../@kitware/vtk.js/Rendering/WebGPU/CubeAxesActor.js", "../../@kitware/vtk.js/Rendering/WebGPU/BufferManager/Constants.js", "../../@kitware/vtk.js/Rendering/WebGPU/Buffer.js", "../../@kitware/vtk.js/Rendering/WebGPU/IndexBuffer.js", "../../@kitware/vtk.js/Rendering/WebGPU/BufferManager.js", "../../@kitware/vtk.js/Rendering/Core/Property2D.js", "../../@kitware/vtk.js/Rendering/WebGPU/ShaderModule.js", "../../@kitware/vtk.js/Rendering/WebGPU/ShaderCache.js", "../../@kitware/vtk.js/Rendering/WebGPU/UniformBuffer.js", "../../@kitware/vtk.js/Rendering/WebGPU/BindGroup.js", "../../@kitware/vtk.js/Rendering/WebGPU/Pipeline.js", "../../@kitware/vtk.js/Rendering/WebGPU/ShaderDescription.js", "../../@kitware/vtk.js/Rendering/WebGPU/VertexInput.js", "../../@kitware/vtk.js/Rendering/WebGPU/SimpleMapper.js", "../../@kitware/vtk.js/Rendering/WebGPU/CellArrayMapper.js", "../../@kitware/vtk.js/Rendering/WebGPU/PolyDataMapper.js", "../../@kitware/vtk.js/Rendering/WebGPU/PixelSpaceCallbackMapper.js", "../../@kitware/vtk.js/Rendering/WebGPU/PolyDataMapper2D.js", "../../@kitware/vtk.js/Rendering/WebGPU/FullScreenQuad.js", "../../@kitware/vtk.js/Rendering/WebGPU/StorageBuffer.js", "../../@kitware/vtk.js/Rendering/WebGPU/Renderer.js", "../../@kitware/vtk.js/Rendering/WebGPU/ScalarBarActor.js"],
  "sourcesContent": ["import DeepEqual from 'fast-deep-equal';\nimport Constants from './Texture/Constants.js';\nimport HalfFloat from '../../Common/Core/HalfFloat.js';\nimport { n as newInstance$1, o as obj, s as set, e as setGet, g as get, i as moveToProtected, a as newTypedArray, c as macro } from '../../macros2.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport { Y as isPowerOfTwo, T as nearestPowerOfTwo } from '../../Common/Core/Math/index.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\nimport supportsNorm16LinearCached from './Texture/supportsNorm16Linear.js';\n\nconst {\n  Wrap,\n  Filter\n} = Constants;\nconst {\n  VtkDataTypes\n} = vtkDataArray;\nconst {\n  vtkDebugMacro,\n  vtkErrorMacro,\n  vtkWarningMacro,\n  requiredParam\n} = macro;\nconst {\n  toHalf\n} = HalfFloat;\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLTexture methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLTexture(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLTexture');\n  function getTexParams() {\n    return {\n      internalFormat: model.internalFormat,\n      format: model.format,\n      openGLDataType: model.openGLDataType,\n      width: model.width,\n      height: model.height\n    };\n  }\n\n  // Renders myself\n  publicAPI.render = function () {\n    let renWin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    if (renWin) {\n      model._openGLRenderWindow = renWin;\n    } else {\n      model._openGLRenderer = publicAPI.getFirstAncestorOfType('vtkOpenGLRenderer');\n      // sync renderable properties\n      model._openGLRenderWindow = model._openGLRenderer.getLastAncestorOfType('vtkOpenGLRenderWindow');\n    }\n    model.context = model._openGLRenderWindow.getContext();\n    if (model.renderable.getInterpolate()) {\n      if (model.generateMipmap) {\n        publicAPI.setMinificationFilter(Filter.LINEAR_MIPMAP_LINEAR);\n      } else {\n        publicAPI.setMinificationFilter(Filter.LINEAR);\n      }\n      publicAPI.setMagnificationFilter(Filter.LINEAR);\n    } else {\n      publicAPI.setMinificationFilter(Filter.NEAREST);\n      publicAPI.setMagnificationFilter(Filter.NEAREST);\n    }\n    if (model.renderable.getRepeat()) {\n      publicAPI.setWrapR(Wrap.REPEAT);\n      publicAPI.setWrapS(Wrap.REPEAT);\n      publicAPI.setWrapT(Wrap.REPEAT);\n    }\n    // clear image if input data is set\n    if (model.renderable.getInputData()) {\n      model.renderable.setImage(null);\n    }\n    // create the texture if it is not done already\n    if (!model.handle || model.renderable.getMTime() > model.textureBuildTime.getMTime()) {\n      if (model.renderable.getImageBitmap() !== null) {\n        if (model.renderable.getInterpolate()) {\n          model.generateMipmap = true;\n          publicAPI.setMinificationFilter(Filter.LINEAR_MIPMAP_LINEAR);\n        }\n        // Have an Image which may not be complete\n        if (model.renderable.getImageBitmap() && model.renderable.getImageLoaded()) {\n          publicAPI.create2DFromImageBitmap(model.renderable.getImageBitmap());\n          publicAPI.activate();\n          publicAPI.sendParameters();\n          model.textureBuildTime.modified();\n        }\n      }\n      // if we have an Image\n      if (model.renderable.getImage() !== null) {\n        if (model.renderable.getInterpolate()) {\n          model.generateMipmap = true;\n          publicAPI.setMinificationFilter(Filter.LINEAR_MIPMAP_LINEAR);\n        }\n        // Have an Image which may not be complete\n        if (model.renderable.getImage() && model.renderable.getImageLoaded()) {\n          publicAPI.create2DFromImage(model.renderable.getImage());\n          publicAPI.activate();\n          publicAPI.sendParameters();\n          model.textureBuildTime.modified();\n        }\n      }\n      // if we have a canvas\n      if (model.renderable.getCanvas() !== null) {\n        if (model.renderable.getInterpolate()) {\n          model.generateMipmap = true;\n          publicAPI.setMinificationFilter(Filter.LINEAR_MIPMAP_LINEAR);\n        }\n        const canvas = model.renderable.getCanvas();\n        publicAPI.create2DFromRaw({\n          width: canvas.width,\n          height: canvas.height,\n          numComps: 4,\n          dataType: VtkDataTypes.UNSIGNED_CHAR,\n          data: canvas,\n          flip: true\n        });\n        publicAPI.activate();\n        publicAPI.sendParameters();\n        model.textureBuildTime.modified();\n      }\n      // if we have jsImageData\n      if (model.renderable.getJsImageData() !== null) {\n        const jsid = model.renderable.getJsImageData();\n        if (model.renderable.getInterpolate()) {\n          model.generateMipmap = true;\n          publicAPI.setMinificationFilter(Filter.LINEAR_MIPMAP_LINEAR);\n        }\n        publicAPI.create2DFromRaw({\n          width: jsid.width,\n          height: jsid.height,\n          numComps: 4,\n          dataType: VtkDataTypes.UNSIGNED_CHAR,\n          data: jsid.data,\n          flip: true\n        });\n        publicAPI.activate();\n        publicAPI.sendParameters();\n        model.textureBuildTime.modified();\n      }\n      // if we have InputData\n      const input = model.renderable.getInputData(0);\n      if (input && input.getPointData().getScalars()) {\n        const ext = input.getExtent();\n        const inScalars = input.getPointData().getScalars();\n\n        // do we have a cube map? Six inputs\n        const data = [];\n        for (let i = 0; i < model.renderable.getNumberOfInputPorts(); ++i) {\n          const indata = model.renderable.getInputData(i);\n          const scalars = indata ? indata.getPointData().getScalars().getData() : null;\n          if (scalars) {\n            data.push(scalars);\n          }\n        }\n        if (model.renderable.getInterpolate() && inScalars.getNumberOfComponents() === 4) {\n          model.generateMipmap = true;\n          publicAPI.setMinificationFilter(Filter.LINEAR_MIPMAP_LINEAR);\n        }\n        if (data.length % 6 === 0) {\n          publicAPI.createCubeFromRaw({\n            width: ext[1] - ext[0] + 1,\n            height: ext[3] - ext[2] + 1,\n            numComps: inScalars.getNumberOfComponents(),\n            dataType: inScalars.getDataType(),\n            data\n          });\n        } else {\n          publicAPI.create2DFromRaw({\n            width: ext[1] - ext[0] + 1,\n            height: ext[3] - ext[2] + 1,\n            numComps: inScalars.getNumberOfComponents(),\n            dataType: inScalars.getDataType(),\n            data: inScalars.getData()\n          });\n        }\n        publicAPI.activate();\n        publicAPI.sendParameters();\n        model.textureBuildTime.modified();\n      }\n    }\n    if (model.handle) {\n      publicAPI.activate();\n    }\n  };\n  const getNorm16Ext = () => {\n    if ((model.minificationFilter === Filter.LINEAR || model.magnificationFilter === Filter.LINEAR) && !supportsNorm16LinearCached()) {\n      return undefined;\n    }\n    return model.oglNorm16Ext;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.destroyTexture = () => {\n    // deactivate it first\n    publicAPI.deactivate();\n    if (model.context && model.handle) {\n      model.context.deleteTexture(model.handle);\n    }\n    model._prevTexParams = null;\n    model.handle = 0;\n    model.numberOfDimensions = 0;\n    model.target = 0;\n    model.components = 0;\n    model.width = 0;\n    model.height = 0;\n    model.depth = 0;\n    publicAPI.resetFormatAndType();\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.createTexture = () => {\n    // reuse the existing handle if we have one\n    if (!model.handle) {\n      model.handle = model.context.createTexture();\n      if (model.target) {\n        model.context.bindTexture(model.target, model.handle);\n\n        // See: http://www.openmodel.context..org/wiki/Common_Mistakes#Creating_a_complete_texture\n        // turn off mip map filter or set the base and max level correctly. here\n        // both are done.\n        model.context.texParameteri(model.target, model.context.TEXTURE_MIN_FILTER, publicAPI.getOpenGLFilterMode(model.minificationFilter));\n        model.context.texParameteri(model.target, model.context.TEXTURE_MAG_FILTER, publicAPI.getOpenGLFilterMode(model.magnificationFilter));\n        model.context.texParameteri(model.target, model.context.TEXTURE_WRAP_S, publicAPI.getOpenGLWrapMode(model.wrapS));\n        model.context.texParameteri(model.target, model.context.TEXTURE_WRAP_T, publicAPI.getOpenGLWrapMode(model.wrapT));\n        if (model._openGLRenderWindow.getWebgl2()) {\n          model.context.texParameteri(model.target, model.context.TEXTURE_WRAP_R, publicAPI.getOpenGLWrapMode(model.wrapR));\n        }\n        model.context.bindTexture(model.target, null);\n      }\n    }\n  };\n\n  //---------------------------------------------------------------------------\n  publicAPI.getTextureUnit = () => {\n    if (model._openGLRenderWindow) {\n      return model._openGLRenderWindow.getTextureUnitForTexture(publicAPI);\n    }\n    return -1;\n  };\n\n  //---------------------------------------------------------------------------\n  publicAPI.activate = () => {\n    // activate a free texture unit for this texture\n    model._openGLRenderWindow.activateTexture(publicAPI);\n    publicAPI.bind();\n  };\n\n  //---------------------------------------------------------------------------\n  publicAPI.deactivate = () => {\n    if (model._openGLRenderWindow) {\n      model._openGLRenderWindow.deactivateTexture(publicAPI);\n    }\n  };\n\n  //---------------------------------------------------------------------------\n  publicAPI.releaseGraphicsResources = rwin => {\n    if (rwin && model.handle) {\n      rwin.activateTexture(publicAPI);\n      rwin.deactivateTexture(publicAPI);\n      model.context.deleteTexture(model.handle);\n      model._prevTexParams = null;\n      model.handle = 0;\n      model.numberOfDimensions = 0;\n      model.target = 0;\n      model.internalFormat = 0;\n      model.format = 0;\n      model.openGLDataType = 0;\n      model.components = 0;\n      model.width = 0;\n      model.height = 0;\n      model.depth = 0;\n      model.allocatedGPUMemoryInBytes = 0;\n    }\n    if (model.shaderProgram) {\n      model.shaderProgram.releaseGraphicsResources(rwin);\n      model.shaderProgram = null;\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.bind = () => {\n    model.context.bindTexture(model.target, model.handle);\n    if (model.autoParameters && publicAPI.getMTime() > model.sendParametersTime.getMTime()) {\n      publicAPI.sendParameters();\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.isBound = () => {\n    let result = false;\n    if (model.context && model.handle) {\n      let target = 0;\n      switch (model.target) {\n        case model.context.TEXTURE_2D:\n          target = model.context.TEXTURE_BINDING_2D;\n          break;\n        default:\n          vtkWarningMacro('impossible case');\n          break;\n      }\n      const oid = model.context.getIntegerv(target);\n      result = oid === model.handle;\n    }\n    return result;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.sendParameters = () => {\n    model.context.texParameteri(model.target, model.context.TEXTURE_WRAP_S, publicAPI.getOpenGLWrapMode(model.wrapS));\n    model.context.texParameteri(model.target, model.context.TEXTURE_WRAP_T, publicAPI.getOpenGLWrapMode(model.wrapT));\n    if (model._openGLRenderWindow.getWebgl2()) {\n      model.context.texParameteri(model.target, model.context.TEXTURE_WRAP_R, publicAPI.getOpenGLWrapMode(model.wrapR));\n    }\n    model.context.texParameteri(model.target, model.context.TEXTURE_MIN_FILTER, publicAPI.getOpenGLFilterMode(model.minificationFilter));\n    model.context.texParameteri(model.target, model.context.TEXTURE_MAG_FILTER, publicAPI.getOpenGLFilterMode(model.magnificationFilter));\n    if (model._openGLRenderWindow.getWebgl2()) {\n      model.context.texParameteri(model.target, model.context.TEXTURE_BASE_LEVEL, model.baseLevel);\n      model.context.texParameteri(model.target, model.context.TEXTURE_MAX_LEVEL, model.maxLevel);\n    }\n\n    // model.context.texParameterf(model.target, model.context.TEXTURE_MIN_LOD, model.minLOD);\n    // model.context.texParameterf(model.target, model.context.TEXTURE_MAX_LOD, model.maxLOD);\n\n    model.sendParametersTime.modified();\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getInternalFormat = (vtktype, numComps) => {\n    if (!model._forceInternalFormat) {\n      model.internalFormat = publicAPI.getDefaultInternalFormat(vtktype, numComps);\n    }\n    if (!model.internalFormat) {\n      vtkDebugMacro(`Unable to find suitable internal format for T=${vtktype} NC= ${numComps}`);\n    }\n    if ([model.context.R32F, model.context.RG32F, model.context.RGB32F, model.context.RGBA32F].includes(model.internalFormat) && !model.context.getExtension('OES_texture_float_linear')) {\n      vtkWarningMacro('Failed to load OES_texture_float_linear. Texture filtering is not available for *32F internal formats.');\n    }\n    return model.internalFormat;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getDefaultInternalFormat = (vtktype, numComps) => {\n    let result = 0;\n    // try default next\n    result = model._openGLRenderWindow.getDefaultTextureInternalFormat(vtktype, numComps, getNorm16Ext(), publicAPI.useHalfFloat());\n    if (result) {\n      return result;\n    }\n    if (!result) {\n      vtkDebugMacro('Unsupported internal texture type!');\n      vtkDebugMacro(`Unable to find suitable internal format for T=${vtktype} NC= ${numComps}`);\n    }\n    return result;\n  };\n  publicAPI.useHalfFloat = () => model.enableUseHalfFloat && model.canUseHalfFloat;\n\n  //----------------------------------------------------------------------------\n  publicAPI.setInternalFormat = iFormat => {\n    model._forceInternalFormat = true;\n    if (iFormat !== model.internalFormat) {\n      model.internalFormat = iFormat;\n      publicAPI.modified();\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getFormat = (vtktype, numComps) => {\n    model.format = publicAPI.getDefaultFormat(vtktype, numComps);\n    return model.format;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getDefaultFormat = (vtktype, numComps) => {\n    if (model._openGLRenderWindow.getWebgl2()) {\n      switch (numComps) {\n        case 1:\n          return model.context.RED;\n        case 2:\n          return model.context.RG;\n        case 3:\n          return model.context.RGB;\n        case 4:\n          return model.context.RGBA;\n        default:\n          return model.context.RGB;\n      }\n    } else {\n      // webgl1\n      switch (numComps) {\n        case 1:\n          return model.context.LUMINANCE;\n        case 2:\n          return model.context.LUMINANCE_ALPHA;\n        case 3:\n          return model.context.RGB;\n        case 4:\n          return model.context.RGBA;\n        default:\n          return model.context.RGB;\n      }\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.resetFormatAndType = () => {\n    model._prevTexParams = null;\n    model.format = 0;\n    model.internalFormat = 0;\n    model._forceInternalFormat = false;\n    model.openGLDataType = 0;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getDefaultDataType = vtkScalarType => {\n    const useHalfFloat = publicAPI.useHalfFloat();\n    // DON'T DEAL with VTK_CHAR as this is platform dependent.\n    if (model._openGLRenderWindow.getWebgl2()) {\n      switch (vtkScalarType) {\n        // case VtkDataTypes.SIGNED_CHAR:\n        //   return model.context.BYTE;\n        case VtkDataTypes.UNSIGNED_CHAR:\n          return model.context.UNSIGNED_BYTE;\n        // prefer norm16 since that is accurate compared to\n        // half float which is not\n        case getNorm16Ext() && !useHalfFloat && VtkDataTypes.SHORT:\n          return model.context.SHORT;\n        case getNorm16Ext() && !useHalfFloat && VtkDataTypes.UNSIGNED_SHORT:\n          return model.context.UNSIGNED_SHORT;\n        // use half float type\n        case useHalfFloat && VtkDataTypes.SHORT:\n          return model.context.HALF_FLOAT;\n        case useHalfFloat && VtkDataTypes.UNSIGNED_SHORT:\n          return model.context.HALF_FLOAT;\n        // case VtkDataTypes.INT:\n        //   return model.context.INT;\n        // case VtkDataTypes.UNSIGNED_INT:\n        //   return model.context.UNSIGNED_INT;\n        case VtkDataTypes.FLOAT:\n        case VtkDataTypes.VOID: // used for depth component textures.\n        default:\n          return model.context.FLOAT;\n      }\n    }\n    switch (vtkScalarType) {\n      // case VtkDataTypes.SIGNED_CHAR:\n      //   return model.context.BYTE;\n      case VtkDataTypes.UNSIGNED_CHAR:\n        return model.context.UNSIGNED_BYTE;\n      // case VtkDataTypes.SHORT:\n      //   return model.context.SHORT;\n      // case VtkDataTypes.UNSIGNED_SHORT:\n      //   return model.context.UNSIGNED_SHORT;\n      // case VtkDataTypes.INT:\n      //   return model.context.INT;\n      // case VtkDataTypes.UNSIGNED_INT:\n      //   return model.context.UNSIGNED_INT;\n      case VtkDataTypes.FLOAT:\n      case VtkDataTypes.VOID: // used for depth component textures.\n      default:\n        if (model.context.getExtension('OES_texture_float') && model.context.getExtension('OES_texture_float_linear')) {\n          return model.context.FLOAT;\n        }\n        {\n          const halfFloat = model.context.getExtension('OES_texture_half_float');\n          if (halfFloat && model.context.getExtension('OES_texture_half_float_linear')) {\n            return halfFloat.HALF_FLOAT_OES;\n          }\n        }\n        return model.context.UNSIGNED_BYTE;\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getOpenGLDataType = function (vtkScalarType) {\n    let forceUpdate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (!model.openGLDataType || forceUpdate) {\n      model.openGLDataType = publicAPI.getDefaultDataType(vtkScalarType);\n    }\n    return model.openGLDataType;\n  };\n  publicAPI.getShiftAndScale = () => {\n    let shift = 0.0;\n    let scale = 1.0;\n\n    // for all float type internal formats\n    switch (model.openGLDataType) {\n      case model.context.BYTE:\n        scale = 127.5;\n        shift = scale - 128.0;\n        break;\n      case model.context.UNSIGNED_BYTE:\n        scale = 255.0;\n        shift = 0.0;\n        break;\n      case model.context.SHORT:\n        scale = 32767.5;\n        shift = scale - 32768.0;\n        break;\n      case model.context.UNSIGNED_SHORT:\n        scale = 65536.0;\n        shift = 0.0;\n        break;\n      case model.context.INT:\n        scale = 2147483647.5;\n        shift = scale - 2147483648.0;\n        break;\n      case model.context.UNSIGNED_INT:\n        scale = 4294967295.0;\n        shift = 0.0;\n        break;\n      case model.context.FLOAT:\n    }\n    return {\n      shift,\n      scale\n    };\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getOpenGLFilterMode = emode => {\n    switch (emode) {\n      case Filter.NEAREST:\n        return model.context.NEAREST;\n      case Filter.LINEAR:\n        return model.context.LINEAR;\n      case Filter.NEAREST_MIPMAP_NEAREST:\n        return model.context.NEAREST_MIPMAP_NEAREST;\n      case Filter.NEAREST_MIPMAP_LINEAR:\n        return model.context.NEAREST_MIPMAP_LINEAR;\n      case Filter.LINEAR_MIPMAP_NEAREST:\n        return model.context.LINEAR_MIPMAP_NEAREST;\n      case Filter.LINEAR_MIPMAP_LINEAR:\n        return model.context.LINEAR_MIPMAP_LINEAR;\n      default:\n        return model.context.NEAREST;\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getOpenGLWrapMode = vtktype => {\n    switch (vtktype) {\n      case Wrap.CLAMP_TO_EDGE:\n        return model.context.CLAMP_TO_EDGE;\n      case Wrap.REPEAT:\n        return model.context.REPEAT;\n      case Wrap.MIRRORED_REPEAT:\n        return model.context.MIRRORED_REPEAT;\n      default:\n        return model.context.CLAMP_TO_EDGE;\n    }\n  };\n\n  //----------------------------------------------------------------------------\n\n  /**\n   * Gets the extent's size.\n   * @param {Extent} extent\n   */\n  function getExtentSize(extent) {\n    const [xmin, xmax, ymin, ymax, zmin, zmax] = extent;\n    return [xmax - xmin + 1, ymax - ymin + 1, zmax - zmin + 1];\n  }\n\n  //----------------------------------------------------------------------------\n\n  /**\n   * Gets the number of pixels in the extent.\n   * @param {Extent} extent\n   */\n  function getExtentPixelCount(extent) {\n    const [sx, sy, sz] = getExtentSize(extent);\n    return sx * sy * sz;\n  }\n\n  //----------------------------------------------------------------------------\n\n  /**\n   * Reads a flattened extent from the image data and writes to the given output array.\n   *\n   * Assumes X varies the fastest and Z varies the slowest.\n   *\n   * @param {*} data\n   * @param {*} dataDims\n   * @param {Extent} extent\n   * @param {TypedArray} outArray\n   * @param {number} outOffset\n   * @returns\n   */\n  function readExtentIntoArray(data, dataDims, extent, outArray, outOffset) {\n    const [xmin, xmax, ymin, ymax, zmin, zmax] = extent;\n    const [dx, dy] = dataDims;\n    const sxy = dx * dy;\n    let writeOffset = outOffset;\n    for (let zi = zmin; zi <= zmax; zi++) {\n      const zOffset = zi * sxy;\n      for (let yi = ymin; yi <= ymax; yi++) {\n        const zyOffset = zOffset + yi * dx;\n        // explicit alternative to data.subarray,\n        // due to potential perf issues on v8\n        for (let readOffset = zyOffset + xmin, end = zyOffset + xmax; readOffset <= end; readOffset++, writeOffset++) {\n          outArray[writeOffset] = data[readOffset];\n        }\n      }\n    }\n  }\n\n  //----------------------------------------------------------------------------\n\n  /**\n   * Reads several image extents into a contiguous pixel array.\n   *\n   * @param {*} data\n   * @param {Extent[]} extent\n   * @param {TypedArrayConstructor} typedArrayConstructor optional typed array constructor\n   * @returns\n   */\n  function readExtents(data, extents) {\n    let typedArrayConstructor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    const constructor = typedArrayConstructor || data.constructor;\n    const numPixels = extents.reduce((count, extent) => count + getExtentPixelCount(extent), 0);\n    const extentPixels = new constructor(numPixels);\n    const dataDims = [model.width, model.height, model.depth];\n    let writeOffset = 0;\n    extents.forEach(extent => {\n      readExtentIntoArray(data, dataDims, extent, extentPixels, writeOffset);\n      writeOffset += getExtentPixelCount(extent);\n    });\n    return extentPixels;\n  }\n\n  //----------------------------------------------------------------------------\n\n  /**\n   * Updates the data array to match the required data type for OpenGL.\n   *\n   * This function takes the input data and converts it to the appropriate\n   * format required by the OpenGL texture, based on the specified data type.\n   *\n   * @param {string} dataType - The original data type of the input data.\n   * @param {Array} data - The input data array that needs to be updated.\n   * @param {boolean} [depth=false] - Indicates whether the data is a 3D array.\n   * @param {Array<Extent>} imageExtents only consider these image extents (default: [])\n   * @returns {Array} The updated data array that matches the OpenGL data type.\n   */\n  publicAPI.updateArrayDataTypeForGL = function (dataType, data) {\n    let depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    let imageExtents = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n    const pixData = [];\n    let pixCount = model.width * model.height * model.components;\n    if (depth) {\n      pixCount *= model.depth;\n    }\n    const onlyUpdateExtents = !!imageExtents.length;\n\n    // if the opengl data type is float\n    // then the data array must be float\n    if (dataType !== VtkDataTypes.FLOAT && model.openGLDataType === model.context.FLOAT) {\n      for (let idx = 0; idx < data.length; idx++) {\n        if (data[idx]) {\n          if (onlyUpdateExtents) {\n            pixData.push(readExtents(data[idx], imageExtents, Float32Array));\n          } else {\n            const dataArrayToCopy = data[idx].length > pixCount ? data[idx].subarray(0, pixCount) : data[idx];\n            pixData.push(new Float32Array(dataArrayToCopy));\n          }\n        } else {\n          pixData.push(null);\n        }\n      }\n    }\n\n    // if the opengl data type is ubyte\n    // then the data array must be u8, we currently simply truncate the data\n    if (dataType !== VtkDataTypes.UNSIGNED_CHAR && model.openGLDataType === model.context.UNSIGNED_BYTE) {\n      for (let idx = 0; idx < data.length; idx++) {\n        if (data[idx]) {\n          if (onlyUpdateExtents) {\n            pixData.push(readExtents(data[idx], imageExtents, Uint8Array));\n          } else {\n            const dataArrayToCopy = data[idx].length > pixCount ? data[idx].subarray(0, pixCount) : data[idx];\n            pixData.push(new Uint8Array(dataArrayToCopy));\n          }\n        } else {\n          pixData.push(null);\n        }\n      }\n    }\n\n    // if the opengl data type is half float\n    // then the data array must be u16\n    let halfFloat = false;\n    if (model._openGLRenderWindow.getWebgl2()) {\n      halfFloat = model.openGLDataType === model.context.HALF_FLOAT;\n    } else {\n      const halfFloatExt = model.context.getExtension('OES_texture_half_float');\n      halfFloat = halfFloatExt && model.openGLDataType === halfFloatExt.HALF_FLOAT_OES;\n    }\n    if (halfFloat) {\n      for (let idx = 0; idx < data.length; idx++) {\n        if (data[idx]) {\n          const src = onlyUpdateExtents ? readExtents(data[idx], imageExtents) : data[idx];\n          const newArray = new Uint16Array(onlyUpdateExtents ? src.length : pixCount);\n          const newArrayLen = newArray.length;\n          for (let i = 0; i < newArrayLen; i++) {\n            newArray[i] = toHalf(src[i]);\n          }\n          pixData.push(newArray);\n        } else {\n          pixData.push(null);\n        }\n      }\n    }\n\n    // The output has to be filled\n    if (pixData.length === 0) {\n      for (let i = 0; i < data.length; i++) {\n        pixData.push(onlyUpdateExtents && data[i] ? readExtents(data[i], imageExtents) : data[i]);\n      }\n    }\n    return pixData;\n  };\n\n  //----------------------------------------------------------------------------\n  function scaleTextureToHighestPowerOfTwo(data) {\n    if (model._openGLRenderWindow.getWebgl2()) {\n      // No need if webGL2\n      return data;\n    }\n    const pixData = [];\n    const width = model.width;\n    const height = model.height;\n    const numComps = model.components;\n    if (data && (!isPowerOfTwo(width) || !isPowerOfTwo(height))) {\n      // Scale up the texture to the next highest power of two dimensions.\n      const halfFloat = model.context.getExtension('OES_texture_half_float');\n      const newWidth = nearestPowerOfTwo(width);\n      const newHeight = nearestPowerOfTwo(height);\n      const pixCount = newWidth * newHeight * model.components;\n      for (let idx = 0; idx < data.length; idx++) {\n        if (data[idx] !== null) {\n          let newArray = null;\n          const jFactor = height / newHeight;\n          const iFactor = width / newWidth;\n          let usingHalf = false;\n          if (model.openGLDataType === model.context.FLOAT) {\n            newArray = new Float32Array(pixCount);\n          } else if (halfFloat && model.openGLDataType === halfFloat.HALF_FLOAT_OES) {\n            newArray = new Uint16Array(pixCount);\n            usingHalf = true;\n          } else {\n            newArray = new Uint8Array(pixCount);\n          }\n          for (let j = 0; j < newHeight; j++) {\n            const joff = j * newWidth * numComps;\n            const jidx = j * jFactor;\n            let jlow = Math.floor(jidx);\n            let jhi = Math.ceil(jidx);\n            if (jhi >= height) {\n              jhi = height - 1;\n            }\n            const jmix = jidx - jlow;\n            const jmix1 = 1.0 - jmix;\n            jlow = jlow * width * numComps;\n            jhi = jhi * width * numComps;\n            for (let i = 0; i < newWidth; i++) {\n              const ioff = i * numComps;\n              const iidx = i * iFactor;\n              let ilow = Math.floor(iidx);\n              let ihi = Math.ceil(iidx);\n              if (ihi >= width) {\n                ihi = width - 1;\n              }\n              const imix = iidx - ilow;\n              ilow *= numComps;\n              ihi *= numComps;\n              for (let c = 0; c < numComps; c++) {\n                if (usingHalf) {\n                  newArray[joff + ioff + c] = HalfFloat.toHalf(HalfFloat.fromHalf(data[idx][jlow + ilow + c]) * jmix1 * (1.0 - imix) + HalfFloat.fromHalf(data[idx][jlow + ihi + c]) * jmix1 * imix + HalfFloat.fromHalf(data[idx][jhi + ilow + c]) * jmix * (1.0 - imix) + HalfFloat.fromHalf(data[idx][jhi + ihi + c]) * jmix * imix);\n                } else {\n                  newArray[joff + ioff + c] = data[idx][jlow + ilow + c] * jmix1 * (1.0 - imix) + data[idx][jlow + ihi + c] * jmix1 * imix + data[idx][jhi + ilow + c] * jmix * (1.0 - imix) + data[idx][jhi + ihi + c] * jmix * imix;\n                }\n              }\n            }\n          }\n          pixData.push(newArray);\n          model.width = newWidth;\n          model.height = newHeight;\n        } else {\n          pixData.push(null);\n        }\n      }\n    }\n\n    // The output has to be filled\n    if (pixData.length === 0) {\n      for (let i = 0; i < data.length; i++) {\n        pixData.push(data[i]);\n      }\n    }\n    return pixData;\n  }\n\n  //----------------------------------------------------------------------------\n  function useTexStorage(dataType) {\n    if (model._openGLRenderWindow) {\n      if (model.resizable || model.renderable?.getResizable()) {\n        // Cannot use texStorage if the texture is supposed to be resizable.\n        return false;\n      }\n      if (model._openGLRenderWindow.getWebgl2()) {\n        const webGLInfo = model._openGLRenderWindow.getGLInformations();\n        if (webGLInfo.RENDERER.value.match(/WebKit/gi) && navigator.platform.match(/Mac/gi) && getNorm16Ext() && (dataType === VtkDataTypes.UNSIGNED_SHORT || dataType === VtkDataTypes.SHORT)) {\n          // Cannot use texStorage with EXT_texture_norm16 textures on Mac M1 GPU.\n          // No errors reported but the texture is unusable.\n          return false;\n        }\n        // Use texStorage for WebGL2\n        return true;\n      }\n      return false;\n    }\n    return false;\n  }\n\n  //----------------------------------------------------------------------------\n\n  publicAPI.create2DFromRaw = function () {\n    let {\n      width = requiredParam('width'),\n      height = requiredParam('height'),\n      numComps = requiredParam('numComps'),\n      dataType = requiredParam('dataType'),\n      data = requiredParam('data'),\n      flip = false\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // Now determine the texture parameters using the arguments.\n    publicAPI.getOpenGLDataType(dataType, true);\n    publicAPI.getInternalFormat(dataType, numComps);\n    publicAPI.getFormat(dataType, numComps);\n    if (!model.internalFormat || !model.format || !model.openGLDataType) {\n      vtkErrorMacro('Failed to determine texture parameters.');\n      return false;\n    }\n    model.target = model.context.TEXTURE_2D;\n    model.components = numComps;\n    model.width = width;\n    model.height = height;\n    model.depth = 1;\n    model.numberOfDimensions = 2;\n    model._openGLRenderWindow.activateTexture(publicAPI);\n    publicAPI.createTexture();\n    publicAPI.bind();\n\n    // Create an array of texture with one texture\n    const dataArray = [data];\n    const pixData = publicAPI.updateArrayDataTypeForGL(dataType, dataArray);\n    const scaledData = scaleTextureToHighestPowerOfTwo(pixData);\n\n    // Source texture data from the PBO.\n    model.context.pixelStorei(model.context.UNPACK_FLIP_Y_WEBGL, flip);\n    model.context.pixelStorei(model.context.UNPACK_ALIGNMENT, 1);\n    if (useTexStorage(dataType)) {\n      model.context.texStorage2D(model.target, 1, model.internalFormat, model.width, model.height);\n      if (scaledData[0] != null) {\n        model.context.texSubImage2D(model.target, 0, 0, 0, model.width, model.height, model.format, model.openGLDataType, scaledData[0]);\n      }\n    } else {\n      model.context.texImage2D(model.target, 0, model.internalFormat, model.width, model.height, 0, model.format, model.openGLDataType, scaledData[0]);\n    }\n    if (model.generateMipmap) {\n      model.context.generateMipmap(model.target);\n    }\n\n    // always reset the flip\n    if (flip) {\n      model.context.pixelStorei(model.context.UNPACK_FLIP_Y_WEBGL, false);\n    }\n    model.allocatedGPUMemoryInBytes = model.width * model.height * model.depth * numComps * model._openGLRenderWindow.getDefaultTextureByteSize(dataType, getNorm16Ext(), publicAPI.useHalfFloat());\n    publicAPI.deactivate();\n    return true;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.createCubeFromRaw = function () {\n    let {\n      width = requiredParam('width'),\n      height = requiredParam('height'),\n      numComps = requiredParam('numComps'),\n      dataType = requiredParam('dataType'),\n      data = requiredParam('data')\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // Now determine the texture parameters using the arguments.\n    publicAPI.getOpenGLDataType(dataType);\n    publicAPI.getInternalFormat(dataType, numComps);\n    publicAPI.getFormat(dataType, numComps);\n    if (!model.internalFormat || !model.format || !model.openGLDataType) {\n      vtkErrorMacro('Failed to determine texture parameters.');\n      return false;\n    }\n    model.target = model.context.TEXTURE_CUBE_MAP;\n    model.components = numComps;\n    model.width = width;\n    model.height = height;\n    model.depth = 1;\n    model.numberOfDimensions = 2;\n    model._openGLRenderWindow.activateTexture(publicAPI);\n    model.maxLevel = data.length / 6 - 1;\n    publicAPI.createTexture();\n    publicAPI.bind();\n    const pixData = publicAPI.updateArrayDataTypeForGL(dataType, data);\n    const scaledData = scaleTextureToHighestPowerOfTwo(pixData);\n\n    // invert the data because opengl is messed up with cube maps\n    // and uses the old renderman standard with Y going down\n    // even though it is completely at odds with OpenGL standards\n    const invertedData = [];\n    let widthLevel = model.width;\n    let heightLevel = model.height;\n    for (let i = 0; i < scaledData.length; i++) {\n      if (i % 6 === 0 && i !== 0) {\n        widthLevel /= 2;\n        heightLevel /= 2;\n      }\n      invertedData[i] = newTypedArray(dataType, heightLevel * widthLevel * model.components);\n      for (let y = 0; y < heightLevel; ++y) {\n        const row1 = y * widthLevel * model.components;\n        const row2 = (heightLevel - y - 1) * widthLevel * model.components;\n        invertedData[i].set(scaledData[i].slice(row2, row2 + widthLevel * model.components), row1);\n      }\n    }\n\n    // Source texture data from the PBO.\n    model.context.pixelStorei(model.context.UNPACK_ALIGNMENT, 1);\n    if (useTexStorage(dataType)) {\n      model.context.texStorage2D(model.target, 6, model.internalFormat, model.width, model.height);\n    }\n    // We get the 6 images\n    for (let i = 0; i < 6; i++) {\n      // For each mipmap level\n      let j = 0;\n      let w = model.width;\n      let h = model.height;\n      while (w >= 1 && h >= 1) {\n        // In webgl 1, all levels need to be defined. So if the latest level size is\n        // 8x8, we have to add 3 more null textures (4x4, 2x2, 1x1)\n        // In webgl 2, the attribute maxLevel will be use.\n        let tempData = null;\n        if (j <= model.maxLevel) {\n          tempData = invertedData[6 * j + i];\n        }\n        if (useTexStorage(dataType)) {\n          if (tempData != null) {\n            model.context.texSubImage2D(model.context.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, 0, 0, w, h, model.format, model.openGLDataType, tempData);\n          }\n        } else {\n          model.context.texImage2D(model.context.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, model.internalFormat, w, h, 0, model.format, model.openGLDataType, tempData);\n        }\n        j++;\n        w /= 2;\n        h /= 2;\n      }\n    }\n    model.allocatedGPUMemoryInBytes = model.width * model.height * model.depth * numComps * model._openGLRenderWindow.getDefaultTextureByteSize(dataType, getNorm16Ext(), publicAPI.useHalfFloat());\n    // generateMipmap must not be called here because we manually upload all levels\n    // if it is called, all levels will be overwritten\n\n    publicAPI.deactivate();\n    return true;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.createDepthFromRaw = function () {\n    let {\n      width = requiredParam('width'),\n      height = requiredParam('height'),\n      dataType = requiredParam('dataType'),\n      data = requiredParam('data')\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // Now determine the texture parameters using the arguments.\n    publicAPI.getOpenGLDataType(dataType);\n    model.format = model.context.DEPTH_COMPONENT;\n    if (model._openGLRenderWindow.getWebgl2()) {\n      if (dataType === VtkDataTypes.FLOAT) {\n        model.internalFormat = model.context.DEPTH_COMPONENT32F;\n      } else {\n        model.internalFormat = model.context.DEPTH_COMPONENT16;\n      }\n    } else {\n      model.internalFormat = model.context.DEPTH_COMPONENT;\n    }\n    if (!model.internalFormat || !model.format || !model.openGLDataType) {\n      vtkErrorMacro('Failed to determine texture parameters.');\n      return false;\n    }\n    model.target = model.context.TEXTURE_2D;\n    model.components = 1;\n    model.width = width;\n    model.height = height;\n    model.depth = 1;\n    model.numberOfDimensions = 2;\n    model._openGLRenderWindow.activateTexture(publicAPI);\n    publicAPI.createTexture();\n    publicAPI.bind();\n\n    // Source texture data from the PBO.\n    // model.context.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    model.context.pixelStorei(model.context.UNPACK_ALIGNMENT, 1);\n    if (useTexStorage(dataType)) {\n      model.context.texStorage2D(model.target, 1, model.internalFormat, model.width, model.height);\n      if (data != null) {\n        model.context.texSubImage2D(model.target, 0, 0, 0, model.width, model.height, model.format, model.openGLDataType, data);\n      }\n    } else {\n      model.context.texImage2D(model.target, 0, model.internalFormat, model.width, model.height, 0, model.format, model.openGLDataType, data);\n    }\n    if (model.generateMipmap) {\n      model.context.generateMipmap(model.target);\n    }\n    model.allocatedGPUMemoryInBytes = model.width * model.height * model.depth * model.components * model._openGLRenderWindow.getDefaultTextureByteSize(dataType, getNorm16Ext(), publicAPI.useHalfFloat());\n    publicAPI.deactivate();\n    return true;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.create2DFromImage = image => {\n    // Determine the texture parameters using the arguments.\n    publicAPI.getOpenGLDataType(VtkDataTypes.UNSIGNED_CHAR);\n    publicAPI.getInternalFormat(VtkDataTypes.UNSIGNED_CHAR, 4);\n    publicAPI.getFormat(VtkDataTypes.UNSIGNED_CHAR, 4);\n    if (!model.internalFormat || !model.format || !model.openGLDataType) {\n      vtkErrorMacro('Failed to determine texture parameters.');\n      return false;\n    }\n    model.target = model.context.TEXTURE_2D;\n    model.components = 4;\n    model.depth = 1;\n    model.numberOfDimensions = 2;\n    model._openGLRenderWindow.activateTexture(publicAPI);\n    publicAPI.createTexture();\n    publicAPI.bind();\n    const needNearestPowerOfTwo = !model._openGLRenderWindow.getWebgl2() && (!isPowerOfTwo(image.width) || !isPowerOfTwo(image.height));\n    let textureSource = image;\n    let targetWidth = image.width;\n    let targetHeight = image.height;\n    let flipY = true;\n\n    // For WebGL1, we need to scale the image to the nearest power of two\n    // dimensions if the image is not already a power of two. For WebGL2, we can\n    // use the image as is. Note: Chrome has a perf issue where the path\n    // HTMLImageElement -> Canvas -> texSubImage2D is faster than\n    // HTMLImageElement -> texSubImage2D directly. See\n    // https://issues.chromium.org/issues/41311312#comment7\n    // Tested on Chrome 137.0.7151.104 Windows 11\n    const isChrome = window.chrome;\n    if (needNearestPowerOfTwo || isChrome) {\n      const canvas = new OffscreenCanvas(nearestPowerOfTwo(image.width), nearestPowerOfTwo(image.height));\n      targetWidth = canvas.width;\n      targetHeight = canvas.height;\n      const ctx = canvas.getContext('2d');\n      ctx.translate(0, canvas.height);\n      ctx.scale(1, -1);\n      ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height);\n      textureSource = canvas;\n      flipY = false; // we are flipping the image manually using translate/scale\n    }\n\n    model.width = targetWidth;\n    model.height = targetHeight;\n\n    // Source texture data from the PBO.\n    model.context.pixelStorei(model.context.UNPACK_FLIP_Y_WEBGL, flipY);\n    model.context.pixelStorei(model.context.UNPACK_ALIGNMENT, 1);\n    if (useTexStorage(VtkDataTypes.UNSIGNED_CHAR)) {\n      model.context.texStorage2D(model.target, 1, model.internalFormat, model.width, model.height);\n      model.context.texSubImage2D(model.target, 0, 0, 0, model.width, model.height, model.format, model.openGLDataType, textureSource);\n    } else {\n      model.context.texImage2D(model.target, 0, model.internalFormat, model.width, model.height, 0, model.format, model.openGLDataType, textureSource);\n    }\n    if (model.generateMipmap) {\n      model.context.generateMipmap(model.target);\n    }\n    model.allocatedGPUMemoryInBytes = model.width * model.height * model.depth * model.components * model._openGLRenderWindow.getDefaultTextureByteSize(VtkDataTypes.UNSIGNED_CHAR, getNorm16Ext(), publicAPI.useHalfFloat());\n    publicAPI.deactivate();\n    return true;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.create2DFromImageBitmap = imageBitmap => {\n    // Determine the texture parameters.\n    publicAPI.getOpenGLDataType(VtkDataTypes.UNSIGNED_CHAR);\n    publicAPI.getInternalFormat(VtkDataTypes.UNSIGNED_CHAR, 4);\n    publicAPI.getFormat(VtkDataTypes.UNSIGNED_CHAR, 4);\n    if (!model.internalFormat || !model.format || !model.openGLDataType) {\n      vtkErrorMacro('Failed to determine texture parameters.');\n      return false;\n    }\n    model.target = model.context.TEXTURE_2D;\n    model.components = 4;\n    model.depth = 1;\n    model.numberOfDimensions = 2;\n    model._openGLRenderWindow.activateTexture(publicAPI);\n    publicAPI.createTexture();\n    publicAPI.bind();\n\n    // Prepare texture unpack alignment\n    model.context.pixelStorei(model.context.UNPACK_ALIGNMENT, 1);\n    model.width = imageBitmap.width;\n    model.height = imageBitmap.height;\n    if (useTexStorage(VtkDataTypes.UNSIGNED_CHAR)) {\n      model.context.texStorage2D(model.target, 1, model.internalFormat, model.width, model.height);\n      model.context.texSubImage2D(model.target, 0, 0, 0, model.width, model.height, model.format, model.openGLDataType, imageBitmap);\n    } else {\n      model.context.texImage2D(model.target, 0, model.internalFormat, model.width, model.height, 0, model.format, model.openGLDataType, imageBitmap);\n    }\n    if (model.generateMipmap) {\n      model.context.generateMipmap(model.target);\n    }\n    model.allocatedGPUMemoryInBytes = model.width * model.height * model.depth * model.components * model._openGLRenderWindow.getDefaultTextureByteSize(VtkDataTypes.UNSIGNED_CHAR, getNorm16Ext(), publicAPI.useHalfFloat());\n    publicAPI.deactivate();\n    return true;\n  };\n\n  // Compute scale and offset per component from min and max per component\n  function computeScaleOffsets(min, max, numComps) {\n    const offset = new Array(numComps);\n    const scale = new Array(numComps);\n    for (let c = 0; c < numComps; ++c) {\n      offset[c] = min[c];\n      scale[c] = max[c] - min[c] || 1.0;\n    }\n    return {\n      scale,\n      offset\n    };\n  }\n\n  // HalfFloat only represents numbers between [-2048, 2048] exactly accurate,\n  // for numbers outside of this range there is a precision limitation\n  function hasExactHalfFloat(offset, scale) {\n    // Per Component\n    for (let c = 0; c < offset.length; c++) {\n      const min = offset[c];\n      const max = scale[c] + min;\n      if (min < -2048 || min > 2048 || max < -2048 || max > 2048) {\n        return false;\n      }\n    }\n    return true;\n  }\n  function setCanUseHalfFloat(dataType, offset, scale, preferSizeOverAccuracy) {\n    publicAPI.getOpenGLDataType(dataType);\n\n    // Don't consider halfFloat and convert back to Float when the range of data does not generate an accurate halfFloat\n    // AND it is not preferable to have a smaller texture than an exact texture.\n    const isExactHalfFloat = hasExactHalfFloat(offset, scale) || preferSizeOverAccuracy;\n    let useHalfFloat = false;\n    if (model._openGLRenderWindow.getWebgl2()) {\n      // If OES_texture_float_linear is not available, and using a half float would still be exact, force half floats\n      // This is because half floats are always texture filterable in webgl2, while full *32F floats are not (unless the extension is present)\n      const forceHalfFloat = model.openGLDataType === model.context.FLOAT && model.context.getExtension('OES_texture_float_linear') === null && isExactHalfFloat;\n      useHalfFloat = forceHalfFloat || model.openGLDataType === model.context.HALF_FLOAT;\n    } else {\n      const halfFloatExt = model.context.getExtension('OES_texture_half_float');\n      useHalfFloat = halfFloatExt && model.openGLDataType === halfFloatExt.HALF_FLOAT_OES;\n    }\n    model.canUseHalfFloat = useHalfFloat && isExactHalfFloat;\n  }\n  function processDataArray(dataArray, preferSizeOverAccuracy) {\n    const numComps = dataArray.getNumberOfComponents();\n    const dataType = dataArray.getDataType();\n    const data = dataArray.getData();\n\n    // Compute min max from array\n    // Using the vtkDataArray.getRange() enables caching\n    const minArray = new Array(numComps);\n    const maxArray = new Array(numComps);\n    for (let c = 0; c < numComps; ++c) {\n      const [min, max] = dataArray.getRange(c);\n      minArray[c] = min;\n      maxArray[c] = max;\n    }\n    const scaleOffsets = computeScaleOffsets(minArray, maxArray, numComps);\n\n    // preferSizeOverAccuracy will override norm16 due to bug with norm16 implementation\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=1408247\n    setCanUseHalfFloat(dataType, scaleOffsets.offset, scaleOffsets.scale, preferSizeOverAccuracy);\n\n    // since our default is to use half float, in case that we can't use it\n    // we need to use another type\n    if (!publicAPI.useHalfFloat()) {\n      publicAPI.getOpenGLDataType(dataType, true);\n    }\n    return {\n      numComps,\n      dataType,\n      data,\n      scaleOffsets\n    };\n  }\n  publicAPI.create2DFilterableFromRaw = function () {\n    let {\n      width = requiredParam('width'),\n      height = requiredParam('height'),\n      numComps = requiredParam('numComps'),\n      dataType = requiredParam('dataType'),\n      data = requiredParam('data'),\n      preferSizeOverAccuracy = false,\n      ranges = undefined\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return publicAPI.create2DFilterableFromDataArray({\n      width,\n      height,\n      dataArray: vtkDataArray.newInstance({\n        numberOfComponents: numComps,\n        dataType,\n        values: data,\n        ranges\n      }),\n      preferSizeOverAccuracy\n    });\n  };\n  publicAPI.create2DFilterableFromDataArray = function () {\n    let {\n      width = requiredParam('width'),\n      height = requiredParam('height'),\n      dataArray = requiredParam('dataArray'),\n      preferSizeOverAccuracy = false\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      numComps,\n      dataType,\n      data\n    } = processDataArray(dataArray, preferSizeOverAccuracy);\n    publicAPI.create2DFromRaw({\n      width,\n      height,\n      numComps,\n      dataType,\n      data\n    });\n  };\n  publicAPI.updateVolumeInfoForGL = (dataType, numComps) => {\n    let isScalingApplied = false;\n    const useHalfFloat = publicAPI.useHalfFloat();\n\n    // Initialize volume info if it doesn't exist\n    if (!model.volumeInfo?.scale || !model.volumeInfo?.offset) {\n      model.volumeInfo = {\n        scale: new Array(numComps),\n        offset: new Array(numComps)\n      };\n    }\n\n    // Default scaling and offset\n    for (let c = 0; c < numComps; ++c) {\n      model.volumeInfo.scale[c] = 1.0;\n      model.volumeInfo.offset[c] = 0.0;\n    }\n\n    // Handle SHORT data type with EXT_texture_norm16 extension\n    if (getNorm16Ext() && !useHalfFloat && dataType === VtkDataTypes.SHORT) {\n      for (let c = 0; c < numComps; ++c) {\n        model.volumeInfo.scale[c] = 32767.0; // Scale to [-1, 1] range\n      }\n\n      isScalingApplied = true;\n    }\n\n    // Handle UNSIGNED_SHORT data type with EXT_texture_norm16 extension\n    if (getNorm16Ext() && !useHalfFloat && dataType === VtkDataTypes.UNSIGNED_SHORT) {\n      for (let c = 0; c < numComps; ++c) {\n        model.volumeInfo.scale[c] = 65535.0; // Scale to [0, 1] range\n      }\n\n      isScalingApplied = true;\n    }\n\n    // Handle UNSIGNED_CHAR data type\n    if (dataType === VtkDataTypes.UNSIGNED_CHAR) {\n      for (let c = 0; c < numComps; ++c) {\n        model.volumeInfo.scale[c] = 255.0; // Scale to [0, 1] range\n      }\n\n      isScalingApplied = true;\n    }\n\n    // No scaling needed for FLOAT or HalfFloat (SHORT/UNSIGNED_SHORT)\n    if (dataType === VtkDataTypes.FLOAT || useHalfFloat && (dataType === VtkDataTypes.SHORT || dataType === VtkDataTypes.UNSIGNED_SHORT)) {\n      isScalingApplied = true;\n    }\n    return isScalingApplied;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.create3DFromRaw = function () {\n    let {\n      width = requiredParam('width'),\n      height = requiredParam('height'),\n      depth = requiredParam('depth'),\n      numComps = requiredParam('numComps'),\n      dataType = requiredParam('dataType'),\n      data = requiredParam('data'),\n      updatedExtents = []\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let dataTypeToUse = dataType;\n    let dataToUse = data;\n    if (!publicAPI.updateVolumeInfoForGL(dataTypeToUse, numComps) && dataToUse) {\n      const numPixelsIn = width * height * depth;\n      const scaleOffsetsCopy = structuredClone(model.volumeInfo);\n      // otherwise convert to float\n      const newArray = new Float32Array(numPixelsIn * numComps);\n      // use computed scale and offset\n      model.volumeInfo.offset = scaleOffsetsCopy.offset;\n      model.volumeInfo.scale = scaleOffsetsCopy.scale;\n      let count = 0;\n      const scaleInverse = scaleOffsetsCopy.scale.map(s => 1 / s);\n      for (let i = 0; i < numPixelsIn; i++) {\n        for (let nc = 0; nc < numComps; nc++) {\n          newArray[count] = (dataToUse[count] - scaleOffsetsCopy.offset[nc]) * scaleInverse[nc];\n          count++;\n        }\n      }\n      dataTypeToUse = VtkDataTypes.FLOAT;\n      dataToUse = newArray;\n    }\n\n    // Permit OpenGLDataType to be half float, if applicable, for 3D\n    publicAPI.getOpenGLDataType(dataTypeToUse);\n\n    // Now determine the texture parameters using the arguments.\n    publicAPI.getInternalFormat(dataTypeToUse, numComps);\n    publicAPI.getFormat(dataTypeToUse, numComps);\n    if (!model.internalFormat || !model.format || !model.openGLDataType) {\n      vtkErrorMacro('Failed to determine texture parameters.');\n      return false;\n    }\n    model.target = model.context.TEXTURE_3D;\n    model.components = numComps;\n    model.width = width;\n    model.height = height;\n    model.depth = depth;\n    model.numberOfDimensions = 3;\n    model._openGLRenderWindow.activateTexture(publicAPI);\n    publicAPI.createTexture();\n    publicAPI.bind();\n    const hasUpdatedExtents = updatedExtents.length > 0;\n\n    // It's possible for the texture parameters to change while\n    // streaming, so check for such a change.\n    const rebuildEntireTexture = !hasUpdatedExtents || !DeepEqual(model._prevTexParams, getTexParams());\n\n    // Create an array of texture with one texture\n    const dataArray = [dataToUse];\n    const is3DArray = true;\n    const pixData = publicAPI.updateArrayDataTypeForGL(dataTypeToUse, dataArray, is3DArray, rebuildEntireTexture ? [] : updatedExtents);\n    const scaledData = scaleTextureToHighestPowerOfTwo(pixData);\n\n    // Source texture data from the PBO.\n    // model.context.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    model.context.pixelStorei(model.context.UNPACK_ALIGNMENT, 1);\n    if (rebuildEntireTexture) {\n      if (useTexStorage(dataTypeToUse)) {\n        model.context.texStorage3D(model.target, 1, model.internalFormat, model.width, model.height, model.depth);\n        if (scaledData[0] != null) {\n          model.context.texSubImage3D(model.target, 0, 0, 0, 0, model.width, model.height, model.depth, model.format, model.openGLDataType, scaledData[0]);\n        }\n      } else {\n        model.context.texImage3D(model.target, 0, model.internalFormat, model.width, model.height, model.depth, 0, model.format, model.openGLDataType, scaledData[0]);\n      }\n      model._prevTexParams = getTexParams();\n    } else if (hasUpdatedExtents) {\n      const extentPixels = scaledData[0];\n      let readOffset = 0;\n      for (let i = 0; i < updatedExtents.length; i++) {\n        const extent = updatedExtents[i];\n        const extentSize = getExtentSize(extent);\n        const extentPixelCount = getExtentPixelCount(extent);\n        const textureData = new extentPixels.constructor(extentPixels.buffer, readOffset, extentPixelCount);\n        readOffset += textureData.byteLength;\n        model.context.texSubImage3D(model.target, 0, extent[0], extent[2], extent[4], extentSize[0], extentSize[1], extentSize[2], model.format, model.openGLDataType, textureData);\n      }\n    }\n    if (model.generateMipmap) {\n      model.context.generateMipmap(model.target);\n    }\n    model.allocatedGPUMemoryInBytes = model.width * model.height * model.depth * model.components * model._openGLRenderWindow.getDefaultTextureByteSize(dataTypeToUse, getNorm16Ext(), publicAPI.useHalfFloat());\n    publicAPI.deactivate();\n    return true;\n  };\n\n  //----------------------------------------------------------------------------\n  // This method simulates a 3D texture using 2D\n  // Prefer create3DFilterableFromDataArray to enable caching of min and max values\n  publicAPI.create3DFilterableFromRaw = function () {\n    let {\n      width = requiredParam('width'),\n      height = requiredParam('height'),\n      depth = requiredParam('depth'),\n      numComps = requiredParam('numComps'),\n      dataType = requiredParam('dataType'),\n      data = requiredParam('data'),\n      preferSizeOverAccuracy = false,\n      ranges = undefined,\n      updatedExtents = []\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return publicAPI.create3DFilterableFromDataArray({\n      width,\n      height,\n      depth,\n      dataArray: vtkDataArray.newInstance({\n        numberOfComponents: numComps,\n        dataType,\n        values: data,\n        ranges\n      }),\n      preferSizeOverAccuracy,\n      updatedExtents\n    });\n  };\n\n  //----------------------------------------------------------------------------\n  // This method create a 3D texture from dimensions and a DataArray\n  publicAPI.create3DFilterableFromDataArray = function () {\n    let {\n      width = requiredParam('width'),\n      height = requiredParam('height'),\n      depth = requiredParam('depth'),\n      dataArray = requiredParam('dataArray'),\n      preferSizeOverAccuracy = false,\n      updatedExtents = []\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      numComps,\n      dataType,\n      data,\n      scaleOffsets\n    } = processDataArray(dataArray, preferSizeOverAccuracy);\n    const offset = [];\n    const scale = [];\n    for (let c = 0; c < numComps; ++c) {\n      offset[c] = 0.0;\n      scale[c] = 1.0;\n    }\n\n    // store the information, we will need it later\n    // offset and scale are the offset and scale required to get\n    // the texture value back to data values ala\n    // data = texture * scale + offset\n    // and texture = (data - offset)/scale\n    model.volumeInfo = {\n      scale,\n      offset,\n      dataComputedScale: scaleOffsets.scale,\n      dataComputedOffset: scaleOffsets.offset,\n      width,\n      height,\n      depth\n    };\n\n    // Create a copy of scale and offset to avoid aliasing issues\n    // Original is read only, copy is read/write\n    // Use the copy as volumeInfo.scale and volumeInfo.offset\n\n    // WebGL2 path, we have 3d textures etc\n    if (model._openGLRenderWindow.getWebgl2()) {\n      return publicAPI.create3DFromRaw({\n        width,\n        height,\n        depth,\n        numComps,\n        dataType,\n        data,\n        updatedExtents\n      });\n    }\n    const numPixelsIn = width * height * depth;\n    const scaleOffsetsCopy = structuredClone(scaleOffsets);\n\n    // not webgl2, deal with webgl1, no 3d textures\n    // and maybe no float textures\n\n    let volCopyData = (outArray, outIdx, inValue, smin, smax) => {\n      outArray[outIdx] = inValue;\n    };\n    let dataTypeToUse = VtkDataTypes.UNSIGNED_CHAR;\n    // unsigned char gets used as is\n    if (dataType === VtkDataTypes.UNSIGNED_CHAR) {\n      for (let c = 0; c < numComps; ++c) {\n        scaleOffsetsCopy.offset[c] = 0.0;\n        scaleOffsetsCopy.scale[c] = 255.0;\n      }\n    } else if (model.context.getExtension('OES_texture_float') && model.context.getExtension('OES_texture_float_linear')) {\n      // use float textures scaled to 0.0 to 1.0\n      dataTypeToUse = VtkDataTypes.FLOAT;\n      volCopyData = (outArray, outIdx, inValue, soffset, sscale) => {\n        outArray[outIdx] = (inValue - soffset) / sscale;\n      };\n    } else {\n      // worst case, scale data to uchar\n      dataTypeToUse = VtkDataTypes.UNSIGNED_CHAR;\n      volCopyData = (outArray, outIdx, inValue, soffset, sscale) => {\n        outArray[outIdx] = 255.0 * (inValue - soffset) / sscale;\n      };\n    }\n\n    // Now determine the texture parameters using the arguments.\n    publicAPI.getOpenGLDataType(dataTypeToUse);\n    publicAPI.getInternalFormat(dataTypeToUse, numComps);\n    publicAPI.getFormat(dataTypeToUse, numComps);\n    if (!model.internalFormat || !model.format || !model.openGLDataType) {\n      vtkErrorMacro('Failed to determine texture parameters.');\n      return false;\n    }\n\n    // have to pack this 3D texture into pot 2D texture\n    model.target = model.context.TEXTURE_2D;\n    model.components = numComps;\n    model.depth = 1;\n    model.numberOfDimensions = 2;\n\n    // MAX_TEXTURE_SIZE gives the max dimensions that can be supported by the GPU,\n    // but it doesn't mean it will fit in memory. If we have to use a float data type\n    // or 4 components, there are good chances that the texture size will blow up\n    // and could not fit in the GPU memory. Use a smaller texture size in that case,\n    // which will force a downsampling of the dataset.\n    // That problem does not occur when using webGL2 since we can pack the data in\n    // denser textures based on our data type.\n    // TODO: try to fit in the biggest supported texture, catch the gl error if it\n    // does not fix (OUT_OF_MEMORY), then attempt with smaller texture\n    let maxTexDim = model.context.getParameter(model.context.MAX_TEXTURE_SIZE);\n    if (maxTexDim > 4096 && (dataTypeToUse === VtkDataTypes.FLOAT || numComps >= 3)) {\n      maxTexDim = 4096;\n    }\n\n    // compute estimate for XY subsample\n    let xstride = 1;\n    let ystride = 1;\n    if (numPixelsIn > maxTexDim * maxTexDim) {\n      xstride = Math.ceil(Math.sqrt(numPixelsIn / (maxTexDim * maxTexDim)));\n      ystride = xstride;\n    }\n    let targetWidth = Math.sqrt(numPixelsIn) / xstride;\n    targetWidth = nearestPowerOfTwo(targetWidth);\n    // determine X reps\n    const xreps = Math.floor(targetWidth * xstride / width);\n    const yreps = Math.ceil(depth / xreps);\n    const targetHeight = nearestPowerOfTwo(height * yreps / ystride);\n    model.width = targetWidth;\n    model.height = targetHeight;\n    model._openGLRenderWindow.activateTexture(publicAPI);\n    publicAPI.createTexture();\n    publicAPI.bind();\n\n    // store the information, we will need it later\n    model.volumeInfo.xreps = xreps;\n    model.volumeInfo.yreps = yreps;\n    model.volumeInfo.xstride = xstride;\n    model.volumeInfo.ystride = ystride;\n    model.volumeInfo.offset = scaleOffsetsCopy.offset;\n    model.volumeInfo.scale = scaleOffsetsCopy.scale;\n\n    // OK stuff the data into the 2d TEXTURE\n\n    // first allocate the new texture\n    let newArray;\n    const pixCount = targetWidth * targetHeight * numComps;\n    if (dataTypeToUse === VtkDataTypes.FLOAT) {\n      newArray = new Float32Array(pixCount);\n    } else {\n      newArray = new Uint8Array(pixCount);\n    }\n\n    // then stuff the data into it, nothing fancy right now\n    // for stride\n    let outIdx = 0;\n    const tileWidth = Math.floor(width / xstride);\n    const tileHeight = Math.floor(height / ystride);\n    for (let yRep = 0; yRep < yreps; yRep++) {\n      const xrepsThisRow = Math.min(xreps, depth - yRep * xreps);\n      const outXContIncr = numComps * (model.width - xrepsThisRow * Math.floor(width / xstride));\n      for (let tileY = 0; tileY < tileHeight; tileY++) {\n        for (let xRep = 0; xRep < xrepsThisRow; xRep++) {\n          const inOffset = numComps * ((yRep * xreps + xRep) * width * height + ystride * tileY * width);\n          for (let tileX = 0; tileX < tileWidth; tileX++) {\n            // copy value\n            for (let nc = 0; nc < numComps; nc++) {\n              volCopyData(newArray, outIdx, data[inOffset + xstride * tileX * numComps + nc], scaleOffsetsCopy.offset[nc], scaleOffsetsCopy.scale[nc]);\n              outIdx++;\n            }\n          }\n        }\n        outIdx += outXContIncr;\n      }\n    }\n\n    // Source texture data from the PBO.\n    // model.context.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    model.context.pixelStorei(model.context.UNPACK_ALIGNMENT, 1);\n    if (useTexStorage(dataTypeToUse)) {\n      model.context.texStorage2D(model.target, 1, model.internalFormat, model.width, model.height);\n      if (newArray != null) {\n        model.context.texSubImage2D(model.target, 0, 0, 0, model.width, model.height, model.format, model.openGLDataType, newArray);\n      }\n    } else {\n      model.context.texImage2D(model.target, 0, model.internalFormat, model.width, model.height, 0, model.format, model.openGLDataType, newArray);\n    }\n    publicAPI.deactivate();\n    return true;\n  };\n  publicAPI.setOpenGLRenderWindow = rw => {\n    if (model._openGLRenderWindow === rw) {\n      return;\n    }\n    publicAPI.releaseGraphicsResources();\n    model._openGLRenderWindow = rw;\n    model.context = null;\n    if (rw) {\n      model.context = model._openGLRenderWindow.getContext();\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getMaximumTextureSize = ctx => {\n    if (ctx && ctx.isCurrent()) {\n      return ctx.getIntegerv(ctx.MAX_TEXTURE_SIZE);\n    }\n    return -1;\n  };\n\n  // set use half float\n  publicAPI.enableUseHalfFloat = use => {\n    model.enableUseHalfFloat = use;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  _openGLRenderWindow: null,\n  _forceInternalFormat: false,\n  _prevTexParams: null,\n  context: null,\n  handle: 0,\n  sendParametersTime: null,\n  textureBuildTime: null,\n  numberOfDimensions: 0,\n  target: 0,\n  format: 0,\n  openGLDataType: 0,\n  components: 0,\n  width: 0,\n  height: 0,\n  depth: 0,\n  autoParameters: true,\n  wrapS: Wrap.CLAMP_TO_EDGE,\n  wrapT: Wrap.CLAMP_TO_EDGE,\n  wrapR: Wrap.CLAMP_TO_EDGE,\n  minificationFilter: Filter.NEAREST,\n  magnificationFilter: Filter.NEAREST,\n  minLOD: -1000.0,\n  maxLOD: 1000.0,\n  baseLevel: 0,\n  maxLevel: 1000,\n  generateMipmap: false,\n  oglNorm16Ext: null,\n  allocatedGPUMemoryInBytes: 0,\n  // by default it is enabled\n  enableUseHalfFloat: true,\n  // but by default we don't know if we can use half float base on the data range\n  canUseHalfFloat: false\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.sendParametersTime = {};\n  obj(model.sendParametersTime, {\n    mtime: 0\n  });\n  model.textureBuildTime = {};\n  obj(model.textureBuildTime, {\n    mtime: 0\n  });\n\n  // Build VTK API\n  set(publicAPI, model, ['format', 'openGLDataType']);\n  setGet(publicAPI, model, ['keyMatrixTime', 'minificationFilter', 'magnificationFilter', 'wrapS', 'wrapT', 'wrapR', 'generateMipmap', 'oglNorm16Ext']);\n  get(publicAPI, model, ['width', 'height', 'volumeInfo', 'components', 'handle', 'target', 'allocatedGPUMemoryInBytes']);\n  moveToProtected(publicAPI, model, ['openGLRenderWindow']);\n\n  // Object methods\n  vtkOpenGLTexture(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkOpenGLTexture');\n\n// ----------------------------------------------------------------------------\n\nvar vtkOpenGLTexture$1 = {\n  newInstance,\n  extend,\n  ...Constants\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkTexture', newInstance);\n\nexport { vtkOpenGLTexture$1 as default, extend, newInstance };\n", "const Wrap = {\n  CLAMP_TO_EDGE: 0,\n  REPEAT: 1,\n  MIRRORED_REPEAT: 2\n};\nconst Filter = {\n  NEAREST: 0,\n  LINEAR: 1,\n  NEAREST_MIPMAP_NEAREST: 2,\n  NEAREST_MIPMAP_LINEAR: 3,\n  LINEAR_MIPMAP_NEAREST: 4,\n  LINEAR_MIPMAP_LINEAR: 5\n};\nvar Constants = {\n  Wrap,\n  Filter\n};\n\nexport { Filter, Wrap, Constants as default };\n", "/* eslint-disable no-bitwise */\n\nconst floatView = new Float32Array(1);\nconst int32View = new Int32Array(floatView.buffer);\n\n/* eslint-disable no-bitwise */\n/* This method is faster than the OpenEXR implementation (very often\n * used, eg. in Ogre), with the additional benefit of rounding, inspired\n * by James Tursa?s half-precision code. */\nfunction toHalf(val) {\n  floatView[0] = val;\n  const x = int32View[0];\n  let bits = x >> 16 & 0x8000; /* Get the sign */\n  let m = x >> 12 & 0x07ff; /* Keep one extra bit for rounding */\n  const e = x >> 23 & 0xff; /* Using int is faster here */\n\n  /* If zero, or denormal, or exponent underflows too much for a denormal\n   * half, return signed zero. */\n  if (e < 103) {\n    return bits;\n  }\n\n  /* If NaN, return NaN. If Inf or exponent overflow, return Inf. */\n  if (e > 142) {\n    bits |= 0x7c00;\n    /* If exponent was 0xff and one mantissa bit was set, it means NaN,\n     * not Inf, so make sure we set one mantissa bit too. */\n    bits |= (e === 255 ? 0 : 1) && x & 0x007fffff;\n    return bits;\n  }\n\n  /* If exponent underflows but not too much, return a denormal */\n  if (e < 113) {\n    m |= 0x0800;\n    /* Extra rounding may overflow and set mantissa to 0 and exponent\n     * to 1, which is OK. */\n    bits |= (m >> 114 - e) + (m >> 113 - e & 1);\n    return bits;\n  }\n  bits |= e - 112 << 10 | m >> 1;\n  /* Extra rounding. An overflow will set mantissa to 0 and increment\n   * the exponent, which is OK. */\n  bits += m & 1;\n  return bits;\n}\nfunction fromHalf(h) {\n  const s = (h & 0x8000) >> 15;\n  const e = (h & 0x7c00) >> 10;\n  const f = h & 0x03ff;\n  if (e === 0) {\n    return (s ? -1 : 1) * 2 ** -14 * (f / 2 ** 10);\n  }\n  if (e === 0x1f) {\n    return f ? NaN : (s ? -1 : 1) * Infinity;\n  }\n  return (s ? -1 : 1) * 2 ** (e - 15) * (1 + f / 2 ** 10);\n}\nvar HalfFloat = {\n  fromHalf,\n  toHalf\n};\n\nexport { HalfFloat as default };\n", "import { m as macro } from '../../macros2.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\nconst PASS_TYPES = ['Build', 'Render'];\n\n// ----------------------------------------------------------------------------\n// vtkViewNode methods\n// ----------------------------------------------------------------------------\n\nfunction vtkViewNode(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkViewNode');\n\n  /**\n   * Convenient method to move a child to a specific index.\n   * @param {*} child the child to move\n   * @param {*} toIndex the index to move the child to\n   * @returns true if the child was moved, false otherwise\n   */\n  function moveChild(child, toIndex) {\n    for (let i = 0; i < model.children.length; ++i) {\n      // Start browsing from toIndex + 1\n      const childIndex = (toIndex + 1 + i) % model.children.length;\n      if (model.children[childIndex] === child) {\n        model.children[childIndex] = model.children[toIndex];\n        model.children[toIndex] = child;\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // Builds myself.\n  publicAPI.build = prepass => {};\n\n  // Renders myself\n  publicAPI.render = prepass => {};\n  publicAPI.traverse = renderPass => {\n    // we can choose to do special\n    // traversal here based on pass\n    const passTraversal = renderPass.getTraverseOperation();\n    const fn = publicAPI[passTraversal];\n    if (fn) {\n      fn(renderPass);\n      return;\n    }\n\n    // default traversal\n    publicAPI.apply(renderPass, true);\n    for (let index = 0; index < model.children.length; index++) {\n      model.children[index].traverse(renderPass);\n    }\n    publicAPI.apply(renderPass, false);\n  };\n  publicAPI.apply = (renderPass, prepass) => {\n    const customRenderPass = publicAPI[renderPass.getOperation()];\n    if (customRenderPass) {\n      customRenderPass(prepass, renderPass);\n    }\n  };\n  publicAPI.getViewNodeFor = function (dataObject) {\n    let hint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    if (hint && hint.renderable === dataObject) {\n      return hint;\n    }\n    if (model.renderable === dataObject) {\n      return publicAPI;\n    }\n    for (let index = 0; index < model.children.length; ++index) {\n      const child = model.children[index];\n      const vn = child.getViewNodeFor(dataObject);\n      if (vn) {\n        return vn;\n      }\n    }\n    return undefined;\n  };\n  publicAPI.getFirstAncestorOfType = type => {\n    if (!model._parent) {\n      return null;\n    }\n    if (model._parent.isA(type)) {\n      return model._parent;\n    }\n    return model._parent.getFirstAncestorOfType(type);\n  };\n  publicAPI.getLastAncestorOfType = type => {\n    if (!model._parent) {\n      return null;\n    }\n    const lastAncestor = model._parent.getLastAncestorOfType(type);\n    if (lastAncestor) {\n      return lastAncestor;\n    }\n    if (model._parent.isA(type)) {\n      return model._parent;\n    }\n    return null;\n  };\n\n  // add a missing node/child for the passed in renderables. This should\n  // be called only in between prepareNodes and removeUnusedNodes\n  publicAPI.addMissingNode = dobj => {\n    if (!dobj) {\n      return undefined;\n    }\n\n    // if found just mark as visited\n    const result = model._renderableChildMap.get(dobj);\n    if (result !== undefined) {\n      result.setVisited(true);\n      return result;\n    }\n\n    // otherwise create a node\n    const newNode = publicAPI.createViewNode(dobj);\n    if (newNode) {\n      newNode.setParent(publicAPI);\n      newNode.setVisited(true);\n      model._renderableChildMap.set(dobj, newNode);\n      model.children.push(newNode);\n      return newNode;\n    }\n    return undefined;\n  };\n\n  // add missing nodes/children for the passed in renderables. This should\n  // be called only in between prepareNodes and removeUnusedNodes\n  publicAPI.addMissingNodes = function (dataObjs) {\n    let enforceOrder = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (!dataObjs || !dataObjs.length) {\n      return;\n    }\n    let nextIndex;\n    for (let index = 0; index < dataObjs.length; ++index) {\n      const dobj = dataObjs[index];\n      const node = publicAPI.addMissingNode(dobj);\n      if (enforceOrder && node !== undefined) {\n        if (nextIndex === undefined) {\n          // First node can be anywhere\n          nextIndex = model.children.lastIndexOf(node); // node is likely the list child\n        } else if (model.children[nextIndex] !== node) {\n          moveChild(model.children, node);\n        }\n        // Next node must follow current node\n        nextIndex++;\n      }\n    }\n  };\n\n  // ability to add children that have no renderable use in the same manner\n  // as addMissingNodes This case is when a normal viewnode wants to\n  // delegate passes to a helper or child that doeasn't map to a clear\n  // renderable or any renderable\n  publicAPI.addMissingChildren = children => {\n    if (!children || !children.length) {\n      return;\n    }\n    for (let index = 0; index < children.length; ++index) {\n      const child = children[index];\n      const cindex = model.children.indexOf(child);\n      if (cindex === -1) {\n        child.setParent(publicAPI);\n        model.children.push(child);\n        const childRenderable = child.getRenderable();\n        if (childRenderable) {\n          model._renderableChildMap.set(childRenderable, child);\n        }\n      }\n      child.setVisited(true);\n    }\n  };\n  publicAPI.removeNode = child => {\n    const childIdx = model.children.findIndex(x => x === child);\n    if (childIdx < 0) {\n      return false;\n    }\n    const renderable = child.getRenderable();\n    if (renderable) {\n      model._renderableChildMap.delete(renderable);\n    }\n    child.delete();\n    model.children.splice(childIdx, 1);\n    return true;\n  };\n  publicAPI.prepareNodes = () => {\n    for (let index = 0; index < model.children.length; ++index) {\n      model.children[index].setVisited(false);\n    }\n  };\n  publicAPI.setVisited = val => {\n    model.visited = val;\n  };\n  publicAPI.removeUnusedNodes = () => {\n    let visitedCount = 0;\n    for (let index = 0; index < model.children.length; ++index) {\n      const child = model.children[index];\n      const visited = child.getVisited();\n      if (visited) {\n        model.children[visitedCount++] = child;\n        child.setVisited(false);\n      } else {\n        const renderable = child.getRenderable();\n        if (renderable) {\n          model._renderableChildMap.delete(renderable);\n        }\n        child.delete();\n      }\n    }\n    model.children.length = visitedCount;\n  };\n  publicAPI.createViewNode = dataObj => {\n    if (!model.myFactory) {\n      vtkErrorMacro('Cannot create view nodes without my own factory');\n      return null;\n    }\n    const ret = model.myFactory.createNode(dataObj);\n    if (ret) {\n      ret.setRenderable(dataObj);\n    }\n    return ret;\n  };\n  const parentDelete = publicAPI.delete;\n  publicAPI.delete = () => {\n    for (let i = 0; i < model.children.length; i++) {\n      model.children[i].delete();\n    }\n    parentDelete();\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // _parent: null,\n  renderable: null,\n  myFactory: null,\n  children: [],\n  visited: false\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.event(publicAPI, model, 'event');\n  model._renderableChildMap = new Map();\n  macro.get(publicAPI, model, ['visited']);\n  macro.setGet(publicAPI, model, ['_parent', 'renderable', 'myFactory']);\n  macro.getArray(publicAPI, model, ['children']);\n  macro.moveToProtected(publicAPI, model, ['parent']);\n\n  // Object methods\n  vtkViewNode(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkViewNode');\n\n// ----------------------------------------------------------------------------\n\nvar vtkViewNode$1 = {\n  newInstance,\n  extend,\n  PASS_TYPES\n};\n\nexport { vtkViewNode$1 as default };\n", "import { m as macro } from '../../macros2.js';\n\n// ----------------------------------------------------------------------------\n// vtkViewNodeFactory methods\n// ----------------------------------------------------------------------------\n\nfunction vtkViewNodeFactory(publicAPI, model) {\n  // Make sure our overrides is just for our instance not shared with everyone...\n  if (!model.overrides) {\n    model.overrides = {};\n  }\n\n  // Set our className\n  model.classHierarchy.push('vtkViewNodeFactory');\n  publicAPI.createNode = dataObject => {\n    if (dataObject.isDeleted()) {\n      return null;\n    }\n    let cpt = 0;\n    let className = dataObject.getClassName(cpt++);\n    let isObject = false;\n    const keys = Object.keys(model.overrides);\n    while (className && !isObject) {\n      if (keys.indexOf(className) !== -1) {\n        isObject = true;\n      } else {\n        className = dataObject.getClassName(cpt++);\n      }\n    }\n    if (!isObject) {\n      return null;\n    }\n    const vn = model.overrides[className]();\n    vn.setMyFactory(publicAPI);\n    return vn;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // overrides: {},\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n\n  // Object methods\n  vtkViewNodeFactory(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkViewNodeFactory');\n\n// ----------------------------------------------------------------------------\n\nvar vtkViewNodeFactory$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkViewNodeFactory$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkViewNodeFactory$1 from '../SceneGraph/ViewNodeFactory.js';\n\nconst CLASS_MAPPING = Object.create(null);\nfunction registerOverride(className, fn) {\n  CLASS_MAPPING[className] = fn;\n}\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLViewNodeFactory methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLViewNodeFactory(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLViewNodeFactory');\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Static class mapping shared across instances\n  model.overrides = CLASS_MAPPING;\n\n  // Inheritance\n  vtkViewNodeFactory$1.extend(publicAPI, model, initialValues);\n\n  // Object methods\n  vtkOpenGLViewNodeFactory(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkOpenGLViewNodeFactory');\n\n// ----------------------------------------------------------------------------\n\nvar vtkViewNodeFactory = {\n  newInstance,\n  extend\n};\n\nexport { vtkViewNodeFactory as default, extend, newInstance, registerOverride };\n", "/**\n * Even when the EXT_texture_norm16 extension is present, linear filtering\n * might not be supported for normalized fixed point textures.\n *\n * This is a driver bug. See https://github.com/KhronosGroup/WebGL/issues/3706\n * @return {boolean}\n */\nfunction supportsNorm16Linear() {\n  try {\n    const canvasSize = 4;\n    const texWidth = 2;\n    const texHeight = 1;\n    const texData = new Int16Array([0, 2 ** 15 - 1]);\n    const pixelToCheck = [1, 1];\n    const canvas = document.createElement('canvas');\n    canvas.width = canvasSize;\n    canvas.height = canvasSize;\n    const gl = canvas.getContext('webgl2');\n    if (!gl) {\n      return false;\n    }\n    const ext = gl.getExtension('EXT_texture_norm16');\n    if (!ext) {\n      return false;\n    }\n    const vs = `#version 300 es\n    void main() {\n      gl_PointSize = ${canvasSize.toFixed(1)};\n      gl_Position = vec4(0, 0, 0, 1);\n    }\n  `;\n    const fs = `#version 300 es\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n\n    uniform sampler2D u_image;\n\n    out vec4 color;\n\n    void main() {\n        vec4 intColor = texture(u_image, gl_PointCoord.xy);\n        color = vec4(vec3(intColor.rrr), 1);\n    }\n    `;\n    const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, vs);\n    gl.compileShader(vertexShader);\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      return false;\n    }\n    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, fs);\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      return false;\n    }\n    const program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      return false;\n    }\n    const tex = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, tex);\n    gl.texImage2D(gl.TEXTURE_2D, 0, ext.R16_SNORM_EXT, texWidth, texHeight, 0, gl.RED, gl.SHORT, texData);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.useProgram(program);\n    gl.drawArrays(gl.POINTS, 0, 1);\n    const pixel = new Uint8Array(4);\n    gl.readPixels(pixelToCheck[0], pixelToCheck[1], 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n    const [r, g, b] = pixel;\n    const webglLoseContext = gl.getExtension('WEBGL_lose_context');\n    if (webglLoseContext) {\n      webglLoseContext.loseContext();\n    }\n    return r === g && g === b && r !== 0;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * @type {boolean | undefined}\n */\nlet supportsNorm16LinearCache;\nfunction supportsNorm16LinearCached() {\n  // Only create a canvas+texture+shaders the first time\n  if (supportsNorm16LinearCache === undefined) {\n    supportsNorm16LinearCache = supportsNorm16Linear();\n  }\n  return supportsNorm16LinearCache;\n}\n\nexport { supportsNorm16LinearCached as default };\n", "import { m as macro } from '../../macros2.js';\n\n/* eslint-disable no-bitwise */\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUSampler methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUSampler(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUSampler');\n  publicAPI.create = function (device) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    model.device = device;\n    model.options.addressModeU = options.addressModeU ? options.addressModeU : 'clamp-to-edge';\n    model.options.addressModeV = options.addressModeV ? options.addressModeV : 'clamp-to-edge';\n    model.options.addressModeW = options.addressModeW ? options.addressModeW : 'clamp-to-edge';\n    model.options.magFilter = options.magFilter ? options.magFilter : 'nearest';\n    model.options.minFilter = options.minFilter ? options.minFilter : 'nearest';\n    model.options.mipmapFilter = options.mipmapFilter ? options.mipmapFilter : 'nearest';\n    model.options.label = model.label;\n    model.handle = model.device.getHandle().createSampler(model.options);\n    model.bindGroupTime.modified();\n  };\n  publicAPI.getShaderCode = (binding, group) => {\n    const result = `@binding(${binding}) @group(${group}) var ${model.label}: sampler;`;\n    return result;\n  };\n  publicAPI.getBindGroupEntry = () => {\n    const foo = {\n      resource: model.handle\n    };\n    return foo;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  device: null,\n  handle: null,\n  label: null,\n  options: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  model.options = {};\n  model.bindGroupLayoutEntry = {\n    /* eslint-disable no-undef */\n    visibility: GPUShaderStage.VERTEX | GPUShaderStage.FRAGMENT,\n    /* eslint-enable no-undef */\n    sampler: {\n      // type: 'filtering',\n    }\n  };\n  model.bindGroupTime = {};\n  macro.obj(model.bindGroupTime, {\n    mtime: 0\n  });\n  macro.get(publicAPI, model, ['bindGroupTime', 'handle', 'options']);\n  macro.setGet(publicAPI, model, ['bindGroupLayoutEntry', 'device', 'label']);\n  vtkWebGPUSampler(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUSampler$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUSampler$1 as default, extend, newInstance };\n", "import { r as vtkErrorMacro } from '../../macros2.js';\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUDevice static functions\n//\n// WebGPU uses types in a many places and calls, and often those types\n// need to be associated with byte sizes, alignments, native arrays etc.\n// The folowing methods are designed to help vtk.js introspect those types.\n// WebGPU currently tends to use multiple type formats:\n//  - buffer types such as float32x4\n//  - shader types suchs as vec4<f32>\n//  - texture types such as rgba32float\n// ----------------------------------------------------------------------------\n\n// see https://gpuweb.github.io/gpuweb/#texture-formats\n// for possible formats, there are a lot of them\nconst textureDetails = {\n  // 8-bit formats\n  r8unorm: {\n    numComponents: 1,\n    nativeType: Uint8Array,\n    stride: 1,\n    elementSize: 1,\n    sampleType: 'float'\n  },\n  r8snorm: {\n    numComponents: 1,\n    nativeType: Int8Array,\n    stride: 1,\n    elementSize: 1,\n    sampleType: 'float'\n  },\n  r8uint: {\n    numComponents: 1,\n    nativeType: Uint8Array,\n    stride: 1,\n    elementSize: 1,\n    sampleType: 'uint'\n  },\n  r8sint: {\n    numComponents: 1,\n    nativeType: Int8Array,\n    stride: 1,\n    elementSize: 1,\n    sampleType: 'sint'\n  },\n  // 16-bit formats\n  r16uint: {\n    numComponents: 1,\n    nativeType: Uint16Array,\n    stride: 2,\n    elementSize: 2,\n    sampleType: 'uint'\n  },\n  r16sint: {\n    numComponents: 1,\n    nativeType: Int16Array,\n    stride: 2,\n    elementSize: 2,\n    sampleType: 'sint'\n  },\n  r16float: {\n    numComponents: 1,\n    nativeType: Float32Array,\n    stride: 2,\n    elementSize: 2,\n    sampleType: 'float'\n  },\n  rg8unorm: {\n    numComponents: 2,\n    nativeType: Uint8Array,\n    stride: 2,\n    elementSize: 1,\n    sampleType: 'float'\n  },\n  rg8snorm: {\n    numComponents: 2,\n    nativeType: Int8Array,\n    stride: 2,\n    elementSize: 1,\n    sampleType: 'float'\n  },\n  rg8uint: {\n    numComponents: 2,\n    nativeType: Uint8Array,\n    stride: 2,\n    elementSize: 1,\n    sampleType: 'uint'\n  },\n  rg8sint: {\n    numComponents: 2,\n    nativeType: Int8Array,\n    stride: 2,\n    elementSize: 1,\n    sampleType: 'sint'\n  },\n  // 32-bit formats\n  r32uint: {\n    numComponents: 1,\n    nativeType: Uint32Array,\n    stride: 4,\n    elementSize: 4,\n    sampleType: 'uint'\n  },\n  r32sint: {\n    numComponents: 1,\n    nativeType: Int32Array,\n    stride: 4,\n    elementSize: 4,\n    sampleType: 'sint'\n  },\n  r32float: {\n    numComponents: 1,\n    nativeType: Float32Array,\n    stride: 4,\n    elementSize: 4,\n    sampleType: 'unfilterable-float'\n  },\n  rg16uint: {\n    numComponents: 2,\n    nativeType: Uint16Array,\n    stride: 4,\n    elementSize: 2,\n    sampleType: 'uint'\n  },\n  rg16sint: {\n    numComponents: 2,\n    nativeType: Int16Array,\n    stride: 4,\n    elementSize: 2,\n    sampleType: 'sint'\n  },\n  rg16float: {\n    numComponents: 2,\n    nativeType: Float32Array,\n    stride: 4,\n    elementSize: 2,\n    sampleType: 'float'\n  },\n  rgba8unorm: {\n    numComponents: 4,\n    nativeType: Uint8Array,\n    stride: 4,\n    elementSize: 1,\n    sampleType: 'float'\n  },\n  'rgba8unorm-srgb': {\n    numComponents: 4,\n    nativeType: Uint8Array,\n    stride: 4,\n    elementSize: 1,\n    sampleType: 'float'\n  },\n  rgba8snorm: {\n    numComponents: 4,\n    nativeType: Int8Array,\n    stride: 4,\n    elementSize: 1,\n    sampleType: 'float'\n  },\n  rgba8uint: {\n    numComponents: 4,\n    nativeType: Uint8Array,\n    stride: 4,\n    elementSize: 1,\n    sampleType: 'uint'\n  },\n  rgba8sint: {\n    numComponents: 4,\n    nativeType: Int8Array,\n    stride: 4,\n    elementSize: 1,\n    sampleType: 'sint'\n  },\n  bgra8unorm: {\n    numComponents: 4,\n    nativeType: Uint8Array,\n    stride: 4,\n    elementSize: 1,\n    sampleType: 'float'\n  },\n  'bgra8unorm-srgb': {\n    numComponents: 4,\n    nativeType: Uint8Array,\n    stride: 4,\n    elementSize: 1,\n    sampleType: 'float'\n  },\n  // Packed 32-bit formats\n  rgb9e5ufloat: {\n    numComponents: 4,\n    nativeType: Uint32Array,\n    stride: 4,\n    sampleType: 'float'\n  },\n  rgb10a2unorm: {\n    numComponents: 4,\n    nativeType: Uint32Array,\n    stride: 4,\n    sampleType: 'float'\n  },\n  rg11b10ufloat: {\n    numComponents: 4,\n    nativeType: Float32Array,\n    stride: 4,\n    sampleType: 'float'\n  },\n  // 64-bit formats\n  rg32uint: {\n    numComponents: 2,\n    nativeType: Uint32Array,\n    stride: 8,\n    elementSize: 4,\n    sampleType: 'uint'\n  },\n  rg32sint: {\n    numComponents: 2,\n    nativeType: Int32Array,\n    stride: 8,\n    elementSize: 4,\n    sampleType: 'sint'\n  },\n  rg32float: {\n    numComponents: 2,\n    nativeType: Float32Array,\n    stride: 8,\n    elementSize: 4,\n    sampleType: 'unfilterable-float'\n  },\n  rgba16uint: {\n    numComponents: 4,\n    nativeType: Uint16Array,\n    stride: 8,\n    elementSize: 2,\n    sampleType: 'uint'\n  },\n  rgba16sint: {\n    numComponents: 4,\n    nativeType: Int16Array,\n    stride: 8,\n    elementSize: 2,\n    sampleType: 'sint'\n  },\n  rgba16float: {\n    numComponents: 4,\n    nativeType: Float32Array,\n    stride: 8,\n    elementSize: 2,\n    sampleType: 'float'\n  },\n  // 128-bit formats\n  rgba32uint: {\n    numComponents: 4,\n    nativeType: Uint32Array,\n    stride: 16,\n    elementSize: 4,\n    sampleType: 'uint'\n  },\n  rgba32sint: {\n    numComponents: 4,\n    nativeType: Int32Array,\n    stride: 16,\n    elementSize: 4,\n    sampleType: 'sint'\n  },\n  rgba32float: {\n    numComponents: 4,\n    nativeType: Float32Array,\n    stride: 16,\n    elementSize: 4,\n    sampleType: 'unfilterable-float'\n  },\n  // Depth and stencil formats\n  stencil8: {\n    numComponents: 1,\n    nativeType: Uint8Array,\n    stride: 1,\n    elementSize: 1,\n    sampleType: 'uint'\n  },\n  depth16unorm: {\n    numComponents: 1,\n    nativeType: Uint16Array,\n    stride: 2,\n    elementSize: 2,\n    sampleType: 'depth'\n  },\n  depth24plus: {\n    numComponents: 1,\n    nativeType: Uint32Array,\n    stride: 4,\n    elementSize: 3,\n    sampleType: 'depth'\n  },\n  'depth24plus-stencil8': {\n    numComponents: 2,\n    nativeType: Uint32Array,\n    stride: 4,\n    sampleType: 'mixed'\n  },\n  depth32float: {\n    numComponents: 1,\n    nativeType: Float32Array,\n    stride: 4,\n    elementSize: 4,\n    sampleType: 'depth'\n  }\n};\nfunction getDetailsFromTextureFormat(format) {\n  if (!format || format.length < 6) return 0;\n  if (format in textureDetails === true) {\n    return textureDetails[format];\n  }\n  vtkErrorMacro(`unknown format ${format}`);\n  return null;\n}\n\n// see https://gpuweb.github.io/gpuweb/#enumdef-gpuvertexformat\n// for possible formats\nfunction getByteStrideFromBufferFormat(format) {\n  if (!format || format.length < 5) return 0;\n\n  // options are x2, x3, x4 or nothing\n  let numComp = 1;\n  if (format[format.length - 2] === 'x') {\n    numComp = Number(format[format.length - 1]);\n  }\n  const sizeStart = numComp === 1 ? format.length - 1 : format.length - 3;\n  // options are 8, 16, 32 resulting in 8, 6, 2 as the last char\n  // plugged into the formula below gives 1, 2, 4 respectively\n  const num = Number(format[sizeStart]);\n  if (Number.isNaN(num)) {\n    vtkErrorMacro(`unknown format ${format}`);\n    return 0;\n  }\n  const typeSize = 5 - num / 2;\n  return numComp * typeSize;\n}\n\n// see https://gpuweb.github.io/gpuweb/#enumdef-gpuvertexformat\n// for possible formats\nfunction getNumberOfComponentsFromBufferFormat(format) {\n  if (!format || format.length < 5) return 0;\n\n  // options are x2, x3, x4 or nothing\n  let numComp = 1;\n  if (format[format.length - 2] === 'x') {\n    numComp = Number(format[format.length - 1]);\n  }\n  return numComp;\n}\n\n// see https://gpuweb.github.io/gpuweb/#enumdef-gpuvertexformat\n// for possible formats\nfunction getNativeTypeFromBufferFormat(format) {\n  if (!format || format.length < 5) return 0;\n\n  // raw types are Uint Int or Float as follows\n  let result;\n  if (format[0] === 'f') {\n    result = 'Float';\n  } else if (format[0] === 's') {\n    result = 'Int';\n  } else if (format[0] === 'u') {\n    result = 'Uint';\n  } else {\n    vtkErrorMacro(`unknown format ${format}`);\n    return undefined;\n  }\n\n  // options are 8, 16, 32 resulting in 8, 6, 2 as the last char\n  // plugged into the formula below gives 1, 2, 4 respectively\n  const base = format.split('x')[0];\n  const num = Number(base[base.length - 1]);\n  if (Number.isNaN(num)) {\n    vtkErrorMacro(`unknown format ${format}`);\n    return undefined;\n  }\n  result += 8 * (5 - num / 2);\n  result += 'Array';\n  return result;\n}\nfunction getShaderTypeFromBufferFormat(format) {\n  let dataType;\n  if (format[0] === 'f' || format[1] === 'n') {\n    dataType = 'f32';\n  } else if (format[0] === 's' && format[1] === 'i') {\n    dataType = 'i32';\n  } else if (format[0] === 'u' && format[1] === 'i') {\n    dataType = 'u32';\n  } else {\n    vtkErrorMacro(`unknown format ${format}`);\n    return undefined;\n  }\n\n  // options are x2, x3, x4 or nothing\n  let numComp = 1;\n  if (format[format.length - 2] === 'x') {\n    numComp = Number(format[format.length - 1]);\n  }\n  if (numComp === 4) return `vec4<${dataType}>`;\n  if (numComp === 3) return `vec3<${dataType}>`;\n  if (numComp === 2) return `vec2<${dataType}>`;\n  return dataType;\n}\nfunction getByteStrideFromShaderFormat(format) {\n  if (!format) return 0;\n  let numComp = 1;\n  if (format.substring(0, 3) === 'vec') {\n    numComp = Number(format[3]);\n  } else if (format.substring(0, 3) === 'mat') {\n    numComp = format[3] * format[5];\n  }\n  const typeSize = 4;\n  return numComp * typeSize;\n}\nfunction getNativeTypeFromShaderFormat(format) {\n  if (!format) return undefined;\n  if (format.includes('f32')) return 'Float32Array';\n  if (format.includes('i32')) return 'Int32Array';\n  if (format.includes('u32')) return 'Uint32Array';\n  vtkErrorMacro(`unknown format ${format}`);\n  return undefined;\n}\nvar vtkWebGPUTypes = {\n  getDetailsFromTextureFormat,\n  getByteStrideFromBufferFormat,\n  getNumberOfComponentsFromBufferFormat,\n  getNativeTypeFromBufferFormat,\n  getShaderTypeFromBufferFormat,\n  getByteStrideFromShaderFormat,\n  getNativeTypeFromShaderFormat\n};\n\nexport { vtkWebGPUTypes as default };\n", "import { m as macro } from '../../macros2.js';\nimport vtkWebGPUSampler from './Sampler.js';\nimport vtkWebGPUTypes from './Types.js';\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUTextureView methods\n// ----------------------------------------------------------------------------\n\n/* eslint-disable no-bitwise */\n\nfunction vtkWebGPUTextureView(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUTextureView');\n  publicAPI.create = (texture, options) => {\n    model.texture = texture;\n    model.options = options;\n    model.options.dimension = model.options.dimension || '2d';\n    model.options.label = model.label;\n    model.textureHandle = texture.getHandle();\n    model.handle = model.textureHandle.createView(model.options);\n    model.bindGroupLayoutEntry.texture.viewDimension = model.options.dimension;\n    const tDetails = vtkWebGPUTypes.getDetailsFromTextureFormat(model.texture.getFormat());\n    model.bindGroupLayoutEntry.texture.sampleType = tDetails.sampleType;\n  };\n  publicAPI.createFromTextureHandle = (textureHandle, options) => {\n    model.texture = null;\n    model.options = options;\n    model.options.dimension = model.options.dimension || '2d';\n    model.options.label = model.label;\n    model.textureHandle = textureHandle;\n    model.handle = model.textureHandle.createView(model.options);\n    model.bindGroupLayoutEntry.texture.viewDimension = model.options.dimension;\n    const tDetails = vtkWebGPUTypes.getDetailsFromTextureFormat(options.format);\n    model.bindGroupLayoutEntry.texture.sampleType = tDetails.sampleType;\n    model.bindGroupTime.modified();\n  };\n  publicAPI.getBindGroupEntry = () => {\n    const foo = {\n      resource: publicAPI.getHandle()\n    };\n    return foo;\n  };\n  publicAPI.getShaderCode = (binding, group) => {\n    let ttype = 'f32';\n    if (model.bindGroupLayoutEntry.texture.sampleType === 'sint') {\n      ttype = 'i32';\n    } else if (model.bindGroupLayoutEntry.texture.sampleType === 'uint') {\n      ttype = 'u32';\n    }\n    let result = `@binding(${binding}) @group(${group}) var ${model.label}: texture_${model.options.dimension}<${ttype}>;`;\n    if (model.bindGroupLayoutEntry.texture.sampleType === 'depth') {\n      result = `@binding(${binding}) @group(${group}) var ${model.label}: texture_depth_${model.options.dimension};`;\n    }\n    return result;\n  };\n  publicAPI.addSampler = (device, options) => {\n    const newSamp = vtkWebGPUSampler.newInstance({\n      label: `${model.label}Sampler`\n    });\n    newSamp.create(device, options);\n    publicAPI.setSampler(newSamp);\n  };\n  publicAPI.getBindGroupTime = () => {\n    // check if the handle changed\n    if (model.texture && model.texture.getHandle() !== model.textureHandle) {\n      model.textureHandle = model.texture.getHandle();\n      model.handle = model.textureHandle.createView(model.options);\n      model.bindGroupTime.modified();\n    }\n    return model.bindGroupTime;\n  };\n\n  // if the texture has changed then get a new view\n  publicAPI.getHandle = () => {\n    if (model.texture && model.texture.getHandle() !== model.textureHandle) {\n      model.textureHandle = model.texture.getHandle();\n      model.handle = model.textureHandle.createView(model.options);\n      model.bindGroupTime.modified();\n    }\n    return model.handle;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  texture: null,\n  handle: null,\n  sampler: null,\n  label: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  model.bindGroupLayoutEntry = {\n    /* eslint-disable no-undef */\n    visibility: GPUShaderStage.VERTEX | GPUShaderStage.FRAGMENT,\n    /* eslint-enable no-undef */\n    texture: {\n      sampleType: 'float',\n      viewDimension: '2d'\n      // multisampled: false,\n    }\n  };\n\n  model.bindGroupTime = {};\n  macro.obj(model.bindGroupTime, {\n    mtime: 0\n  });\n  macro.get(publicAPI, model, ['bindGroupTime', 'texture']);\n  macro.setGet(publicAPI, model, ['bindGroupLayoutEntry', 'label', 'sampler']);\n  vtkWebGPUTextureView(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUTextureView$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUTextureView$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\n\n/* eslint-disable no-bitwise */\n\n// ----------------------------------------------------------------------------\n// vtkTexture methods\n// ----------------------------------------------------------------------------\n\nfunction vtkTexture(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkTexture');\n  publicAPI.imageLoaded = () => {\n    model.image.removeEventListener('load', publicAPI.imageLoaded);\n    model.imageLoaded = true;\n    publicAPI.modified();\n  };\n  publicAPI.setJsImageData = imageData => {\n    if (model.jsImageData === imageData) {\n      return;\n    }\n\n    // clear other entries\n    if (imageData !== null) {\n      publicAPI.setInputData(null);\n      publicAPI.setInputConnection(null);\n      model.image = null;\n      model.canvas = null;\n      model.imageBitmap = null;\n    }\n    model.jsImageData = imageData;\n    model.imageLoaded = true;\n    publicAPI.modified();\n  };\n  publicAPI.setImageBitmap = imageBitmap => {\n    if (model.imageBitmap === imageBitmap) {\n      return;\n    }\n\n    // clear other entries\n    if (imageBitmap !== null) {\n      publicAPI.setInputData(null);\n      publicAPI.setInputConnection(null);\n      model.image = null;\n      model.canvas = null;\n      model.jsImageData = null;\n    }\n    model.imageBitmap = imageBitmap;\n    model.imageLoaded = true;\n    publicAPI.modified();\n  };\n  publicAPI.setCanvas = canvas => {\n    if (model.canvas === canvas) {\n      return;\n    }\n\n    // clear other entries\n    if (canvas !== null) {\n      publicAPI.setInputData(null);\n      publicAPI.setInputConnection(null);\n      model.image = null;\n      model.imageBitmap = null;\n      model.jsImageData = null;\n    }\n    model.canvas = canvas;\n    publicAPI.modified();\n  };\n  publicAPI.setImage = image => {\n    if (model.image === image) {\n      return;\n    }\n\n    // clear other entries\n    if (image !== null) {\n      publicAPI.setInputData(null);\n      publicAPI.setInputConnection(null);\n      model.canvas = null;\n      model.jsImageData = null;\n      model.imageBitmap = null;\n    }\n    model.image = image;\n    model.imageLoaded = false;\n    if (image.complete) {\n      publicAPI.imageLoaded();\n    } else {\n      image.addEventListener('load', publicAPI.imageLoaded);\n    }\n    publicAPI.modified();\n  };\n  publicAPI.getDimensionality = () => {\n    let width = 0;\n    let height = 0;\n    let depth = 1;\n    if (publicAPI.getInputData()) {\n      const data = publicAPI.getInputData();\n      width = data.getDimensions()[0];\n      height = data.getDimensions()[1];\n      depth = data.getDimensions()[2];\n    }\n    if (model.jsImageData) {\n      width = model.jsImageData.width;\n      height = model.jsImageData.height;\n    }\n    if (model.canvas) {\n      width = model.canvas.width;\n      height = model.canvas.height;\n    }\n    if (model.image) {\n      width = model.image.width;\n      height = model.image.height;\n    }\n    if (model.imageBitmap) {\n      width = model.imageBitmap.width;\n      height = model.imageBitmap.height;\n    }\n    const dimensionality = (width > 1) + (height > 1) + (depth > 1);\n    return dimensionality;\n  };\n  publicAPI.getInputAsJsImageData = () => {\n    if (!model.imageLoaded || publicAPI.getInputData()) return null;\n    if (model.jsImageData) {\n      return model.jsImageData;\n    }\n    if (model.imageBitmap) {\n      return model.imageBitmap;\n    }\n    if (model.canvas) {\n      const context = model.canvas.getContext('2d');\n      const imageData = context.getImageData(0, 0, model.canvas.width, model.canvas.height);\n      return imageData;\n    }\n    if (model.image) {\n      const width = model.image.width;\n      const height = model.image.height;\n      const canvas = new OffscreenCanvas(width, height);\n      const context = canvas.getContext('2d');\n      context.translate(0, height);\n      context.scale(1, -1);\n      context.drawImage(model.image, 0, 0, width, height);\n      const imageData = context.getImageData(0, 0, width, height);\n      return imageData;\n    }\n    return null;\n  };\n}\n\n/**\n * Generates mipmaps for a given GPU texture using a compute shader.\n *\n * This function iteratively generates each mip level for the provided texture,\n * using a bilinear downsampling compute shader implemented in WGSL. It creates\n * the necessary pipeline, bind groups, and dispatches compute passes for each\n * mip level.\n *\n * @param {GPUDevice} device - The WebGPU device used to create resources and submit commands.\n * @param {GPUTexture} texture - The GPU texture for which mipmaps will be generated. Must be created with mip levels.\n * @param {number} mipLevelCount - The total number of mip levels to generate (including the base level).\n */\nconst generateMipmaps = (device, texture, mipLevelCount) => {\n  const computeShaderCode = `\n    @group(0) @binding(0) var inputTexture: texture_2d<f32>;\n    @group(0) @binding(1) var outputTexture: texture_storage_2d<rgba8unorm, write>;\n\n    @compute @workgroup_size(8, 8)\n    fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {\n      let texelCoord = vec2<i32>(global_id.xy);\n      let outputSize = textureDimensions(outputTexture);\n\n      if (texelCoord.x >= i32(outputSize.x) || texelCoord.y >= i32(outputSize.y)) {\n        return;\n      }\n\n      let inputSize = textureDimensions(inputTexture);\n      let scale = vec2<f32>(inputSize) / vec2<f32>(outputSize);\n\n      // Compute the floating-point source coordinate\n      let srcCoord = (vec2<f32>(texelCoord) + 0.5) * scale - 0.5;\n\n      // Get integer coordinates for the four surrounding texels\n      let x0 = i32(floor(srcCoord.x));\n      let x1 = min(x0 + 1, i32(inputSize.x) - 1);\n      let y0 = i32(floor(srcCoord.y));\n      let y1 = min(y0 + 1, i32(inputSize.y) - 1);\n\n      // Compute the weights\n      let wx = srcCoord.x - f32(x0);\n      let wy = srcCoord.y - f32(y0);\n\n      // Fetch the four texels\n      let c00 = textureLoad(inputTexture, vec2<i32>(x0, y0), 0);\n      let c10 = textureLoad(inputTexture, vec2<i32>(x1, y0), 0);\n      let c01 = textureLoad(inputTexture, vec2<i32>(x0, y1), 0);\n      let c11 = textureLoad(inputTexture, vec2<i32>(x1, y1), 0);\n\n      // Bilinear interpolation\n      let color = mix(\n        mix(c00, c10, wx),\n        mix(c01, c11, wx),\n        wy\n      );\n\n      textureStore(outputTexture, texelCoord, color);\n    }\n  `;\n  const computeShader = device.createShaderModule({\n    code: computeShaderCode\n  });\n  const bindGroupLayout = device.createBindGroupLayout({\n    entries: [{\n      binding: 0,\n      // eslint-disable-next-line no-undef\n      visibility: GPUShaderStage.COMPUTE,\n      texture: {\n        sampleType: 'float'\n      }\n    }, {\n      binding: 1,\n      // eslint-disable-next-line no-undef\n      visibility: GPUShaderStage.COMPUTE,\n      storageTexture: {\n        format: 'rgba8unorm',\n        access: 'write-only'\n      }\n    }, {\n      binding: 2,\n      // eslint-disable-next-line no-undef\n      visibility: GPUShaderStage.COMPUTE,\n      sampler: {\n        type: 'filtering'\n      }\n    }]\n  });\n  const pipelineLayout = device.createPipelineLayout({\n    bindGroupLayouts: [bindGroupLayout]\n  });\n  const pipeline = device.createComputePipeline({\n    label: 'ComputeMipmapPipeline',\n    layout: pipelineLayout,\n    compute: {\n      module: computeShader,\n      entryPoint: 'main'\n    }\n  });\n  const sampler = device.createSampler({\n    magFilter: 'linear',\n    minFilter: 'linear'\n  });\n\n  // Generate each mip level\n  for (let mipLevel = 1; mipLevel < mipLevelCount; mipLevel++) {\n    const srcView = texture.createView({\n      baseMipLevel: mipLevel - 1,\n      mipLevelCount: 1\n    });\n    const dstView = texture.createView({\n      baseMipLevel: mipLevel,\n      mipLevelCount: 1\n    });\n    const bindGroup = device.createBindGroup({\n      layout: pipeline.getBindGroupLayout(0),\n      entries: [{\n        binding: 0,\n        resource: srcView\n      }, {\n        binding: 1,\n        resource: dstView\n      }, {\n        binding: 2,\n        resource: sampler\n      }]\n    });\n    const commandEncoder = device.createCommandEncoder({\n      label: `MipmapGenerateCommandEncoder`\n    });\n    const computePass = commandEncoder.beginComputePass();\n    computePass.setPipeline(pipeline);\n    computePass.setBindGroup(0, bindGroup);\n    const mipWidth = Math.max(1, texture.width >> mipLevel);\n    const mipHeight = Math.max(1, texture.height >> mipLevel);\n    const workgroupsX = Math.ceil(mipWidth / 8);\n    const workgroupsY = Math.ceil(mipHeight / 8);\n    computePass.dispatchWorkgroups(workgroupsX, workgroupsY);\n    computePass.end();\n    device.queue.submit([commandEncoder.finish()]);\n  }\n};\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  image: null,\n  canvas: null,\n  jsImageData: null,\n  imageBitmap: null,\n  imageLoaded: false,\n  repeat: false,\n  interpolate: false,\n  edgeClamp: false,\n  mipLevel: 0,\n  resizable: false // must be set at construction time if the texture can be resizable\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.algo(publicAPI, model, 6, 0);\n  macro.get(publicAPI, model, ['canvas', 'image', 'jsImageData', 'imageBitmap', 'imageLoaded', 'resizable']);\n  macro.setGet(publicAPI, model, ['repeat', 'edgeClamp', 'interpolate', 'mipLevel']);\n  vtkTexture(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkTexture');\nconst STATIC = {\n  generateMipmaps\n};\n\n// ----------------------------------------------------------------------------\n\nvar vtkTexture$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { STATIC, vtkTexture$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport HalfFloat from '../../Common/Core/HalfFloat.js';\nimport vtkWebGPUTextureView from './TextureView.js';\nimport vtkWebGPUTypes from './Types.js';\nimport vtkTexture from '../Core/Texture.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUTexture methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUTexture(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUTexture');\n  publicAPI.create = (device, options) => {\n    model.device = device;\n    model.width = options.width;\n    model.height = options.height;\n    model.depth = options.depth ? options.depth : 1;\n    const dimension = model.depth === 1 ? '2d' : '3d';\n    model.format = options.format ? options.format : 'rgba8unorm';\n    model.mipLevel = options.mipLevel ? options.mipLevel : 0;\n    /* eslint-disable no-undef */\n    /* eslint-disable no-bitwise */\n    model.usage = options.usage ? options.usage : GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST;\n    /* eslint-enable no-undef */\n    /* eslint-enable no-bitwise */\n    model.handle = model.device.getHandle().createTexture({\n      size: [model.width, model.height, model.depth],\n      format: model.format,\n      // 'rgba8unorm',\n      usage: model.usage,\n      label: model.label,\n      dimension,\n      mipLevelCount: model.mipLevel + 1\n    });\n  };\n  publicAPI.assignFromHandle = (device, handle, options) => {\n    model.device = device;\n    model.handle = handle;\n    model.width = options.width;\n    model.height = options.height;\n    model.depth = options.depth ? options.depth : 1;\n    model.format = options.format ? options.format : 'rgba8unorm';\n    /* eslint-disable no-undef */\n    /* eslint-disable no-bitwise */\n    model.usage = options.usage ? options.usage : GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST;\n    /* eslint-enable no-undef */\n    /* eslint-enable no-bitwise */\n  };\n\n  publicAPI.writeImageData = req => {\n    let nativeArray = [];\n    const _copyImageToTexture = source => {\n      model.device.getHandle().queue.copyExternalImageToTexture({\n        source,\n        flipY: req.flip\n      }, {\n        texture: model.handle,\n        premultipliedAlpha: true,\n        mipLevel: 0,\n        origin: {\n          x: 0,\n          y: 0,\n          z: 0\n        }\n      }, [source.width, source.height, model.depth]);\n\n      // Generate mipmaps on GPU if needed\n      if (publicAPI.getDimensionality() !== 3 && model.mipLevel > 0) {\n        vtkTexture.generateMipmaps(model.device.getHandle(), model.handle, model.mipLevel + 1);\n      }\n      model.ready = true;\n    };\n    if (req.canvas) {\n      _copyImageToTexture(req.canvas);\n      return;\n    }\n    if (req.imageBitmap) {\n      req.width = req.imageBitmap.width;\n      req.height = req.imageBitmap.height;\n      req.depth = 1;\n      req.format = 'rgba8unorm';\n      req.flip = true;\n      _copyImageToTexture(req.imageBitmap);\n      return;\n    }\n    if (req.jsImageData) {\n      req.width = req.jsImageData.width;\n      req.height = req.jsImageData.height;\n      req.depth = 1;\n      req.format = 'rgba8unorm';\n      req.flip = true;\n      _copyImageToTexture(req.jsImageData);\n      return;\n    }\n    if (req.image) {\n      req.width = req.image.width;\n      req.height = req.image.height;\n      req.depth = 1;\n      req.format = 'rgba8unorm';\n      req.flip = true;\n      _copyImageToTexture(req.image);\n      return;\n    }\n    const tDetails = vtkWebGPUTypes.getDetailsFromTextureFormat(model.format);\n    let bufferBytesPerRow = model.width * tDetails.stride;\n\n    /**\n     * Align texture data to ensure bytesPerRow is a multiple of 256.\n     * This is necessary for WebGPU texture uploads, especially for half-float formats.\n     * It also handles half-float conversion if the texture format requires it.\n     * @param {*} arr - The input array containing texture data.\n     * @param {*} height - The height of the texture.\n     * @param {*} depth - The depth of the texture (1 for 2D textures).\n     * @returns\n     */\n    const alignTextureData = (arr, height, depth) => {\n      // bytesPerRow must be a multiple of 256 so we might need to rebuild\n      // the data here before passing to the buffer. e.g. if it is unorm8x4 then\n      // we need to have width be a multiple of 64\n      // Check if the texture is half float\n      const halfFloat = tDetails.elementSize === 2 && tDetails.sampleType === 'float';\n      const bytesPerElement = arr.BYTES_PER_ELEMENT;\n      const inWidthInBytes = arr.length / (height * depth) * bytesPerElement;\n\n      // No changes needed if not half float and already aligned\n      if (!halfFloat && inWidthInBytes % 256 === 0) {\n        return [arr, inWidthInBytes];\n      }\n\n      // Calculate dimensions for the new buffer\n      const inWidth = inWidthInBytes / bytesPerElement;\n      const outBytesPerElement = tDetails.elementSize;\n      const outWidthInBytes = 256 * Math.floor((inWidth * outBytesPerElement + 255) / 256);\n      const outWidth = outWidthInBytes / outBytesPerElement;\n\n      // Create the output array\n      const outArray = macro.newTypedArray(halfFloat ? 'Uint16Array' : arr.constructor.name, outWidth * height * depth);\n\n      // Copy and convert data when needed\n      const totalRows = height * depth;\n      if (halfFloat) {\n        for (let v = 0; v < totalRows; v++) {\n          const inOffset = v * inWidth;\n          const outOffset = v * outWidth;\n          for (let i = 0; i < inWidth; i++) {\n            outArray[outOffset + i] = HalfFloat.toHalf(arr[inOffset + i]);\n          }\n        }\n      } else if (outWidth === inWidth) {\n        // If the output width is the same as input, just copy\n        outArray.set(arr);\n      } else {\n        for (let v = 0; v < totalRows; v++) {\n          outArray.set(arr.subarray(v * inWidth, (v + 1) * inWidth), v * outWidth);\n        }\n      }\n      return [outArray, outWidthInBytes];\n    };\n    if (req.nativeArray) {\n      nativeArray = req.nativeArray;\n    }\n    const is3D = publicAPI.getDimensionality() === 3;\n    const alignedTextureData = alignTextureData(nativeArray, model.height, is3D ? model.depth : 1);\n    bufferBytesPerRow = alignedTextureData[1];\n    const data = alignedTextureData[0];\n    model.device.getHandle().queue.writeTexture({\n      texture: model.handle,\n      mipLevel: 0,\n      origin: {\n        x: 0,\n        y: 0,\n        z: 0\n      }\n    }, data, {\n      offset: 0,\n      bytesPerRow: bufferBytesPerRow,\n      rowsPerImage: model.height\n    }, {\n      width: model.width,\n      height: model.height,\n      depthOrArrayLayers: is3D ? model.depth : 1\n    });\n    if (!is3D && model.mipLevel > 0) {\n      vtkTexture.generateMipmaps(model.device.getHandle(), model.handle, model.mipLevel + 1);\n    }\n    model.ready = true;\n  };\n\n  // when data is pulled out of this texture what scale must be applied to\n  // get back to the original source data. For formats such as r8unorm we\n  // have to multiply by 255.0, for formats such as r16float it is 1.0\n  publicAPI.getScale = () => {\n    const tDetails = vtkWebGPUTypes.getDetailsFromTextureFormat(model.format);\n    const halfFloat = tDetails.elementSize === 2 && tDetails.sampleType === 'float';\n    return halfFloat ? 1.0 : 255.0;\n  };\n  publicAPI.getNumberOfComponents = () => {\n    const tDetails = vtkWebGPUTypes.getDetailsFromTextureFormat(model.format);\n    return tDetails.numComponents;\n  };\n  publicAPI.getDimensionality = () => {\n    let dims = 0;\n    if (model.width > 1) dims++;\n    if (model.height > 1) dims++;\n    if (model.depth > 1) dims++;\n    return dims;\n  };\n  publicAPI.resizeToMatch = tex => {\n    if (tex.getWidth() !== model.width || tex.getHeight() !== model.height || tex.getDepth() !== model.depth) {\n      model.width = tex.getWidth();\n      model.height = tex.getHeight();\n      model.depth = tex.getDepth();\n      model.handle = model.device.getHandle().createTexture({\n        size: [model.width, model.height, model.depth],\n        format: model.format,\n        usage: model.usage,\n        label: model.label\n      });\n    }\n  };\n  publicAPI.resize = function (width, height) {\n    let depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    if (width !== model.width || height !== model.height || depth !== model.depth) {\n      model.width = width;\n      model.height = height;\n      model.depth = depth;\n      model.handle = model.device.getHandle().createTexture({\n        size: [model.width, model.height, model.depth],\n        format: model.format,\n        usage: model.usage,\n        label: model.label\n      });\n    }\n  };\n  publicAPI.createView = function (label) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    // if options is missing values try to add them in\n    if (!options.dimension) {\n      options.dimension = model.depth === 1 ? '2d' : '3d';\n    }\n    const view = vtkWebGPUTextureView.newInstance({\n      label\n    });\n    view.create(publicAPI, options);\n    return view;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  device: null,\n  handle: null,\n  buffer: null,\n  ready: false,\n  label: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['handle', 'ready', 'width', 'height', 'depth', 'format', 'usage']);\n  macro.setGet(publicAPI, model, ['device', 'label']);\n  vtkWebGPUTexture(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUTexture$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUTexture$1 as default, extend, newInstance };\n", "/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};", "import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;", "import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;", "import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();", "import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();", "import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();", "import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();", "import { mat3, mat4 } from 'gl-matrix';\nimport { n as newInstance$1, o as obj, e as setGet, g as get } from '../../macros2.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLActor methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLActor(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLActor');\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      model._openGLRenderWindow = publicAPI.getLastAncestorOfType('vtkOpenGLRenderWindow');\n      model._openGLRenderer = publicAPI.getFirstAncestorOfType('vtkOpenGLRenderer');\n      model.context = model._openGLRenderWindow.getContext();\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNodes(model.renderable.getTextures());\n      publicAPI.addMissingNode(model.renderable.getMapper());\n      publicAPI.removeUnusedNodes();\n\n      // we store textures and mapper\n      model.ogltextures = null;\n      model.activeTextures = null;\n      for (let index = 0; index < model.children.length; index++) {\n        const child = model.children[index];\n        if (child.isA('vtkOpenGLTexture')) {\n          if (!model.ogltextures) {\n            model.ogltextures = [];\n          }\n          model.ogltextures.push(child);\n        } else {\n          model.oglmapper = child;\n        }\n      }\n    }\n  };\n\n  // render both opaque and translucent actors\n  publicAPI.traverseZBufferPass = renderPass => {\n    if (!model.renderable || !model.renderable.getNestedVisibility() || model._openGLRenderer.getSelector() && !model.renderable.getNestedPickable()) {\n      return;\n    }\n    publicAPI.apply(renderPass, true);\n    model.oglmapper.traverse(renderPass);\n    publicAPI.apply(renderPass, false);\n  };\n\n  // only render opaque actors\n  publicAPI.traverseOpaqueZBufferPass = renderPass => publicAPI.traverseOpaquePass(renderPass);\n\n  // we draw textures, then mapper, then post pass textures\n  publicAPI.traverseOpaquePass = renderPass => {\n    if (!model.renderable || !model.renderable.getNestedVisibility() || !model.renderable.getIsOpaque() || model._openGLRenderer.getSelector() && !model.renderable.getNestedPickable()) {\n      return;\n    }\n    publicAPI.apply(renderPass, true);\n    model.oglmapper.traverse(renderPass);\n    publicAPI.apply(renderPass, false);\n  };\n\n  // we draw textures, then mapper, then post pass textures\n  publicAPI.traverseTranslucentPass = renderPass => {\n    if (!model.renderable || !model.renderable.getNestedVisibility() || model.renderable.getIsOpaque() || model._openGLRenderer.getSelector() && !model.renderable.getNestedPickable()) {\n      return;\n    }\n    publicAPI.apply(renderPass, true);\n    model.oglmapper.traverse(renderPass);\n    publicAPI.apply(renderPass, false);\n  };\n  publicAPI.activateTextures = () => {\n    // always traverse textures first, then mapper\n    if (!model.ogltextures) {\n      return;\n    }\n    model.activeTextures = [];\n    for (let index = 0; index < model.ogltextures.length; index++) {\n      const child = model.ogltextures[index];\n      child.render();\n      if (child.getHandle()) {\n        model.activeTextures.push(child);\n      }\n    }\n  };\n  publicAPI.queryPass = (prepass, renderPass) => {\n    if (prepass) {\n      if (!model.renderable || !model.renderable.getVisibility()) {\n        return;\n      }\n      if (model.renderable.getIsOpaque()) {\n        renderPass.incrementOpaqueActorCount();\n      } else {\n        renderPass.incrementTranslucentActorCount();\n      }\n    }\n  };\n  publicAPI.zBufferPass = (prepass, renderPass) => publicAPI.opaquePass(prepass, renderPass);\n  publicAPI.opaqueZBufferPass = (prepass, renderPass) => publicAPI.opaquePass(prepass, renderPass);\n  publicAPI.opaquePass = (prepass, renderPass) => {\n    if (prepass) {\n      model.context.depthMask(true);\n      publicAPI.activateTextures();\n    } else if (model.activeTextures) {\n      for (let index = 0; index < model.activeTextures.length; index++) {\n        model.activeTextures[index].deactivate();\n      }\n    }\n  };\n\n  // Renders myself\n  publicAPI.translucentPass = (prepass, renderPass) => {\n    if (prepass) {\n      model.context.depthMask(model._openGLRenderer.getSelector() && model.renderable.getNestedPickable());\n      publicAPI.activateTextures();\n    } else if (model.activeTextures) {\n      for (let index = 0; index < model.activeTextures.length; index++) {\n        model.activeTextures[index].deactivate();\n      }\n    }\n  };\n  publicAPI.getKeyMatrices = () => {\n    // has the actor changed?\n    if (model.renderable.getMTime() > model.keyMatrixTime.getMTime()) {\n      model.renderable.computeMatrix();\n      mat4.copy(model.keyMatrices.mcwc, model.renderable.getMatrix());\n      mat4.transpose(model.keyMatrices.mcwc, model.keyMatrices.mcwc);\n      if (model.renderable.getIsIdentity()) {\n        mat3.identity(model.keyMatrices.normalMatrix);\n      } else {\n        mat3.fromMat4(model.keyMatrices.normalMatrix, model.keyMatrices.mcwc);\n        mat3.invert(model.keyMatrices.normalMatrix, model.keyMatrices.normalMatrix);\n        mat3.transpose(model.keyMatrices.normalMatrix, model.keyMatrices.normalMatrix);\n      }\n      model.keyMatrixTime.modified();\n    }\n    return model.keyMatrices;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  context: null,\n  keyMatrixTime: null,\n  keyMatrices: null,\n  activeTextures: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.keyMatrixTime = {};\n  obj(model.keyMatrixTime, {\n    mtime: 0\n  });\n  model.keyMatrices = {\n    normalMatrix: mat3.identity(new Float64Array(9)),\n    mcwc: mat4.identity(new Float64Array(16))\n  };\n\n  // Build VTK API\n  setGet(publicAPI, model, ['context']);\n  get(publicAPI, model, ['activeTextures']);\n\n  // Object methods\n  vtkOpenGLActor(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkActor = {\n  newInstance,\n  extend\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkActor', newInstance);\n\nexport { vtkActor as default, extend, newInstance };\n", "import { n as newInstance$1, e as setGet, g as get } from '../../macros2.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLActor methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLActor2D(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLActor2D');\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      if (!model.renderable) {\n        return;\n      }\n      model._openGLRenderWindow = publicAPI.getLastAncestorOfType('vtkOpenGLRenderWindow');\n      model._openGLRenderer = publicAPI.getFirstAncestorOfType('vtkOpenGLRenderer');\n      model.context = model._openGLRenderWindow.getContext();\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNodes(model.renderable.getTextures());\n      publicAPI.addMissingNode(model.renderable.getMapper());\n      publicAPI.removeUnusedNodes();\n\n      // we store textures and mapper\n      model.ogltextures = null;\n      model.activeTextures = null;\n      for (let index = 0; index < model.children.length; index++) {\n        const child = model.children[index];\n        if (child.isA('vtkOpenGLTexture')) {\n          if (!model.ogltextures) {\n            model.ogltextures = [];\n          }\n          model.ogltextures.push(child);\n        } else {\n          model.oglmapper = child;\n        }\n      }\n    }\n  };\n  publicAPI.queryPass = (prepass, renderPass) => {\n    if (prepass) {\n      if (!model.renderable || !model.renderable.getVisibility()) {\n        return;\n      }\n      renderPass.incrementOverlayActorCount();\n    }\n  };\n\n  // we draw textures, then mapper, then post pass textures\n  publicAPI.traverseOpaquePass = renderPass => {\n    if (!model.oglmapper || !model.renderable || !model.renderable.getNestedVisibility() || !model.renderable.getIsOpaque() || model._openGLRenderer.getSelector() && !model.renderable.getNestedPickable()) {\n      return;\n    }\n    publicAPI.apply(renderPass, true);\n    model.oglmapper.traverse(renderPass);\n    publicAPI.apply(renderPass, false);\n  };\n\n  // we draw textures, then mapper, then post pass textures\n  publicAPI.traverseTranslucentPass = renderPass => {\n    if (!model.oglmapper || !model.renderable || !model.renderable.getNestedVisibility() || model.renderable.getIsOpaque() || model._openGLRenderer.getSelector() && !model.renderable.getNestedPickable()) {\n      return;\n    }\n    publicAPI.apply(renderPass, true);\n    model.oglmapper.traverse(renderPass);\n    publicAPI.apply(renderPass, false);\n  };\n  publicAPI.traverseOverlayPass = renderPass => {\n    if (!model.oglmapper || !model.renderable || !model.renderable.getNestedVisibility() || model._openGLRenderer.getSelector() && !model.renderable.getNestedPickable) {\n      return;\n    }\n    publicAPI.apply(renderPass, true);\n    model.oglmapper.traverse(renderPass);\n    publicAPI.apply(renderPass, false);\n  };\n  publicAPI.activateTextures = () => {\n    // always traverse textures first, then mapper\n    if (!model.ogltextures) {\n      return;\n    }\n    model.activeTextures = [];\n    for (let index = 0; index < model.ogltextures.length; index++) {\n      const child = model.ogltextures[index];\n      child.render();\n      if (child.getHandle()) {\n        model.activeTextures.push(child);\n      }\n    }\n  };\n\n  // Renders myself\n  publicAPI.opaquePass = (prepass, renderPass) => {\n    if (prepass) {\n      model.context.depthMask(true);\n      publicAPI.activateTextures();\n    } else if (model.activeTextures) {\n      // deactivate textures\n      for (let index = 0; index < model.activeTextures.length; index++) {\n        model.activeTextures[index].deactivate();\n      }\n    }\n  };\n\n  // Renders myself\n  publicAPI.translucentPass = (prepass, renderPass) => {\n    if (prepass) {\n      model.context.depthMask(false);\n      publicAPI.activateTextures();\n    } else if (model.activeTextures) {\n      for (let index = 0; index < model.activeTextures.length; index++) {\n        model.activeTextures[index].deactivate();\n      }\n    }\n  };\n\n  // Renders myself\n  publicAPI.overlayPass = (prepass, renderPass) => {\n    if (prepass) {\n      model.context.depthMask(true);\n      publicAPI.activateTextures();\n    } else if (model.activeTextures) {\n      // deactivate textures\n      for (let index = 0; index < model.activeTextures.length; index++) {\n        model.activeTextures[index].deactivate();\n      }\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  context: null,\n  activeTextures: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n\n  // Build VTK API\n  setGet(publicAPI, model, ['context']);\n  get(publicAPI, model, ['activeTextures']);\n\n  // Object methods\n  vtkOpenGLActor2D(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkActor2D = {\n  newInstance,\n  extend\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkActor2D', newInstance);\n\nexport { vtkActor2D as default, extend, newInstance };\n", "import { mat4, mat3 } from 'gl-matrix';\nimport { n as newInstance$1, o as obj, e as setGet } from '../../macros2.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLCamera methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLCamera(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLCamera');\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      model._openGLRenderer = publicAPI.getFirstAncestorOfType('vtkOpenGLRenderer');\n      model._openGLRenderWindow = model._openGLRenderer.getParent();\n      model.context = model._openGLRenderWindow.getContext();\n    }\n  };\n\n  // Renders myself\n  publicAPI.opaquePass = prepass => {\n    if (prepass) {\n      const tsize = model._openGLRenderer.getTiledSizeAndOrigin();\n      model.context.viewport(tsize.lowerLeftU, tsize.lowerLeftV, tsize.usize, tsize.vsize);\n      model.context.scissor(tsize.lowerLeftU, tsize.lowerLeftV, tsize.usize, tsize.vsize);\n    }\n  };\n  publicAPI.translucentPass = publicAPI.opaquePass;\n  publicAPI.zBufferPass = publicAPI.opaquePass;\n  publicAPI.opaqueZBufferPass = publicAPI.opaquePass;\n  publicAPI.volumePass = publicAPI.opaquePass;\n  publicAPI.getKeyMatrices = ren => {\n    // has the camera changed?\n    if (ren !== model.lastRenderer || model._openGLRenderWindow.getMTime() > model.keyMatrixTime.getMTime() || publicAPI.getMTime() > model.keyMatrixTime.getMTime() || ren.getMTime() > model.keyMatrixTime.getMTime() || model.renderable.getMTime() > model.keyMatrixTime.getMTime()) {\n      mat4.copy(model.keyMatrices.wcvc, model.renderable.getViewMatrix());\n      mat3.fromMat4(model.keyMatrices.normalMatrix, model.keyMatrices.wcvc);\n      mat3.invert(model.keyMatrices.normalMatrix, model.keyMatrices.normalMatrix);\n      mat4.transpose(model.keyMatrices.wcvc, model.keyMatrices.wcvc);\n      const aspectRatio = model._openGLRenderer.getAspectRatio();\n      mat4.copy(model.keyMatrices.vcpc, model.renderable.getProjectionMatrix(aspectRatio, -1, 1));\n      mat4.transpose(model.keyMatrices.vcpc, model.keyMatrices.vcpc);\n      mat4.multiply(model.keyMatrices.wcpc, model.keyMatrices.vcpc, model.keyMatrices.wcvc);\n      model.keyMatrixTime.modified();\n      model.lastRenderer = ren;\n    }\n    return model.keyMatrices;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  context: null,\n  lastRenderer: null,\n  keyMatrixTime: null,\n  keyMatrices: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.keyMatrixTime = {};\n  obj(model.keyMatrixTime);\n\n  // values always get set by the get method\n  model.keyMatrices = {\n    normalMatrix: new Float64Array(9),\n    vcpc: new Float64Array(16),\n    wcvc: new Float64Array(16),\n    wcpc: new Float64Array(16)\n  };\n\n  // Build VTK API\n  setGet(publicAPI, model, ['context', 'keyMatrixTime']);\n\n  // Object methods\n  vtkOpenGLCamera(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkCamera = {\n  newInstance,\n  extend\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkCamera', newInstance);\n\nexport { vtkCamera as default, extend, newInstance };\n", "export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n", "export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n", "import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We cant do this\n  // for a comparator (except for specific, known comparators) because we cant\n  // tell if the comparator is symmetric, and an asymmetric comparator cant be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n", "export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n", "import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n", "export function blur(values, r) {\n  if (!((r = +r) >= 0)) throw new RangeError(\"invalid r\");\n  let length = values.length;\n  if (!((length = Math.floor(length)) >= 0)) throw new RangeError(\"invalid length\");\n  if (!length || !r) return values;\n  const blur = blurf(r);\n  const temp = values.slice();\n  blur(values, temp, 0, length, 1);\n  blur(temp, values, 0, length, 1);\n  blur(values, temp, 0, length, 1);\n  return values;\n}\n\nexport const blur2 = Blur2(blurf);\n\nexport const blurImage = Blur2(blurfImage);\n\nfunction Blur2(blur) {\n  return function(data, rx, ry = rx) {\n    if (!((rx = +rx) >= 0)) throw new RangeError(\"invalid rx\");\n    if (!((ry = +ry) >= 0)) throw new RangeError(\"invalid ry\");\n    let {data: values, width, height} = data;\n    if (!((width = Math.floor(width)) >= 0)) throw new RangeError(\"invalid width\");\n    if (!((height = Math.floor(height !== undefined ? height : values.length / width)) >= 0)) throw new RangeError(\"invalid height\");\n    if (!width || !height || (!rx && !ry)) return data;\n    const blurx = rx && blur(rx);\n    const blury = ry && blur(ry);\n    const temp = values.slice();\n    if (blurx && blury) {\n      blurh(blurx, temp, values, width, height);\n      blurh(blurx, values, temp, width, height);\n      blurh(blurx, temp, values, width, height);\n      blurv(blury, values, temp, width, height);\n      blurv(blury, temp, values, width, height);\n      blurv(blury, values, temp, width, height);\n    } else if (blurx) {\n      blurh(blurx, values, temp, width, height);\n      blurh(blurx, temp, values, width, height);\n      blurh(blurx, values, temp, width, height);\n    } else if (blury) {\n      blurv(blury, values, temp, width, height);\n      blurv(blury, temp, values, width, height);\n      blurv(blury, values, temp, width, height);\n    }\n    return data;\n  };\n}\n\nfunction blurh(blur, T, S, w, h) {\n  for (let y = 0, n = w * h; y < n;) {\n    blur(T, S, y, y += w, 1);\n  }\n}\n\nfunction blurv(blur, T, S, w, h) {\n  for (let x = 0, n = w * h; x < w; ++x) {\n    blur(T, S, x, x + n, w);\n  }\n}\n\nfunction blurfImage(radius) {\n  const blur = blurf(radius);\n  return (T, S, start, stop, step) => {\n    start <<= 2, stop <<= 2, step <<= 2;\n    blur(T, S, start + 0, stop + 0, step);\n    blur(T, S, start + 1, stop + 1, step);\n    blur(T, S, start + 2, stop + 2, step);\n    blur(T, S, start + 3, stop + 3, step);\n  };\n}\n\n// Given a target array T, a source array S, sets each value T[i] to the average\n// of {S[i - r], , S[i], , S[i + r]}, where r = radius, start <= i < stop,\n// for each i, i + step, i + 2 * step, etc., and where S[j] is clamped between\n// S[start] (inclusive) and S[stop] (exclusive). If the given radius is not an\n// integer, S[i - r - 1] and S[i + r + 1] are added to the sum, each weighted\n// according to r - radius.\nfunction blurf(radius) {\n  const radius0 = Math.floor(radius);\n  if (radius0 === radius) return bluri(radius);\n  const t = radius - radius0;\n  const w = 2 * radius + 1;\n  return (T, S, start, stop, step) => { // stop must be aligned!\n    if (!((stop -= step) >= start)) return; // inclusive stop\n    let sum = radius0 * S[start];\n    const s0 = step * radius0;\n    const s1 = s0 + step;\n    for (let i = start, j = start + s0; i < j; i += step) {\n      sum += S[Math.min(stop, i)];\n    }\n    for (let i = start, j = stop; i <= j; i += step) {\n      sum += S[Math.min(stop, i + s0)];\n      T[i] = (sum + t * (S[Math.max(start, i - s1)] + S[Math.min(stop, i + s1)])) / w;\n      sum -= S[Math.max(start, i - s0)];\n    }\n  };\n}\n\n// Like blurf, but optimized for integer radius.\nfunction bluri(radius) {\n  const w = 2 * radius + 1;\n  return (T, S, start, stop, step) => { // stop must be aligned!\n    if (!((stop -= step) >= start)) return; // inclusive stop\n    let sum = radius * S[start];\n    const s = step * radius;\n    for (let i = start, j = start + s; i < j; i += step) {\n      sum += S[Math.min(stop, i)];\n    }\n    for (let i = start, j = stop; i <= j; i += step) {\n      sum += S[Math.min(stop, i + s)];\n      T[i] = sum / w;\n      sum -= S[Math.max(start, i - s)];\n    }\n  };\n}\n", "var array = Array.prototype;\n\nexport var slice = array.slice;\nexport var map = array.map;\n", "const e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nfunction tickSpec(start, stop, count) {\n  const step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log10(step)),\n      error = step / Math.pow(10, power),\n      factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;\n  let i1, i2, inc;\n  if (power < 0) {\n    inc = Math.pow(10, -power) / factor;\n    i1 = Math.round(start * inc);\n    i2 = Math.round(stop * inc);\n    if (i1 / inc < start) ++i1;\n    if (i2 / inc > stop) --i2;\n    inc = -inc;\n  } else {\n    inc = Math.pow(10, power) * factor;\n    i1 = Math.round(start / inc);\n    i2 = Math.round(stop / inc);\n    if (i1 * inc < start) ++i1;\n    if (i2 * inc > stop) --i2;\n  }\n  if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start, stop, count * 2);\n  return [i1, i2, inc];\n}\n\nexport default function ticks(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  if (!(count > 0)) return [];\n  if (start === stop) return [start];\n  const reverse = stop < start, [i1, i2, inc] = reverse ? tickSpec(stop, start, count) : tickSpec(start, stop, count);\n  if (!(i2 >= i1)) return [];\n  const n = i2 - i1 + 1, ticks = new Array(n);\n  if (reverse) {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) * inc;\n  } else {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) * inc;\n  }\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  return tickSpec(start, stop, count)[2];\n}\n\nexport function tickStep(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  const reverse = stop < start, inc = reverse ? tickIncrement(stop, start, count) : tickIncrement(start, stop, count);\n  return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);\n}\n", "export default shuffler(Math.random);\n\nexport function shuffler(random) {\n  return function shuffle(array, i0 = 0, i1 = array.length) {\n    let m = i1 - (i0 = +i0);\n    while (m) {\n      const i = random() * m-- | 0, t = array[m + i0];\n      array[m + i0] = array[i + i0];\n      array[i + i0] = t;\n    }\n    return array;\n  };\n}\n", "export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n", "import {InternMap} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new InternMap(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    let i = index.get(d);\n    if (i === undefined) {\n      if (unknown !== implicit) return unknown;\n      index.set(d, i = domain.push(d) - 1);\n    }\n    return range[i % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new InternMap();\n    for (const value of _) {\n      if (index.has(value)) continue;\n      index.set(value, domain.push(value) - 1);\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n", "export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n", "import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n", "export const radians = Math.PI / 180;\nexport const degrees = 180 / Math.PI;\n", "import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nconst K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * degrees;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * radians;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb() {\n    return hcl2lab(this).rgb();\n  }\n}));\n", "import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * degrees - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * radians,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n", "export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n", "import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n", "export default x => () => x;\n", "import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n", "import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n", "export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n", "import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n", "export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n", "export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n", "import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n", "import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n", "import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n", "export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n", "var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n", "import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n", "import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n", "var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n", "import {hsl as colorHsl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);\n", "import {hcl as colorHcl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);\n", "import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n", "export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n", "export default function number(x) {\n  return +x;\n}\n", "import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n", "export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n", "import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n", "export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n", "export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n", "// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n", "// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n", "import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n", "import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n", "import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n", "export default function(x) {\n  return x;\n}\n", "import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n", "import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n", "import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n", "import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n", "import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n", "import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n", "import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n", "const t0 = new Date, t1 = new Date;\n\nexport function timeInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = (date) => {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = (date) => {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = (date) => {\n    const d0 = interval(date), d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = (date, step) => {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = (start, stop, step) => {\n    const range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    let previous;\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = (test) => {\n    return timeInterval((date) => {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, (date, step) => {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = (start, end) => {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = (step) => {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? (d) => field(d) % step === 0\n              : (d) => interval.count(0, d) % step === 0);\n    };\n  }\n\n  return interval;\n}\n", "import {timeInterval} from \"./interval.js\";\n\nexport const millisecond = timeInterval(() => {\n  // noop\n}, (date, step) => {\n  date.setTime(+date + step);\n}, (start, end) => {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = (k) => {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return timeInterval((date) => {\n    date.setTime(Math.floor(date / k) * k);\n  }, (date, step) => {\n    date.setTime(+date + step * k);\n  }, (start, end) => {\n    return (end - start) / k;\n  });\n};\n\nexport const milliseconds = millisecond.range;\n", "export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nexport const second = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds());\n}, (date, step) => {\n  date.setTime(+date + step * durationSecond);\n}, (start, end) => {\n  return (end - start) / durationSecond;\n}, (date) => {\n  return date.getUTCSeconds();\n});\n\nexport const seconds = second.range;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeMinute = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getMinutes();\n});\n\nexport const timeMinutes = timeMinute.range;\n\nexport const utcMinute = timeInterval((date) => {\n  date.setUTCSeconds(0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getUTCMinutes();\n});\n\nexport const utcMinutes = utcMinute.range;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeHour = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getHours();\n});\n\nexport const timeHours = timeHour.range;\n\nexport const utcHour = timeInterval((date) => {\n  date.setUTCMinutes(0, 0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getUTCHours();\n});\n\nexport const utcHours = utcHour.range;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nexport const timeDay = timeInterval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport const timeDays = timeDay.range;\n\nexport const utcDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return date.getUTCDate() - 1;\n});\n\nexport const utcDays = utcDay.range;\n\nexport const unixDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return Math.floor(date / durationDay);\n});\n\nexport const unixDays = unixDay.range;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction timeWeekday(i) {\n  return timeInterval((date) => {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setDate(date.getDate() + step * 7);\n  }, (start, end) => {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport const timeSunday = timeWeekday(0);\nexport const timeMonday = timeWeekday(1);\nexport const timeTuesday = timeWeekday(2);\nexport const timeWednesday = timeWeekday(3);\nexport const timeThursday = timeWeekday(4);\nexport const timeFriday = timeWeekday(5);\nexport const timeSaturday = timeWeekday(6);\n\nexport const timeSundays = timeSunday.range;\nexport const timeMondays = timeMonday.range;\nexport const timeTuesdays = timeTuesday.range;\nexport const timeWednesdays = timeWednesday.range;\nexport const timeThursdays = timeThursday.range;\nexport const timeFridays = timeFriday.range;\nexport const timeSaturdays = timeSaturday.range;\n\nfunction utcWeekday(i) {\n  return timeInterval((date) => {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, (start, end) => {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport const utcSunday = utcWeekday(0);\nexport const utcMonday = utcWeekday(1);\nexport const utcTuesday = utcWeekday(2);\nexport const utcWednesday = utcWeekday(3);\nexport const utcThursday = utcWeekday(4);\nexport const utcFriday = utcWeekday(5);\nexport const utcSaturday = utcWeekday(6);\n\nexport const utcSundays = utcSunday.range;\nexport const utcMondays = utcMonday.range;\nexport const utcTuesdays = utcTuesday.range;\nexport const utcWednesdays = utcWednesday.range;\nexport const utcThursdays = utcThursday.range;\nexport const utcFridays = utcFriday.range;\nexport const utcSaturdays = utcSaturday.range;\n", "import {timeInterval} from \"./interval.js\";\n\nexport const timeMonth = timeInterval((date) => {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setMonth(date.getMonth() + step);\n}, (start, end) => {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, (date) => {\n  return date.getMonth();\n});\n\nexport const timeMonths = timeMonth.range;\n\nexport const utcMonth = timeInterval((date) => {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, (start, end) => {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, (date) => {\n  return date.getUTCMonth();\n});\n\nexport const utcMonths = utcMonth.range;\n", "import {timeInterval} from \"./interval.js\";\n\nexport const timeYear = timeInterval((date) => {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setFullYear(date.getFullYear() + step);\n}, (start, end) => {\n  return end.getFullYear() - start.getFullYear();\n}, (date) => {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\ntimeYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport const timeYears = timeYear.range;\n\nexport const utcYear = timeInterval((date) => {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, (start, end) => {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, (date) => {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport const utcYears = utcYear.range;\n", "import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport {millisecond} from \"./millisecond.js\";\nimport {second} from \"./second.js\";\nimport {timeMinute, utcMinute} from \"./minute.js\";\nimport {timeHour, utcHour} from \"./hour.js\";\nimport {timeDay, unixDay} from \"./day.js\";\nimport {timeSunday, utcSunday} from \"./week.js\";\nimport {timeMonth, utcMonth} from \"./month.js\";\nimport {timeYear, utcYear} from \"./year.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcSunday, unixDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(timeYear, timeMonth, timeSunday, timeDay, timeHour, timeMinute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n", "import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n", "import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n", "import {utcFormat} from \"./defaultLocale.js\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n", "import {isoSpecifier} from \"./isoFormat.js\";\nimport {utcParse} from \"./defaultLocale.js\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n", "import { m as macro } from '../../macros2.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\n// ----------------------------------------------------------------------------\n// vtkImplicitFunction methods\n// ----------------------------------------------------------------------------\n\nfunction vtkImplicitFunction(publicAPI, model) {\n  model.classHierarchy.push('vtkImplicitFunction');\n  publicAPI.functionValue = xyz => {\n    if (!model.transform) {\n      return publicAPI.evaluateFunction(xyz);\n    }\n    const transformedXYZ = [];\n    model.transform.transformPoint(xyz, transformedXYZ);\n    return publicAPI.evaluateFunction(transformedXYZ);\n  };\n  publicAPI.evaluateFunction = _xyz => {\n    macro.vtkErrorMacro('not implemented');\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\nconst DEFAULT_VALUES = {\n  // transform : null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['transform']);\n  vtkImplicitFunction(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkImplicitFunction');\n\n// ----------------------------------------------------------------------------\n\nvar vtkImplicitFunction$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkImplicitFunction$1 as default, extend, newInstance };\n", "import { s as subtract, d as dot, j as cross, k as add } from '../Core/Math/index.js';\nimport { m as macro } from '../../macros2.js';\nimport vtkImplicitFunction from './ImplicitFunction.js';\n\nconst PLANE_TOLERANCE = 1.0e-6;\nconst COINCIDE = 'coincide';\nconst DISJOINT = 'disjoint';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nfunction evaluate(normal, origin, x) {\n  return normal[0] * (x[0] - origin[0]) + normal[1] * (x[1] - origin[1]) + normal[2] * (x[2] - origin[2]);\n}\nfunction distanceToPlane(x, origin, normal) {\n  const distance = normal[0] * (x[0] - origin[0]) + normal[1] * (x[1] - origin[1]) + normal[2] * (x[2] - origin[2]);\n  return Math.abs(distance);\n}\nfunction projectPoint(x, origin, normal, xproj) {\n  const xo = [];\n  subtract(x, origin, xo);\n  const t = dot(normal, xo);\n  xproj[0] = x[0] - t * normal[0];\n  xproj[1] = x[1] - t * normal[1];\n  xproj[2] = x[2] - t * normal[2];\n}\nfunction projectVector(v, normal, vproj) {\n  const t = dot(v, normal);\n  let n2 = dot(normal, normal);\n  if (n2 === 0) {\n    n2 = 1.0;\n  }\n  vproj[0] = v[0] - t * normal[0] / n2;\n  vproj[1] = v[1] - t * normal[1] / n2;\n  vproj[2] = v[2] - t * normal[2] / n2;\n  return vproj;\n}\nfunction generalizedProjectPoint(x, origin, normal, xproj) {\n  const xo = [];\n  subtract(x, origin, xo);\n  const t = dot(normal, xo);\n  const n2 = dot(normal, normal);\n  if (n2 !== 0) {\n    xproj[0] = x[0] - t * normal[0] / n2;\n    xproj[1] = x[1] - t * normal[1] / n2;\n    xproj[2] = x[2] - t * normal[2] / n2;\n  } else {\n    xproj[0] = x[0];\n    xproj[1] = x[1];\n    xproj[2] = x[2];\n  }\n}\nfunction intersectWithLine(p1, p2, origin, normal) {\n  const outObj = {\n    intersection: false,\n    betweenPoints: false,\n    t: Number.MAX_VALUE,\n    x: []\n  };\n  const p21 = [];\n  const p1Origin = [];\n  // Compute line vector\n  subtract(p2, p1, p21);\n  subtract(origin, p1, p1Origin);\n\n  // Compute denominator.  If ~0, line and plane are parallel.\n  // const num = vtkMath.dot(normal, origin) - vtkMath.dot(normal, p1);\n  const num = dot(normal, p1Origin);\n  const den = dot(normal, p21);\n\n  // If denominator with respect to numerator is \"zero\", then the line and\n  // plane are considered parallel.\n  let fabsden;\n  let fabstolerance;\n\n  // Trying to avoid an expensive call to fabs()\n  if (den < 0.0) {\n    fabsden = -den;\n  } else {\n    fabsden = den;\n  }\n  if (num < 0.0) {\n    fabstolerance = -num * PLANE_TOLERANCE;\n  } else {\n    fabstolerance = num * PLANE_TOLERANCE;\n  }\n  if (fabsden <= fabstolerance) {\n    return outObj;\n  }\n\n  // Where on the line between p1 and p2 is the intersection\n  // If between 0 and 1, it is between the two points. If < 0 it's before p1, if > 1 it's after p2\n  outObj.t = num / den;\n  outObj.x[0] = p1[0] + outObj.t * p21[0];\n  outObj.x[1] = p1[1] + outObj.t * p21[1];\n  outObj.x[2] = p1[2] + outObj.t * p21[2];\n  outObj.intersection = true;\n  outObj.betweenPoints = outObj.t >= 0.0 && outObj.t <= 1.0;\n  return outObj;\n}\nfunction intersectWithPlane(plane1Origin, plane1Normal, plane2Origin, plane2Normal) {\n  const outObj = {\n    intersection: false,\n    l0: [],\n    l1: [],\n    error: null\n  };\n  const cross$1 = [];\n  cross(plane1Normal, plane2Normal, cross$1);\n  const absCross = cross$1.map(n => Math.abs(n));\n\n  // test if the two planes are parallel\n  if (absCross[0] + absCross[1] + absCross[2] < PLANE_TOLERANCE) {\n    // test if disjoint or coincide\n    const v = [];\n    subtract(plane1Origin, plane2Origin, v);\n    if (dot(plane1Normal, v) === 0) {\n      outObj.error = COINCIDE;\n    } else {\n      outObj.error = DISJOINT;\n    }\n    return outObj;\n  }\n\n  // Plane1 and Plane2 intersect in a line\n  // first determine max abs coordinate of the cross product\n  let maxc;\n  if (absCross[0] > absCross[1] && absCross[0] > absCross[2]) {\n    maxc = 'x';\n  } else if (absCross[1] > absCross[2]) {\n    maxc = 'y';\n  } else {\n    maxc = 'z';\n  }\n\n  // To get a point on the intersect line, zero the max coord, and solve for the other two\n  const iP = []; // intersectionPoint\n  // the constants in the 2 plane equations\n  const d1 = -dot(plane1Normal, plane1Origin);\n  const d2 = -dot(plane2Normal, plane2Origin);\n\n  // eslint-disable-next-line default-case\n  switch (maxc) {\n    case 'x':\n      // intersect with x=0\n      iP[0] = 0;\n      iP[1] = (d2 * plane1Normal[2] - d1 * plane2Normal[2]) / cross$1[0];\n      iP[2] = (d1 * plane2Normal[1] - d2 * plane1Normal[1]) / cross$1[0];\n      break;\n    case 'y':\n      // intersect with y=0\n      iP[0] = (d1 * plane2Normal[2] - d2 * plane1Normal[2]) / cross$1[1];\n      iP[1] = 0;\n      iP[2] = (d2 * plane1Normal[0] - d1 * plane2Normal[0]) / cross$1[1];\n      break;\n    case 'z':\n      // intersect with z=0\n      iP[0] = (d2 * plane1Normal[1] - d1 * plane2Normal[1]) / cross$1[2];\n      iP[1] = (d1 * plane2Normal[0] - d2 * plane1Normal[0]) / cross$1[2];\n      iP[2] = 0;\n      break;\n  }\n  outObj.l0 = iP;\n  add(iP, cross$1, outObj.l1);\n  outObj.intersection = true;\n  return outObj;\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  evaluate,\n  distanceToPlane,\n  projectPoint,\n  projectVector,\n  generalizedProjectPoint,\n  intersectWithLine,\n  intersectWithPlane,\n  DISJOINT,\n  COINCIDE\n};\n\n// ----------------------------------------------------------------------------\n// vtkPlane methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPlane(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkPlane');\n  publicAPI.distanceToPlane = x => distanceToPlane(x, model.origin, model.normal);\n  publicAPI.projectPoint = (x, xproj) => {\n    projectPoint(x, model.origin, model.normal, xproj);\n  };\n  publicAPI.projectVector = (v, vproj) => projectVector(v, model.normal, vproj);\n  publicAPI.push = distance => {\n    if (distance === 0.0) {\n      return;\n    }\n    for (let i = 0; i < 3; i++) {\n      model.origin[i] += distance * model.normal[i];\n    }\n  };\n  publicAPI.generalizedProjectPoint = (x, xproj) => {\n    generalizedProjectPoint(x, model.origin, model.normal, xproj);\n  };\n  publicAPI.evaluateFunction = (x, y, z) => {\n    if (!Array.isArray(x)) {\n      return model.normal[0] * (x - model.origin[0]) + model.normal[1] * (y - model.origin[1]) + model.normal[2] * (z - model.origin[2]);\n    }\n    return model.normal[0] * (x[0] - model.origin[0]) + model.normal[1] * (x[1] - model.origin[1]) + model.normal[2] * (x[2] - model.origin[2]);\n  };\n  publicAPI.evaluateGradient = xyz => {\n    const retVal = [model.normal[0], model.normal[1], model.normal[2]];\n    return retVal;\n  };\n  publicAPI.intersectWithLine = (p1, p2) => intersectWithLine(p1, p2, model.origin, model.normal);\n  publicAPI.intersectWithPlane = (planeOrigin, planeNormal) => intersectWithPlane(planeOrigin, planeNormal, model.origin, model.normal);\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  normal: [0.0, 0.0, 1.0],\n  origin: [0.0, 0.0, 0.0]\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  vtkImplicitFunction.extend(publicAPI, model, initialValues);\n  macro.setGetArray(publicAPI, model, ['normal', 'origin'], 3);\n  vtkPlane(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPlane');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPlane$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { STATIC, vtkPlane$1 as default, extend, newInstance, vtkPlane };\n", "import { d as dot } from '../Core/Math/index.js';\nimport { vec3 } from 'gl-matrix';\nimport vtkPlane from './Plane.js';\n\nconst INIT_BOUNDS = [Number.MAX_VALUE, -Number.MAX_VALUE,\n// X\nNumber.MAX_VALUE, -Number.MAX_VALUE,\n// Y\nNumber.MAX_VALUE, -Number.MAX_VALUE // Z\n];\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nfunction equals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5];\n}\nfunction isValid(bounds) {\n  return bounds?.length >= 6 && bounds[0] <= bounds[1] && bounds[2] <= bounds[3] && bounds[4] <= bounds[5];\n}\nfunction setBounds(bounds, otherBounds) {\n  bounds[0] = otherBounds[0];\n  bounds[1] = otherBounds[1];\n  bounds[2] = otherBounds[2];\n  bounds[3] = otherBounds[3];\n  bounds[4] = otherBounds[4];\n  bounds[5] = otherBounds[5];\n  return bounds;\n}\nfunction reset(bounds) {\n  return setBounds(bounds, INIT_BOUNDS);\n}\nfunction addPoint(bounds, x, y, z) {\n  const [xMin, xMax, yMin, yMax, zMin, zMax] = bounds;\n  bounds[0] = xMin < x ? xMin : x;\n  bounds[1] = xMax > x ? xMax : x;\n  bounds[2] = yMin < y ? yMin : y;\n  bounds[3] = yMax > y ? yMax : y;\n  bounds[4] = zMin < z ? zMin : z;\n  bounds[5] = zMax > z ? zMax : z;\n  return bounds;\n}\nfunction addPoints(bounds, points) {\n  if (points.length === 0) {\n    return bounds;\n  }\n  if (Array.isArray(points[0])) {\n    for (let i = 0; i < points.length; ++i) {\n      addPoint(bounds, ...points[i]);\n    }\n  } else {\n    for (let i = 0; i < points.length; i += 3) {\n      addPoint(bounds, ...points.slice(i, i + 3));\n    }\n  }\n  return bounds;\n}\nfunction addBounds(bounds, xMin, xMax, yMin, yMax, zMin, zMax) {\n  const [_xMin, _xMax, _yMin, _yMax, _zMin, _zMax] = bounds;\n  if (zMax === undefined) {\n    bounds[0] = Math.min(xMin[0], _xMin);\n    bounds[1] = Math.max(xMin[1], _xMax);\n    bounds[2] = Math.min(xMin[2], _yMin);\n    bounds[3] = Math.max(xMin[3], _yMax);\n    bounds[4] = Math.min(xMin[4], _zMin);\n    bounds[5] = Math.max(xMin[5], _zMax);\n  } else {\n    bounds[0] = Math.min(xMin, _xMin);\n    bounds[1] = Math.max(xMax, _xMax);\n    bounds[2] = Math.min(yMin, _yMin);\n    bounds[3] = Math.max(yMax, _yMax);\n    bounds[4] = Math.min(zMin, _zMin);\n    bounds[5] = Math.max(zMax, _zMax);\n  }\n  return bounds;\n}\nfunction setMinPoint(bounds, x, y, z) {\n  const [xMin, xMax, yMin, yMax, zMin, zMax] = bounds;\n  bounds[0] = x;\n  bounds[1] = x > xMax ? x : xMax;\n  bounds[2] = y;\n  bounds[3] = y > yMax ? y : yMax;\n  bounds[4] = z;\n  bounds[5] = z > zMax ? z : zMax;\n  return xMin !== x || yMin !== y || zMin !== z;\n}\nfunction setMaxPoint(bounds, x, y, z) {\n  const [xMin, xMax, yMin, yMax, zMin, zMax] = bounds;\n  bounds[0] = x < xMin ? x : xMin;\n  bounds[1] = x;\n  bounds[2] = y < yMin ? y : yMin;\n  bounds[3] = y;\n  bounds[4] = z < zMin ? z : zMin;\n  bounds[5] = z;\n  return xMax !== x || yMax !== y || zMax !== z;\n}\nfunction inflate(bounds, delta) {\n  if (delta == null) {\n    // eslint-disable-next-line no-use-before-define\n    return minInflate(bounds);\n  }\n  bounds[0] -= delta;\n  bounds[1] += delta;\n  bounds[2] -= delta;\n  bounds[3] += delta;\n  bounds[4] -= delta;\n  bounds[5] += delta;\n  return bounds;\n}\nfunction minInflate(bounds) {\n  const nonZero = [0, 0, 0];\n  let maxIdx = -1;\n  let max = 0.0;\n  let w = 0.0;\n  for (let i = 0; i < 3; ++i) {\n    w = bounds[i * 2 + 1] - bounds[i * 2];\n    if (w > max) {\n      max = w;\n      maxIdx = i;\n    }\n    nonZero[i] = w > 0.0 ? 1 : 0;\n  }\n  if (maxIdx < 0) {\n    return inflate(bounds, 0.5);\n  }\n\n  // Any zero width sides are bumped out 1% of max side\n  for (let i = 0; i < 3; ++i) {\n    if (!nonZero[i]) {\n      const d = 0.005 * max;\n      bounds[i * 2] -= d;\n      bounds[i * 2 + 1] += d;\n    }\n  }\n  return bounds;\n}\nfunction scale(bounds, sx, sy, sz) {\n  if (!isValid(bounds)) {\n    return false;\n  }\n  if (sx >= 0.0) {\n    bounds[0] *= sx;\n    bounds[1] *= sx;\n  } else {\n    bounds[0] = sx * bounds[1];\n    bounds[1] = sx * bounds[0];\n  }\n  if (sy >= 0.0) {\n    bounds[2] *= sy;\n    bounds[3] *= sy;\n  } else {\n    bounds[2] = sy * bounds[3];\n    bounds[3] = sy * bounds[2];\n  }\n  if (sz >= 0.0) {\n    bounds[4] *= sz;\n    bounds[5] *= sz;\n  } else {\n    bounds[4] = sz * bounds[5];\n    bounds[5] = sz * bounds[4];\n  }\n  return true;\n}\nfunction getCenter(bounds) {\n  return [0.5 * (bounds[0] + bounds[1]), 0.5 * (bounds[2] + bounds[3]), 0.5 * (bounds[4] + bounds[5])];\n}\nfunction scaleAboutCenter(bounds, sx, sy, sz) {\n  if (!isValid(bounds)) {\n    return false;\n  }\n  const center = getCenter(bounds);\n  bounds[0] -= center[0];\n  bounds[1] -= center[0];\n  bounds[2] -= center[1];\n  bounds[3] -= center[1];\n  bounds[4] -= center[2];\n  bounds[5] -= center[2];\n  scale(bounds, sx, sy, sz);\n  bounds[0] += center[0];\n  bounds[1] += center[0];\n  bounds[2] += center[1];\n  bounds[3] += center[1];\n  bounds[4] += center[2];\n  bounds[5] += center[2];\n  return true;\n}\nfunction getLength(bounds, index) {\n  return bounds[index * 2 + 1] - bounds[index * 2];\n}\nfunction getLengths(bounds) {\n  return [getLength(bounds, 0), getLength(bounds, 1), getLength(bounds, 2)];\n}\nfunction getXRange(bounds) {\n  return bounds.slice(0, 2);\n}\nfunction getYRange(bounds) {\n  return bounds.slice(2, 4);\n}\nfunction getZRange(bounds) {\n  return bounds.slice(4, 6);\n}\nfunction getMaxLength(bounds) {\n  const l = getLengths(bounds);\n  if (l[0] > l[1]) {\n    if (l[0] > l[2]) {\n      return l[0];\n    }\n    return l[2];\n  }\n  if (l[1] > l[2]) {\n    return l[1];\n  }\n  return l[2];\n}\nfunction getDiagonalLength2(bounds) {\n  if (isValid(bounds)) {\n    const l = getLengths(bounds);\n    return l[0] * l[0] + l[1] * l[1] + l[2] * l[2];\n  }\n  return null;\n}\nfunction getDiagonalLength(bounds) {\n  const lenght2 = getDiagonalLength2(bounds);\n  return lenght2 !== null ? Math.sqrt(lenght2) : null;\n}\nfunction getMinPoint(bounds) {\n  return [bounds[0], bounds[2], bounds[4]];\n}\nfunction getMaxPoint(bounds) {\n  return [bounds[1], bounds[3], bounds[5]];\n}\nfunction oppositeSign(a, b) {\n  return a <= 0 && b >= 0 || a >= 0 && b <= 0;\n}\nfunction getCorners(bounds, corners) {\n  corners[0] = [bounds[0], bounds[2], bounds[4]];\n  corners[1] = [bounds[0], bounds[2], bounds[5]];\n  corners[2] = [bounds[0], bounds[3], bounds[4]];\n  corners[3] = [bounds[0], bounds[3], bounds[5]];\n  corners[4] = [bounds[1], bounds[2], bounds[4]];\n  corners[5] = [bounds[1], bounds[2], bounds[5]];\n  corners[6] = [bounds[1], bounds[3], bounds[4]];\n  corners[7] = [bounds[1], bounds[3], bounds[5]];\n  return corners;\n}\n\n// Computes the two corners with minimal and maximal coordinates\nfunction computeCornerPoints(bounds, point1, point2) {\n  point1[0] = bounds[0];\n  point1[1] = bounds[2];\n  point1[2] = bounds[4];\n  point2[0] = bounds[1];\n  point2[1] = bounds[3];\n  point2[2] = bounds[5];\n  return point1;\n}\nfunction transformBounds(bounds, transform) {\n  let out = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  const corners = getCorners(bounds, []);\n  for (let i = 0; i < corners.length; ++i) {\n    vec3.transformMat4(corners[i], corners[i], transform);\n  }\n  reset(out);\n  return addPoints(out, corners);\n}\nfunction computeScale3(bounds) {\n  let scale3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  scale3[0] = 0.5 * (bounds[1] - bounds[0]);\n  scale3[1] = 0.5 * (bounds[3] - bounds[2]);\n  scale3[2] = 0.5 * (bounds[5] - bounds[4]);\n  return scale3;\n}\n\n/**\n * Compute local bounds.\n * Not as fast as vtkPoints.getBounds() if u, v, w form a natural basis.\n * @param {vtkPoints} points\n * @param {array} u first vector\n * @param {array} v second vector\n * @param {array} w third vector\n */\nfunction computeLocalBounds(points, u, v, w) {\n  const bounds = [].concat(INIT_BOUNDS);\n  const pointsData = points.getData();\n  for (let i = 0; i < pointsData.length; i += 3) {\n    const point = [pointsData[i], pointsData[i + 1], pointsData[i + 2]];\n    const du = dot(point, u);\n    bounds[0] = Math.min(du, bounds[0]);\n    bounds[1] = Math.max(du, bounds[1]);\n    const dv = dot(point, v);\n    bounds[2] = Math.min(dv, bounds[2]);\n    bounds[3] = Math.max(dv, bounds[3]);\n    const dw = dot(point, w);\n    bounds[4] = Math.min(dw, bounds[4]);\n    bounds[5] = Math.max(dw, bounds[5]);\n  }\n  return bounds;\n}\n\n// The method returns a non-zero value if the bounding box is hit.\n// Origin[3] starts the ray, dir[3] is the vector components of the ray in the x-y-z\n// directions, coord[3] is the location of hit, and t is the parametric\n// coordinate along line. (Notes: the intersection ray dir[3] is NOT\n// normalized.  Valid intersections will only occur between 0<=t<=1.)\nfunction intersectBox(bounds, origin, dir, coord, tolerance) {\n  let inside = true;\n  const quadrant = [];\n  let whichPlane = 0;\n  const maxT = [];\n  const candidatePlane = [0.0, 0.0, 0.0];\n  const RIGHT = 0;\n  const LEFT = 1;\n  const MIDDLE = 2;\n\n  // First find closest planes\n  for (let i = 0; i < 3; i++) {\n    if (origin[i] < bounds[2 * i]) {\n      quadrant[i] = LEFT;\n      candidatePlane[i] = bounds[2 * i];\n      inside = false;\n    } else if (origin[i] > bounds[2 * i + 1]) {\n      quadrant[i] = RIGHT;\n      candidatePlane[i] = bounds[2 * i + 1];\n      inside = false;\n    } else {\n      quadrant[i] = MIDDLE;\n    }\n  }\n\n  // Check whether origin of ray is inside bbox\n  if (inside) {\n    coord[0] = origin[0];\n    coord[1] = origin[1];\n    coord[2] = origin[2];\n    tolerance[0] = 0;\n    return 1;\n  }\n\n  // Calculate parametric distance to plane\n  for (let i = 0; i < 3; i++) {\n    if (quadrant[i] !== MIDDLE && dir[i] !== 0.0) {\n      maxT[i] = (candidatePlane[i] - origin[i]) / dir[i];\n    } else {\n      maxT[i] = -1.0;\n    }\n  }\n\n  // Find the largest parametric value of intersection\n  for (let i = 0; i < 3; i++) {\n    if (maxT[whichPlane] < maxT[i]) {\n      whichPlane = i;\n    }\n  }\n\n  // Check for value intersection along line\n  if (maxT[whichPlane] > 1.0 || maxT[whichPlane] < 0.0) {\n    return 0;\n  }\n  tolerance[0] = maxT[whichPlane];\n\n  // Intersection point along line is okay. Check bbox.\n  for (let i = 0; i < 3; i++) {\n    if (whichPlane !== i) {\n      coord[i] = origin[i] + maxT[whichPlane] * dir[i];\n      if (coord[i] < bounds[2 * i] || coord[i] > bounds[2 * i + 1]) {\n        return 0;\n      }\n    } else {\n      coord[i] = candidatePlane[i];\n    }\n  }\n  return 1;\n}\n\n// Plane intersection with box\n// The plane is infinite in extent and defined by an origin and normal.The function indicates\n// whether the plane intersects, not the particulars of intersection points and such\n// The function returns non-zero if the plane and box intersect; zero otherwise.\nfunction intersectPlane(bounds, origin, normal) {\n  const p = [];\n  let d = 0;\n  let sign = 1;\n  let firstOne = 1;\n\n  // Evaluate the eight points. If there is a sign change, there is an intersection\n  for (let z = 4; z <= 5; ++z) {\n    p[2] = bounds[z];\n    for (let y = 2; y <= 3; ++y) {\n      p[1] = bounds[y];\n      for (let x = 0; x <= 1; ++x) {\n        p[0] = bounds[x];\n        d = vtkPlane.evaluate(normal, origin, p);\n        if (firstOne) {\n          sign = d >= 0 ? 1 : -1;\n          firstOne = 0;\n        }\n        if (d === 0.0 || sign > 0 && d < 0.0 || sign < 0 && d > 0.0) {\n          return 1;\n        }\n      }\n    }\n  }\n  return 0; // no intersection\n}\n\nfunction intersect(bounds, bBounds) {\n  if (!(isValid(bounds) && isValid(bBounds))) {\n    return false;\n  }\n  const newBounds = [0, 0, 0, 0, 0, 0];\n  let intersection;\n  for (let i = 0; i < 3; i++) {\n    intersection = false;\n    if (bBounds[i * 2] >= bounds[i * 2] && bBounds[i * 2] <= bounds[i * 2 + 1]) {\n      intersection = true;\n      newBounds[i * 2] = bBounds[i * 2];\n    } else if (bounds[i * 2] >= bBounds[i * 2] && bounds[i * 2] <= bBounds[i * 2 + 1]) {\n      intersection = true;\n      newBounds[i * 2] = bounds[i * 2];\n    }\n    if (bBounds[i * 2 + 1] >= bounds[i * 2] && bBounds[i * 2 + 1] <= bounds[i * 2 + 1]) {\n      intersection = true;\n      newBounds[i * 2 + 1] = bBounds[2 * i + 1];\n    } else if (bounds[i * 2 + 1] >= bBounds[i * 2] && bounds[i * 2 + 1] <= bBounds[i * 2 + 1]) {\n      intersection = true;\n      newBounds[i * 2 + 1] = bounds[i * 2 + 1];\n    }\n    if (!intersection) {\n      return false;\n    }\n  }\n\n  // OK they did intersect - set the box to be the result\n  bounds[0] = newBounds[0];\n  bounds[1] = newBounds[1];\n  bounds[2] = newBounds[2];\n  bounds[3] = newBounds[3];\n  bounds[4] = newBounds[4];\n  bounds[5] = newBounds[5];\n  return true;\n}\nfunction intersects(bounds, bBounds) {\n  if (!(isValid(bounds) && isValid(bBounds))) {\n    return false;\n  }\n  /* eslint-disable no-continue */\n  for (let i = 0; i < 3; i++) {\n    if (bBounds[i * 2] >= bounds[i * 2] && bBounds[i * 2] <= bounds[i * 2 + 1]) {\n      continue;\n    } else if (bounds[i * 2] >= bBounds[i * 2] && bounds[i * 2] <= bBounds[i * 2 + 1]) {\n      continue;\n    }\n    if (bBounds[i * 2 + 1] >= bounds[i * 2] && bBounds[i * 2 + 1] <= bounds[i * 2 + 1]) {\n      continue;\n    } else if (bounds[i * 2 + 1] >= bBounds[i * 2] && bounds[i * 2 + 1] <= bBounds[i * 2 + 1]) {\n      continue;\n    }\n    return false;\n  }\n  /* eslint-enable no-continue */\n\n  return true;\n}\nfunction containsPoint(bounds, x, y, z) {\n  if (x < bounds[0] || x > bounds[1]) {\n    return false;\n  }\n  if (y < bounds[2] || y > bounds[3]) {\n    return false;\n  }\n  if (z < bounds[4] || z > bounds[5]) {\n    return false;\n  }\n  return true;\n}\nfunction contains(bounds, otherBounds) {\n  // if either box is not valid or they don't intersect\n  if (!intersects(bounds, otherBounds)) {\n    return false;\n  }\n  if (!containsPoint(bounds, ...getMinPoint(otherBounds))) {\n    return false;\n  }\n  if (!containsPoint(bounds, ...getMaxPoint(otherBounds))) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Returns true if plane intersects bounding box.\n * If so, the box is cut by the plane\n * @param {array} origin\n * @param {array} normal\n */\nfunction cutWithPlane(bounds, origin, normal) {\n  // Index[0..2] represents the order of traversing the corners of a cube\n  // in (x,y,z), (y,x,z) and (z,x,y) ordering, respectively\n  const index = [[0, 1, 2, 3, 4, 5, 6, 7], [0, 1, 4, 5, 2, 3, 6, 7], [0, 2, 4, 6, 1, 3, 5, 7]];\n\n  // stores the signed distance to a plane\n  const d = [0, 0, 0, 0, 0, 0, 0, 0];\n  let idx = 0;\n  for (let ix = 0; ix < 2; ix++) {\n    for (let iy = 2; iy < 4; iy++) {\n      for (let iz = 4; iz < 6; iz++) {\n        const x = [bounds[ix], bounds[iy], bounds[iz]];\n        d[idx++] = vtkPlane.evaluate(normal, origin, x);\n      }\n    }\n  }\n  let dir = 2;\n  while (dir--) {\n    // in each direction, we test if the vertices of two orthogonal faces\n    // are on either side of the plane\n    if (oppositeSign(d[index[dir][0]], d[index[dir][4]]) && oppositeSign(d[index[dir][1]], d[index[dir][5]]) && oppositeSign(d[index[dir][2]], d[index[dir][6]]) && oppositeSign(d[index[dir][3]], d[index[dir][7]])) {\n      break;\n    }\n  }\n  if (dir < 0) {\n    return false;\n  }\n  const sign = Math.sign(normal[dir]);\n  const size = Math.abs((bounds[dir * 2 + 1] - bounds[dir * 2]) * normal[dir]);\n  let t = sign > 0 ? 1 : 0;\n  /* eslint-disable no-continue */\n  for (let i = 0; i < 4; i++) {\n    if (size === 0) {\n      continue; // shouldn't happen\n    }\n\n    const ti = Math.abs(d[index[dir][i]]) / size;\n    if (sign > 0 && ti < t) {\n      t = ti;\n    }\n    if (sign < 0 && ti > t) {\n      t = ti;\n    }\n  }\n  /* eslint-enable no-continue */\n  const bound = (1.0 - t) * bounds[dir * 2] + t * bounds[dir * 2 + 1];\n  if (sign > 0) {\n    bounds[dir * 2] = bound;\n  } else {\n    bounds[dir * 2 + 1] = bound;\n  }\n  return true;\n}\n\n/**\n * Clamp the divisions to ensure the total number doesn't exceed targetBins\n * @param {Number} targetBins - Maximum number of bins allowed\n * @param {Array} divs - Divisions array to adjust [divX, divY, divZ]\n */\nfunction clampDivisions(targetBins, divs) {\n  for (let i = 0; i < 3; ++i) {\n    divs[i] = divs[i] < 1 ? 1 : divs[i];\n  }\n  let numBins = divs[0] * divs[1] * divs[2];\n  while (numBins > targetBins) {\n    for (let i = 0; i < 3; ++i) {\n      divs[i] = divs[i] > 1 ? divs[i] - 1 : 1;\n    }\n    numBins = divs[0] * divs[1] * divs[2];\n  }\n}\n\n/**\n * Compute the number of divisions given the current bounding box and a\n * target number of buckets/bins. Handles degenerate bounding boxes properly.\n * @param {Bounds} bounds - The bounding box\n * @param {Number} totalBins - Target number of bins\n * @param {Array} divs - Output array to store divisions [divX, divY, divZ]\n * @param {Array} [adjustedBounds] - Output array to store adjusted bounds if needed\n * @returns {Number} The actual total number of bins\n */\nfunction computeDivisions(bounds, totalBins, divs) {\n  let adjustedBounds = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  // This will always produce at least one bin\n  // eslint-disable-next-line no-param-reassign\n  totalBins = totalBins <= 0 ? 1 : totalBins;\n\n  // First determine the maximum length of the side of the bounds. Keep track\n  // of zero width sides of the bounding box.\n  let numNonZero = 0;\n  const nonZero = [0, 0, 0];\n  let maxIdx = -1;\n  let max = 0.0;\n  const lengths = getLengths(bounds);\n\n  // Use a finite tolerance when detecting zero width sides\n  const totLen = lengths[0] + lengths[1] + lengths[2];\n  const zeroDetectionTolerance = totLen * (0.001 / 3.0);\n  for (let i = 0; i < 3; ++i) {\n    if (lengths[i] > max) {\n      maxIdx = i;\n      max = lengths[i];\n    }\n    if (lengths[i] > zeroDetectionTolerance) {\n      nonZero[i] = 1;\n      numNonZero++;\n    } else {\n      nonZero[i] = 0;\n    }\n  }\n\n  // Get min and max points\n  const minPoint = getMinPoint(bounds);\n  const maxPoint = getMaxPoint(bounds);\n\n  // If the bounding box is degenerate, then one bin of arbitrary size\n  if (numNonZero < 1) {\n    divs[0] = 1;\n    divs[1] = 1;\n    divs[2] = 1;\n    adjustedBounds[0] = minPoint[0] - 0.5;\n    adjustedBounds[1] = maxPoint[0] + 0.5;\n    adjustedBounds[2] = minPoint[1] - 0.5;\n    adjustedBounds[3] = maxPoint[1] + 0.5;\n    adjustedBounds[4] = minPoint[2] - 0.5;\n    adjustedBounds[5] = maxPoint[2] + 0.5;\n    return 1;\n  }\n\n  // Compute the divisions roughly in proportion to the bounding box edge lengths\n  let f = totalBins;\n  f /= nonZero[0] ? lengths[0] / totLen : 1.0;\n  f /= nonZero[1] ? lengths[1] / totLen : 1.0;\n  f /= nonZero[2] ? lengths[2] / totLen : 1.0;\n  f **= 1.0 / numNonZero;\n  for (let i = 0; i < 3; ++i) {\n    divs[i] = nonZero[i] ? Math.floor(f * lengths[i] / totLen) : 1;\n    divs[i] = divs[i] < 1 ? 1 : divs[i];\n  }\n\n  // Make sure that we do not exceed the totalBins\n  clampDivisions(totalBins, divs);\n\n  // Now compute the final bounds, making sure it is a non-zero volume\n  const delta = 0.5 * lengths[maxIdx] / divs[maxIdx];\n  for (let i = 0; i < 3; ++i) {\n    if (nonZero[i]) {\n      adjustedBounds[2 * i] = minPoint[i];\n      adjustedBounds[2 * i + 1] = maxPoint[i];\n    } else {\n      adjustedBounds[2 * i] = minPoint[i] - delta;\n      adjustedBounds[2 * i + 1] = maxPoint[i] + delta;\n    }\n  }\n  return divs[0] * divs[1] * divs[2];\n}\n\n/**\n * Calculate the squared distance from point x to the specified bounds.\n * @param {Vector3} x  The point coordinates\n * @param {Bounds} bounds  The bounding box coordinates\n * @returns {Number} The squared distance to the bounds\n */\nfunction distance2ToBounds(x, bounds) {\n  // Are we within the bounds?\n  if (x[0] >= bounds[0] && x[0] <= bounds[1] && x[1] >= bounds[2] && x[1] <= bounds[3] && x[2] >= bounds[4] && x[2] <= bounds[5]) {\n    return 0.0;\n  }\n  const deltas = [0.0, 0.0, 0.0];\n\n  // dx\n  if (x[0] < bounds[0]) {\n    deltas[0] = bounds[0] - x[0];\n  } else if (x[0] > bounds[1]) {\n    deltas[0] = x[0] - bounds[1];\n  }\n\n  // dy\n  if (x[1] < bounds[2]) {\n    deltas[1] = bounds[2] - x[1];\n  } else if (x[1] > bounds[3]) {\n    deltas[1] = x[1] - bounds[3];\n  }\n\n  // dz\n  if (x[2] < bounds[4]) {\n    deltas[2] = bounds[4] - x[2];\n  } else if (x[2] > bounds[5]) {\n    deltas[2] = x[2] - bounds[5];\n  }\n  return dot(deltas, deltas);\n}\n\n// ----------------------------------------------------------------------------\n// Light Weight class\n// ----------------------------------------------------------------------------\n\nclass BoundingBox {\n  constructor(refBounds) {\n    this.bounds = refBounds;\n    if (!this.bounds) {\n      this.bounds = new Float64Array(INIT_BOUNDS);\n    }\n  }\n  getBounds() {\n    return this.bounds;\n  }\n  equals(otherBounds) {\n    return equals(this.bounds, otherBounds);\n  }\n  isValid() {\n    return isValid(this.bounds);\n  }\n  setBounds(otherBounds) {\n    return setBounds(this.bounds, otherBounds);\n  }\n  reset() {\n    return reset(this.bounds);\n  }\n  addPoint() {\n    for (var _len = arguments.length, xyz = new Array(_len), _key = 0; _key < _len; _key++) {\n      xyz[_key] = arguments[_key];\n    }\n    return addPoint(this.bounds, ...xyz);\n  }\n  addPoints(points) {\n    return addPoints(this.bounds, points);\n  }\n  addBounds(xMin, xMax, yMin, yMax, zMin, zMax) {\n    return addBounds(this.bounds, xMin, xMax, yMin, yMax, zMin, zMax);\n  }\n  setMinPoint(x, y, z) {\n    return setMinPoint(this.bounds, x, y, z);\n  }\n  setMaxPoint(x, y, z) {\n    return setMaxPoint(this.bounds, x, y, z);\n  }\n  inflate(delta) {\n    return inflate(this.bounds, delta);\n  }\n  scale(sx, sy, sz) {\n    return scale(this.bounds, sx, sy, sz);\n  }\n  getCenter() {\n    return getCenter(this.bounds);\n  }\n  getLength(index) {\n    return getLength(this.bounds, index);\n  }\n  getLengths() {\n    return getLengths(this.bounds);\n  }\n  getMaxLength() {\n    return getMaxLength(this.bounds);\n  }\n  getDiagonalLength() {\n    return getDiagonalLength(this.bounds);\n  }\n  getDiagonalLength2() {\n    return getDiagonalLength2(this.bounds);\n  }\n  getMinPoint() {\n    return getMinPoint(this.bounds);\n  }\n  getMaxPoint() {\n    return getMaxPoint(this.bounds);\n  }\n  getXRange() {\n    return getXRange(this.bounds);\n  }\n  getYRange() {\n    return getYRange(this.bounds);\n  }\n  getZRange() {\n    return getZRange(this.bounds);\n  }\n  getCorners(corners) {\n    return getCorners(this.bounds, corners);\n  }\n  computeCornerPoints(point1, point2) {\n    return computeCornerPoints(this.bounds, point1, point2);\n  }\n  computeLocalBounds(u, v, w) {\n    return computeLocalBounds(this.bounds, u, v, w);\n  }\n  transformBounds(transform) {\n    let out = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    return transformBounds(this.bounds, transform, out);\n  }\n  computeScale3(scale3) {\n    return computeScale3(this.bounds, scale3);\n  }\n  cutWithPlane(origin, normal) {\n    return cutWithPlane(this.bounds, origin, normal);\n  }\n  intersectBox(origin, dir, coord, tolerance) {\n    return intersectBox(this.bounds, origin, dir, coord, tolerance);\n  }\n  intersectPlane(origin, normal) {\n    return intersectPlane(this.bounds, origin, normal);\n  }\n  intersect(otherBounds) {\n    return intersect(this.bounds, otherBounds);\n  }\n  intersects(otherBounds) {\n    return intersects(this.bounds, otherBounds);\n  }\n  containsPoint(x, y, z) {\n    return containsPoint(this.bounds, x, y, z);\n  }\n  contains(otherBounds) {\n    return intersects(this.bounds, otherBounds);\n  }\n  computeDivisions(totalBins, divs) {\n    let adjustedBounds = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    return computeDivisions(this.bounds, totalBins, divs, adjustedBounds);\n  }\n  distance2ToBounds(x) {\n    return distance2ToBounds(x, this.bounds);\n  }\n}\nfunction newInstance(initialValues) {\n  const bounds = initialValues && initialValues.bounds;\n  return new BoundingBox(bounds);\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  equals,\n  isValid,\n  setBounds,\n  reset,\n  addPoint,\n  addPoints,\n  addBounds,\n  setMinPoint,\n  setMaxPoint,\n  inflate,\n  scale,\n  scaleAboutCenter,\n  getCenter,\n  getLength,\n  getLengths,\n  getMaxLength,\n  getDiagonalLength,\n  getDiagonalLength2,\n  getMinPoint,\n  getMaxPoint,\n  getXRange,\n  getYRange,\n  getZRange,\n  getCorners,\n  computeCornerPoints,\n  computeLocalBounds,\n  transformBounds,\n  computeScale3,\n  cutWithPlane,\n  intersectBox,\n  intersectPlane,\n  intersect,\n  intersects,\n  containsPoint,\n  contains,\n  computeDivisions,\n  clampDivisions,\n  distance2ToBounds,\n  INIT_BOUNDS\n};\nvar vtkBoundingBox = {\n  newInstance,\n  ...STATIC\n};\n\nexport { STATIC, addBounds, addPoint, addPoints, clampDivisions, computeCornerPoints, computeDivisions, computeLocalBounds, computeScale3, contains, containsPoint, cutWithPlane, vtkBoundingBox as default, distance2ToBounds, equals, getCenter, getCorners, getDiagonalLength, getDiagonalLength2, getLength, getLengths, getMaxLength, getMaxPoint, getMinPoint, getXRange, getYRange, getZRange, intersect, intersectBox, intersectPlane, intersects, isValid, reset, scale, scaleAboutCenter, setBounds, setMaxPoint, setMinPoint, transformBounds };\n", "const CoordinateSystem = {\n  DISPLAY: 0,\n  WORLD: 1\n};\nvar Constants = {\n  CoordinateSystem\n};\n\nexport { CoordinateSystem, Constants as default };\n", "import { m as macro } from '../../macros2.js';\nimport Constants from './Prop/Constants.js';\n\nconst {\n  CoordinateSystem\n} = Constants;\nfunction notImplemented(method) {\n  return () => macro.vtkErrorMacro(`vtkProp::${method} - NOT IMPLEMENTED`);\n}\n\n// ----------------------------------------------------------------------------\n// vtkProp methods\n// ----------------------------------------------------------------------------\n\nfunction vtkProp(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkProp');\n  publicAPI.getMTime = () => {\n    let m1 = model.mtime;\n    for (let index = 0; index < model.textures.length; ++index) {\n      const m2 = model.textures[index].getMTime();\n      if (m2 > m1) {\n        m1 = m2;\n      }\n    }\n    return m1;\n  };\n  publicAPI.processSelectorPixelBuffers = (selector, pixeloffsets) => {};\n  publicAPI.getNestedProps = () => null;\n  publicAPI.getActors = () => [];\n  publicAPI.getActors2D = () => [];\n  publicAPI.getVolumes = () => [];\n  publicAPI.pick = notImplemented('pick');\n  publicAPI.hasKey = notImplemented('hasKey');\n  publicAPI.getNestedVisibility = () => model.visibility && (!model._parentProp || model._parentProp.getNestedVisibility());\n  publicAPI.getNestedPickable = () => model.pickable && (!model._parentProp || model._parentProp.getNestedPickable());\n  publicAPI.getNestedDragable = () => model.dragable && (!model._parentProp || model._parentProp.getNestedDragable());\n  publicAPI.getRedrawMTime = () => model.mtime;\n  publicAPI.setEstimatedRenderTime = t => {\n    model.estimatedRenderTime = t;\n    model.savedEstimatedRenderTime = t;\n  };\n  publicAPI.restoreEstimatedRenderTime = () => {\n    model.estimatedRenderTime = model.savedEstimatedRenderTime;\n  };\n  publicAPI.addEstimatedRenderTime = t => {\n    model.estimatedRenderTime += t;\n  };\n  publicAPI.setAllocatedRenderTime = t => {\n    model.allocatedRenderTime = t;\n    model.savedEstimatedRenderTime = model.estimatedRenderTime;\n    model.estimatedRenderTime = 0;\n  };\n  publicAPI.getSupportsSelection = () => false;\n  publicAPI.getTextures = () => model.textures;\n  publicAPI.hasTexture = texture => model.textures.indexOf(texture) !== -1;\n  publicAPI.addTexture = texture => {\n    if (texture && !publicAPI.hasTexture(texture)) {\n      model.textures = model.textures.concat(texture);\n      publicAPI.modified();\n    }\n  };\n  publicAPI.removeTexture = texture => {\n    const newTextureList = model.textures.filter(item => item !== texture);\n    if (model.textures.length !== newTextureList.length) {\n      model.textures = newTextureList;\n      publicAPI.modified();\n    }\n  };\n  publicAPI.removeAllTextures = () => {\n    model.textures = [];\n    publicAPI.modified();\n  };\n\n  // not all mappers support all coordinate systems\n  publicAPI.setCoordinateSystemToWorld = () => publicAPI.setCoordinateSystem(CoordinateSystem.WORLD);\n  publicAPI.setCoordinateSystemToDisplay = () => publicAPI.setCoordinateSystem(CoordinateSystem.DISPLAY);\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // _parentProp: null,\n  allocatedRenderTime: 10,\n  coordinateSystem: CoordinateSystem.WORLD,\n  dragable: true,\n  estimatedRenderTime: 0,\n  paths: null,\n  pickable: true,\n  renderTimeMultiplier: 1,\n  savedEstimatedRenderTime: 0,\n  textures: [],\n  useBounds: true,\n  visibility: true\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['estimatedRenderTime', 'allocatedRenderTime']);\n  macro.setGet(publicAPI, model, ['_parentProp', 'coordinateSystem', 'dragable', 'pickable', 'renderTimeMultiplier', 'useBounds', 'visibility']);\n  macro.moveToProtected(publicAPI, model, ['parentProp']);\n\n  // Object methods\n  vtkProp(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkProp');\n\n// ----------------------------------------------------------------------------\n\nvar vtkProp$1 = {\n  newInstance,\n  extend,\n  ...Constants\n};\n\nexport { vtkProp$1 as default, extend, newInstance };\n", "import { mat4, quat } from 'gl-matrix';\nimport { m as macro } from '../../macros2.js';\nimport vtkBoundingBox from '../../Common/DataModel/BoundingBox.js';\nimport { B as degreesFromRadians, r as radiansFromDegrees, a as areMatricesEqual } from '../../Common/Core/Math/index.js';\nimport vtkProp from './Prop.js';\n\nconst VTK_EPSILON = 1e-6;\n\n// ----------------------------------------------------------------------------\n// vtkProp3D methods\n// ----------------------------------------------------------------------------\n\nfunction vtkProp3D(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkProp3D');\n  publicAPI.addPosition = deltaXYZ => {\n    model.position = model.position.map((value, index) => value + deltaXYZ[index]);\n    publicAPI.modified();\n  };\n  publicAPI.getOrientationWXYZ = () => {\n    const q = quat.create();\n    mat4.getRotation(q, model.rotation);\n    const oaxis = new Float64Array(3);\n    const w = quat.getAxisAngle(oaxis, q);\n    return [degreesFromRadians(w), oaxis[0], oaxis[1], oaxis[2]];\n  };\n  publicAPI.getOrientationQuaternion = function () {\n    let out = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    return mat4.getRotation(out, model.rotation);\n  };\n  publicAPI.rotateX = val => {\n    if (val === 0.0) {\n      return;\n    }\n    mat4.rotateX(model.rotation, model.rotation, radiansFromDegrees(val));\n    publicAPI.modified();\n  };\n  publicAPI.rotateY = val => {\n    if (val === 0.0) {\n      return;\n    }\n    mat4.rotateY(model.rotation, model.rotation, radiansFromDegrees(val));\n    publicAPI.modified();\n  };\n  publicAPI.rotateZ = val => {\n    if (val === 0.0) {\n      return;\n    }\n    mat4.rotateZ(model.rotation, model.rotation, radiansFromDegrees(val));\n    publicAPI.modified();\n  };\n  publicAPI.rotateWXYZ = (degrees, x, y, z) => {\n    if (degrees === 0.0 || x === 0.0 && y === 0.0 && z === 0.0) {\n      return;\n    }\n\n    // convert to radians\n    const angle = radiansFromDegrees(degrees);\n    const q = quat.create();\n    quat.setAxisAngle(q, [x, y, z], angle);\n    const quatMat = new Float64Array(16);\n    mat4.fromQuat(quatMat, q);\n    mat4.multiply(model.rotation, model.rotation, quatMat);\n    publicAPI.modified();\n  };\n  publicAPI.rotateQuaternion = orientationQuaternion => {\n    if (Math.abs(orientationQuaternion[3]) >= 1 - VTK_EPSILON) {\n      return;\n    }\n    const oriQuatMat = mat4.fromQuat(new Float64Array(16), orientationQuaternion);\n    mat4.multiply(model.rotation, model.rotation, oriQuatMat);\n    publicAPI.modified();\n  };\n  publicAPI.setOrientation = (x, y, z) => {\n    if (x === model.orientation[0] && y === model.orientation[1] && z === model.orientation[2]) {\n      return false;\n    }\n    model.orientation = [x, y, z];\n    mat4.identity(model.rotation);\n    publicAPI.rotateZ(z);\n    publicAPI.rotateX(x);\n    publicAPI.rotateY(y);\n    publicAPI.modified();\n    return true;\n  };\n  publicAPI.setOrientationFromQuaternion = q => {\n    const rotation = mat4.create();\n    mat4.fromQuat(rotation, q);\n    if (!areMatricesEqual(rotation, model.rotation)) {\n      model.rotation = rotation;\n      publicAPI.modified();\n      return true;\n    }\n    return false;\n  };\n  publicAPI.setUserMatrix = matrix => {\n    if (areMatricesEqual(model.userMatrix, matrix)) {\n      return false;\n    }\n    mat4.copy(model.userMatrix, matrix);\n    publicAPI.modified();\n    return true;\n  };\n  publicAPI.getMatrix = () => {\n    publicAPI.computeMatrix();\n    return model.matrix;\n  };\n  publicAPI.computeMatrix = () => {\n    // check whether or not need to rebuild the matrix\n    if (publicAPI.getMTime() > model.matrixMTime.getMTime()) {\n      mat4.identity(model.matrix);\n      if (model.userMatrix) {\n        mat4.multiply(model.matrix, model.matrix, model.userMatrix);\n      }\n      mat4.translate(model.matrix, model.matrix, model.origin);\n      mat4.translate(model.matrix, model.matrix, model.position);\n      mat4.multiply(model.matrix, model.matrix, model.rotation);\n      mat4.scale(model.matrix, model.matrix, model.scale);\n      mat4.translate(model.matrix, model.matrix, [-model.origin[0], -model.origin[1], -model.origin[2]]);\n      mat4.transpose(model.matrix, model.matrix);\n\n      // check for identity\n      model.isIdentity = true;\n      for (let i = 0; i < 4; ++i) {\n        for (let j = 0; j < 4; ++j) {\n          if ((i === j ? 1.0 : 0.0) !== model.matrix[i + j * 4]) {\n            model.isIdentity = false;\n          }\n        }\n      }\n      model.matrixMTime.modified();\n    }\n  };\n  publicAPI.getBoundsByReference = () => {\n    if (model.mapper === null) {\n      return model.bounds;\n    }\n\n    // Check for the special case when the mapper's bounds are unknown\n    const bds = model.mapper.getBounds();\n    if (!bds || bds.length !== 6) {\n      return bds;\n    }\n\n    // Check for the special case when the actor is empty.\n    if (bds[0] > bds[1]) {\n      // No need to copy bds, a new array is created when calling getBounds()\n      model.mapperBounds = bds;\n      model.bounds = [...vtkBoundingBox.INIT_BOUNDS];\n      model.boundsMTime.modified();\n      return bds;\n    }\n\n    // Check if we have cached values for these bounds - we cache the\n    // values returned by model.mapper.getBounds() and we store the time\n    // of caching. If the values returned this time are different, or\n    // the modified time of this class is newer than the cached time,\n    // then we need to rebuild.\n    if (!model.mapperBounds || !bds.every((_, i) => bds[i] === model.mapperBounds[i]) || publicAPI.getMTime() > model.boundsMTime.getMTime()) {\n      macro.vtkDebugMacro('Recomputing bounds...');\n      // No need to copy bds, a new array is created when calling getBounds()\n      model.mapperBounds = bds;\n\n      // Compute actor bounds from matrix and mapper bounds\n      publicAPI.computeMatrix();\n      const transposedMatrix = new Float64Array(16);\n      mat4.transpose(transposedMatrix, model.matrix);\n      vtkBoundingBox.transformBounds(bds, transposedMatrix, model.bounds);\n      model.boundsMTime.modified();\n    }\n    return model.bounds;\n  };\n  publicAPI.getBounds = () => {\n    const bounds = publicAPI.getBoundsByReference();\n    // Handle case when bounds are not iterable (for example null or undefined)\n    try {\n      return [...bounds];\n    } catch {\n      return bounds;\n    }\n  };\n  publicAPI.getCenter = () => vtkBoundingBox.getCenter(model.bounds);\n  publicAPI.getLength = () => vtkBoundingBox.getLength(model.bounds);\n  publicAPI.getXRange = () => vtkBoundingBox.getXRange(model.bounds);\n  publicAPI.getYRange = () => vtkBoundingBox.getYRange(model.bounds);\n  publicAPI.getZRange = () => vtkBoundingBox.getZRange(model.bounds);\n  publicAPI.getUserMatrix = () => model.userMatrix;\n  function updateIdentityFlag() {\n    publicAPI.computeMatrix();\n  }\n  publicAPI.onModified(updateIdentityFlag);\n  publicAPI.getProperty = function () {\n    let mapperInputPort = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (model.properties[mapperInputPort] == null) {\n      model.properties[mapperInputPort] = publicAPI.makeProperty?.();\n    }\n    return model.properties[mapperInputPort];\n  };\n  publicAPI.getProperties = () => {\n    if (model.properties.length === 0) {\n      model.properties[0] = publicAPI.makeProperty?.();\n    }\n    return model.properties;\n  };\n  publicAPI.setProperty = (firstArg, secondArg) => {\n    // Two options for argument layout:\n    // - (mapperInputPort, property)\n    // - (property)\n    const useInputPortArgument = Number.isInteger(firstArg);\n    const [mapperInputPort, property] = useInputPortArgument ? [firstArg, secondArg] : [0, firstArg];\n    if (model.properties[mapperInputPort] === property) {\n      return false;\n    }\n    model.properties[mapperInputPort] = property;\n    return true;\n  };\n  publicAPI.getMTime = () => {\n    let mt = model.mtime;\n    model.properties.forEach(property => {\n      if (property !== null) {\n        const time = property.getMTime();\n        mt = time > mt ? time : mt;\n      }\n    });\n    return mt;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  origin: [0, 0, 0],\n  position: [0, 0, 0],\n  orientation: [0, 0, 0],\n  rotation: null,\n  scale: [1, 1, 1],\n  bounds: [...vtkBoundingBox.INIT_BOUNDS],\n  properties: [],\n  userMatrix: null,\n  userMatrixMTime: null,\n  cachedProp3D: null,\n  isIdentity: true,\n  matrixMTime: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkProp.extend(publicAPI, model, initialValues);\n  model.matrixMTime = {};\n  macro.obj(model.matrixMTime);\n\n  // Build VTK API\n  macro.get(publicAPI, model, ['isIdentity']);\n  macro.getArray(publicAPI, model, ['orientation']);\n  macro.setGetArray(publicAPI, model, ['origin', 'position', 'scale'], 3);\n  macro.setGet(publicAPI, model, ['properties']);\n\n  // Object internal instance\n  model.matrix = mat4.identity(new Float64Array(16));\n  model.rotation = mat4.identity(new Float64Array(16));\n  model.userMatrix = mat4.identity(new Float64Array(16));\n  model.transform = null; // FIXME\n\n  // Object methods\n  vtkProp3D(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkProp3D');\n\n// ----------------------------------------------------------------------------\n\nvar vtkProp3D$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkProp3D$1 as default, extend, newInstance };\n", "const Shading = {\n  FLAT: 0,\n  GOURAUD: 1,\n  PHONG: 2\n};\nconst Representation = {\n  POINTS: 0,\n  WIREFRAME: 1,\n  SURFACE: 2\n};\nconst Interpolation = Shading;\nvar PropertyConst = {\n  Shading,\n  Representation,\n  Interpolation\n};\n\nexport { Interpolation, Representation, Shading, PropertyConst as default };\n", "import { m as macro } from '../../macros2.js';\nimport PropertyConst from './Property/Constants.js';\n\nconst {\n  Representation,\n  Interpolation\n} = PropertyConst;\nfunction notImplemented(method) {\n  return () => macro.vtkErrorMacro(`vtkProperty::${method} - NOT IMPLEMENTED`);\n}\n\n// ----------------------------------------------------------------------------\n// vtkProperty methods\n// ----------------------------------------------------------------------------\n\nfunction vtkProperty(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkProperty');\n  publicAPI.setColor = (r, g, b) => {\n    if (Array.isArray(r)) {\n      if (model.color[0] !== r[0] || model.color[1] !== r[1] || model.color[2] !== r[2]) {\n        model.color[0] = r[0];\n        model.color[1] = r[1];\n        model.color[2] = r[2];\n        publicAPI.modified();\n      }\n    } else if (model.color[0] !== r || model.color[1] !== g || model.color[2] !== b) {\n      model.color[0] = r;\n      model.color[1] = g;\n      model.color[2] = b;\n      publicAPI.modified();\n    }\n    publicAPI.setDiffuseColor(model.color);\n    publicAPI.setAmbientColor(model.color);\n    publicAPI.setSpecularColor(model.color);\n  };\n  publicAPI.computeCompositeColor = notImplemented('ComputeCompositeColor');\n  publicAPI.getColor = () => {\n    // Inline computeCompositeColor\n    let norm = 0.0;\n    if (model.ambient + model.diffuse + model.specular > 0) {\n      norm = 1.0 / (model.ambient + model.diffuse + model.specular);\n    }\n    for (let i = 0; i < 3; i++) {\n      model.color[i] = norm * (model.ambient * model.ambientColor[i] + model.diffuse * model.diffuseColor[i] + model.specular * model.specularColor[i]);\n    }\n    return [].concat(model.color);\n  };\n  publicAPI.setSpecularPower = specularPower => {\n    const roughness = 1 / Math.max(1.0, specularPower);\n    if (model.roughness !== roughness || model.specularPower !== specularPower) {\n      model.specularPower = specularPower; // Specular power still needs to be set as long as webgl is using it (otherwise testShaderReplacementsClear fails)\n      model.roughness = roughness;\n      publicAPI.modified();\n    }\n  };\n  publicAPI.addShaderVariable = notImplemented('AddShaderVariable');\n  publicAPI.setInterpolationToFlat = () => publicAPI.setInterpolation(Interpolation.FLAT);\n  publicAPI.setInterpolationToGouraud = () => publicAPI.setInterpolation(Interpolation.GOURAUD);\n  publicAPI.setInterpolationToPhong = () => publicAPI.setInterpolation(Interpolation.PHONG);\n  publicAPI.getInterpolationAsString = () => macro.enumToString(Interpolation, model.interpolation);\n  publicAPI.setRepresentationToWireframe = () => publicAPI.setRepresentation(Representation.WIREFRAME);\n  publicAPI.setRepresentationToSurface = () => publicAPI.setRepresentation(Representation.SURFACE);\n  publicAPI.setRepresentationToPoints = () => publicAPI.setRepresentation(Representation.POINTS);\n  publicAPI.getRepresentationAsString = () => macro.enumToString(Representation, model.representation);\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  color: [1, 1, 1],\n  ambientColor: [1, 1, 1],\n  diffuseColor: [1, 1, 1],\n  specularColor: [1, 1, 1],\n  edgeColor: [0, 0, 0],\n  ambient: 0,\n  diffuse: 1,\n  metallic: 0,\n  roughness: 0.6,\n  normalStrength: 1,\n  emission: 1,\n  baseIOR: 1.45,\n  specular: 0,\n  specularPower: 1,\n  opacity: 1,\n  interpolation: Interpolation.GOURAUD,\n  representation: Representation.SURFACE,\n  edgeVisibility: false,\n  backfaceCulling: false,\n  frontfaceCulling: false,\n  pointSize: 1,\n  lineWidth: 1,\n  lighting: true,\n  shading: false,\n  materialName: null,\n  ORMTexture: null,\n  RMTexture: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['lighting', 'interpolation', 'ambient', 'diffuse', 'metallic', 'roughness', 'normalStrength', 'emission', 'baseIOR', 'specular', 'specularPower', 'opacity', 'edgeVisibility', 'lineWidth', 'pointSize', 'backfaceCulling', 'frontfaceCulling', 'representation', 'diffuseTexture', 'metallicTexture', 'roughnessTexture', 'normalTexture', 'ambientOcclusionTexture', 'emissionTexture', 'ORMTexture', 'RMTexture']);\n  macro.setGetArray(publicAPI, model, ['ambientColor', 'specularColor', 'diffuseColor', 'edgeColor'], 3);\n\n  // Object methods\n  vtkProperty(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkProperty');\n\n// ----------------------------------------------------------------------------\n\nvar vtkProperty$1 = {\n  newInstance,\n  extend,\n  ...PropertyConst\n};\n\nexport { vtkProperty$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkProp3D from './Prop3D.js';\nimport vtkProperty from './Property.js';\n\n// ----------------------------------------------------------------------------\n// vtkActor methods\n// ----------------------------------------------------------------------------\n\nfunction vtkActor(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkActor');\n\n  // Capture 'parentClass' api for internal use\n  const superClass = {\n    ...publicAPI\n  };\n  publicAPI.getActors = () => [publicAPI];\n  publicAPI.getIsOpaque = () => {\n    if (model.forceOpaque) {\n      return true;\n    }\n    if (model.forceTranslucent) {\n      return false;\n    }\n    // make sure we have a property\n    if (!model.properties[0]) {\n      // force creation of a property\n      publicAPI.getProperty();\n    }\n    let isOpaque = model.properties[0].getOpacity() >= 1.0;\n\n    // are we using an opaque texture, if any?\n    isOpaque = isOpaque && (!model.texture || !model.texture.isTranslucent());\n\n    // are we using an opaque scalar array, if any?\n    isOpaque = isOpaque && (!model.mapper || model.mapper.getIsOpaque());\n    return isOpaque;\n  };\n  publicAPI.hasTranslucentPolygonalGeometry = () => {\n    if (model.mapper === null) {\n      return false;\n    }\n    // make sure we have a property\n    if (!model.properties[0]) {\n      // force creation of a property\n      publicAPI.getProperty();\n    }\n\n    // is this actor opaque ?\n    return !publicAPI.getIsOpaque();\n  };\n  publicAPI.makeProperty = vtkProperty.newInstance;\n  publicAPI.getMTime = () => {\n    let mt = superClass.getMTime();\n    if (model.backfaceProperty !== null) {\n      const time = model.backfaceProperty.getMTime();\n      mt = time > mt ? time : mt;\n    }\n    return mt;\n  };\n  publicAPI.getRedrawMTime = () => {\n    let mt = model.mtime;\n    if (model.mapper !== null) {\n      let time = model.mapper.getMTime();\n      mt = time > mt ? time : mt;\n      if (model.mapper.getInput() !== null) {\n        // FIXME !!! getInputAlgorithm / getInput\n        model.mapper.getInputAlgorithm().update();\n        time = model.mapper.getInput().getMTime();\n        mt = time > mt ? time : mt;\n      }\n    }\n    return mt;\n  };\n  publicAPI.getSupportsSelection = () => model.mapper ? model.mapper.getSupportsSelection() : false;\n  publicAPI.processSelectorPixelBuffers = (selector, pixelOffsets) => {\n    if (model.mapper && model.mapper.processSelectorPixelBuffers) {\n      model.mapper.processSelectorPixelBuffers(selector, pixelOffsets);\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  mapper: null,\n  backfaceProperty: null,\n  forceOpaque: false,\n  forceTranslucent: false\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkProp3D.extend(publicAPI, model, initialValues);\n\n  // vtkTimeStamp\n  model.boundsMTime = {};\n  macro.obj(model.boundsMTime);\n\n  // Build VTK API\n  macro.setGet(publicAPI, model, ['backfaceProperty', 'forceOpaque', 'forceTranslucent', 'mapper']);\n\n  // Object methods\n  vtkActor(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkActor');\n\n// ----------------------------------------------------------------------------\n\nvar vtkActor$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkActor$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\n\n// ----------------------------------------------------------------------------\n// vtkAbstractMapper methods\n// ----------------------------------------------------------------------------\n\nfunction vtkAbstractMapper(publicAPI, model) {\n  model.classHierarchy.push('vtkAbstractMapper');\n  publicAPI.update = () => {\n    publicAPI.getInputData();\n  };\n  publicAPI.addClippingPlane = plane => {\n    if (!plane.isA('vtkPlane')) {\n      return false;\n    }\n    if (!model.clippingPlanes.includes(plane)) {\n      model.clippingPlanes.push(plane);\n      publicAPI.modified();\n      return true;\n    }\n    return false;\n  };\n  publicAPI.getNumberOfClippingPlanes = () => model.clippingPlanes.length;\n  publicAPI.removeAllClippingPlanes = () => {\n    if (model.clippingPlanes.length === 0) {\n      return false;\n    }\n    model.clippingPlanes.length = 0;\n    publicAPI.modified();\n    return true;\n  };\n  publicAPI.removeClippingPlane = clippingPlane => {\n    const i = model.clippingPlanes.indexOf(clippingPlane);\n    if (i === -1) {\n      return false;\n    }\n    model.clippingPlanes.splice(i, 1);\n    publicAPI.modified();\n    return true;\n  };\n  publicAPI.getClippingPlanes = () => model.clippingPlanes;\n  publicAPI.setClippingPlanes = planes => {\n    if (!planes) {\n      return;\n    }\n    if (!Array.isArray(planes)) {\n      publicAPI.addClippingPlane(planes);\n    } else {\n      const nbPlanes = planes.length;\n      for (let i = 0; i < nbPlanes && i < 6; i++) {\n        publicAPI.addClippingPlane(planes[i]);\n      }\n    }\n  };\n  publicAPI.getClippingPlaneInDataCoords = (propMatrix, i, hnormal) => {\n    const clipPlanes = model.clippingPlanes;\n    const mat = propMatrix;\n    if (clipPlanes) {\n      const n = clipPlanes.length;\n      if (i >= 0 && i < n) {\n        // Get the plane\n        const plane = clipPlanes[i];\n        const normal = plane.getNormal();\n        const origin = plane.getOrigin();\n\n        // Compute the plane equation\n        const v1 = normal[0];\n        const v2 = normal[1];\n        const v3 = normal[2];\n        const v4 = -(v1 * origin[0] + v2 * origin[1] + v3 * origin[2]);\n\n        // Transform normal from world to data coords\n        hnormal[0] = v1 * mat[0] + v2 * mat[4] + v3 * mat[8] + v4 * mat[12];\n        hnormal[1] = v1 * mat[1] + v2 * mat[5] + v3 * mat[9] + v4 * mat[13];\n        hnormal[2] = v1 * mat[2] + v2 * mat[6] + v3 * mat[10] + v4 * mat[14];\n        hnormal[3] = v1 * mat[3] + v2 * mat[7] + v3 * mat[11] + v4 * mat[15];\n        return;\n      }\n    }\n    macro.vtkErrorMacro(`Clipping plane index ${i} is out of range.`);\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  clippingPlanes: []\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  macro.algo(publicAPI, model, 1, 0);\n  if (!model.clippingPlanes) {\n    model.clippingPlanes = [];\n  }\n  vtkAbstractMapper(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\nvar vtkAbstractMapper$1 = {\n  extend\n};\n\nexport { vtkAbstractMapper$1 as default, extend };\n", "import { m as macro } from '../../macros2.js';\nimport vtkAbstractMapper from './AbstractMapper.js';\nimport vtkBoundingBox from '../../Common/DataModel/BoundingBox.js';\nimport { I as createUninitializedBounds } from '../../Common/Core/Math/index.js';\n\n// ----------------------------------------------------------------------------\n// vtkAbstractMapper methods\n// ----------------------------------------------------------------------------\n\nfunction vtkAbstractMapper3D(publicAPI, model) {\n  publicAPI.getBounds = () => {\n    macro.vtkErrorMacro(`vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED`);\n    return createUninitializedBounds();\n  };\n  publicAPI.getCenter = () => {\n    const bounds = publicAPI.getBounds();\n    model.center = vtkBoundingBox.isValid(bounds) ? vtkBoundingBox.getCenter(bounds) : null;\n    return model.center?.slice();\n  };\n  publicAPI.getLength = () => {\n    const bounds = publicAPI.getBounds();\n    return vtkBoundingBox.getDiagonalLength(bounds);\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst defaultValues = initialValues => ({\n  bounds: [...vtkBoundingBox.INIT_BOUNDS],\n  center: [0, 0, 0],\n  viewSpecificProperties: {},\n  ...initialValues\n});\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, defaultValues(initialValues));\n  // Inheritance\n  vtkAbstractMapper.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['viewSpecificProperties']);\n  vtkAbstractMapper3D(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nvar vtkAbstractMapper3D$1 = {\n  extend\n};\n\nexport { vtkAbstractMapper3D$1 as default, extend };\n", "import vtk from '../../../vtk.js';\nimport { m as macro } from '../../../macros2.js';\nimport vtkDataArray from '../../Core/DataArray.js';\n\nconst {\n  vtkErrorMacro,\n  vtkWarningMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkFieldData methods\n// ----------------------------------------------------------------------------\n\nfunction vtkFieldData(publicAPI, model) {\n  model.classHierarchy.push('vtkFieldData');\n  const superGetState = publicAPI.getState;\n\n  // Decode serialized data if any\n  if (model.arrays) {\n    model.arrays = model.arrays.map(item => ({\n      data: vtk(item.data)\n    }));\n  }\n  publicAPI.initialize = () => {\n    publicAPI.initializeFields();\n    publicAPI.copyAllOn();\n    publicAPI.clearFieldFlags();\n  };\n  publicAPI.initializeFields = () => {\n    model.arrays = [];\n    model.copyFieldFlags = {};\n    publicAPI.modified();\n  };\n  publicAPI.copyStructure = other => {\n    publicAPI.initializeFields();\n    model.copyFieldFlags = other.getCopyFieldFlags().map(x => x); // Deep-copy\n    model.arrays = other.getArrays().map(x => ({\n      data: x\n    })); // Deep-copy\n    // TODO: Copy array information objects (once we support information objects)\n  };\n\n  publicAPI.getNumberOfArrays = () => model.arrays.length;\n  publicAPI.getNumberOfActiveArrays = () => model.arrays.length;\n  publicAPI.addArray = arr => {\n    const name = arr.getName();\n    const {\n      array,\n      index\n    } = publicAPI.getArrayWithIndex(name);\n    if (array != null) {\n      model.arrays[index] = {\n        data: arr\n      };\n      return index;\n    }\n    model.arrays = [].concat(model.arrays, {\n      data: arr\n    });\n    return model.arrays.length - 1;\n  };\n  publicAPI.removeAllArrays = () => {\n    model.arrays = [];\n  };\n  publicAPI.removeArray = arrayName => {\n    const index = model.arrays.findIndex(array => array.data.getName() === arrayName);\n    return publicAPI.removeArrayByIndex(index);\n  };\n  publicAPI.removeArrayByIndex = arrayIdx => {\n    if (arrayIdx !== -1 && arrayIdx < model.arrays.length) {\n      model.arrays.splice(arrayIdx, 1);\n      // TBD modified() ?\n      return true;\n    }\n    return false;\n  };\n  publicAPI.getArrays = () => model.arrays.map(entry => entry.data);\n  publicAPI.getArray = arraySpec => typeof arraySpec === 'number' ? publicAPI.getArrayByIndex(arraySpec) : publicAPI.getArrayByName(arraySpec);\n  publicAPI.getArrayByName = arrayName => model.arrays.reduce((a, b, i) => b.data.getName() === arrayName ? b.data : a, null);\n  publicAPI.getArrayWithIndex = arrayName => {\n    const index = model.arrays.findIndex(array => array.data.getName() === arrayName);\n    return {\n      array: index !== -1 ? model.arrays[index].data : null,\n      index\n    };\n  };\n  publicAPI.getArrayByIndex = idx => idx >= 0 && idx < model.arrays.length ? model.arrays[idx].data : null;\n  publicAPI.hasArray = arrayName => publicAPI.getArrayWithIndex(arrayName).index >= 0;\n  publicAPI.getArrayName = idx => {\n    const arr = model.arrays[idx];\n    return arr ? arr.data.getName() : '';\n  };\n  publicAPI.getCopyFieldFlags = () => model.copyFieldFlags;\n  publicAPI.getFlag = arrayName => model.copyFieldFlags[arrayName];\n  publicAPI.passData = function (other) {\n    let fromId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n    let toId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n    other.getArrays().forEach(arr => {\n      const copyFlag = publicAPI.getFlag(arr.getName());\n      if (copyFlag !== false && !(model.doCopyAllOff && copyFlag !== true) && arr) {\n        let destArr = publicAPI.getArrayByName(arr.getName());\n        if (!destArr) {\n          if (fromId < 0 || fromId > arr.getNumberOfTuples()) {\n            // TBD: should this be a deep or a shallow copy?\n            publicAPI.addArray(arr);\n            other.getAttributes(arr).forEach(attrType => {\n              publicAPI.setAttribute(arr, attrType);\n            });\n          } else {\n            const ncomps = arr.getNumberOfComponents();\n            let newSize = arr.getNumberOfValues();\n            const tId = toId > -1 ? toId : fromId;\n            if (newSize <= tId * ncomps) {\n              newSize = (tId + 1) * ncomps;\n            }\n            destArr = vtkDataArray.newInstance({\n              name: arr.getName(),\n              dataType: arr.getDataType(),\n              numberOfComponents: ncomps,\n              values: macro.newTypedArray(arr.getDataType(), newSize),\n              size: 0\n            });\n            destArr.insertTuple(tId, arr.getTuple(fromId));\n            publicAPI.addArray(destArr);\n            other.getAttributes(arr).forEach(attrType => {\n              publicAPI.setAttribute(destArr, attrType);\n            });\n          }\n        } else if (arr.getNumberOfComponents() === destArr.getNumberOfComponents()) {\n          if (fromId > -1 && fromId < arr.getNumberOfTuples()) {\n            const tId = toId > -1 ? toId : fromId;\n            destArr.insertTuple(tId, arr.getTuple(fromId));\n          } else {\n            // if `fromId` is not provided, just copy all (or as much possible)\n            // from `arr` to `destArr`.\n            destArr.insertTuples(0, arr.getTuples());\n          }\n        } else {\n          vtkErrorMacro('Unhandled case in passData');\n        }\n      }\n    });\n  };\n  publicAPI.interpolateData = function (other) {\n    let fromId1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n    let fromId2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n    let toId = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : -1;\n    let t = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0.5;\n    other.getArrays().forEach(arr => {\n      const copyFlag = publicAPI.getFlag(arr.getName());\n      if (copyFlag !== false && !(model.doCopyAllOff && copyFlag !== true) && arr) {\n        let destArr = publicAPI.getArrayByName(arr.getName());\n        if (!destArr) {\n          if (fromId1 < 0 || fromId2 < 0 || fromId1 > arr.getNumberOfTuples()) {\n            // TBD: should this be a deep or a shallow copy?\n            publicAPI.addArray(arr);\n            other.getAttributes(arr).forEach(attrType => {\n              publicAPI.setAttribute(arr, attrType);\n            });\n          } else {\n            const ncomps = arr.getNumberOfComponents();\n            let newSize = arr.getNumberOfValues();\n            // TODO: Is this supposed to happen?\n            const tId = toId > -1 ? toId : fromId1;\n            if (newSize <= tId * ncomps) {\n              newSize = (tId + 1) * ncomps;\n            }\n            destArr = vtkDataArray.newInstance({\n              name: arr.getName(),\n              dataType: arr.getDataType(),\n              numberOfComponents: ncomps,\n              values: macro.newTypedArray(arr.getDataType(), newSize),\n              size: 0\n            });\n            destArr.interpolateTuple(tId, arr, fromId1, arr, fromId2, t);\n            publicAPI.addArray(destArr);\n            other.getAttributes(arr).forEach(attrType => {\n              publicAPI.setAttribute(destArr, attrType);\n            });\n          }\n        } else if (arr.getNumberOfComponents() === destArr.getNumberOfComponents()) {\n          if (fromId1 > -1 && fromId1 < arr.getNumberOfTuples()) {\n            const tId = toId > -1 ? toId : fromId1;\n            destArr.interpolateTuple(tId, arr, fromId1, arr, fromId2, t);\n            vtkWarningMacro('Unexpected case in interpolateData');\n          } else {\n            // if `fromId` is not provided, just copy all (or as much possible)\n            // from `arr` to `destArr`.\n            destArr.insertTuples(arr.getTuples());\n          }\n        } else {\n          vtkErrorMacro('Unhandled case in interpolateData');\n        }\n      }\n    });\n  };\n  publicAPI.copyFieldOn = arrayName => {\n    model.copyFieldFlags[arrayName] = true;\n  };\n  publicAPI.copyFieldOff = arrayName => {\n    model.copyFieldFlags[arrayName] = false;\n  };\n  publicAPI.copyAllOn = () => {\n    if (!model.doCopyAllOn || model.doCopyAllOff) {\n      model.doCopyAllOn = true;\n      model.doCopyAllOff = false;\n      publicAPI.modified();\n    }\n  };\n  publicAPI.copyAllOff = () => {\n    if (model.doCopyAllOn || !model.doCopyAllOff) {\n      model.doCopyAllOn = false;\n      model.doCopyAllOff = true;\n      publicAPI.modified();\n    }\n  };\n  publicAPI.clearFieldFlags = () => {\n    model.copyFieldFlags = {};\n  };\n  publicAPI.deepCopy = other => {\n    model.arrays = other.getArrays().map(arr => {\n      const arrNew = arr.newClone();\n      arrNew.deepCopy(arr);\n      return {\n        data: arrNew\n      };\n    });\n  };\n  publicAPI.copyFlags = other => other.getCopyFieldFlags().map(x => x);\n  // TODO: publicAPI.squeeze = () => model.arrays.forEach(entry => entry.data.squeeze());\n  publicAPI.reset = () => model.arrays.forEach(entry => entry.data.reset());\n  // TODO: getActualMemorySize\n  publicAPI.getMTime = () => model.arrays.reduce((a, b) => b.data.getMTime() > a ? b.data.getMTime() : a, model.mtime);\n  // TODO: publicAPI.getField = (ids, other) => { copy ids from other into this model's arrays }\n  // TODO: publicAPI.getArrayContainingComponent = (component) => ...\n  publicAPI.getNumberOfComponents = () => model.arrays.reduce((a, b) => a + b.data.getNumberOfComponents(), 0);\n  publicAPI.getNumberOfTuples = () => model.arrays.length > 0 ? model.arrays[0].getNumberOfTuples() : 0;\n  publicAPI.getState = () => {\n    const result = superGetState();\n    if (result) {\n      result.arrays = model.arrays.map(item => ({\n        data: item.data.getState()\n      }));\n    }\n    return result;\n  };\n}\nconst DEFAULT_VALUES = {\n  arrays: [],\n  copyFieldFlags: [],\n  // fields not to copy\n  doCopyAllOn: true,\n  doCopyAllOff: false\n};\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  macro.obj(publicAPI, model);\n  vtkFieldData(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkFieldData');\n\n// ----------------------------------------------------------------------------\n\nvar vtkFieldData$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkFieldData$1 as default, extend, newInstance };\n", "const AttributeTypes = {\n  SCALARS: 0,\n  VECTORS: 1,\n  NORMALS: 2,\n  TCOORDS: 3,\n  TENSORS: 4,\n  GLOBALIDS: 5,\n  PEDIGREEIDS: 6,\n  EDGEFLAG: 7,\n  NUM_ATTRIBUTES: 8\n};\nconst AttributeLimitTypes = {\n  MAX: 0,\n  EXACT: 1,\n  NOLIMIT: 2\n};\nconst CellGhostTypes = {\n  DUPLICATECELL: 1,\n  // the cell is present on multiple processors\n  HIGHCONNECTIVITYCELL: 2,\n  // the cell has more neighbors than in a regular mesh\n  LOWCONNECTIVITYCELL: 4,\n  // the cell has less neighbors than in a regular mesh\n  REFINEDCELL: 8,\n  // other cells are present that refines it.\n  EXTERIORCELL: 16,\n  // the cell is on the exterior of the data set\n  HIDDENCELL: 32 // the cell is needed to maintain connectivity, but the data values should be ignored.\n};\n\nconst PointGhostTypes = {\n  DUPLICATEPOINT: 1,\n  // the cell is present on multiple processors\n  HIDDENPOINT: 2 // the point is needed to maintain connectivity, but the data values should be ignored.\n};\n\nconst AttributeCopyOperations = {\n  COPYTUPLE: 0,\n  INTERPOLATE: 1,\n  PASSDATA: 2,\n  ALLCOPY: 3 // all of the above\n};\n\nconst ghostArrayName = 'vtkGhostType';\nconst DesiredOutputPrecision = {\n  DEFAULT: 0,\n  // use the point type that does not truncate any data\n  SINGLE: 1,\n  // use Float32Array\n  DOUBLE: 2 // use Float64Array\n};\n\nvar Constants = {\n  AttributeCopyOperations,\n  AttributeLimitTypes,\n  AttributeTypes,\n  CellGhostTypes,\n  DesiredOutputPrecision,\n  PointGhostTypes,\n  ghostArrayName\n};\n\nexport { AttributeCopyOperations, AttributeLimitTypes, AttributeTypes, CellGhostTypes, DesiredOutputPrecision, PointGhostTypes, Constants as default, ghostArrayName };\n", "import { m as macro } from '../../macros2.js';\nimport vtkFieldData from './DataSetAttributes/FieldData.js';\nimport Constants from './DataSetAttributes/Constants.js';\nimport vtkDataArray from '../Core/DataArray.js';\n\nconst {\n  AttributeTypes,\n  AttributeCopyOperations\n} = Constants;\nconst {\n  vtkWarningMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkDataSetAttributes methods\n// ----------------------------------------------------------------------------\n\nfunction vtkDataSetAttributes(publicAPI, model) {\n  const attrTypes = ['Scalars', 'Vectors', 'Normals', 'TCoords', 'Tensors', 'GlobalIds', 'PedigreeIds'];\n  function cleanAttributeType(attType) {\n    // Given an integer or string, convert the result to one of the\n    // strings in the \"attrTypes\" array above or null (if\n    // no match is found)\n    let cleanAttType = attrTypes.find(ee => AttributeTypes[ee.toUpperCase()] === attType || typeof attType !== 'number' && ee.toLowerCase() === attType.toLowerCase());\n    if (typeof cleanAttType === 'undefined') {\n      cleanAttType = null;\n    }\n    return cleanAttType;\n  }\n\n  // Set our className\n  model.classHierarchy.push('vtkDataSetAttributes');\n  const superClass = {\n    ...publicAPI\n  };\n  publicAPI.checkNumberOfComponents = x => true; // TODO\n\n  publicAPI.setAttribute = (arr, uncleanAttType) => {\n    const attType = cleanAttributeType(uncleanAttType);\n    if (arr && attType.toUpperCase() === 'PEDIGREEIDS' && !arr.isA('vtkDataArray')) {\n      vtkWarningMacro(`Cannot set attribute ${attType}. The attribute must be a vtkDataArray.`);\n      return -1;\n    }\n    if (arr && !publicAPI.checkNumberOfComponents(arr, attType)) {\n      vtkWarningMacro(`Cannot set attribute ${attType}. Incorrect number of components.`);\n      return -1;\n    }\n    let currentAttribute = model[`active${attType}`];\n    if (currentAttribute >= 0 && currentAttribute < model.arrays.length) {\n      if (model.arrays[currentAttribute] === arr) {\n        return currentAttribute;\n      }\n      // FIXME setting an array actually changes its index\n      publicAPI.removeArrayByIndex(currentAttribute);\n    }\n    if (arr) {\n      currentAttribute = publicAPI.addArray(arr);\n      model[`active${attType}`] = currentAttribute;\n    } else {\n      model[`active${attType}`] = -1;\n    }\n    publicAPI.modified();\n    return model[`active${attType}`];\n  };\n  publicAPI.getAttributes = arr => attrTypes.filter(attrType => publicAPI[`get${attrType}`]() === arr);\n  publicAPI.setActiveAttributeByName = (arrayName, attType) => publicAPI.setActiveAttributeByIndex(publicAPI.getArrayWithIndex(arrayName).index, attType);\n  publicAPI.setActiveAttributeByIndex = (arrayIdx, uncleanAttType) => {\n    const attType = cleanAttributeType(uncleanAttType);\n    if (arrayIdx >= 0 && arrayIdx < model.arrays.length) {\n      if (attType.toUpperCase() !== 'PEDIGREEIDS') {\n        const arr = publicAPI.getArrayByIndex(arrayIdx);\n        if (!arr.isA('vtkDataArray')) {\n          vtkWarningMacro(`Cannot set attribute ${attType}. Only vtkDataArray subclasses can be set as active attributes.`);\n          return -1;\n        }\n        if (!publicAPI.checkNumberOfComponents(arr, attType)) {\n          vtkWarningMacro(`Cannot set attribute ${attType}. Incorrect number of components.`);\n          return -1;\n        }\n      }\n      model[`active${attType}`] = arrayIdx;\n      publicAPI.modified();\n      return arrayIdx;\n    }\n    if (arrayIdx === -1) {\n      model[`active${attType}`] = arrayIdx;\n      publicAPI.modified();\n    }\n    return -1;\n  };\n  publicAPI.getActiveAttribute = attType => {\n    // Given an integer enum value or a string (with random capitalization),\n    // find the matching string in attrTypes.\n    const cleanAttType = cleanAttributeType(attType);\n    return publicAPI[`get${cleanAttType}`]();\n  };\n\n  // Override to allow proper handling of active attributes\n  publicAPI.removeAllArrays = () => {\n    attrTypes.forEach(attType => {\n      model[`active${attType}`] = -1;\n    });\n    superClass.removeAllArrays();\n  };\n\n  // Override to allow proper handling of active attributes\n  publicAPI.removeArrayByIndex = arrayIdx => {\n    if (arrayIdx !== -1) {\n      attrTypes.forEach(attType => {\n        if (arrayIdx === model[`active${attType}`]) {\n          model[`active${attType}`] = -1;\n        } else if (arrayIdx < model[`active${attType}`]) {\n          model[`active${attType}`] -= 1;\n        }\n      });\n    }\n    return superClass.removeArrayByIndex(arrayIdx);\n  };\n  attrTypes.forEach(value => {\n    const activeVal = `active${value}`;\n    publicAPI[`get${value}`] = () => publicAPI.getArrayByIndex(model[activeVal]);\n    publicAPI[`set${value}`] = da => publicAPI.setAttribute(da, value);\n    publicAPI[`setActive${value}`] = arrayName => publicAPI.setActiveAttributeByIndex(publicAPI.getArrayWithIndex(arrayName).index, value);\n    publicAPI[`copy${value}Off`] = () => {\n      const attType = value.toUpperCase();\n      model.copyAttributeFlags[AttributeCopyOperations.PASSDATA][AttributeTypes[attType]] = false;\n    };\n    publicAPI[`copy${value}On`] = () => {\n      const attType = value.toUpperCase();\n      model.copyAttributeFlags[AttributeCopyOperations.PASSDATA][AttributeTypes[attType]] = true;\n    };\n  });\n  publicAPI.initializeAttributeCopyFlags = () => {\n    // Default to copying all attributes in every circumstance:\n    model.copyAttributeFlags = [];\n    Object.keys(AttributeCopyOperations).filter(op => op !== 'ALLCOPY').forEach(attCopyOp => {\n      model.copyAttributeFlags[AttributeCopyOperations[attCopyOp]] = Object.keys(AttributeTypes).filter(ty => ty !== 'NUM_ATTRIBUTES').reduce((a, b) => {\n        a[AttributeTypes[b]] = true;\n        return a;\n      }, []);\n    });\n    // Override some operations where we don't want to copy:\n    model.copyAttributeFlags[AttributeCopyOperations.COPYTUPLE][AttributeTypes.GLOBALIDS] = false;\n    model.copyAttributeFlags[AttributeCopyOperations.INTERPOLATE][AttributeTypes.GLOBALIDS] = false;\n    model.copyAttributeFlags[AttributeCopyOperations.COPYTUPLE][AttributeTypes.PEDIGREEIDS] = false;\n  };\n  publicAPI.initialize = macro.chain(publicAPI.initialize, publicAPI.initializeAttributeCopyFlags);\n\n  // Process dataArrays if any\n  if (model.dataArrays && Object.keys(model.dataArrays).length) {\n    Object.keys(model.dataArrays).forEach(name => {\n      if (!model.dataArrays[name].ref && model.dataArrays[name].type === 'vtkDataArray') {\n        publicAPI.addArray(vtkDataArray.newInstance(model.dataArrays[name]));\n      }\n    });\n  }\n  const superShallowCopy = publicAPI.shallowCopy;\n  publicAPI.shallowCopy = (other, debug) => {\n    superShallowCopy(other, debug);\n    model.arrays = other.getArrays().map(arr => {\n      const arrNew = arr.newClone();\n      arrNew.shallowCopy(arr, debug);\n      return {\n        data: arrNew\n      };\n    });\n  };\n  publicAPI.initializeAttributeCopyFlags();\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  activeScalars: -1,\n  activeVectors: -1,\n  activeTensors: -1,\n  activeNormals: -1,\n  activeTCoords: -1,\n  activeGlobalIds: -1,\n  activePedigreeIds: -1\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  vtkFieldData.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['activeScalars', 'activeNormals', 'activeTCoords', 'activeVectors', 'activeTensors', 'activeGlobalIds', 'activePedigreeIds']);\n  if (!model.arrays) {\n    model.arrays = {};\n  }\n\n  // Object specific methods\n  vtkDataSetAttributes(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkDataSetAttributes');\n\n// ----------------------------------------------------------------------------\n\nvar vtkDataSetAttributes$1 = {\n  newInstance,\n  extend,\n  ...Constants\n};\n\nexport { vtkDataSetAttributes$1 as default, extend, newInstance };\n", "// Specify how data arrays can be used by data objects\nconst FieldDataTypes = {\n  UNIFORM: 0,\n  // data that does not vary over points/cells/etc.\n  DATA_OBJECT_FIELD: 0,\n  // to match VTK\n\n  COORDINATE: 1,\n  // data that specifies the location of each point\n  POINT_DATA: 1,\n  // to match VTK\n\n  POINT: 2,\n  // data defined at each point, but that does not specify the point location\n  POINT_FIELD_DATA: 2,\n  // to match VTK\n\n  CELL: 3,\n  // data defined at each cell, but that does not specify the cell\n  CELL_FIELD_DATA: 3,\n  // to match VTK\n\n  VERTEX: 4,\n  // data defined at each graph vertex, but that does not specify the graph vertex\n  VERTEX_FIELD_DATA: 4,\n  // to match VTK\n\n  EDGE: 5,\n  // data defined at each graph edge, but that does not specify the graph edge\n  EDGE_FIELD_DATA: 5,\n  // to match VTK\n\n  ROW: 6,\n  // data specifying a table row\n  ROW_DATA: 6 // to match VTK\n};\n\nconst FieldAssociations = {\n  FIELD_ASSOCIATION_POINTS: 0,\n  FIELD_ASSOCIATION_CELLS: 1,\n  FIELD_ASSOCIATION_NONE: 2,\n  FIELD_ASSOCIATION_POINTS_THEN_CELLS: 3,\n  FIELD_ASSOCIATION_VERTICES: 4,\n  FIELD_ASSOCIATION_EDGES: 5,\n  FIELD_ASSOCIATION_ROWS: 6,\n  NUMBER_OF_ASSOCIATIONS: 7\n};\nvar Constants = {\n  FieldDataTypes,\n  FieldAssociations\n};\n\nexport { FieldAssociations, FieldDataTypes, Constants as default };\n", "import { m as macro } from '../../macros2.js';\nimport vtk from '../../vtk.js';\nimport vtkBoundingBox from './BoundingBox.js';\nimport vtkDataSetAttributes from './DataSetAttributes.js';\nimport { b as vtkMath } from '../Core/Math/index.js';\nimport Constants from './DataSet/Constants.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nconst DATASET_FIELDS = ['pointData', 'cellData', 'fieldData'];\n\n// ----------------------------------------------------------------------------\n// vtkDataSet methods\n// ----------------------------------------------------------------------------\n\nfunction vtkDataSet(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkDataSet');\n\n  // Add dataset attributes\n  DATASET_FIELDS.forEach(fieldName => {\n    if (!model[fieldName]) {\n      model[fieldName] = vtkDataSetAttributes.newInstance();\n    } else {\n      model[fieldName] = vtk(model[fieldName]);\n    }\n  });\n\n  //------------------------------------------------------------------------------\n  // Compute the data bounding box from data points.\n  publicAPI.computeBounds = () => {\n    if (model.modifiedTime && model.computeTime && model.modifiedTime > model.computeTime || !model.computeTime) {\n      const points = publicAPI.getPoints();\n      if (points?.getNumberOfPoints()) {\n        // Compute bounds from points\n        vtkBoundingBox.setBounds(model.bounds, points.getBoundsByReference());\n      } else {\n        model.bounds = vtkMath.createUninitializedBounds();\n      }\n      // Update computeTime\n      model.computeTime = macro.getCurrentGlobalMTime();\n    }\n  };\n\n  /**\n   * Returns the squared length of the diagonal of the bounding box\n   */\n  publicAPI.getLength2 = () => {\n    const bounds = publicAPI.getBoundsByReference();\n    if (!bounds || bounds.length !== 6) return 0;\n    return vtkBoundingBox.getDiagonalLength2(bounds);\n  };\n\n  /**\n   * Returns the length of the diagonal of the bounding box\n   */\n  publicAPI.getLength = () => Math.sqrt(publicAPI.getLength2());\n\n  /**\n   * Returns the center of the bounding box as [x, y, z]\n   */\n  publicAPI.getCenter = () => {\n    const bounds = publicAPI.getBoundsByReference();\n    if (!bounds || bounds.length !== 6) return [0, 0, 0];\n    return vtkBoundingBox.getCenter(bounds);\n  };\n\n  /**\n   * Get the bounding box of a cell with the given cellId\n   * @param {Number} cellId - The id of the cell\n   * @returns {Number[]} - The bounds as [xmin, xmax, ymin, ymax, zmin, zmax]\n   */\n  publicAPI.getCellBounds = cellId => {\n    const cell = publicAPI.getCell(cellId);\n    if (cell) {\n      return cell.getBounds();\n    }\n    return vtkMath.createUninitializedBounds();\n  };\n  publicAPI.getBounds = macro.chain(() => publicAPI.computeBounds, publicAPI.getBounds);\n  publicAPI.getBoundsByReference = macro.chain(() => publicAPI.computeBounds, publicAPI.getBoundsByReference);\n  const superShallowCopy = publicAPI.shallowCopy;\n  publicAPI.shallowCopy = function (other) {\n    let debug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    superShallowCopy(other, debug);\n    DATASET_FIELDS.forEach(fieldName => {\n      model[fieldName] = vtkDataSetAttributes.newInstance();\n      model[fieldName].shallowCopy(other.getReferenceByName(fieldName));\n    });\n  };\n  const superGetMTime = publicAPI.getMTime;\n  publicAPI.getMTime = () => DATASET_FIELDS.reduce((mTime, fieldName) => Math.max(mTime, model[fieldName]?.getMTime() ?? mTime), superGetMTime());\n  publicAPI.initialize = () => {\n    DATASET_FIELDS.forEach(fieldName => model[fieldName]?.initialize());\n    return publicAPI;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // pointData: null,\n  // cellData: null,\n  // fieldData: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, DATASET_FIELDS);\n  macro.getArray(publicAPI, model, ['bounds'], 6);\n  // Object specific methods\n  vtkDataSet(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkDataSet');\n\n// ----------------------------------------------------------------------------\n\nvar vtkDataSet$1 = {\n  newInstance,\n  extend,\n  ...Constants\n};\n\nexport { vtkDataSet$1 as default, extend, newInstance };\n", "const StructuredType = {\n  UNCHANGED: 0,\n  SINGLE_POINT: 1,\n  X_LINE: 2,\n  Y_LINE: 3,\n  Z_LINE: 4,\n  XY_PLANE: 5,\n  YZ_PLANE: 6,\n  XZ_PLANE: 7,\n  XYZ_GRID: 8,\n  EMPTY: 9\n};\nvar Constants = {\n  StructuredType\n};\n\nexport { StructuredType, Constants as default };\n", "import Constants from './StructuredData/Constants.js';\n\nconst {\n  StructuredType\n} = Constants;\nfunction getDataDescriptionFromExtent(inExt) {\n  let dataDim = 0;\n  for (let i = 0; i < 3; ++i) {\n    if (inExt[i * 2] < inExt[i * 2 + 1]) {\n      dataDim++;\n    }\n  }\n  if (inExt[0] > inExt[1] || inExt[2] > inExt[3] || inExt[4] > inExt[5]) {\n    return StructuredType.EMPTY;\n  }\n  if (dataDim === 3) {\n    return StructuredType.XYZ_GRID;\n  }\n  if (dataDim === 2) {\n    if (inExt[0] === inExt[1]) {\n      return StructuredType.YZ_PLANE;\n    }\n    if (inExt[2] === inExt[3]) {\n      return StructuredType.XZ_PLANE;\n    }\n    return StructuredType.XY_PLANE;\n  }\n  if (dataDim === 1) {\n    if (inExt[0] < inExt[1]) {\n      return StructuredType.X_LINE;\n    }\n    if (inExt[2] < inExt[3]) {\n      return StructuredType.Y_LINE;\n    }\n    return StructuredType.Z_LINE;\n  }\n  return StructuredType.SINGLE_POINT;\n}\nvar vtkStructuredData = {\n  getDataDescriptionFromExtent,\n  ...Constants\n};\n\nexport { vtkStructuredData as default, getDataDescriptionFromExtent };\n", "import { m as macro } from '../../macros2.js';\nimport { c as roundVector, e as clampVector } from '../Core/Math/index.js';\nimport vtkBoundingBox from './BoundingBox.js';\nimport vtkDataSet from './DataSet.js';\nimport vtkStructuredData from './StructuredData.js';\nimport { StructuredType } from './StructuredData/Constants.js';\nimport { mat3, mat4, vec3 } from 'gl-matrix';\n\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkImageData methods\n// ----------------------------------------------------------------------------\n\nfunction vtkImageData(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkImageData');\n  publicAPI.setExtent = function () {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return false;\n    }\n    for (var _len = arguments.length, inExtent = new Array(_len), _key = 0; _key < _len; _key++) {\n      inExtent[_key] = arguments[_key];\n    }\n    const extentArray = inExtent.length === 1 ? inExtent[0] : inExtent;\n    if (extentArray.length !== 6) {\n      return false;\n    }\n    const changeDetected = model.extent.some((item, index) => item !== extentArray[index]);\n    if (changeDetected) {\n      model.extent = extentArray.slice();\n      model.dataDescription = vtkStructuredData.getDataDescriptionFromExtent(model.extent);\n      publicAPI.modified();\n    }\n    return changeDetected;\n  };\n  publicAPI.setDimensions = function () {\n    let i;\n    let j;\n    let k;\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    if (arguments.length === 1) {\n      const array = arguments.length <= 0 ? undefined : arguments[0];\n      i = array[0];\n      j = array[1];\n      k = array[2];\n    } else if (arguments.length === 3) {\n      i = arguments.length <= 0 ? undefined : arguments[0];\n      j = arguments.length <= 1 ? undefined : arguments[1];\n      k = arguments.length <= 2 ? undefined : arguments[2];\n    } else {\n      vtkErrorMacro('Bad dimension specification');\n      return;\n    }\n    publicAPI.setExtent(0, i - 1, 0, j - 1, 0, k - 1);\n  };\n  publicAPI.getDimensions = () => [model.extent[1] - model.extent[0] + 1, model.extent[3] - model.extent[2] + 1, model.extent[5] - model.extent[4] + 1];\n  publicAPI.getNumberOfCells = () => {\n    const dims = publicAPI.getDimensions();\n    let nCells = 1;\n    for (let i = 0; i < 3; i++) {\n      if (dims[i] === 0) {\n        return 0;\n      }\n      if (dims[i] > 1) {\n        nCells *= dims[i] - 1;\n      }\n    }\n    return nCells;\n  };\n  publicAPI.getNumberOfPoints = () => {\n    const dims = publicAPI.getDimensions();\n    return dims[0] * dims[1] * dims[2];\n  };\n  publicAPI.getPoint = index => {\n    const dims = publicAPI.getDimensions();\n    if (dims[0] === 0 || dims[1] === 0 || dims[2] === 0) {\n      vtkErrorMacro('Requesting a point from an empty image.');\n      return null;\n    }\n    const ijk = new Float64Array(3);\n    switch (model.dataDescription) {\n      case StructuredType.EMPTY:\n        return null;\n      case StructuredType.SINGLE_POINT:\n        break;\n      case StructuredType.X_LINE:\n        ijk[0] = index;\n        break;\n      case StructuredType.Y_LINE:\n        ijk[1] = index;\n        break;\n      case StructuredType.Z_LINE:\n        ijk[2] = index;\n        break;\n      case StructuredType.XY_PLANE:\n        ijk[0] = index % dims[0];\n        ijk[1] = index / dims[0];\n        break;\n      case StructuredType.YZ_PLANE:\n        ijk[1] = index % dims[1];\n        ijk[2] = index / dims[1];\n        break;\n      case StructuredType.XZ_PLANE:\n        ijk[0] = index % dims[0];\n        ijk[2] = index / dims[0];\n        break;\n      case StructuredType.XYZ_GRID:\n        ijk[0] = index % dims[0];\n        ijk[1] = index / dims[0] % dims[1];\n        ijk[2] = index / (dims[0] * dims[1]);\n        break;\n      default:\n        vtkErrorMacro('Invalid dataDescription');\n        break;\n    }\n    const coords = [0, 0, 0];\n    publicAPI.indexToWorld(ijk, coords);\n    return coords;\n  };\n\n  // vtkCell *GetCell(vtkIdType cellId) VTK_OVERRIDE;\n  // void GetCell(vtkIdType cellId, vtkGenericCell *cell) VTK_OVERRIDE;\n  // void GetCellBounds(vtkIdType cellId, double bounds[6]) VTK_OVERRIDE;\n  // virtual vtkIdType FindPoint(double x, double y, double z)\n  // {\n  //   return this->vtkDataSet::FindPoint(x, y, z);\n  // }\n  // vtkIdType FindPoint(double x[3]) VTK_OVERRIDE;\n  // vtkIdType FindCell(\n  //   double x[3], vtkCell *cell, vtkIdType cellId, double tol2,\n  //   int& subId, double pcoords[3], double *weights) VTK_OVERRIDE;\n  // vtkIdType FindCell(\n  //   double x[3], vtkCell *cell, vtkGenericCell *gencell,\n  //   vtkIdType cellId, double tol2, int& subId,\n  //   double pcoords[3], double *weights) VTK_OVERRIDE;\n  // vtkCell *FindAndGetCell(double x[3], vtkCell *cell, vtkIdType cellId,\n  //                                 double tol2, int& subId, double pcoords[3],\n  //                                 double *weights) VTK_OVERRIDE;\n  // int GetCellType(vtkIdType cellId) VTK_OVERRIDE;\n  // void GetCellPoints(vtkIdType cellId, vtkIdList *ptIds) VTK_OVERRIDE\n  //   {vtkStructuredData::GetCellPoints(cellId,ptIds,this->DataDescription,\n  //                                     this->GetDimensions());}\n  // void GetPointCells(vtkIdType ptId, vtkIdList *cellIds) VTK_OVERRIDE\n  //   {vtkStructuredData::GetPointCells(ptId,cellIds,this->GetDimensions());}\n  // void ComputeBounds() VTK_OVERRIDE;\n  // int GetMaxCellSize() VTK_OVERRIDE {return 8;}; //voxel is the largest\n\n  publicAPI.getBounds = () => publicAPI.extentToBounds(publicAPI.getSpatialExtent());\n  publicAPI.extentToBounds = ex => vtkBoundingBox.transformBounds(ex, model.indexToWorld);\n  publicAPI.getSpatialExtent = () => vtkBoundingBox.inflate([...model.extent], 0.5);\n\n  // Internal, shouldn't need to call this manually.\n  publicAPI.computeTransforms = () => {\n    mat4.fromTranslation(model.indexToWorld, model.origin);\n    model.indexToWorld[0] = model.direction[0];\n    model.indexToWorld[1] = model.direction[1];\n    model.indexToWorld[2] = model.direction[2];\n    model.indexToWorld[4] = model.direction[3];\n    model.indexToWorld[5] = model.direction[4];\n    model.indexToWorld[6] = model.direction[5];\n    model.indexToWorld[8] = model.direction[6];\n    model.indexToWorld[9] = model.direction[7];\n    model.indexToWorld[10] = model.direction[8];\n    mat4.scale(model.indexToWorld, model.indexToWorld, model.spacing);\n    mat4.invert(model.worldToIndex, model.indexToWorld);\n  };\n  publicAPI.indexToWorld = function (ain) {\n    let aout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    vec3.transformMat4(aout, ain, model.indexToWorld);\n    return aout;\n  };\n  publicAPI.indexToWorldVec3 = publicAPI.indexToWorld;\n  publicAPI.worldToIndex = function (ain) {\n    let aout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    vec3.transformMat4(aout, ain, model.worldToIndex);\n    return aout;\n  };\n  publicAPI.worldToIndexVec3 = publicAPI.worldToIndex;\n  publicAPI.indexToWorldBounds = function (bin) {\n    let bout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    return vtkBoundingBox.transformBounds(bin, model.indexToWorld, bout);\n  };\n  publicAPI.worldToIndexBounds = function (bin) {\n    let bout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    return vtkBoundingBox.transformBounds(bin, model.worldToIndex, bout);\n  };\n\n  // Make sure the transform is correct\n  model._onOriginChanged = publicAPI.computeTransforms;\n  model._onDirectionChanged = publicAPI.computeTransforms;\n  model._onSpacingChanged = publicAPI.computeTransforms;\n  publicAPI.computeTransforms();\n  publicAPI.getCenter = () => vtkBoundingBox.getCenter(publicAPI.getBounds());\n  publicAPI.computeHistogram = function (worldBounds) {\n    let voxelFunction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    const bounds = [0, 0, 0, 0, 0, 0];\n    publicAPI.worldToIndexBounds(worldBounds, bounds);\n    const point1 = [0, 0, 0];\n    const point2 = [0, 0, 0];\n    vtkBoundingBox.computeCornerPoints(bounds, point1, point2);\n    roundVector(point1, point1);\n    roundVector(point2, point2);\n    const dimensions = publicAPI.getDimensions();\n    clampVector(point1, [0, 0, 0], [dimensions[0] - 1, dimensions[1] - 1, dimensions[2] - 1], point1);\n    clampVector(point2, [0, 0, 0], [dimensions[0] - 1, dimensions[1] - 1, dimensions[2] - 1], point2);\n    const yStride = dimensions[0];\n    const zStride = dimensions[0] * dimensions[1];\n    const pixels = publicAPI.getPointData().getScalars().getData();\n    let maximum = -Infinity;\n    let minimum = Infinity;\n    let sumOfSquares = 0;\n    let isum = 0;\n    let inum = 0;\n    for (let z = point1[2]; z <= point2[2]; z++) {\n      for (let y = point1[1]; y <= point2[1]; y++) {\n        let index = point1[0] + y * yStride + z * zStride;\n        for (let x = point1[0]; x <= point2[0]; x++) {\n          if (!voxelFunction || voxelFunction([x, y, z], bounds)) {\n            const pixel = pixels[index];\n            if (pixel > maximum) maximum = pixel;\n            if (pixel < minimum) minimum = pixel;\n            sumOfSquares += pixel * pixel;\n            isum += pixel;\n            inum += 1;\n          }\n          ++index;\n        }\n      }\n    }\n    const average = inum > 0 ? isum / inum : 0;\n    const variance = inum ? Math.abs(sumOfSquares / inum - average * average) : 0;\n    const sigma = Math.sqrt(variance);\n    return {\n      minimum,\n      maximum,\n      average,\n      variance,\n      sigma,\n      count: inum\n    };\n  };\n\n  // TODO: use the unimplemented `vtkDataSetAttributes` for scalar length, that is currently also a TODO (GetNumberOfComponents).\n  // Scalar data could be tuples for color information?\n  publicAPI.computeIncrements = function (extent) {\n    let numberOfComponents = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    const increments = [];\n    let incr = numberOfComponents;\n\n    // Calculate array increment offsets\n    // similar to c++ vtkImageData::ComputeIncrements\n    for (let idx = 0; idx < 3; ++idx) {\n      increments[idx] = incr;\n      incr *= extent[idx * 2 + 1] - extent[idx * 2] + 1;\n    }\n    return increments;\n  };\n\n  /**\n   * @param {Number[]} index the localized `[i,j,k]` pixel array position. Float values will be rounded.\n   * @return {Number} the corresponding flattened index in the scalar array\n   */\n  publicAPI.computeOffsetIndex = _ref => {\n    let [i, j, k] = _ref;\n    const extent = publicAPI.getExtent();\n    const numberOfComponents = publicAPI.getPointData().getScalars().getNumberOfComponents();\n    const increments = publicAPI.computeIncrements(extent, numberOfComponents);\n    // Use the array increments to find the pixel index\n    // similar to c++ vtkImageData::GetArrayPointer\n    // Math.floor to catch \"practically 0\" e^-15 scenarios.\n    return Math.floor((Math.round(i) - extent[0]) * increments[0] + (Math.round(j) - extent[2]) * increments[1] + (Math.round(k) - extent[4]) * increments[2]);\n  };\n\n  /**\n   * @param {Number[]} xyz the [x,y,z] Array in world coordinates\n   * @return {Number|NaN} the corresponding pixel's index in the scalar array\n   */\n  publicAPI.getOffsetIndexFromWorld = xyz => {\n    const extent = publicAPI.getExtent();\n    const index = publicAPI.worldToIndex(xyz);\n\n    // Confirm indexed i,j,k coords are within the bounds of the volume\n    for (let idx = 0; idx < 3; ++idx) {\n      if (index[idx] < extent[idx * 2] || index[idx] > extent[idx * 2 + 1]) {\n        vtkErrorMacro(`GetScalarPointer: Pixel ${index} is not in memory. Current extent = ${extent}`);\n        return NaN;\n      }\n    }\n\n    // Assumed the index here is within 0 <-> scalarData.length, but doesn't hurt to check upstream\n    return publicAPI.computeOffsetIndex(index);\n  };\n  /**\n   * @param {Number[]} xyz the [x,y,z] Array in world coordinates\n   * @param {Number?} comp the scalar component index for multi-component scalars\n   * @return {Number|NaN} the corresponding pixel's scalar value\n   */\n  publicAPI.getScalarValueFromWorld = function (xyz) {\n    let comp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    const numberOfComponents = publicAPI.getPointData().getScalars().getNumberOfComponents();\n    if (comp < 0 || comp >= numberOfComponents) {\n      vtkErrorMacro(`GetScalarPointer: Scalar Component ${comp} is not within bounds. Current Scalar numberOfComponents: ${numberOfComponents}`);\n      return NaN;\n    }\n    const offsetIndex = publicAPI.getOffsetIndexFromWorld(xyz);\n    if (Number.isNaN(offsetIndex)) {\n      // VTK Error Macro will have been tripped already, no need to do it again,\n      return offsetIndex;\n    }\n    return publicAPI.getPointData().getScalars().getComponent(offsetIndex, comp);\n  };\n  const superInitialize = publicAPI.initialize;\n  publicAPI.initialize = () => {\n    publicAPI.set({\n      direction: mat3.identity(model.direction),\n      spacing: [1.0, 1.0, 1.0],\n      origin: [0.0, 0.0, 0.0],\n      extent: [0, -1, 0, -1, 0, -1],\n      dataDescription: StructuredType.EMPTY\n    });\n    return superInitialize();\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  direction: null,\n  // a mat3\n  indexToWorld: null,\n  // a mat4\n  worldToIndex: null,\n  // a mat4\n  spacing: [1.0, 1.0, 1.0],\n  origin: [0.0, 0.0, 0.0],\n  extent: [0, -1, 0, -1, 0, -1],\n  dataDescription: StructuredType.EMPTY\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkDataSet.extend(publicAPI, model, initialValues);\n  if (!model.direction) {\n    model.direction = mat3.identity(new Float64Array(9));\n  } else if (Array.isArray(model.direction)) {\n    model.direction = new Float64Array(model.direction.slice(0, 9));\n  }\n  model.indexToWorld = new Float64Array(16);\n  model.worldToIndex = new Float64Array(16);\n\n  // Set/Get methods\n  macro.get(publicAPI, model, ['indexToWorld', 'worldToIndex']);\n  macro.setGetArray(publicAPI, model, ['origin', 'spacing'], 3);\n  macro.setGetArray(publicAPI, model, ['direction'], 9);\n  macro.getArray(publicAPI, model, ['extent'], 6);\n\n  // Object specific methods\n  vtkImageData(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkImageData');\n\n// ----------------------------------------------------------------------------\n\nvar vtkImageData$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkImageData$1 as default, extend, newInstance };\n", "const VectorMode = {\n  MAGNITUDE: 0,\n  COMPONENT: 1,\n  RGBCOLORS: 2\n};\nconst ScalarMappingTarget = {\n  LUMINANCE: 1,\n  LUMINANCE_ALPHA: 2,\n  RGB: 3,\n  RGBA: 4\n};\nconst Scale = {\n  LINEAR: 0,\n  LOG10: 1\n};\nvar vtkScalarsToColors = {\n  VectorMode,\n  ScalarMappingTarget,\n  Scale\n};\n\nexport { ScalarMappingTarget, Scale, VectorMode, vtkScalarsToColors as default };\n", "const ColorMode = {\n  DEFAULT: 0,\n  MAP_SCALARS: 1,\n  DIRECT_SCALARS: 2\n};\nconst ScalarMode = {\n  DEFAULT: 0,\n  USE_POINT_DATA: 1,\n  USE_CELL_DATA: 2,\n  USE_POINT_FIELD_DATA: 3,\n  USE_CELL_FIELD_DATA: 4,\n  USE_FIELD_DATA: 5\n};\nconst GetArray = {\n  BY_ID: 0,\n  BY_NAME: 1\n};\nvar Constants = {\n  ColorMode,\n  GetArray,\n  ScalarMode\n};\n\nexport { ColorMode, GetArray, ScalarMode, Constants as default };\n", "import { m as macro } from '../../macros2.js';\nimport vtkDataArray from './DataArray.js';\nimport vtkScalarsToColors$2 from './ScalarsToColors/Constants.js';\nimport Constants from '../../Rendering/Core/Mapper/Constants.js';\n\nconst {\n  ScalarMappingTarget,\n  Scale,\n  VectorMode\n} = vtkScalarsToColors$2;\nconst {\n  VtkDataTypes\n} = vtkDataArray;\nconst {\n  ColorMode\n} = Constants;\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// Add module-level functions or api that you want to expose statically via\n// the next section...\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nfunction intColorToUChar(c) {\n  return c;\n}\nfunction floatColorToUChar(c) {\n  return Math.floor(c * 255.0 + 0.5);\n}\n\n// ----------------------------------------------------------------------------\n// vtkScalarsToColors methods\n// ----------------------------------------------------------------------------\n\nfunction vtkScalarsToColors(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkScalarsToColors');\n  publicAPI.setVectorModeToMagnitude = () => publicAPI.setVectorMode(VectorMode.MAGNITUDE);\n  publicAPI.setVectorModeToComponent = () => publicAPI.setVectorMode(VectorMode.COMPONENT);\n  publicAPI.setVectorModeToRGBColors = () => publicAPI.setVectorMode(VectorMode.RGBCOLORS);\n  publicAPI.build = () => {};\n  publicAPI.isOpaque = () => true;\n\n  //----------------------------------------------------------------------------\n  publicAPI.setAnnotations = (values, annotations) => {\n    if (values && !annotations || !values && annotations) {\n      return;\n    }\n    if (values && annotations && values.length !== annotations.length) {\n      vtkErrorMacro('Values and annotations do not have the same number of tuples so ignoring');\n      return;\n    }\n    model.annotationArray = [];\n    if (annotations && values) {\n      const num = annotations.length;\n      for (let i = 0; i < num; i++) {\n        model.annotationArray.push({\n          value: values[i],\n          annotation: String(annotations[i])\n        });\n      }\n    }\n    publicAPI.updateAnnotatedValueMap();\n    publicAPI.modified();\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.setAnnotation = (value, annotation) => {\n    let i = publicAPI.checkForAnnotatedValue(value);\n    let modified = false;\n    if (i >= 0) {\n      if (model.annotationArray[i].annotation !== annotation) {\n        model.annotationArray[i].annotation = annotation;\n        modified = true;\n      }\n    } else {\n      model.annotationArray.push({\n        value,\n        annotation\n      });\n      i = model.annotationArray.length - 1;\n      modified = true;\n    }\n    if (modified) {\n      publicAPI.updateAnnotatedValueMap();\n      publicAPI.modified();\n    }\n    return i;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getNumberOfAnnotatedValues = () => model.annotationArray.length;\n\n  //----------------------------------------------------------------------------\n  publicAPI.getAnnotatedValue = idx => {\n    if (idx < 0 || idx >= model.annotationArray.length) {\n      return null;\n    }\n    return model.annotationArray[idx].value;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getAnnotation = idx => {\n    if (model.annotationArray[idx] === undefined) {\n      return null;\n    }\n    return model.annotationArray[idx].annotation;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getAnnotatedValueIndex = val => model.annotationArray.length ? publicAPI.checkForAnnotatedValue(val) : -1;\n\n  //----------------------------------------------------------------------------\n  publicAPI.removeAnnotation = value => {\n    const i = publicAPI.checkForAnnotatedValue(value);\n    const needToRemove = i >= 0;\n    if (needToRemove) {\n      model.annotationArray.splice(i, 1);\n      publicAPI.updateAnnotatedValueMap();\n      publicAPI.modified();\n    }\n    return needToRemove;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.resetAnnotations = () => {\n    model.annotationArray = [];\n    model.annotatedValueMap = [];\n    publicAPI.modified();\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getAnnotationColor = (val, rgba) => {\n    if (model.indexedLookup) {\n      const i = publicAPI.getAnnotatedValueIndex(val);\n      publicAPI.getIndexedColor(i, rgba);\n    } else {\n      publicAPI.getColor(parseFloat(val), rgba);\n      rgba[3] = 1.0;\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.checkForAnnotatedValue = value => publicAPI.getAnnotatedValueIndexInternal(value);\n\n  //----------------------------------------------------------------------------\n  // An unsafe version of vtkScalarsToColors::CheckForAnnotatedValue for\n  // internal use (no pointer checks performed)\n  publicAPI.getAnnotatedValueIndexInternal = value => {\n    if (model.annotatedValueMap[value] !== undefined) {\n      const na = model.annotationArray.length;\n      return model.annotatedValueMap[value] % na;\n    }\n    // Treat as a NaN\n    return -1;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.getIndexedColor = (val, rgba) => {\n    rgba[0] = 0.0;\n    rgba[1] = 0.0;\n    rgba[2] = 0.0;\n    rgba[3] = 0.0;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.updateAnnotatedValueMap = () => {\n    model.annotatedValueMap = [];\n    const na = model.annotationArray.length;\n    for (let i = 0; i < na; i++) {\n      model.annotatedValueMap[model.annotationArray[i].value] = i;\n    }\n  };\n\n  // Description:\n  // Internal methods that map a data array into a 4-component,\n  // unsigned char RGBA array. The color mode determines the behavior\n  // of mapping. If ColorMode.DEFAULT is set, then unsigned char\n  // data arrays are treated as colors (and converted to RGBA if\n  // necessary); If ColorMode.DIRECT_SCALARS is set, then all arrays\n  // are treated as colors (integer types are clamped in the range 0-255,\n  // floating point arrays are clamped in the range 0.0-1.0. Note 'char' does\n  // not have enough values to represent a color so mapping this type is\n  // considered an error);\n  // otherwise, the data is mapped through this instance\n  // of ScalarsToColors. The component argument is used for data\n  // arrays with more than one component; it indicates which component\n  // to use to do the blending.  When the component argument is -1,\n  // then the this object uses its own selected technique to change a\n  // vector into a scalar to map.\n  publicAPI.mapScalars = (scalars, colorMode, componentIn) => {\n    const numberOfComponents = scalars.getNumberOfComponents();\n    let newColors = null;\n\n    // map scalars through lookup table only if needed\n    if (colorMode === ColorMode.DEFAULT && (scalars.getDataType() === VtkDataTypes.UNSIGNED_CHAR || scalars.getDataType() === VtkDataTypes.UNSIGNED_CHAR_CLAMPED) || colorMode === ColorMode.DIRECT_SCALARS && scalars) {\n      newColors = publicAPI.convertToRGBA(scalars, numberOfComponents, scalars.getNumberOfTuples());\n    } else {\n      const newscalars = {\n        type: 'vtkDataArray',\n        name: 'temp',\n        numberOfComponents: 4,\n        dataType: VtkDataTypes.UNSIGNED_CHAR\n      };\n      const s = macro.newTypedArray(newscalars.dataType, 4 * scalars.getNumberOfTuples());\n      newscalars.values = s;\n      newscalars.size = s.length;\n      newColors = vtkDataArray.newInstance(newscalars);\n      let component = componentIn;\n\n      // If mapper did not specify a component, use the VectorMode\n      if (component < 0 && numberOfComponents > 1) {\n        publicAPI.mapVectorsThroughTable(scalars, newColors, ScalarMappingTarget.RGBA, -1, -1);\n      } else {\n        if (component < 0) {\n          component = 0;\n        }\n        if (component >= numberOfComponents) {\n          component = numberOfComponents - 1;\n        }\n\n        // Map the scalars to colors\n        publicAPI.mapScalarsThroughTable(scalars, newColors, ScalarMappingTarget.RGBA, component);\n      }\n    }\n    return newColors;\n  };\n  publicAPI.mapVectorsToMagnitude = (input, output, compsToUse) => {\n    const length = input.getNumberOfTuples();\n    const inIncr = input.getNumberOfComponents();\n    const outputV = output.getData();\n    const inputV = input.getData();\n    for (let i = 0; i < length; i++) {\n      let sum = 0.0;\n      for (let j = 0; j < compsToUse; j++) {\n        sum += inputV[i * inIncr + j] * inputV[i * inIncr + j];\n      }\n      outputV[i] = Math.sqrt(sum);\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  // Map a set of vector values through the table\n  publicAPI.mapVectorsThroughTable = (input, output, outputFormat, vectorComponentIn, vectorSizeIn) => {\n    let vectorMode = publicAPI.getVectorMode();\n    let vectorSize = vectorSizeIn;\n    let vectorComponent = vectorComponentIn;\n    const inComponents = input.getNumberOfComponents();\n    if (vectorMode === VectorMode.COMPONENT) {\n      // make sure vectorComponent is within allowed range\n      if (vectorComponent === -1) {\n        // if set to -1, use default value provided by table\n        vectorComponent = publicAPI.getVectorComponent();\n      }\n      if (vectorComponent < 0) {\n        vectorComponent = 0;\n      }\n      if (vectorComponent >= inComponents) {\n        vectorComponent = inComponents - 1;\n      }\n    } else {\n      // make sure vectorSize is within allowed range\n      if (vectorSize === -1) {\n        // if set to -1, use default value provided by table\n        vectorSize = publicAPI.getVectorSize();\n      }\n      if (vectorSize <= 0) {\n        vectorComponent = 0;\n        vectorSize = inComponents;\n      } else {\n        if (vectorComponent < 0) {\n          vectorComponent = 0;\n        }\n        if (vectorComponent >= inComponents) {\n          vectorComponent = inComponents - 1;\n        }\n        if (vectorComponent + vectorSize > inComponents) {\n          vectorSize = inComponents - vectorComponent;\n        }\n      }\n      if (vectorMode === VectorMode.MAGNITUDE && (inComponents === 1 || vectorSize === 1)) {\n        vectorMode = VectorMode.COMPONENT;\n      }\n    }\n\n    // increment input pointer to the first component to map\n    let inputOffset = 0;\n    if (vectorComponent > 0) {\n      inputOffset = vectorComponent;\n    }\n\n    // map according to the current vector mode\n    switch (vectorMode) {\n      case VectorMode.COMPONENT:\n        {\n          publicAPI.mapScalarsThroughTable(input, output, outputFormat, inputOffset);\n          break;\n        }\n      case VectorMode.RGBCOLORS:\n        {\n          // publicAPI.mapColorsToColors(\n          //   input, output, inComponents, vectorSize,\n          //   outputFormat);\n          break;\n        }\n\n      // MAGNITUDE is considered default\n      case VectorMode.MAGNITUDE:\n      default:\n        {\n          const magValues = vtkDataArray.newInstance({\n            numberOfComponents: 1,\n            values: new Float32Array(input.getNumberOfTuples())\n          });\n          publicAPI.mapVectorsToMagnitude(input, magValues, vectorSize);\n          publicAPI.mapScalarsThroughTable(magValues, output, outputFormat, 0);\n          break;\n        }\n    }\n  };\n  publicAPI.luminanceToRGBA = (newColors, colors, alpha, convtFun) => {\n    const a = convtFun(alpha);\n    const values = colors.getData();\n    const newValues = newColors.getData();\n    const size = values.length;\n    const component = 0;\n    const tuple = 1;\n    let count = 0;\n    for (let i = component; i < size; i += tuple) {\n      const l = convtFun(values[i]);\n      newValues[count * 4] = l;\n      newValues[count * 4 + 1] = l;\n      newValues[count * 4 + 2] = l;\n      newValues[count * 4 + 3] = a;\n      count++;\n    }\n  };\n  publicAPI.luminanceAlphaToRGBA = (newColors, colors, alpha, convtFun) => {\n    const values = colors.getData();\n    const newValues = newColors.getData();\n    const size = values.length;\n    const component = 0;\n    const tuple = 2;\n    let count = 0;\n    for (let i = component; i < size; i += tuple) {\n      const l = convtFun(values[i]);\n      newValues[count] = l;\n      newValues[count + 1] = l;\n      newValues[count + 2] = l;\n      newValues[count + 3] = convtFun(values[i + 1]) * alpha;\n      count += 4;\n    }\n  };\n  publicAPI.rGBToRGBA = (newColors, colors, alpha, convtFun) => {\n    const a = floatColorToUChar(alpha);\n    const values = colors.getData();\n    const newValues = newColors.getData();\n    const size = values.length;\n    const component = 0;\n    const tuple = 3;\n    let count = 0;\n    for (let i = component; i < size; i += tuple) {\n      newValues[count * 4] = convtFun(values[i]);\n      newValues[count * 4 + 1] = convtFun(values[i + 1]);\n      newValues[count * 4 + 2] = convtFun(values[i + 2]);\n      newValues[count * 4 + 3] = a;\n      count++;\n    }\n  };\n  publicAPI.rGBAToRGBA = (newColors, colors, alpha, convtFun) => {\n    const values = colors.getData();\n    const newValues = newColors.getData();\n    const size = values.length;\n    const component = 0;\n    const tuple = 4;\n    let count = 0;\n    for (let i = component; i < size; i += tuple) {\n      newValues[count * 4] = convtFun(values[i]);\n      newValues[count * 4 + 1] = convtFun(values[i + 1]);\n      newValues[count * 4 + 2] = convtFun(values[i + 2]);\n      newValues[count * 4 + 3] = convtFun(values[i + 3]) * alpha;\n      count++;\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.convertToRGBA = (colors, numComp, numTuples) => {\n    let {\n      alpha\n    } = model;\n    if (numComp === 4 && alpha >= 1.0 && colors.getDataType() === VtkDataTypes.UNSIGNED_CHAR) {\n      return colors;\n    }\n    const newColors = vtkDataArray.newInstance({\n      numberOfComponents: 4,\n      empty: true,\n      size: 4 * numTuples,\n      dataType: VtkDataTypes.UNSIGNED_CHAR\n    });\n    if (numTuples <= 0) {\n      return newColors;\n    }\n    alpha = alpha > 0 ? alpha : 0;\n    alpha = alpha < 1 ? alpha : 1;\n    let convtFun = intColorToUChar;\n    if (colors.getDataType() === VtkDataTypes.FLOAT || colors.getDataType() === VtkDataTypes.DOUBLE) {\n      convtFun = floatColorToUChar;\n    }\n    switch (numComp) {\n      case 1:\n        publicAPI.luminanceToRGBA(newColors, colors, alpha, convtFun);\n        break;\n      case 2:\n        publicAPI.luminanceAlphaToRGBA(newColors, colors, convtFun);\n        break;\n      case 3:\n        publicAPI.rGBToRGBA(newColors, colors, alpha, convtFun);\n        break;\n      case 4:\n        publicAPI.rGBAToRGBA(newColors, colors, alpha, convtFun);\n        break;\n      default:\n        vtkErrorMacro('Cannot convert colors');\n        return null;\n    }\n    return newColors;\n  };\n  publicAPI.usingLogScale = () => false;\n  publicAPI.getNumberOfAvailableColors = () => 256 * 256 * 256;\n  publicAPI.setRange = (min, max) => publicAPI.setMappingRange(min, max);\n  publicAPI.getRange = () => publicAPI.getMappingRange();\n  publicAPI.areScalarsOpaque = (scalars, colorMode, componentIn) => {\n    if (!scalars) {\n      return publicAPI.isOpaque();\n    }\n    const numberOfComponents = scalars.getNumberOfComponents();\n\n    // map scalars through lookup table only if needed\n    if (colorMode === ColorMode.DEFAULT && scalars.getDataType() === VtkDataTypes.UNSIGNED_CHAR || colorMode === ColorMode.DIRECT_SCALARS) {\n      // we will be using the scalars directly, so look at the number of\n      // components and the range\n      if (numberOfComponents === 3 || numberOfComponents === 1) {\n        return model.alpha >= 1.0;\n      }\n      // otherwise look at the range of the alpha channel\n      const range = scalars.getRange(numberOfComponents - 1);\n      return range[0] === 255;\n    }\n    return true;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  alpha: 1.0,\n  vectorComponent: 0,\n  vectorSize: -1,\n  vectorMode: VectorMode.COMPONENT,\n  mappingRange: null,\n  annotationArray: null,\n  annotatedValueMap: null,\n  indexedLookup: false,\n  scale: Scale.LINEAR\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  model.mappingRange = [0, 255];\n  model.annotationArray = [];\n  model.annotatedValueMap = [];\n\n  // Create get-set macros\n  macro.setGet(publicAPI, model, ['vectorSize', 'vectorComponent', 'vectorMode', 'alpha', 'indexedLookup']);\n\n  // Create set macros for array (needs to know size)\n  macro.setArray(publicAPI, model, ['mappingRange'], 2);\n\n  // Create get macros for array\n  macro.getArray(publicAPI, model, ['mappingRange']);\n\n  // For more macro methods, see \"Sources/macros.js\"\n\n  // Object specific methods\n  vtkScalarsToColors(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkScalarsToColors');\n\n// ----------------------------------------------------------------------------\n\nvar vtkScalarsToColors$1 = {\n  newInstance,\n  extend,\n  ...vtkScalarsToColors$2\n};\n\nexport { vtkScalarsToColors$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport { i as isNan, h as hsv2rgb } from './Math/index.js';\nimport vtkScalarsToColors from './ScalarsToColors.js';\nimport { ScalarMappingTarget } from './ScalarsToColors/Constants.js';\nimport { VtkDataTypes } from './DataArray/Constants.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// Add module-level functions or api that you want to expose statically via\n// the next section...\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst BELOW_RANGE_COLOR_INDEX = 0;\nconst ABOVE_RANGE_COLOR_INDEX = 1;\nconst NAN_COLOR_INDEX = 2;\n\n// ----------------------------------------------------------------------------\n// vtkMyClass methods\n// ----------------------------------------------------------------------------\n\nfunction vtkLookupTable(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkLookupTable');\n\n  //----------------------------------------------------------------------------\n  // Description:\n  // Return true if all of the values defining the mapping have an opacity\n  // equal to 1. Default implementation return true.\n  publicAPI.isOpaque = () => {\n    if (model.opaqueFlagBuildTime.getMTime() < publicAPI.getMTime()) {\n      let opaque = true;\n      if (model.nanColor[3] < 1.0) {\n        opaque = 0;\n      }\n      if (model.useBelowRangeColor && model.belowRangeColor[3] < 1.0) {\n        opaque = 0;\n      }\n      if (model.useAboveRangeColor && model.aboveRangeColor[3] < 1.0) {\n        opaque = 0;\n      }\n      for (let i = 3; i < model.table.length && opaque; i += 4) {\n        if (model.table[i] < 255) {\n          opaque = false;\n        }\n      }\n      model.opaqueFlag = opaque;\n      model.opaqueFlagBuildTime.modified();\n    }\n    return model.opaqueFlag;\n  };\n  publicAPI.usingLogScale = () => false;\n\n  //----------------------------------------------------------------------------\n  // Don't count special colors (min, max, NaN) as available colors\n  publicAPI.getNumberOfAvailableColors = () => model.table.length / 4 - 3;\n\n  //----------------------------------------------------------------------------\n  // Apply shift/scale to the scalar value v and return the index.\n  publicAPI.linearIndexLookup = (v, p) => {\n    let dIndex = 0;\n    const nv = Number(v);\n    if (nv < p.range[0]) {\n      dIndex = p.maxIndex + BELOW_RANGE_COLOR_INDEX + 1.5;\n    } else if (nv > p.range[1]) {\n      dIndex = p.maxIndex + ABOVE_RANGE_COLOR_INDEX + 1.5;\n    } else {\n      dIndex = (nv + p.shift) * p.scale;\n\n      // This conditional is needed because when v is very close to\n      // p.Range[1], it may map above p.MaxIndex in the linear mapping\n      // above.\n      dIndex = dIndex < p.maxIndex ? dIndex : p.maxIndex;\n    }\n    return Math.floor(dIndex);\n  };\n  publicAPI.linearLookup = (v, table, p) => {\n    let index = 0;\n    if (isNan(v)) {\n      index = Math.floor(p.maxIndex + 1.5 + NAN_COLOR_INDEX);\n    } else {\n      index = publicAPI.linearIndexLookup(v, p);\n    }\n    const offset = 4 * index;\n    return table.slice(offset, offset + 4);\n  };\n  publicAPI.indexedLookupFunction = (v, table, p) => {\n    let index = publicAPI.getAnnotatedValueIndexInternal(v);\n    if (index === -1) {\n      index = model.numberOfColors + NAN_COLOR_INDEX;\n    }\n    const offset = 4 * index;\n    return [table[offset], table[offset + 1], table[offset + 2], table[offset + 3]];\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.lookupShiftAndScale = (range, p) => {\n    p.shift = -range[0];\n    p.scale = Number.MAX_VALUE;\n    if (range[1] > range[0]) {\n      p.scale = (p.maxIndex + 1) / (range[1] - range[0]);\n    }\n  };\n\n  // Public API methods\n  publicAPI.mapScalarsThroughTable = (input, output, outFormat, inputOffset) => {\n    let lookupFunc = publicAPI.linearLookup;\n    if (model.indexedLookup) {\n      lookupFunc = publicAPI.indexedLookupFunction;\n    }\n    const trange = publicAPI.getMappingRange();\n    const p = {\n      maxIndex: publicAPI.getNumberOfColors() - 1,\n      range: trange,\n      shift: 0.0,\n      scale: 0.0\n    };\n    publicAPI.lookupShiftAndScale(trange, p);\n    const alpha = publicAPI.getAlpha();\n    const length = input.getNumberOfTuples();\n    const inIncr = input.getNumberOfComponents();\n    const outputV = output.getData();\n    const inputV = input.getData();\n    if (alpha >= 1.0) {\n      if (outFormat === ScalarMappingTarget.RGBA) {\n        for (let i = 0; i < length; i++) {\n          const cptr = lookupFunc(inputV[i * inIncr + inputOffset], model.table, p);\n          outputV[i * 4] = cptr[0];\n          outputV[i * 4 + 1] = cptr[1];\n          outputV[i * 4 + 2] = cptr[2];\n          outputV[i * 4 + 3] = cptr[3];\n        }\n      }\n    } else {\n      /* eslint-disable no-lonely-if */\n      if (outFormat === ScalarMappingTarget.RGBA) {\n        for (let i = 0; i < length; i++) {\n          const cptr = lookupFunc(inputV[i * inIncr + inputOffset], model.table, p);\n          outputV[i * 4] = cptr[0];\n          outputV[i * 4 + 1] = cptr[1];\n          outputV[i * 4 + 2] = cptr[2];\n          outputV[i * 4 + 3] = Math.floor(cptr[3] * alpha + 0.5);\n        }\n      }\n    } // alpha blending\n  };\n\n  publicAPI.forceBuild = () => {\n    let hinc = 0.0;\n    let sinc = 0.0;\n    let vinc = 0.0;\n    let ainc = 0.0;\n    const maxIndex = model.numberOfColors - 1;\n    if (maxIndex) {\n      hinc = (model.hueRange[1] - model.hueRange[0]) / maxIndex;\n      sinc = (model.saturationRange[1] - model.saturationRange[0]) / maxIndex;\n      vinc = (model.valueRange[1] - model.valueRange[0]) / maxIndex;\n      ainc = (model.alphaRange[1] - model.alphaRange[0]) / maxIndex;\n    }\n    model.table.length = 4 * maxIndex + 16;\n    const hsv = [];\n    const rgba = [];\n    for (let i = 0; i <= maxIndex; i++) {\n      hsv[0] = model.hueRange[0] + i * hinc;\n      hsv[1] = model.saturationRange[0] + i * sinc;\n      hsv[2] = model.valueRange[0] + i * vinc;\n      hsv2rgb(hsv, rgba);\n      rgba[3] = model.alphaRange[0] + i * ainc;\n\n      //  case VTK_RAMP_LINEAR:\n      model.table[i * 4] = rgba[0] * 255.0 + 0.5;\n      model.table[i * 4 + 1] = rgba[1] * 255.0 + 0.5;\n      model.table[i * 4 + 2] = rgba[2] * 255.0 + 0.5;\n      model.table[i * 4 + 3] = rgba[3] * 255.0 + 0.5;\n    }\n    publicAPI.buildSpecialColors();\n    model.buildTime.modified();\n  };\n  publicAPI.setTable = table => {\n    // Handle JS array (assume 2D array)\n    if (Array.isArray(table)) {\n      const nbComponents = table[0].length;\n      model.numberOfColors = table.length;\n      const colorOffset = 4 - nbComponents;\n      let offset = 0;\n      // fill table\n      for (let i = 0; i < model.numberOfColors; i++) {\n        model.table[i * 4] = 255;\n        model.table[i * 4 + 1] = 255;\n        model.table[i * 4 + 2] = 255;\n        model.table[i * 4 + 3] = 255;\n      }\n      // extract colors\n      for (let i = 0; i < table.length; i++) {\n        const color = table[i];\n        for (let j = 0; j < nbComponents; j++) {\n          model.table[offset++] = color[j];\n        }\n        offset += colorOffset;\n      }\n      publicAPI.buildSpecialColors();\n      model.insertTime.modified();\n      publicAPI.modified();\n      return true;\n    }\n    if (table.getNumberOfComponents() !== 4) {\n      vtkErrorMacro('Expected 4 components for RGBA colors');\n      return false;\n    }\n    if (table.getDataType() !== VtkDataTypes.UNSIGNED_CHAR) {\n      vtkErrorMacro('Expected unsigned char values for RGBA colors');\n      return false;\n    }\n    model.numberOfColors = table.getNumberOfTuples();\n    const data = table.getData();\n    model.table.length = data.length;\n    for (let i = 0; i < data.length; i++) {\n      model.table[i] = data[i];\n    }\n    publicAPI.buildSpecialColors();\n    model.insertTime.modified();\n    publicAPI.modified();\n    return true;\n  };\n  publicAPI.buildSpecialColors = () => {\n    // Add \"special\" colors (NaN, below range, above range) to table here.\n    const {\n      numberOfColors\n    } = model;\n    const tptr = model.table;\n    let base = (numberOfColors + BELOW_RANGE_COLOR_INDEX) * 4;\n\n    // Below range color\n    if (model.useBelowRangeColor || numberOfColors === 0) {\n      tptr[base] = model.belowRangeColor[0] * 255.0 + 0.5;\n      tptr[base + 1] = model.belowRangeColor[1] * 255.0 + 0.5;\n      tptr[base + 2] = model.belowRangeColor[2] * 255.0 + 0.5;\n      tptr[base + 3] = model.belowRangeColor[3] * 255.0 + 0.5;\n    } else {\n      // Duplicate the first color in the table.\n      tptr[base] = tptr[0];\n      tptr[base + 1] = tptr[1];\n      tptr[base + 2] = tptr[2];\n      tptr[base + 3] = tptr[3];\n    }\n\n    // Above range color\n    base = (numberOfColors + ABOVE_RANGE_COLOR_INDEX) * 4;\n    if (model.useAboveRangeColor || numberOfColors === 0) {\n      tptr[base] = model.aboveRangeColor[0] * 255.0 + 0.5;\n      tptr[base + 1] = model.aboveRangeColor[1] * 255.0 + 0.5;\n      tptr[base + 2] = model.aboveRangeColor[2] * 255.0 + 0.5;\n      tptr[base + 3] = model.aboveRangeColor[3] * 255.0 + 0.5;\n    } else {\n      // Duplicate the last color in the table.\n      tptr[base] = tptr[4 * (numberOfColors - 1) + 0];\n      tptr[base + 1] = tptr[4 * (numberOfColors - 1) + 1];\n      tptr[base + 2] = tptr[4 * (numberOfColors - 1) + 2];\n      tptr[base + 3] = tptr[4 * (numberOfColors - 1) + 3];\n    }\n\n    // Always use NanColor\n    base = (numberOfColors + NAN_COLOR_INDEX) * 4;\n    tptr[base] = model.nanColor[0] * 255.0 + 0.5;\n    tptr[base + 1] = model.nanColor[1] * 255.0 + 0.5;\n    tptr[base + 2] = model.nanColor[2] * 255.0 + 0.5;\n    tptr[base + 3] = model.nanColor[3] * 255.0 + 0.5;\n  };\n  publicAPI.build = () => {\n    if (model.table.length < 1 || publicAPI.getMTime() > model.buildTime.getMTime() && model.insertTime.getMTime() <= model.buildTime.getMTime()) {\n      publicAPI.forceBuild();\n    }\n  };\n  if (model.table.length > 0) {\n    // Ensure that special colors are properly included in the table\n    publicAPI.buildSpecialColors();\n\n    // ensure insertTime is more recently modified than buildTime if\n    // a table is provided via the constructor\n    model.insertTime.modified();\n  }\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  numberOfColors: 256,\n  // table: null,\n\n  hueRange: [0.0, 0.66667],\n  saturationRange: [1.0, 1.0],\n  valueRange: [1.0, 1.0],\n  alphaRange: [1.0, 1.0],\n  nanColor: [0.5, 0.0, 0.0, 1.0],\n  belowRangeColor: [0.0, 0.0, 0.0, 1.0],\n  aboveRangeColor: [1.0, 1.0, 1.0, 1.0],\n  useAboveRangeColor: false,\n  useBelowRangeColor: false,\n  alpha: 1.0\n  // buildTime: null,\n  // opaqueFlagBuildTime: null,\n  // insertTime: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkScalarsToColors.extend(publicAPI, model, initialValues);\n\n  // Internal objects initialization\n  if (!model.table) {\n    model.table = [];\n  }\n  model.buildTime = {};\n  macro.obj(model.buildTime);\n  model.opaqueFlagBuildTime = {};\n  macro.obj(model.opaqueFlagBuildTime, {\n    mtime: 0\n  });\n  model.insertTime = {};\n  macro.obj(model.insertTime, {\n    mtime: 0\n  });\n\n  // Create get-only macros\n  macro.get(publicAPI, model, ['buildTime']);\n\n  // Create get-set macros\n  macro.setGet(publicAPI, model, ['numberOfColors', 'useAboveRangeColor', 'useBelowRangeColor']);\n\n  // Create set macros for array (needs to know size)\n  macro.setArray(publicAPI, model, ['alphaRange', 'hueRange', 'saturationRange', 'valueRange'], 2);\n  macro.setArray(publicAPI, model, ['nanColor', 'belowRangeColor', 'aboveRangeColor'], 4);\n\n  // Create get macros for array\n  macro.getArray(publicAPI, model, ['hueRange', 'saturationRange', 'valueRange', 'alphaRange', 'nanColor', 'belowRangeColor', 'aboveRangeColor']);\n\n  // For more macro methods, see \"Sources/macros.js\"\n\n  // Object specific methods\n  vtkLookupTable(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkLookupTable');\n\n// ----------------------------------------------------------------------------\n\nvar vtkLookupTable$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkLookupTable$1 as default, extend, newInstance };\n", "const Resolve = {\n  Off: 0,\n  PolygonOffset: 1\n};\nlet resolveCoincidentTopologyPolygonOffsetFaces = Resolve.PolygonOffset;\nlet resolveCoincidentTopology = Resolve.Off;\nconst RESOLVE_COINCIDENT_TOPOLOGY_MODE = ['VTK_RESOLVE_OFF', 'VTK_RESOLVE_POLYGON_OFFSET'];\nfunction getResolveCoincidentTopologyPolygonOffsetFaces() {\n  return resolveCoincidentTopologyPolygonOffsetFaces;\n}\nfunction setResolveCoincidentTopologyPolygonOffsetFaces(value) {\n  const changed = resolveCoincidentTopologyPolygonOffsetFaces === value;\n  resolveCoincidentTopologyPolygonOffsetFaces = value;\n  return changed;\n}\nfunction getResolveCoincidentTopology() {\n  return resolveCoincidentTopology;\n}\nfunction setResolveCoincidentTopology() {\n  let mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  const changed = resolveCoincidentTopology === mode;\n  resolveCoincidentTopology = mode;\n  return changed;\n}\nfunction setResolveCoincidentTopologyToDefault() {\n  return setResolveCoincidentTopology(Resolve.Off);\n}\nfunction setResolveCoincidentTopologyToOff() {\n  return setResolveCoincidentTopology(Resolve.Off);\n}\nfunction setResolveCoincidentTopologyToPolygonOffset() {\n  return setResolveCoincidentTopology(Resolve.PolygonOffset);\n}\nfunction getResolveCoincidentTopologyAsString() {\n  return RESOLVE_COINCIDENT_TOPOLOGY_MODE[resolveCoincidentTopology];\n}\nvar otherStaticMethods = {\n  Resolve,\n  getResolveCoincidentTopologyAsString,\n  getResolveCoincidentTopologyPolygonOffsetFaces,\n  getResolveCoincidentTopology,\n  setResolveCoincidentTopology,\n  setResolveCoincidentTopologyPolygonOffsetFaces,\n  setResolveCoincidentTopologyToDefault,\n  setResolveCoincidentTopologyToOff,\n  setResolveCoincidentTopologyToPolygonOffset\n};\n\nexport { RESOLVE_COINCIDENT_TOPOLOGY_MODE, Resolve, otherStaticMethods as default, getResolveCoincidentTopology, getResolveCoincidentTopologyAsString, getResolveCoincidentTopologyPolygonOffsetFaces, setResolveCoincidentTopology, setResolveCoincidentTopologyPolygonOffsetFaces, setResolveCoincidentTopologyToDefault, setResolveCoincidentTopologyToOff, setResolveCoincidentTopologyToPolygonOffset };\n", "import otherStaticMethods, { Resolve } from './Static.js';\nexport { Resolve } from './Static.js';\nimport { m as macro } from '../../../macros2.js';\n\n/* eslint-disable arrow-body-style */\nfunction addCoincidentTopologyMethods(publicAPI, model, nameList) {\n  nameList.forEach(item => {\n    publicAPI[`get${item.method}`] = () => model[item.key];\n    publicAPI[`set${item.method}`] = macro.objectSetterMap.object(publicAPI, model, {\n      name: item.key,\n      params: ['factor', 'offset']\n    });\n  });\n}\nconst CATEGORIES = ['Polygon', 'Line', 'Point'];\n\n// CoincidentTopology static methods ------------------------------------------\n\nconst staticOffsetModel = {\n  Polygon: {\n    factor: 2,\n    offset: 0\n  },\n  Line: {\n    factor: 1,\n    offset: -1\n  },\n  Point: {\n    factor: 0,\n    offset: -2\n  }\n};\nconst noOp = () => undefined;\nconst staticOffsetAPI = {\n  modified: noOp\n};\naddCoincidentTopologyMethods(staticOffsetAPI, staticOffsetModel, CATEGORIES.map(key => ({\n  key,\n  method: `ResolveCoincidentTopology${key}OffsetParameters`\n})));\nfunction implementCoincidentTopologyMethods(publicAPI, model) {\n  if (model.resolveCoincidentTopology === undefined) {\n    model.resolveCoincidentTopology = false;\n  }\n  macro.setGet(publicAPI, model, ['resolveCoincidentTopology']);\n\n  // Relative methods\n  model.topologyOffset = {\n    Polygon: {\n      factor: 0,\n      offset: 0\n    },\n    Line: {\n      factor: 0,\n      offset: 0\n    },\n    Point: {\n      factor: 0,\n      offset: 0\n    }\n  };\n\n  // Add Static methods to our instance\n  Object.keys(otherStaticMethods).forEach(methodName => {\n    publicAPI[methodName] = otherStaticMethods[methodName];\n  });\n  Object.keys(staticOffsetAPI).filter(methodName => methodName !== 'modified') // don't override instance's modified\n  .forEach(methodName => {\n    publicAPI[methodName] = staticOffsetAPI[methodName];\n  });\n  addCoincidentTopologyMethods(publicAPI, model.topologyOffset, CATEGORIES.map(key => ({\n    key,\n    method: `RelativeCoincidentTopology${key}OffsetParameters`\n  })));\n  publicAPI.getCoincidentTopologyPolygonOffsetParameters = () => {\n    const globalValue = staticOffsetAPI.getResolveCoincidentTopologyPolygonOffsetParameters();\n    const localValue = publicAPI.getRelativeCoincidentTopologyPolygonOffsetParameters();\n    return {\n      factor: globalValue.factor + localValue.factor,\n      offset: globalValue.offset + localValue.offset\n    };\n  };\n  publicAPI.getCoincidentTopologyLineOffsetParameters = () => {\n    const globalValue = staticOffsetAPI.getResolveCoincidentTopologyLineOffsetParameters();\n    const localValue = publicAPI.getRelativeCoincidentTopologyLineOffsetParameters();\n    return {\n      factor: globalValue.factor + localValue.factor,\n      offset: globalValue.offset + localValue.offset\n    };\n  };\n  publicAPI.getCoincidentTopologyPointOffsetParameter = () => {\n    const globalValue = staticOffsetAPI.getResolveCoincidentTopologyPointOffsetParameters();\n    const localValue = publicAPI.getRelativeCoincidentTopologyPointOffsetParameters();\n    return {\n      factor: globalValue.factor + localValue.factor,\n      offset: globalValue.offset + localValue.offset\n    };\n  };\n}\nvar CoincidentTopologyHelper = {\n  implementCoincidentTopologyMethods,\n  staticOffsetAPI,\n  otherStaticMethods,\n  CATEGORIES,\n  Resolve\n};\n\nexport { CATEGORIES, CoincidentTopologyHelper as default };\n", "const PassTypes = {\n  MIN_KNOWN_PASS: 0,\n  ACTOR_PASS: 0,\n  COMPOSITE_INDEX_PASS: 1,\n  ID_LOW24: 2,\n  ID_HIGH24: 3,\n  MAX_KNOWN_PASS: 3\n};\nvar Constants = {\n  PassTypes\n};\n\nexport { PassTypes, Constants as default };\n", "import { m as macro } from '../../macros2.js';\nimport vtkAbstractMapper3D from './AbstractMapper3D.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport vtkImageData from '../../Common/DataModel/ImageData.js';\nimport vtkLookupTable from '../../Common/Core/LookupTable.js';\nimport { I as createUninitializedBounds, i as isNan } from '../../Common/Core/Math/index.js';\nimport vtkScalarsToColors from '../../Common/Core/ScalarsToColors/Constants.js';\nimport CoincidentTopologyHelper from './Mapper/CoincidentTopologyHelper.js';\nimport Constants from './Mapper/Constants.js';\nimport vtkDataSet from '../../Common/DataModel/DataSet.js';\nimport { PassTypes } from '../OpenGL/HardwareSelector/Constants.js';\n\nconst {\n  FieldAssociations\n} = vtkDataSet;\nconst {\n  staticOffsetAPI,\n  otherStaticMethods\n} = CoincidentTopologyHelper;\nconst {\n  ColorMode,\n  ScalarMode,\n  GetArray\n} = Constants;\nconst {\n  VectorMode\n} = vtkScalarsToColors;\nconst {\n  VtkDataTypes\n} = vtkDataArray;\n\n// ----------------------------------------------------------------------------\n\nfunction notImplemented(method) {\n  return () => macro.vtkErrorMacro(`vtkMapper::${method} - NOT IMPLEMENTED`);\n}\n\n/**\n * Increase by one the 3D coordinates\n * It will follow a zigzag pattern so that each coordinate is the neighbor of the next coordinate\n * This enables interpolation between two texels without issues\n * Note: texture coordinates can't be interpolated using this pattern\n * @param {vec3} coordinates The 3D coordinates using integers for each coorinate\n * @param {vec3} dimensions The 3D dimensions of the volume\n */\nfunction updateZigzaggingCoordinates(coordinates, dimensions) {\n  const directionX = coordinates[1] % 2 === 0 ? 1 : -1;\n  coordinates[0] += directionX;\n  if (coordinates[0] >= dimensions[0] || coordinates[0] < 0) {\n    const directionY = coordinates[2] % 2 === 0 ? 1 : -1;\n    coordinates[0] -= directionX;\n    coordinates[1] += directionY;\n    if (coordinates[1] >= dimensions[1] || coordinates[1] < 0) {\n      coordinates[1] -= directionY;\n      coordinates[2]++;\n    }\n  }\n}\n\n/**\n * Returns the index in the array representing the volume from a 3D coordinate\n * @param {vec3} coordinates The 3D integer coordinates\n * @param {vec3} dimensions The 3D dimensions of the volume\n * @returns The index in a flat array representing the volume\n */\nfunction getIndexFromCoordinates(coordinates, dimensions) {\n  return coordinates[0] + dimensions[0] * (coordinates[1] + dimensions[1] * coordinates[2]);\n}\n\n/**\n * Write texture coordinates for the given `texelIndexPosition` in `textureCoordinate`.\n * The `texelIndexPosition` is a floating point number that represents the distance in index space\n * from the center of the first texel to the final output position.\n * The output is given in texture coordinates and not in index coordinates (this is done at the very end of the function)\n * @param {vec3} textureCoordinate The output texture coordinates (to avoid allocating a new Array)\n * @param {Number} texelIndexPosition The floating point distance from the center of the first texel, following a zigzag pattern\n * @param {vec3} dimensions The 3D dimensions of the volume\n */\nfunction getZigZagTextureCoordinatesFromTexelPosition(textureCoordinate, texelIndexPosition, dimensions) {\n  // First compute the integer textureCoordinate\n  const intTexelIndex = Math.floor(texelIndexPosition);\n  const xCoordBeforeWrap = intTexelIndex % (2 * dimensions[0]);\n  let xDirection;\n  let xEndFlag;\n  if (xCoordBeforeWrap < dimensions[0]) {\n    textureCoordinate[0] = xCoordBeforeWrap;\n    xDirection = 1;\n    xEndFlag = textureCoordinate[0] === dimensions[0] - 1;\n  } else {\n    textureCoordinate[0] = 2 * dimensions[0] - 1 - xCoordBeforeWrap;\n    xDirection = -1;\n    xEndFlag = textureCoordinate[0] === 0;\n  }\n  const intRowIndex = Math.floor(intTexelIndex / dimensions[0]);\n  const yCoordBeforeWrap = intRowIndex % (2 * dimensions[1]);\n  let yDirection;\n  let yEndFlag;\n  if (yCoordBeforeWrap < dimensions[1]) {\n    textureCoordinate[1] = yCoordBeforeWrap;\n    yDirection = 1;\n    yEndFlag = textureCoordinate[1] === dimensions[1] - 1;\n  } else {\n    textureCoordinate[1] = 2 * dimensions[1] - 1 - yCoordBeforeWrap;\n    yDirection = -1;\n    yEndFlag = textureCoordinate[1] === 0;\n  }\n  textureCoordinate[2] = Math.floor(intRowIndex / dimensions[1]);\n\n  // Now add the remainder either in x, y or z\n  const remainder = texelIndexPosition - intTexelIndex;\n  if (xEndFlag) {\n    if (yEndFlag) {\n      textureCoordinate[2] += remainder;\n    } else {\n      textureCoordinate[1] += yDirection * remainder;\n    }\n  } else {\n    textureCoordinate[0] += xDirection * remainder;\n  }\n\n  // textureCoordinates are in index space, convert to texture space\n  textureCoordinate[0] = (textureCoordinate[0] + 0.5) / dimensions[0];\n  textureCoordinate[1] = (textureCoordinate[1] + 0.5) / dimensions[1];\n  textureCoordinate[2] = (textureCoordinate[2] + 0.5) / dimensions[2];\n}\n\n// Associate an input vtkDataArray to an object { stringHash, textureCoordinates }\n// A single dataArray only caches one array of texture coordinates, so this cache is useless when\n// the input data array is used with two different lookup tables (which is very unlikely)\nconst colorTextureCoordinatesCache = new WeakMap();\n/**\n * The minimum of the range is mapped to the center of the first texel excluding min texel (texel at index distance 1)\n * The maximum of the range is mapped to the center of the last texel excluding max and NaN texels (texel at index distance numberOfColorsInRange)\n * The result is cached, and is reused if the arguments are the same and the input doesn't change\n * @param {vtkDataArray} input The input data array used for coloring\n * @param {Number} component The component of the input data array that is used for coloring (-1 for magnitude of the vectors)\n * @param {Range} range The range of the scalars\n * @param {boolean} useLogScale Should the values be transformed to logarithmic scale. When true, the range must already be in logarithmic scale.\n * @param {Number} numberOfColorsInRange The number of colors that are used in the range\n * @param {vec3} dimensions The dimensions of the texture\n * @param {boolean} useZigzagPattern If a zigzag pattern should be used. Otherwise 1 row for colors (including min and max) and 1 row for NaN are used.\n * @returns A vtkDataArray containing the texture coordinates (2D or 3D)\n */\nfunction getOrCreateColorTextureCoordinates(input, component, range, useLogScale, numberOfColorsInRange, dimensions, useZigzagPattern) {\n  // Caching using the \"arguments\" special object (because it is a pure function)\n  const argStrings = new Array(arguments.length);\n  for (let argIndex = 0; argIndex < arguments.length; ++argIndex) {\n    // eslint-disable-next-line prefer-rest-params\n    const arg = arguments[argIndex];\n    argStrings[argIndex] = arg.getMTime?.() ?? arg;\n  }\n  const stringHash = argStrings.join('/');\n  const cachedResult = colorTextureCoordinatesCache.get(input);\n  if (cachedResult && cachedResult.stringHash === stringHash) {\n    return cachedResult.textureCoordinates;\n  }\n\n  // The range used for computing coordinates have to change\n  // slightly to accommodate the special above- and below-range\n  // colors that are the first and last texels, respectively.\n  const scalarTexelWidth = (range[1] - range[0]) / (numberOfColorsInRange - 1);\n  const [paddedRangeMin, paddedRangeMax] = [range[0] - scalarTexelWidth, range[1] + scalarTexelWidth];\n\n  // Use the center of the voxel\n  const textureSOrigin = paddedRangeMin - 0.5 * scalarTexelWidth;\n  const textureSCoeff = 1.0 / (paddedRangeMax - paddedRangeMin + scalarTexelWidth);\n\n  // Compute in index space first\n  const texelIndexOrigin = paddedRangeMin;\n  const texelIndexCoeff = (numberOfColorsInRange + 1) / (paddedRangeMax - paddedRangeMin);\n  const inputV = input.getData();\n  const numScalars = input.getNumberOfTuples();\n  const numComps = input.getNumberOfComponents();\n  const useMagnitude = component < 0 || component >= numComps;\n  const numberOfOutputComponents = dimensions[2] <= 1 ? 2 : 3;\n  const output = vtkDataArray.newInstance({\n    numberOfComponents: numberOfOutputComponents,\n    values: new Float32Array(numScalars * numberOfOutputComponents)\n  });\n  const outputV = output.getData();\n  const nanTextureCoordinate = [0, 0, 0];\n  // Distance of NaN from the beginning:\n  // min: 0, ...colorsInRange, max: numberOfColorsInRange + 1, NaN = numberOfColorsInRange + 2\n  getZigZagTextureCoordinatesFromTexelPosition(nanTextureCoordinate, numberOfColorsInRange + 2, dimensions);\n\n  // Set a texture coordinate in the output for each tuple in the input\n  let inputIdx = 0;\n  let outputIdx = 0;\n  const textureCoordinate = [0.5, 0.5, 0.5];\n  for (let scalarIdx = 0; scalarIdx < numScalars; ++scalarIdx) {\n    // Get scalar value from magnitude or a single component\n    let scalarValue;\n    if (useMagnitude) {\n      let sum = 0;\n      for (let compIdx = 0; compIdx < numComps; ++compIdx) {\n        const compValue = Number(inputV[inputIdx + compIdx]);\n        sum += compValue * compValue;\n      }\n      scalarValue = Math.sqrt(sum);\n    } else {\n      scalarValue = Number(inputV[inputIdx + component]);\n    }\n    if (useLogScale) {\n      scalarValue = Math.log10(scalarValue);\n    }\n    inputIdx += numComps;\n\n    // Convert to texture coordinates and update output\n    if (isNan(scalarValue)) {\n      // Last texels are NaN colors (there is at least one NaN color)\n      textureCoordinate[0] = nanTextureCoordinate[0];\n      textureCoordinate[1] = nanTextureCoordinate[1];\n      textureCoordinate[2] = nanTextureCoordinate[2];\n    } else if (useZigzagPattern) {\n      // Texel position is in [0, numberOfColorsInRange + 1]\n      let texelIndexPosition = (scalarValue - texelIndexOrigin) * texelIndexCoeff;\n      if (texelIndexPosition < 1) {\n        // Use min color when smaller than range\n        texelIndexPosition = 0;\n      } else if (texelIndexPosition > numberOfColorsInRange) {\n        // Use max color when greater than range\n        texelIndexPosition = numberOfColorsInRange + 1;\n      }\n\n      // Convert the texel position into texture coordinate following a zigzag pattern\n      getZigZagTextureCoordinatesFromTexelPosition(textureCoordinate, texelIndexPosition, dimensions);\n    } else {\n      // 0.0 in t coordinate means not NaN.  So why am I setting it to 0.49?\n      // Because when you are mapping scalars and you have a NaN adjacent to\n      // anything else, the interpolation everywhere should be NaN.  Thus, I\n      // want the NaN color everywhere except right on the non-NaN neighbors.\n      // To simulate this, I set the t coord for the real numbers close to\n      // the threshold so that the interpolation almost immediately looks up\n      // the NaN value.\n      textureCoordinate[1] = 0.49;\n\n      // Some implementations apparently don't handle relatively large\n      // numbers (compared to the range [0.0, 1.0]) very well. In fact,\n      // values above 1122.0f appear to cause texture wrap-around on\n      // some systems even when edge clamping is enabled. Why 1122.0f? I\n      // don't know. For safety, we'll clamp at +/- 1000. This will\n      // result in incorrect images when the texture value should be\n      // above or below 1000, but I don't have a better solution.\n      const textureS = (scalarValue - textureSOrigin) * textureSCoeff;\n      if (textureS > 1000.0) {\n        textureCoordinate[0] = 1000.0;\n      } else if (textureS < -1000.0) {\n        textureCoordinate[0] = -1000.0;\n      } else {\n        textureCoordinate[0] = textureS;\n      }\n    }\n    for (let i = 0; i < numberOfOutputComponents; ++i) {\n      outputV[outputIdx++] = textureCoordinate[i];\n    }\n  }\n  colorTextureCoordinatesCache.set(input, {\n    stringHash,\n    textureCoordinates: output\n  });\n  return output;\n}\n\n// ----------------------------------------------------------------------------\n// vtkMapper methods\n// ----------------------------------------------------------------------------\n\nfunction vtkMapper(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkMapper');\n  publicAPI.getBounds = () => {\n    const input = publicAPI.getInputData();\n    if (!input) {\n      model.bounds = createUninitializedBounds();\n    } else {\n      if (!model.static) {\n        publicAPI.update();\n      }\n      model.bounds = input.getBounds();\n    }\n    return model.bounds;\n  };\n  publicAPI.setForceCompileOnly = v => {\n    model.forceCompileOnly = v;\n    // make sure we do NOT call modified()\n  };\n\n  publicAPI.setSelectionWebGLIdsToVTKIds = selectionWebGLIdsToVTKIds => {\n    model.selectionWebGLIdsToVTKIds = selectionWebGLIdsToVTKIds;\n    // make sure we do NOT call modified()\n    // this attribute is only used when processing a selection made with the hardware selector\n    // the mtime of the mapper doesn't need to be changed\n  };\n\n  publicAPI.createDefaultLookupTable = () => {\n    model.lookupTable = vtkLookupTable.newInstance();\n  };\n  publicAPI.getColorModeAsString = () => macro.enumToString(ColorMode, model.colorMode);\n  publicAPI.setColorModeToDefault = () => publicAPI.setColorMode(0);\n  publicAPI.setColorModeToMapScalars = () => publicAPI.setColorMode(1);\n  publicAPI.setColorModeToDirectScalars = () => publicAPI.setColorMode(2);\n  publicAPI.getScalarModeAsString = () => macro.enumToString(ScalarMode, model.scalarMode);\n  publicAPI.setScalarModeToDefault = () => publicAPI.setScalarMode(0);\n  publicAPI.setScalarModeToUsePointData = () => publicAPI.setScalarMode(1);\n  publicAPI.setScalarModeToUseCellData = () => publicAPI.setScalarMode(2);\n  publicAPI.setScalarModeToUsePointFieldData = () => publicAPI.setScalarMode(3);\n  publicAPI.setScalarModeToUseCellFieldData = () => publicAPI.setScalarMode(4);\n  publicAPI.setScalarModeToUseFieldData = () => publicAPI.setScalarMode(5);\n  publicAPI.getAbstractScalars = (input, scalarMode, arrayAccessMode, arrayId, arrayName) => {\n    // make sure we have an input\n    if (!input || !model.scalarVisibility) {\n      return {\n        scalars: null,\n        cellFlag: false\n      };\n    }\n    let scalars = null;\n    let cellFlag = false;\n\n    // get and scalar data according to scalar mode\n    if (scalarMode === ScalarMode.DEFAULT) {\n      scalars = input.getPointData().getScalars();\n      if (!scalars) {\n        scalars = input.getCellData().getScalars();\n        cellFlag = true;\n      }\n    } else if (scalarMode === ScalarMode.USE_POINT_DATA) {\n      scalars = input.getPointData().getScalars();\n    } else if (scalarMode === ScalarMode.USE_CELL_DATA) {\n      scalars = input.getCellData().getScalars();\n      cellFlag = true;\n    } else if (scalarMode === ScalarMode.USE_POINT_FIELD_DATA) {\n      const pd = input.getPointData();\n      if (arrayAccessMode === GetArray.BY_ID) {\n        scalars = pd.getArrayByIndex(arrayId);\n      } else {\n        scalars = pd.getArrayByName(arrayName);\n      }\n    } else if (scalarMode === ScalarMode.USE_CELL_FIELD_DATA) {\n      const cd = input.getCellData();\n      cellFlag = true;\n      if (arrayAccessMode === GetArray.BY_ID) {\n        scalars = cd.getArrayByIndex(arrayId);\n      } else {\n        scalars = cd.getArrayByName(arrayName);\n      }\n    } else if (scalarMode === ScalarMode.USE_FIELD_DATA) {\n      const fd = input.getFieldData();\n      if (arrayAccessMode === GetArray.BY_ID) {\n        scalars = fd.getArrayByIndex(arrayId);\n      } else {\n        scalars = fd.getArrayByName(arrayName);\n      }\n    }\n    return {\n      scalars,\n      cellFlag\n    };\n  };\n  publicAPI.mapScalars = (input, alpha) => {\n    const {\n      scalars,\n      cellFlag\n    } = publicAPI.getAbstractScalars(input, model.scalarMode, model.arrayAccessMode, model.arrayId, model.colorByArrayName);\n    model.areScalarsMappedFromCells = cellFlag;\n    if (!scalars) {\n      model.colorCoordinates = null;\n      model.colorTextureMap = null;\n      model.colorMapColors = null;\n      return;\n    }\n\n    // we want to only recompute when something has changed\n    const toString = `${publicAPI.getMTime()}${scalars.getMTime()}${alpha}`;\n    if (model.colorBuildString === toString) return;\n    if (!model.useLookupTableScalarRange) {\n      publicAPI.getLookupTable().setRange(model.scalarRange[0], model.scalarRange[1]);\n    }\n\n    // Decide between texture color or vertex color.\n    // Cell data always uses vertex color.\n    // Only point data can use both texture and vertex coloring.\n    if (publicAPI.canUseTextureMapForColoring(scalars, cellFlag)) {\n      model.mapScalarsToTexture(scalars, cellFlag, alpha);\n    } else {\n      model.colorCoordinates = null;\n      model.colorTextureMap = null;\n      const lut = publicAPI.getLookupTable();\n      if (lut) {\n        // Ensure that the lookup table is built\n        lut.build();\n        model.colorMapColors = lut.mapScalars(scalars, model.colorMode, model.fieldDataTupleId);\n      }\n    }\n    model.colorBuildString = `${publicAPI.getMTime()}${scalars.getMTime()}${alpha}`;\n  };\n\n  // Protected method\n  model.mapScalarsToTexture = (scalars, cellFlag, alpha) => {\n    const range = model.lookupTable.getRange();\n    const useLogScale = model.lookupTable.usingLogScale();\n    const origAlpha = model.lookupTable.getAlpha();\n    const scaledRange = useLogScale ? [Math.log10(range[0]), Math.log10(range[1])] : range;\n\n    // Get rid of vertex color array.  Only texture or vertex coloring\n    // can be active at one time.  The existence of the array is the\n    // signal to use that technique.\n    model.colorMapColors = null;\n\n    // If the lookup table has changed, then recreate the color texture map.\n    // Set a new lookup table changes this->MTime.\n    if (model.colorTextureMap == null || publicAPI.getMTime() > model.colorTextureMap.getMTime() || model.lookupTable.getMTime() > model.colorTextureMap.getMTime() || model.lookupTable.getAlpha() !== alpha) {\n      model.lookupTable.setAlpha(alpha);\n      model.colorTextureMap = null;\n\n      // Get the texture map from the lookup table.\n      // Create a dummy ramp of scalars.\n      // In the future, we could extend vtkScalarsToColors.\n      model.lookupTable.build();\n      const numberOfAvailableColors = model.lookupTable.getNumberOfAvailableColors();\n\n      // Maximum dimensions and number of colors in range\n      const maxTextureWidthForCells = 2048;\n      const maxColorsInRangeForCells = maxTextureWidthForCells ** 3 - 3; // 3D but keep a color for min, max and NaN\n      const maxTextureWidthForPoints = 4096;\n      const maxColorsInRangeForPoints = maxTextureWidthForPoints - 2; // 1D but keep a color for min and max (NaN is in a different row)\n      // Minimum number of colors in range (excluding special colors like minColor, maxColor and NaNColor)\n      const minColorsInRange = 2;\n      // Maximum number of colors, limited by the maximum possible texture size\n      const maxColorsInRange = cellFlag ? maxColorsInRangeForCells : maxColorsInRangeForPoints;\n      model.numberOfColorsInRange = Math.min(Math.max(numberOfAvailableColors, minColorsInRange), maxColorsInRange);\n      const numberOfColorsForCells = model.numberOfColorsInRange + 3; // Add min, max and NaN\n      const numberOfColorsInUpperRowForPoints = model.numberOfColorsInRange + 2; // Add min and max ; the lower row will be used for NaN color\n      const textureDimensions = cellFlag ? [Math.min(Math.ceil(numberOfColorsForCells / maxTextureWidthForCells ** 0), maxTextureWidthForCells), Math.min(Math.ceil(numberOfColorsForCells / maxTextureWidthForCells ** 1), maxTextureWidthForCells), Math.min(Math.ceil(numberOfColorsForCells / maxTextureWidthForCells ** 2), maxTextureWidthForCells)] : [numberOfColorsInUpperRowForPoints, 2, 1];\n      const textureSize = textureDimensions[0] * textureDimensions[1] * textureDimensions[2];\n      const scalarsArray = new Float64Array(textureSize);\n\n      // Colors for NaN by default\n      scalarsArray.fill(NaN);\n\n      // Colors in range\n      // Add 2 to also get color for min and max\n      const numberOfNonSpecialColors = model.numberOfColorsInRange;\n      const numberOfNonNaNColors = numberOfNonSpecialColors + 2;\n      const textureCoordinates = [0, 0, 0];\n      const rangeMin = scaledRange[0];\n      const rangeDifference = scaledRange[1] - scaledRange[0];\n      for (let i = 0; i < numberOfNonNaNColors; ++i) {\n        const scalarsArrayIndex = getIndexFromCoordinates(textureCoordinates, textureDimensions);\n\n        // Minus 1 start at min color\n        const intermediateValue = rangeMin + rangeDifference * (i - 1) / (numberOfNonSpecialColors - 1);\n        const scalarValue = useLogScale ? 10.0 ** intermediateValue : intermediateValue;\n        scalarsArray[scalarsArrayIndex] = scalarValue;\n\n        // Colors are zigzagging to allow interpolation between two neighbor colors when coloring cells\n        updateZigzaggingCoordinates(textureCoordinates, textureDimensions);\n      }\n      const scalarsDataArray = vtkDataArray.newInstance({\n        numberOfComponents: 1,\n        values: scalarsArray\n      });\n      const colorsDataArray = model.lookupTable.mapScalars(scalarsDataArray, model.colorMode, 0);\n      model.colorTextureMap = vtkImageData.newInstance();\n      model.colorTextureMap.setDimensions(textureDimensions);\n      model.colorTextureMap.getPointData().setScalars(colorsDataArray);\n      model.lookupTable.setAlpha(origAlpha);\n    }\n\n    // Although I like the feature of applying magnitude to single component\n    // scalars, it is not how the old MapScalars for vertex coloring works.\n    const scalarComponent = model.lookupTable.getVectorMode() === VectorMode.MAGNITUDE && scalars.getNumberOfComponents() > 1 ? -1 : model.lookupTable.getVectorComponent();\n\n    // Create new coordinates if necessary, this function uses cache if possible.\n    // A zigzag pattern can't be used with point data, as interpolation of texture coordinates will be wrong\n    // A zigzag pattern can be used with cell data, as there will be no texture coordinates interpolation\n    // The texture generated using a zigzag pattern in one dimension is the same as without zigzag\n    // Therefore, the same code can be used for texture generation of point/cell data but not for texture coordinates\n    model.colorCoordinates = getOrCreateColorTextureCoordinates(scalars, scalarComponent, scaledRange, useLogScale, model.numberOfColorsInRange, model.colorTextureMap.getDimensions(), cellFlag);\n  };\n  publicAPI.getIsOpaque = () => {\n    const input = publicAPI.getInputData();\n    const gasResult = publicAPI.getAbstractScalars(input, model.scalarMode, model.arrayAccessMode, model.arrayId, model.colorByArrayName);\n    const scalars = gasResult.scalars;\n    if (!model.scalarVisibility || scalars == null) {\n      // No scalar colors.\n      return true;\n    }\n    const lut = publicAPI.getLookupTable();\n    if (lut) {\n      // Ensure that the lookup table is built\n      lut.build();\n      return lut.areScalarsOpaque(scalars, model.colorMode, -1);\n    }\n    return true;\n  };\n  publicAPI.canUseTextureMapForColoring = (scalars, cellFlag) => {\n    if (cellFlag && !(model.colorMode === ColorMode.DIRECT_SCALARS)) {\n      return true; // cell data always use textures.\n    }\n\n    if (!model.interpolateScalarsBeforeMapping) {\n      return false; // user doesn't want us to use texture maps at all.\n    }\n\n    // index color does not use textures\n    if (model.lookupTable && model.lookupTable.getIndexedLookup()) {\n      return false;\n    }\n    if (!scalars) {\n      // no scalars on this dataset, we don't care if texture is used at all.\n      return false;\n    }\n    if (model.colorMode === ColorMode.DEFAULT && scalars.getDataType() === VtkDataTypes.UNSIGNED_CHAR || model.colorMode === ColorMode.DIRECT_SCALARS) {\n      // Don't use texture is direct coloring using RGB unsigned chars is\n      // requested.\n      return false;\n    }\n    return true;\n  };\n  publicAPI.clearColorArrays = () => {\n    model.colorMapColors = null;\n    model.colorCoordinates = null;\n    model.colorTextureMap = null;\n  };\n  publicAPI.getLookupTable = () => {\n    if (!model.lookupTable) {\n      publicAPI.createDefaultLookupTable();\n    }\n    return model.lookupTable;\n  };\n  publicAPI.getMTime = () => {\n    let mt = model.mtime;\n    if (model.lookupTable !== null) {\n      const time = model.lookupTable.getMTime();\n      mt = time > mt ? time : mt;\n    }\n    return mt;\n  };\n  publicAPI.getPrimitiveCount = () => {\n    const input = publicAPI.getInputData();\n    const pcount = {\n      points: input.getPoints().getNumberOfValues() / 3,\n      verts: input.getVerts().getNumberOfValues() - input.getVerts().getNumberOfCells(),\n      lines: input.getLines().getNumberOfValues() - 2 * input.getLines().getNumberOfCells(),\n      triangles: input.getPolys().getNumberOfValues() - 3 * input.getPolys().getNumberOfCells()\n    };\n    return pcount;\n  };\n  publicAPI.acquireInvertibleLookupTable = notImplemented('AcquireInvertibleLookupTable');\n  publicAPI.valueToColor = notImplemented('ValueToColor');\n  publicAPI.colorToValue = notImplemented('ColorToValue');\n  publicAPI.useInvertibleColorFor = notImplemented('UseInvertibleColorFor');\n  publicAPI.clearInvertibleColor = notImplemented('ClearInvertibleColor');\n  publicAPI.processSelectorPixelBuffers = (selector, pixelOffsets) => {\n    /* eslint-disable no-bitwise */\n    if (!selector || !model.selectionWebGLIdsToVTKIds || !model.populateSelectionSettings) {\n      return;\n    }\n    const rawLowData = selector.getRawPixelBuffer(PassTypes.ID_LOW24);\n    const rawHighData = selector.getRawPixelBuffer(PassTypes.ID_HIGH24);\n    const currentPass = selector.getCurrentPass();\n    const fieldAssociation = selector.getFieldAssociation();\n    let idMap = null;\n    if (fieldAssociation === FieldAssociations.FIELD_ASSOCIATION_POINTS) {\n      idMap = model.selectionWebGLIdsToVTKIds.points;\n    } else if (fieldAssociation === FieldAssociations.FIELD_ASSOCIATION_CELLS) {\n      idMap = model.selectionWebGLIdsToVTKIds.cells;\n    }\n    if (!idMap) {\n      return;\n    }\n    pixelOffsets.forEach(pos => {\n      if (currentPass === PassTypes.ID_LOW24) {\n        let inValue = 0;\n        if (rawHighData) {\n          inValue += rawHighData[pos];\n          inValue *= 256;\n        }\n        inValue += rawLowData[pos + 2];\n        inValue *= 256;\n        inValue += rawLowData[pos + 1];\n        inValue *= 256;\n        inValue += rawLowData[pos];\n        const outValue = idMap[inValue];\n        const lowData = selector.getPixelBuffer(PassTypes.ID_LOW24);\n        lowData[pos] = outValue & 0xff;\n        lowData[pos + 1] = (outValue & 0xff00) >> 8;\n        lowData[pos + 2] = (outValue & 0xff0000) >> 16;\n      } else if (currentPass === PassTypes.ID_HIGH24 && rawHighData) {\n        let inValue = 0;\n        inValue += rawHighData[pos];\n        inValue *= 256;\n        inValue += rawLowData[pos + 2];\n        inValue *= 256;\n        inValue += rawLowData[pos + 1];\n        inValue *= 256;\n        inValue += rawLowData[pos];\n        const outValue = idMap[inValue];\n        const highData = selector.getPixelBuffer(PassTypes.ID_HIGH24);\n        highData[pos] = (outValue & 0xff000000) >> 24;\n      }\n    });\n    /* eslint-enable no-bitwise */\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  colorMapColors: null,\n  // Same as this->Colors\n  areScalarsMappedFromCells: false,\n  static: false,\n  lookupTable: null,\n  scalarVisibility: true,\n  scalarRange: [0, 1],\n  useLookupTableScalarRange: false,\n  colorMode: 0,\n  scalarMode: 0,\n  arrayAccessMode: 1,\n  // By_NAME\n\n  renderTime: 0,\n  colorByArrayName: null,\n  fieldDataTupleId: -1,\n  populateSelectionSettings: true,\n  selectionWebGLIdsToVTKIds: null,\n  interpolateScalarsBeforeMapping: false,\n  colorCoordinates: null,\n  colorTextureMap: null,\n  numberOfColorsInRange: 0,\n  forceCompileOnly: 0,\n  useInvertibleColors: false,\n  invertibleScalars: null,\n  customShaderAttributes: []\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkAbstractMapper3D.extend(publicAPI, model, initialValues);\n  macro.get(publicAPI, model, ['areScalarsMappedFromCells', 'colorCoordinates', 'colorMapColors', 'colorTextureMap', 'numberOfColorsInRange', 'selectionWebGLIdsToVTKIds']);\n  macro.setGet(publicAPI, model, ['colorByArrayName', 'arrayAccessMode', 'colorMode', 'fieldDataTupleId', 'interpolateScalarsBeforeMapping', 'lookupTable', 'populateSelectionSettings', 'renderTime', 'scalarMode', 'scalarVisibility', 'static', 'useLookupTableScalarRange', 'customShaderAttributes' // point data array names that will be transferred to the VBO\n  ]);\n\n  macro.setGetArray(publicAPI, model, ['scalarRange'], 2);\n  CoincidentTopologyHelper.implementCoincidentTopologyMethods(publicAPI, model);\n\n  // Object methods\n  vtkMapper(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkMapper');\n\n// ----------------------------------------------------------------------------\n\nvar vtkMapper$1 = {\n  newInstance,\n  extend,\n  ...staticOffsetAPI,\n  ...otherStaticMethods,\n  ...Constants\n};\n\nexport { vtkMapper$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkDataArray from './DataArray.js';\nimport { VtkDataTypes } from './DataArray/Constants.js';\n\nconst {\n  isVtkObject\n} = macro;\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nfunction extractCellSizes(cellArray) {\n  let currentIdx = 0;\n  return cellArray.filter((value, index) => {\n    if (index === currentIdx) {\n      currentIdx += value + 1;\n      return true;\n    }\n    return false;\n  });\n}\nfunction getNumberOfCells(cellArray) {\n  let cellId = 0;\n  for (let cellArrayIndex = 0; cellArrayIndex < cellArray.length;) {\n    cellArrayIndex += cellArray[cellArrayIndex] + 1;\n    cellId++;\n  }\n  return cellId;\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  extractCellSizes,\n  getNumberOfCells\n};\n\n// ----------------------------------------------------------------------------\n// vtkCellArray methods\n// ----------------------------------------------------------------------------\n\nfunction vtkCellArray(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkCellArray');\n  const superClass = {\n    ...publicAPI\n  };\n  publicAPI.getNumberOfCells = recompute => {\n    if (model.numberOfCells !== undefined && !recompute) {\n      return model.numberOfCells;\n    }\n    if (model.cellSizes) {\n      model.numberOfCells = model.cellSizes.length;\n    } else {\n      model.numberOfCells = getNumberOfCells(publicAPI.getData());\n    }\n    return model.numberOfCells;\n  };\n  publicAPI.getCellSizes = recompute => {\n    if (model.cellSizes !== undefined && !recompute) {\n      return model.cellSizes;\n    }\n    model.cellSizes = extractCellSizes(publicAPI.getData());\n    return model.cellSizes;\n  };\n\n  /**\n   * When `resize()` is being used, you then MUST use `insertNextCell()`.\n   * @see vtkCellArray#insertNextCell\n   * @see vtkDataArray#allocate\n   */\n  publicAPI.resize = requestedNumTuples => {\n    const oldNumTuples = publicAPI.getNumberOfTuples();\n    superClass.resize(requestedNumTuples);\n    const newNumTuples = publicAPI.getNumberOfTuples();\n    if (newNumTuples < oldNumTuples) {\n      if (newNumTuples === 0) {\n        model.numberOfCells = 0;\n        model.cellSizes = [];\n      } else {\n        // We do not know how many cells are left.\n        // Set to undefined to ensure insertNextCell works correctly.\n        model.numberOfCells = undefined;\n        model.cellSizes = undefined;\n      }\n    }\n  };\n  publicAPI.setData = typedArray => {\n    superClass.setData(typedArray, 1);\n    model.numberOfCells = undefined;\n    model.cellSizes = undefined;\n  };\n  publicAPI.getCell = loc => {\n    let cellLoc = loc;\n    const numberOfPoints = model.values[cellLoc++];\n    return model.values.subarray(cellLoc, cellLoc + numberOfPoints);\n  };\n  publicAPI.insertNextCell = cell => {\n    let cellPointIds;\n    if (isVtkObject(cell)) {\n      cellPointIds = cell.getPointsIds();\n    } else {\n      cellPointIds = cell;\n    }\n    const cellId = publicAPI.getNumberOfCells();\n    publicAPI.insertNextTuples([cellPointIds.length, ...cellPointIds]);\n    // By computing the number of cells earlier, we made sure that numberOfCells is defined\n    ++model.numberOfCells;\n    if (model.cellSizes != null) {\n      model.cellSizes.push(cellPointIds.length);\n    }\n    return cellId;\n  };\n  publicAPI.getMaxCellSize = () => publicAPI.getCellSizes().reduce((a, b) => Math.max(a, b), 0);\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nfunction defaultValues(initialValues) {\n  return {\n    empty: true,\n    numberOfComponents: 1,\n    dataType: VtkDataTypes.UNSIGNED_INT,\n    ...initialValues\n  };\n}\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  vtkDataArray.extend(publicAPI, model, defaultValues(initialValues));\n  vtkCellArray(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkCellArray');\n\n// ----------------------------------------------------------------------------\n\nvar vtkCellArray$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { STATIC, vtkCellArray$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkDataArray from './DataArray.js';\nimport { VtkDataTypes } from './DataArray/Constants.js';\nimport { u as uninitializeBounds } from './Math/index.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\n// ----------------------------------------------------------------------------\n// vtkPoints methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPoints(publicAPI, model) {\n  // Keep track of modified time for bounds computation\n  let boundMTime = 0;\n\n  // Set our className\n  model.classHierarchy.push('vtkPoints');\n\n  // Forwarding methods\n  publicAPI.getNumberOfPoints = publicAPI.getNumberOfTuples;\n  publicAPI.setNumberOfPoints = function (nbPoints) {\n    let dimension = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n    if (publicAPI.getNumberOfPoints() !== nbPoints) {\n      model.size = nbPoints * dimension;\n      model.values = macro.newTypedArray(model.dataType, model.size);\n      publicAPI.setNumberOfComponents(dimension);\n      publicAPI.modified();\n    }\n  };\n  publicAPI.setPoint = function (idx) {\n    for (var _len = arguments.length, xyz = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      xyz[_key - 1] = arguments[_key];\n    }\n    publicAPI.setTuple(idx, xyz);\n  };\n  publicAPI.getPoint = publicAPI.getTuple;\n  publicAPI.findPoint = publicAPI.findTuple;\n  publicAPI.insertNextPoint = (x, y, z) => publicAPI.insertNextTuple([x, y, z]);\n  publicAPI.insertPoint = (ptId, point) => publicAPI.insertTuple(ptId, point);\n  const superGetBounds = publicAPI.getBounds;\n  publicAPI.getBounds = () => {\n    if (boundMTime < model.mtime) {\n      publicAPI.computeBounds();\n    }\n    return superGetBounds();\n  };\n  const superGetBoundsByReference = publicAPI.getBoundsByReference;\n  publicAPI.getBoundsByReference = () => {\n    if (boundMTime < model.mtime) {\n      publicAPI.computeBounds();\n    }\n    return superGetBoundsByReference();\n  };\n\n  // Trigger the computation of bounds\n  publicAPI.computeBounds = () => {\n    if (publicAPI.getNumberOfComponents() === 3) {\n      const xRange = publicAPI.getRange(0);\n      model.bounds[0] = xRange[0];\n      model.bounds[1] = xRange[1];\n      const yRange = publicAPI.getRange(1);\n      model.bounds[2] = yRange[0];\n      model.bounds[3] = yRange[1];\n      const zRange = publicAPI.getRange(2);\n      model.bounds[4] = zRange[0];\n      model.bounds[5] = zRange[1];\n    } else if (publicAPI.getNumberOfComponents() === 2) {\n      const xRange = publicAPI.getRange(0);\n      model.bounds[0] = xRange[0];\n      model.bounds[1] = xRange[1];\n      const yRange = publicAPI.getRange(1);\n      model.bounds[2] = yRange[0];\n      model.bounds[3] = yRange[1];\n      model.bounds[4] = 0;\n      model.bounds[5] = 0;\n    } else {\n      vtkErrorMacro(`getBounds called on an array with components of ${publicAPI.getNumberOfComponents()}`);\n      uninitializeBounds(model.bounds);\n    }\n    boundMTime = macro.getCurrentGlobalMTime();\n  };\n\n  // Initialize\n  publicAPI.setNumberOfComponents(model.numberOfComponents < 2 ? 3 : model.numberOfComponents);\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  empty: true,\n  numberOfComponents: 3,\n  dataType: VtkDataTypes.FLOAT,\n  bounds: [1, -1, 1, -1, 1, -1]\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  vtkDataArray.extend(publicAPI, model, initialValues);\n  macro.getArray(publicAPI, model, ['bounds'], 6);\n  vtkPoints(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPoints');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPoints$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkPoints$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkBoundingBox from './BoundingBox.js';\nimport vtkPoints from '../Core/Points.js';\n\n// ----------------------------------------------------------------------------\n// vtkCell methods\n// ----------------------------------------------------------------------------\n\nfunction vtkCell(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkCell');\n  publicAPI.initialize = function (points) {\n    let pointIdsList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    if (!pointIdsList) {\n      model.points = points;\n      model.pointsIds = new Array(points.getNumberOfPoints());\n      for (let i = points.getNumberOfPoints() - 1; i >= 0; --i) {\n        model.pointsIds[i] = i;\n      }\n    } else {\n      model.pointsIds = pointIdsList;\n      let triangleData = model.points.getData();\n      if (triangleData.length !== 3 * model.pointsIds.length) {\n        triangleData = macro.newTypedArray(points.getDataType(), 3 * model.pointsIds.length);\n      }\n      const pointsData = points.getData();\n      model.pointsIds.forEach((pointId, index) => {\n        // const start = 3 * pointId;\n        // pointsData.set(p.subarray(start, start + 3), 3 * index);\n        let pointOffset = 3 * pointId;\n        let trianglePointOffset = 3 * index;\n        triangleData[trianglePointOffset] = pointsData[pointOffset];\n        triangleData[++trianglePointOffset] = pointsData[++pointOffset];\n        triangleData[++trianglePointOffset] = pointsData[++pointOffset];\n      });\n      model.points.setData(triangleData);\n    }\n  };\n  publicAPI.getBounds = () => model.points.getBounds();\n  publicAPI.getLength2 = () => {\n    const lengths = vtkBoundingBox.getLengths(publicAPI.getBounds());\n    return lengths[0] * lengths[0] + lengths[1] * lengths[1] + lengths[2] * lengths[2];\n  };\n  publicAPI.getParametricDistance = pcoords => {\n    let pDist;\n    let pDistMax = 0.0;\n    for (let i = 0; i < 3; i++) {\n      if (pcoords[i] < 0.0) {\n        pDist = -pcoords[i];\n      } else if (pcoords[i] > 1.0) {\n        pDist = pcoords[i] - 1.0;\n      } else {\n        // inside the cell in the parametric direction\n        pDist = 0.0;\n      }\n      if (pDist > pDistMax) {\n        pDistMax = pDist;\n      }\n    }\n    return pDistMax;\n  };\n  publicAPI.getNumberOfPoints = () => model.points.getNumberOfPoints();\n  publicAPI.deepCopy = cell => {\n    cell.initialize(model.points, model.pointsIds);\n  };\n  publicAPI.getCellDimension = () => {}; // virtual\n  publicAPI.intersectWithLine = (p1, p2, tol, t, x, pcoords, subId) => {}; // virtual\n  publicAPI.evaluatePosition = (x, closestPoint, subId, pcoords, dist2, weights) => {\n    macro.vtkErrorMacro('vtkCell.evaluatePosition is not implemented.');\n  }; // virtual\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  bounds: [-1, -1, -1, -1, -1, -1],\n  pointsIds: []\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  macro.obj(publicAPI, model);\n  if (!model.points) {\n    model.points = vtkPoints.newInstance();\n  }\n  macro.get(publicAPI, model, ['points', 'pointsIds']);\n  vtkCell(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkCell');\n\n// ----------------------------------------------------------------------------\n\nvar vtkCell$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkCell$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkCell from './Cell.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\nconst InitLink = {\n  ncells: 0,\n  cells: null\n};\nfunction resize(model, sz) {\n  let newSize = sz;\n  if (sz >= model.array.length) {\n    newSize += model.array.length;\n  }\n  while (newSize > model.array.length) model.array.push({\n    ncells: 0,\n    cells: null\n  });\n  model.array.length = newSize;\n}\n\n// ----------------------------------------------------------------------------\n// vtkCellLinks methods\n// ----------------------------------------------------------------------------\n\nfunction vtkCellLinks(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkCellLinks');\n\n  /**\n   * Build the link list array. All subclasses of vtkAbstractCellLinks\n   * must support this method.\n   */\n  publicAPI.buildLinks = data => {\n    const numPts = data.getPoints().getNumberOfPoints();\n    const numCells = data.getNumberOfCells();\n\n    // fill out lists with number of references to cells\n    const linkLoc = new Uint32Array(numPts);\n\n    // Use fast path if polydata\n    if (data.isA('vtkPolyData')) {\n      // traverse data to determine number of uses of each point\n      for (let cellId = 0; cellId < numCells; ++cellId) {\n        const {\n          cellPointIds\n        } = data.getCellPoints(cellId);\n        cellPointIds.forEach(cellPointId => {\n          publicAPI.incrementLinkCount(cellPointId);\n        });\n      }\n\n      // now allocate storage for the links\n      publicAPI.allocateLinks(numPts);\n      model.maxId = numPts - 1;\n      for (let cellId = 0; cellId < numCells; ++cellId) {\n        const {\n          cellPointIds\n        } = data.getCellPoints(cellId);\n        cellPointIds.forEach(cellPointId => {\n          publicAPI.insertCellReference(cellPointId, linkLoc[cellPointId]++, cellId);\n        });\n      }\n    } // any other type of dataset\n    else {\n      // traverse data to determine number of uses of each point\n      for (let cellId = 0; cellId < numCells; cellId++) {\n        // TODO: Currently not supported: const cell = data.getCell(cellId);\n        const cell = vtkCell.newInstance();\n        cell.getPointsIds().forEach(cellPointId => {\n          publicAPI.incrementLinkCount(cellPointId);\n        });\n      }\n\n      // now allocate storage for the links\n      publicAPI.allocateLinks(numPts);\n      model.maxId = numPts - 1;\n      for (let cellId = 0; cellId < numCells; ++cellId) {\n        // TODO: Currently not supported: const cell = data.getCell(cellId);\n        const cell = vtkCell.newInstance();\n        cell.getPointsIds().forEach(cellPointId => {\n          publicAPI.insertCellReference(cellPointId, linkLoc[cellPointId]++, cellId);\n        });\n      }\n    } // end else\n  };\n\n  /**\n   * Build the link list array with a provided connectivity array.\n   */\n  // publicAPI.buildLinks = (data, connectivity) => {};\n\n  /**\n   * Allocate the specified number of links (i.e., number of points) that\n   * will be built.\n   */\n  publicAPI.allocate = function (numLinks) {\n    let ext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n    model.array = Array(numLinks).fill().map(() => ({\n      ncells: 0,\n      cells: null\n    }));\n    model.extend = ext;\n    model.maxId = -1;\n  };\n  publicAPI.initialize = () => {\n    model.array = null;\n  };\n\n  /**\n   * Get a link structure given a point id.\n   */\n  publicAPI.getLink = ptId => model.array[ptId];\n\n  /**\n   * Get the number of cells using the point specified by ptId.\n   */\n  publicAPI.getNcells = ptId => model.array[ptId].ncells;\n\n  /**\n   * Return a list of cell ids using the point.\n   */\n  publicAPI.getCells = ptId => model.array[ptId].cells;\n\n  /**\n   * Insert a new point into the cell-links data structure. The size parameter\n   * is the initial size of the list.\n   */\n  publicAPI.insertNextPoint = numLinks => {\n    model.array.push({\n      ncells: numLinks,\n      cells: Array(numLinks)\n    });\n    ++model.maxId;\n  };\n\n  /**\n   * Insert a cell id into the list of cells (at the end) using the cell id\n   * provided. (Make sure to extend the link list (if necessary) using the\n   * method resizeCellList().)\n   */\n  publicAPI.insertNextCellReference = (ptId, cellId) => {\n    model.array[ptId].cells[model.array[ptId].ncells++] = cellId;\n  };\n\n  /**\n   * Delete point (and storage) by destroying links to using cells.\n   */\n  publicAPI.deletePoint = ptId => {\n    model.array[ptId].ncells = 0;\n    model.array[ptId].cells = null;\n  };\n\n  /**\n   * Delete the reference to the cell (cellId) from the point (ptId). This\n   * removes the reference to the cellId from the cell list, but does not\n   * resize the list (recover memory with resizeCellList(), if necessary).\n   */\n  publicAPI.removeCellReference = (cellId, ptId) => {\n    model.array[ptId].cells = model.array[ptId].cells.filter(cell => cell !== cellId);\n    model.array[ptId].ncells = model.array[ptId].cells.length;\n  };\n\n  /**\n   * Add the reference to the cell (cellId) from the point (ptId). This\n   * adds a reference to the cellId from the cell list, but does not resize\n   * the list (extend memory with resizeCellList(), if necessary).\n   */\n  publicAPI.addCellReference = (cellId, ptId) => {\n    model.array[ptId].cells[model.array[ptId].ncells++] = cellId;\n  };\n\n  /**\n   * Change the length of a point's link list (i.e., list of cells using a\n   * point) by the size specified.\n   */\n  publicAPI.resizeCellList = (ptId, size) => {\n    model.array[ptId].cells.length = size;\n  };\n\n  /**\n   * Reclaim any unused memory.\n   */\n  publicAPI.squeeze = () => {\n    resize(model, model.maxId + 1);\n  };\n\n  /**\n   * Reset to a state of no entries without freeing the memory.\n   */\n  publicAPI.reset = () => {\n    model.maxId = -1;\n  };\n\n  /**\n   * Standard DeepCopy method.  Since this object contains no reference\n   * to other objects, there is no ShallowCopy.\n   */\n  publicAPI.deepCopy = src => {\n    model.array = [...src.array];\n    model.extend = src.extend;\n    model.maxId = src.maxId;\n  };\n\n  /**\n   * Increment the count of the number of cells using the point.\n   */\n  publicAPI.incrementLinkCount = ptId => {\n    ++model.array[ptId].ncells;\n  };\n  publicAPI.allocateLinks = n => {\n    for (let i = 0; i < n; ++i) {\n      model.array[i].cells = new Array(model.array[i].ncells);\n    }\n  };\n\n  /**\n   * Insert a cell id into the list of cells using the point.\n   */\n  publicAPI.insertCellReference = (ptId, pos, cellId) => {\n    model.array[ptId].cells[pos] = cellId;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  array: null,\n  // pointer to data\n  maxId: 0,\n  // maximum index inserted thus far\n  extend: 0 // grow array by this point\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  macro.obj(publicAPI, model);\n  vtkCellLinks(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkCellLinks');\n\n// ----------------------------------------------------------------------------\n\nvar vtkCellLinks$1 = {\n  newInstance,\n  extend\n};\n\nexport { InitLink, vtkCellLinks$1 as default, extend, newInstance };\n", "const CellType = {\n  // Linear cells\n  VTK_EMPTY_CELL: 0,\n  VTK_VERTEX: 1,\n  VTK_POLY_VERTEX: 2,\n  VTK_LINE: 3,\n  VTK_POLY_LINE: 4,\n  VTK_TRIANGLE: 5,\n  VTK_TRIANGLE_STRIP: 6,\n  VTK_POLYGON: 7,\n  VTK_PIXEL: 8,\n  VTK_QUAD: 9,\n  VTK_TETRA: 10,\n  VTK_VOXEL: 11,\n  VTK_HEXAHEDRON: 12,\n  VTK_WEDGE: 13,\n  VTK_PYRAMID: 14,\n  VTK_PENTAGONAL_PRISM: 15,\n  VTK_HEXAGONAL_PRISM: 16,\n  // Quadratic, isoparametric cells\n  VTK_QUADRATIC_EDGE: 21,\n  VTK_QUADRATIC_TRIANGLE: 22,\n  VTK_QUADRATIC_QUAD: 23,\n  VTK_QUADRATIC_POLYGON: 36,\n  VTK_QUADRATIC_TETRA: 24,\n  VTK_QUADRATIC_HEXAHEDRON: 25,\n  VTK_QUADRATIC_WEDGE: 26,\n  VTK_QUADRATIC_PYRAMID: 27,\n  VTK_BIQUADRATIC_QUAD: 28,\n  VTK_TRIQUADRATIC_HEXAHEDRON: 29,\n  VTK_QUADRATIC_LINEAR_QUAD: 30,\n  VTK_QUADRATIC_LINEAR_WEDGE: 31,\n  VTK_BIQUADRATIC_QUADRATIC_WEDGE: 32,\n  VTK_BIQUADRATIC_QUADRATIC_HEXAHEDRON: 33,\n  VTK_BIQUADRATIC_TRIANGLE: 34,\n  // Cubic, isoparametric cell\n  VTK_CUBIC_LINE: 35,\n  // Special class of cells formed by convex group of points\n  VTK_CONVEX_POINT_SET: 41,\n  // Polyhedron cell (consisting of polygonal faces)\n  VTK_POLYHEDRON: 42,\n  // Higher order cells in parametric form\n  VTK_PARAMETRIC_CURVE: 51,\n  VTK_PARAMETRIC_SURFACE: 52,\n  VTK_PARAMETRIC_TRI_SURFACE: 53,\n  VTK_PARAMETRIC_QUAD_SURFACE: 54,\n  VTK_PARAMETRIC_TETRA_REGION: 55,\n  VTK_PARAMETRIC_HEX_REGION: 56,\n  // Higher order cells\n  VTK_HIGHER_ORDER_EDGE: 60,\n  VTK_HIGHER_ORDER_TRIANGLE: 61,\n  VTK_HIGHER_ORDER_QUAD: 62,\n  VTK_HIGHER_ORDER_POLYGON: 63,\n  VTK_HIGHER_ORDER_TETRAHEDRON: 64,\n  VTK_HIGHER_ORDER_WEDGE: 65,\n  VTK_HIGHER_ORDER_PYRAMID: 66,\n  VTK_HIGHER_ORDER_HEXAHEDRON: 67,\n  // Arbitrary order Lagrange elements (formulated separated from generic higher order cells)\n  VTK_LAGRANGE_CURVE: 68,\n  VTK_LAGRANGE_TRIANGLE: 69,\n  VTK_LAGRANGE_QUADRILATERAL: 70,\n  VTK_LAGRANGE_TETRAHEDRON: 71,\n  VTK_LAGRANGE_HEXAHEDRON: 72,\n  VTK_LAGRANGE_WEDGE: 73,\n  VTK_LAGRANGE_PYRAMID: 74,\n  VTK_NUMBER_OF_CELL_TYPES: 75\n};\n\n// This list should contain the cell class names in\n// the same order as in CellType.\nconst CellTypesStrings = ['vtkEmptyCell', 'vtkVertex', 'vtkPolyVertex', 'vtkLine', 'vtkPolyLine', 'vtkTriangle', 'vtkTriangleStrip', 'vtkPolygon', 'vtkPixel', 'vtkQuad', 'vtkTetra', 'vtkVoxel', 'vtkHexahedron', 'vtkWedge', 'vtkPyramid', 'vtkPentagonalPrism', 'vtkHexagonalPrism', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'vtkQuadraticEdge', 'vtkQuadraticTriangle', 'vtkQuadraticQuad', 'vtkQuadraticTetra', 'vtkQuadraticHexahedron', 'vtkQuadraticWedge', 'vtkQuadraticPyramid', 'vtkBiQuadraticQuad', 'vtkTriQuadraticHexahedron', 'vtkQuadraticLinearQuad', 'vtkQuadraticLinearWedge', 'vtkBiQuadraticQuadraticWedge', 'vtkBiQuadraticQuadraticHexahedron', 'vtkBiQuadraticTriangle', 'vtkCubicLine', 'vtkQuadraticPolygon', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'vtkConvexPointSet', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'vtkParametricCurve', 'vtkParametricSurface', 'vtkParametricTriSurface', 'vtkParametricQuadSurface', 'vtkParametricTetraRegion', 'vtkParametricHexRegion', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'vtkHigherOrderEdge', 'vtkHigherOrderTriangle', 'vtkHigherOrderQuad', 'vtkHigherOrderPolygon', 'vtkHigherOrderTetrahedron', 'vtkHigherOrderWedge', 'vtkHigherOrderPyramid', 'vtkHigherOrderHexahedron'];\nvar Constants = {\n  CellType,\n  CellTypesStrings\n};\n\nexport { CellType, CellTypesStrings, Constants as default };\n", "import { m as macro } from '../../macros2.js';\nimport { CellTypesStrings, CellType } from './CellTypes/Constants.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n/**\n * Given an int (as defined in vtkCellType.h) identifier for a class\n * return it's classname.\n */\nfunction getClassNameFromTypeId(typeId) {\n  return typeId < CellTypesStrings.length ? CellTypesStrings[typeId] : 'UnknownClass';\n}\n\n/**\n * Given a data object classname, return it's int identified (as\n * defined in vtkCellType.h)\n */\nfunction getTypeIdFromClassName(cellTypeString) {\n  return CellTypesStrings.findIndex(cellTypeString);\n}\n\n/**\n * This convenience method is a fast check to determine if a cell type\n * represents a linear or nonlinear cell.  This is generally much more\n * efficient than getting the appropriate vtkCell and checking its IsLinear\n * method.\n */\nfunction isLinear(type) {\n  return type < CellType.VTK_QUADRATIC_EDGE || type === CellType.VTK_CONVEX_POINT_SET || type === CellType.VTK_POLYHEDRON;\n}\nfunction hasSubCells(cellType) {\n  return cellType === CellType.VTK_TRIANGLE_STRIP || cellType === CellType.VTK_POLY_LINE || cellType === CellType.VTK_POLY_VERTEX;\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  getClassNameFromTypeId,\n  getTypeIdFromClassName,\n  isLinear,\n  hasSubCells\n};\n\n// ----------------------------------------------------------------------------\n// vtkCellTypes methods\n// ----------------------------------------------------------------------------\n\nfunction vtkCellTypes(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkCellTypes');\n\n  /**\n   * Allocate memory for this array. Delete old storage only if necessary.\n   */\n  publicAPI.allocate = function () {\n    let sz = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 512;\n    let ext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n    model.size = sz > 0 ? sz : 1;\n    model.extend = ext > 0 ? ext : 1;\n    model.maxId = -1;\n    model.typeArray = new Uint8Array(sz);\n    model.locationArray = new Uint32Array(sz);\n  };\n\n  /**\n   * Add a cell at specified id.\n   */\n  publicAPI.insertCell = (cellId, type, loc) => {\n    model.typeArray[cellId] = type;\n    model.locationArray[cellId] = loc;\n    if (cellId > model.maxId) {\n      model.maxId = cellId;\n    }\n  };\n\n  /**\n   * Add a cell to the object in the next available slot.\n   */\n  publicAPI.insertNextCell = (type, loc) => {\n    publicAPI.insertCell(++model.maxId, type, loc);\n    return model.maxId;\n  };\n\n  /**\n   * Specify a group of cell types. This version is provided to maintain\n   * backwards compatibility and does a copy of the cellLocations\n   */\n  publicAPI.setCellTypes = (ncells, cellTypes, cellLocations) => {\n    model.size = ncells;\n    model.typeArray = cellTypes;\n    model.locationArray = cellLocations;\n    model.maxId = ncells - 1;\n  };\n\n  /**\n   * Return the location of the cell in the associated vtkCellArray.\n   */\n  publicAPI.getCellLocation = cellId => model.locationArray[cellId];\n\n  /**\n   * Delete cell by setting to nullptr cell type.\n   */\n  publicAPI.deleteCell = cellId => {\n    model.typeArray[cellId] = CellType.VTK_EMPTY_CELL;\n  };\n\n  /**\n   * Return the number of types in the list.\n   */\n  publicAPI.getNumberOfTypes = () => model.maxId + 1;\n\n  /**\n   * Return true if type specified is contained in list; false otherwise.\n   */\n  publicAPI.isType = type => {\n    const numTypes = publicAPI.getNumberOfTypes();\n    for (let i = 0; i < numTypes; ++i) {\n      if (type === publicAPI.getCellType(i)) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  /**\n   * Add the type specified to the end of the list. Range checking is performed.\n   */\n  publicAPI.insertNextType = type => publicAPI.insertNextCell(type, -1);\n\n  /**\n   * Return the type of cell.\n   */\n  publicAPI.getCellType = cellId => model.typeArray[cellId];\n\n  /**\n   * Reclaim any extra memory.\n   */\n  // TODO: publicAPI.squeeze = () =>  {};\n\n  /**\n   * Initialize object without releasing memory.\n   */\n  publicAPI.reset = () => {\n    model.maxId = -1;\n  };\n\n  /**\n   * Standard DeepCopy method.  Since this object contains no reference\n   * to other objects, there is no ShallowCopy.\n   */\n  publicAPI.deepCopy = src => {\n    publicAPI.allocate(src.getSize(), src.getExtend());\n    model.typeArray.set(src.getTypeArray());\n    model.locationArray.set(src.getLocationArray());\n    model.maxId = src.getMaxId();\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // typeArray: null, // pointer to types array\n  // locationArray: null;   // pointer to array of offsets\n  size: 0,\n  // allocated size of data\n  maxId: -1,\n  // maximum index inserted thus far\n  extend: 1000 // grow array by this point\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['size', 'maxId', 'extend']);\n  macro.getArray(publicAPI, model, ['typeArray', 'locationArray']);\n  vtkCellTypes(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkCellTypes');\n\n// ----------------------------------------------------------------------------\n\nvar vtkCellTypes$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { STATIC, vtkCellTypes$1 as default, extend, newInstance };\n", "const IntersectionState = {\n  NO_INTERSECTION: 0,\n  YES_INTERSECTION: 1,\n  ON_LINE: 2\n};\nvar Constants = {\n  IntersectionState\n};\n\nexport { IntersectionState, Constants as default };\n", "import { m as macro } from '../../macros2.js';\nimport Constants from './Line/Constants.js';\nimport vtkCell from './Cell.js';\nimport { d as dot, f as distance2BetweenPoints, s as subtract, g as solveLinearSystem } from '../Core/Math/index.js';\nimport { quat } from 'gl-matrix';\n\nconst {\n  IntersectionState\n} = Constants;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\nfunction distanceToLine(x, p1, p2) {\n  let closestPoint = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  const outObj = {\n    t: Number.MIN_VALUE,\n    distance: 0\n  };\n  const p21 = [];\n  let closest;\n  // Determine appropriate vector\n  p21[0] = p2[0] - p1[0];\n  p21[1] = p2[1] - p1[1];\n  p21[2] = p2[2] - p1[2];\n\n  // Get parametric location\n  const num = p21[0] * (x[0] - p1[0]) + p21[1] * (x[1] - p1[1]) + p21[2] * (x[2] - p1[2]);\n  const denom = dot(p21, p21);\n\n  // trying to avoid an expensive fabs\n  let tolerance = 1e-5 * num;\n  if (denom !== 0.0) {\n    outObj.t = num / denom;\n  }\n  if (tolerance < 0.0) {\n    tolerance = -tolerance;\n  }\n  if (-tolerance < denom && denom < tolerance) {\n    closest = p1;\n  } else if (denom <= 0.0 || outObj.t < 0.0) {\n    // If parametric coordinate is within 0<=p<=1, then the point is closest to\n    // the line.  Otherwise, it's closest to a point at the end of the line.\n    closest = p1;\n  } else if (outObj.t > 1.0) {\n    closest = p2;\n  } else {\n    closest = p21;\n    p21[0] = p1[0] + outObj.t * p21[0];\n    p21[1] = p1[1] + outObj.t * p21[1];\n    p21[2] = p1[2] + outObj.t * p21[2];\n  }\n  if (closestPoint) {\n    closestPoint[0] = closest[0];\n    closestPoint[1] = closest[1];\n    closestPoint[2] = closest[2];\n  }\n  outObj.distance = distance2BetweenPoints(closest, x);\n  return outObj;\n}\nfunction intersection(a1, a2, b1, b2, u, v) {\n  const a21 = [];\n  const b21 = [];\n  const b1a1 = [];\n  u[0] = 0.0;\n  v[0] = 0.0;\n\n  // Determine line vectors.\n  subtract(a2, a1, a21);\n  subtract(b2, b1, b21);\n  subtract(b1, a1, b1a1);\n\n  // Compute the system (least squares) matrix.\n  const A = [dot(a21, a21), -dot(a21, b21), -dot(a21, b21), dot(b21, b21)];\n\n  // Compute the least squares system constant term.\n  const c = [];\n  c[0] = dot(a21, b1a1);\n  c[1] = -dot(b21, b1a1);\n  // Solve the system of equations\n  if (solveLinearSystem(A, c, 2) === 0) {\n    // The lines are colinear. Therefore, one of the four endpoints is the\n    // point of closest approach\n    let minDist = Number.MAX_VALUE;\n    const p = [a1, a2, b1, b2];\n    const l1 = [b1, b1, a1, a1];\n    const l2 = [b2, b2, a2, a2];\n    [v[0], v[0], u[0], u[0]];\n    [u[0], u[0], v[0], v[0]];\n    let obj;\n    for (let i = 0; i < 4; i++) {\n      obj = distanceToLine(p[i], l1[i], l2[i]);\n      if (obj.distance < minDist) {\n        minDist = obj.distance;\n        obj.t;\n      }\n    }\n    return IntersectionState.ON_LINE;\n  }\n  u[0] = c[0];\n  v[0] = c[1];\n\n  // Check parametric coordinates for intersection.\n  if (u[0] >= 0.0 && u[0] <= 1.0 && v[0] >= 0.0 && v[0] <= 1.0) {\n    return IntersectionState.YES_INTERSECTION;\n  }\n  return IntersectionState.NO_INTERSECTION;\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  distanceToLine,\n  intersection\n};\n\n// ----------------------------------------------------------------------------\n// vtkLine methods\n// ----------------------------------------------------------------------------\n\nfunction vtkLine(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkLine');\n  function isBetweenPoints(t) {\n    return t >= 0.0 && t <= 1.0;\n  }\n  publicAPI.getCellDimension = () => 1;\n  publicAPI.intersectWithLine = (p1, p2, tol, x, pcoords) => {\n    const outObj = {\n      intersect: 0,\n      t: Number.MAX_VALUE,\n      subId: 0,\n      betweenPoints: null\n    };\n    pcoords[1] = 0.0;\n    pcoords[2] = 0.0;\n    const projXYZ = [];\n    const a1 = [];\n    const a2 = [];\n    model.points.getPoint(0, a1);\n    model.points.getPoint(1, a2);\n    const u = [];\n    const v = [];\n    const intersect = intersection(p1, p2, a1, a2, u, v);\n    outObj.t = u[0];\n    outObj.betweenPoints = isBetweenPoints(outObj.t);\n    pcoords[0] = v[0];\n    if (intersect === IntersectionState.YES_INTERSECTION) {\n      // make sure we are within tolerance\n      for (let i = 0; i < 3; i++) {\n        x[i] = a1[i] + pcoords[0] * (a2[i] - a1[i]);\n        projXYZ[i] = p1[i] + outObj.t * (p2[i] - p1[i]);\n      }\n      if (distance2BetweenPoints(x, projXYZ) <= tol * tol) {\n        outObj.intersect = 1;\n        return outObj;\n      }\n    } else {\n      let outDistance;\n      // check to see if it lies within tolerance\n      // one of the parametric coords must be outside 0-1\n      if (outObj.t < 0.0) {\n        outDistance = distanceToLine(p1, a1, a2, x);\n        if (outDistance.distance <= tol * tol) {\n          outObj.t = 0.0;\n          outObj.intersect = 1;\n          outObj.betweenPoints = true; // Intersection is near p1\n          return outObj;\n        }\n        return outObj;\n      }\n      if (outObj.t > 1.0) {\n        outDistance = distanceToLine(p2, a1, a2, x);\n        if (outDistance.distance <= tol * tol) {\n          outObj.t = 1.0;\n          outObj.intersect = 1;\n          outObj.betweenPoints = true; // Intersection is near p2\n          return outObj;\n        }\n        return outObj;\n      }\n      if (pcoords[0] < 0.0) {\n        pcoords[0] = 0.0;\n        outDistance = distanceToLine(a1, p1, p2, x);\n        outObj.t = outDistance.t;\n        if (outDistance.distance <= tol * tol) {\n          outObj.intersect = 1;\n          return outObj;\n        }\n        return outObj;\n      }\n      if (pcoords[0] > 1.0) {\n        pcoords[0] = 1.0;\n        outDistance = distanceToLine(a2, p1, p2, x);\n        outObj.t = outDistance.t;\n        if (outDistance.distance <= tol * tol) {\n          outObj.intersect = 1;\n          return outObj;\n        }\n        return outObj;\n      }\n    }\n    return outObj;\n  };\n  publicAPI.evaluateLocation = (pcoords, x, weights) => {\n    const a1 = [];\n    const a2 = [];\n    model.points.getPoint(0, a1);\n    model.points.getPoint(1, a2);\n    for (let i = 0; i < 3; i++) {\n      x[i] = a1[i] + pcoords[0] * (a2[i] - a1[i]);\n    }\n    weights[0] = 1.0 - pcoords[0];\n    weights[1] = pcoords[0];\n  };\n  publicAPI.evaluateOrientation = (pcoords, q, weights) => {\n    if (model.orientations) {\n      quat.slerp(q, model.orientations[0], model.orientations[1], pcoords[0]);\n      weights[0] = 1.0 - pcoords[0];\n      weights[1] = pcoords[0];\n      return true;\n    }\n    return false;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  orientations: null // an array of two quat or null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  vtkCell.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['orientations']);\n  vtkLine(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkLine');\n\n// ----------------------------------------------------------------------------\n\nvar vtkLine$1 = {\n  newInstance,\n  extend,\n  ...STATIC,\n  ...Constants\n};\n\nexport { STATIC, vtkLine$1 as default, extend, newInstance };\n", "import vtk from '../../vtk.js';\nimport { m as macro } from '../../macros2.js';\nimport vtkDataSet from './DataSet.js';\nimport vtkPoints from '../Core/Points.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// ----------------------------------------------------------------------------\n// vtkPointSet methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPointSet(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkPointSet');\n\n  // Create empty points\n  if (!model.points) {\n    model.points = vtkPoints.newInstance();\n  } else {\n    model.points = vtk(model.points);\n  }\n  publicAPI.getNumberOfPoints = () => model.points.getNumberOfPoints();\n  publicAPI.getBounds = () => model.points.getBounds();\n  publicAPI.computeBounds = () => {\n    publicAPI.getBounds();\n  };\n  const superShallowCopy = publicAPI.shallowCopy;\n  publicAPI.shallowCopy = function (other) {\n    let debug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    superShallowCopy(other, debug);\n    model.points = vtkPoints.newInstance();\n    model.points.shallowCopy(other.getPoints());\n  };\n  const superGetMTime = publicAPI.getMTime;\n  publicAPI.getMTime = () => {\n    const mTime = superGetMTime();\n    return Math.max(mTime, model.points?.getMTime() ?? mTime);\n  };\n  const superInitialize = publicAPI.initialize;\n  publicAPI.initialize = () => {\n    model.points?.initialize();\n    return superInitialize();\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // points: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkDataSet.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['points']);\n\n  // Object specific methods\n  vtkPointSet(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPointSet');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPointSet$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkPointSet$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkCell from './Cell.js';\nimport vtkLine from './Line.js';\nimport { vec3 } from 'gl-matrix';\n\nfunction vtkPolyLine(publicAPI, model) {\n  model.classHierarchy.push('vtkPolyLine');\n  const line = vtkLine.newInstance();\n  line.getPoints().setNumberOfPoints(2);\n  publicAPI.getCellDimension = () => 1;\n  publicAPI.intersectWithLine = (t1, t2, p1, p2, tol, x, pcoords) => {\n    const outObj = {\n      intersect: 0,\n      t: Number.MAX_VALUE,\n      subId: 0,\n      betweenPoints: null\n    };\n    const numLines = publicAPI.getNumberOfPoints() - 1;\n    let pDistMin = Number.MAX_VALUE;\n    for (let subId = 0; subId < numLines; subId++) {\n      const pCoords = [0, 0, 0];\n      line.getPoints().getData().set(model.points.getData().subarray(3 * subId, 3 * (subId + 2)));\n      const lineIntersected = line.intersectWithLine(p1, p2, tol, x, pcoords);\n      if (lineIntersected.intersect === 1 && lineIntersected.t <= outObj.t + tol && lineIntersected.t >= t1 && lineIntersected.t <= t2) {\n        outObj.intersect = 1;\n        const pDist = line.getParametricDistance(pCoords);\n        if (pDist < pDistMin || pDist === pDistMin && lineIntersected.t < outObj.t) {\n          outObj.subId = subId;\n          outObj.t = lineIntersected.t;\n          pDistMin = pDist;\n          for (let k = 0; k < 3; k++) {\n            x[k];\n            pCoords[k];\n          }\n        }\n      }\n    }\n    return outObj;\n  };\n  publicAPI.evaluateLocation = (subId, pcoords, x, weights) => {\n    line.getPoints().getData().set(model.points.getData().subarray(3 * subId, 3 * (subId + 2)));\n    return line.evaluateLocation(pcoords, x, weights);\n  };\n  publicAPI.evaluateOrientation = (subId, pcoords, q, weights) => {\n    if (model.orientations) {\n      line.setOrientations([model.orientations[subId], model.orientations[subId + 1]]);\n    } else {\n      line.setOrientations(null);\n    }\n    return line.evaluateOrientation(pcoords, q, weights);\n  };\n  publicAPI.getDistancesToFirstPoint = () => {\n    const dTime = model.distancesTime.getMTime();\n    if (dTime < model.points.getMTime() || dTime < publicAPI.getMTime()) {\n      const numPoints = publicAPI.getNumberOfPoints();\n      if (!model.distances) {\n        model.distances = new Array(numPoints);\n      } else {\n        model.distances.length = numPoints;\n      }\n      if (numPoints > 0) {\n        const previousPoint = new Array(3);\n        const currentPoint = new Array(3);\n        let totalDistance = 0;\n        model.distances[0] = totalDistance;\n        model.points.getPoint(0, previousPoint);\n        for (let i = 1; i < numPoints; ++i) {\n          model.points.getPoint(i, currentPoint);\n          totalDistance += model.distanceFunction(previousPoint, currentPoint);\n          model.distances[i] = totalDistance;\n          vec3.copy(previousPoint, currentPoint);\n        }\n      }\n      model.distancesTime.modified();\n    }\n    return model.distances;\n  };\n  publicAPI.findPointIdAtDistanceFromFirstPoint = distance => {\n    const distances = publicAPI.getDistancesToFirstPoint();\n    // At least two points to return an ID\n    if (distances.length < 2) {\n      return -1;\n    }\n    // Binary search in the distance array\n    let minId = 0;\n    let maxId = distances.length - 1;\n    if (distance < distances[minId] || distance > distances[maxId] || distances[maxId] === 0) {\n      return -1;\n    }\n    while (maxId - minId > 1) {\n      const midId = Math.floor((minId + maxId) / 2);\n      if (distances[midId] <= distance) {\n        minId = midId;\n      } else {\n        maxId = midId;\n      }\n    }\n    return minId;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  orientations: null,\n  // an array of quat or null\n  distanceFunction: vec3.dist\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  vtkCell.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['orientations', 'distanceFunction']);\n  model.distancesTime = {};\n  macro.obj(model.distancesTime, {\n    mtime: 0\n  });\n  vtkPolyLine(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPolyLine');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPolyLine$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkPolyLine$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\n\n// ----------------------------------------------------------------------------\n// vtkPriorityQueue methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPriorityQueue(publicAPI, model) {\n  // Set our classname\n  model.classHierarchy.push('vtkPriorityQueue');\n  publicAPI.push = (priority, element) => {\n    // naive algo\n    const i = model.elements.findIndex(e => e.priority > priority);\n    model.elements.splice(i, 0, {\n      priority,\n      element\n    });\n  };\n  publicAPI.pop = () => {\n    if (model.elements.length > 0) {\n      return model.elements.shift().element;\n    }\n    return null;\n  };\n  publicAPI.deleteById = id => {\n    model.elements = model.elements.filter(_ref => {\n      let {\n        element\n      } = _ref;\n      return element.id !== id;\n    });\n  };\n  publicAPI.length = () => model.elements.length;\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  elements: []\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  vtkPriorityQueue(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPriorityQueue');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPriorityQueue$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkPriorityQueue$1 as default, extend, newInstance };\n", "const EPSILON = 1e-6;\nconst FLOAT_EPSILON = 1.1920929e-7;\nconst TOLERANCE = 1e-8;\nconst PolygonWithPointIntersectionState = {\n  FAILURE: -1,\n  OUTSIDE: 0,\n  INSIDE: 1,\n  INTERSECTION: 2,\n  ON_LINE: 3\n};\n\nexport { EPSILON, FLOAT_EPSILON, PolygonWithPointIntersectionState, TOLERANCE };\n", "import { m as macro } from '../../macros2.js';\nimport { d as dot, s as subtract, j as cross, k as add, l as normalize, f as distance2BetweenPoints, n as norm } from '../Core/Math/index.js';\nimport vtkLine from './Line.js';\nimport vtkPlane from './Plane.js';\nimport vtkPriorityQueue from '../Core/PriorityQueue.js';\nimport vtkBoundingBox from './BoundingBox.js';\nimport { IntersectionState } from './Line/Constants.js';\nimport { PolygonWithPointIntersectionState, FLOAT_EPSILON, TOLERANCE, EPSILON } from './Polygon/Constants.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// Given the line (p0,p1), determine if the given point is located to the left\n// of, on, or to the right of a line (with the function returning >0, ==0, or\n// <0 respectively). The points are assumed 3D points, but projected into\n// one of x-y-z planes; hence the indices axis0 and axis1 specify which plane\n// the computation is to be performed on.\nfunction pointLocation(axis0, axis1, p0, p1, point) {\n  return (p1[axis0] - p0[axis0]) * (point[axis1] - p0[axis1]) - (point[axis0] - p0[axis0]) * (p1[axis1] - p0[axis1]);\n}\n\n//------------------------------------------------------------------------------\n\nfunction pointInPolygon(point, vertices, bounds, normal) {\n  // Do a quick bounds check to throw out trivial cases.\n  // winding plane.\n  if (point[0] < bounds[0] || point[0] > bounds[1] || point[1] < bounds[2] || point[1] > bounds[3] || point[2] < bounds[4] || point[2] > bounds[5]) {\n    return PolygonWithPointIntersectionState.OUTSIDE;\n  }\n\n  //  Check that the normal is non-zero.\n  if (normalize(normal) <= FLOAT_EPSILON) {\n    return PolygonWithPointIntersectionState.FAILURE;\n  }\n\n  // Assess whether the point lies on the boundary of the polygon. Points on\n  // the boundary are considered inside the polygon. Need to define a small\n  // tolerance relative to the bounding box diagonal length of the polygon.\n  let tol2 = TOLERANCE * ((bounds[1] - bounds[0]) * (bounds[1] - bounds[0]) + (bounds[3] - bounds[2]) * (bounds[3] - bounds[2]) + (bounds[5] - bounds[4]) * (bounds[5] - bounds[4]));\n  tol2 *= tol2;\n  tol2 = tol2 === 0.0 ? FLOAT_EPSILON : tol2;\n  const p0 = [];\n  const p1 = [];\n  for (let i = 0; i < vertices.length;) {\n    // Check coincidence to polygon vertices\n    p0[0] = vertices[i++];\n    p0[1] = vertices[i++];\n    p0[2] = vertices[i++];\n    if (distance2BetweenPoints(point, p0) <= tol2) {\n      return PolygonWithPointIntersectionState.INSIDE;\n    }\n\n    // Check coincidence to polygon edges\n    const {\n      distance,\n      t\n    } = vtkLine.distanceToLine(point, p0, p1);\n    if (distance <= tol2 && t > 0.0 && t < 1.0) {\n      return PolygonWithPointIntersectionState.INSIDE;\n    }\n  }\n\n  // If here, begin computation of the winding number. This method works for\n  // points/polygons arbitrarily oriented in 3D space.  Hence a projection\n  // onto one of the x-y-z coordinate planes using the maximum normal\n  // component. The computation will be performed in the (axis0, axis1) plane.\n  let axis0;\n  let axis1;\n  if (Math.abs(normal[0]) > Math.abs(normal[1])) {\n    if (Math.abs(normal[0]) > Math.abs(normal[2])) {\n      axis0 = 1;\n      axis1 = 2;\n    } else {\n      axis0 = 0;\n      axis1 = 1;\n    }\n  } else if (Math.abs(normal[1]) > Math.abs(normal[2])) {\n    axis0 = 0;\n    axis1 = 2;\n  } else {\n    axis0 = 0;\n    axis1 = 1;\n  }\n\n  // Compute the winding number wn. If after processing all polygon edges\n  // wn == 0, then the point is outside.  Otherwise, the point is inside the\n  // polygon. Process all polygon edges determining if there are ascending or\n  // descending crossings of the line axis1=constant.\n  let wn = 0;\n  for (let i = 0; i < vertices.length;) {\n    p0[0] = vertices[i++];\n    p0[1] = vertices[i++];\n    p0[2] = vertices[i++];\n    if (i < vertices.length) {\n      p1[0] = vertices[i];\n      p1[1] = vertices[i + 1];\n      p1[2] = vertices[i + 2];\n    } else {\n      p1[0] = vertices[0];\n      p1[1] = vertices[1];\n      p1[2] = vertices[2];\n    }\n    if (p0[axis1] <= point[axis1]) {\n      if (p1[axis1] > point[axis1]) {\n        // if an upward crossing\n        if (pointLocation(axis0, axis1, p0, p1, point) > 0) {\n          // if x left of edge\n          ++wn; // a valid up intersect, increment the winding number\n        }\n      }\n    } else if (p1[axis1] <= point[axis1]) {\n      // if a downward crossing\n      if (pointLocation(axis0, axis1, p0, p1, point) < 0) {\n        // if x right of edge\n        --wn; // a valid down intersect, decrement the winding number\n      }\n    }\n  } // Over all polygon edges\n\n  // A winding number == 0 is outside the polygon\n  return wn === 0 ? PolygonWithPointIntersectionState.OUTSIDE : PolygonWithPointIntersectionState.INSIDE;\n}\n\n// ---------------------------------------------------\n/**\n * Simple utility method for computing polygon bounds.\n * Returns the sum of the squares of the dimensions.\n * Requires a poly with at least one point.\n *\n * @param {Array<Number>|TypedArray<Number>} poly\n * @param {vtkPoints} points\n * @param {Bound} bounds\n */\nfunction getBounds(poly, points, bounds) {\n  const n = poly.length;\n  const p = [];\n  points.getPoint(poly[0], p);\n  bounds[0] = p[0];\n  bounds[1] = p[0];\n  bounds[2] = p[1];\n  bounds[3] = p[1];\n  bounds[4] = p[2];\n  bounds[5] = p[2];\n  for (let j = 1; j < n; j++) {\n    points.getPoint(poly[j], p);\n    vtkBoundingBox.addPoint(bounds, ...p);\n  }\n  const length = vtkBoundingBox.getLengths(bounds);\n  return dot(length, length);\n}\n\n// ---------------------------------------------------\n/**\n * Compute the normal of a polygon and return its norm.\n *\n * TBD: This does the same thing as vtkPolygon.computeNormal,\n * but in a more generic way. Maybe we can keep the public\n * static method somehow and have the private method use it instead.\n *\n * @param {Array<Number>|TypedArray<Number>} poly\n * @param {vtkPoints} points\n * @param {Vector3} normal\n * @returns {Number}\n */\nfunction getNormal(poly, points, normal) {\n  normal.length = 3;\n  normal[0] = 0.0;\n  normal[1] = 0.0;\n  normal[2] = 0.0;\n  const p0 = [];\n  let p1 = [];\n  let p2 = [];\n  const v1 = [];\n  const v2 = [];\n  points.getPoint(poly[0], p0);\n  points.getPoint(poly[1], p1);\n  for (let j = 2; j < poly.length; j++) {\n    points.getPoint(poly[j], p2);\n    subtract(p2, p1, v1);\n    subtract(p0, p1, v2);\n    const n = [0, 0, 0];\n    cross(v1, v2, n);\n    add(normal, n, normal);\n    [p1, p2] = [p2, p1];\n  }\n  return normalize(normal);\n}\n\n/**\n * Compute the centroid of a polygon.\n * @param {Array<number>} poly - Array of point indices for the polygon\n * @param {vtkPoints} points - vtkPoints instance\n * @param {Vector3} [centroid] - Optional output array (length 3)\n * @returns {Vector3} The centroid as [x, y, z]\n */\nfunction computeCentroid(poly, points) {\n  let centroid = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0, 0];\n  centroid[0] = 0;\n  centroid[1] = 0;\n  centroid[2] = 0;\n  const n = poly.length;\n  const p = [];\n  for (let i = 0; i < n; i++) {\n    points.getPoint(poly[i], p);\n    centroid[0] += p[0];\n    centroid[1] += p[1];\n    centroid[2] += p[2];\n  }\n  centroid[0] /= n;\n  centroid[1] /= n;\n  centroid[2] /= n;\n  return centroid;\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  PolygonWithPointIntersectionState,\n  pointInPolygon,\n  getBounds,\n  getNormal,\n  computeCentroid\n};\n\n// ----------------------------------------------------------------------------\n// vtkPolygon methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPolygon(publicAPI, model) {\n  // Set our classname\n  model.classHierarchy.push('vtkPolygon');\n  function computeNormal() {\n    const v1 = [0, 0, 0];\n    const v2 = [0, 0, 0];\n    model.normal = [0, 0, 0];\n    const anchor = [...model.firstPoint.point];\n    let point = model.firstPoint;\n    for (let i = 0; i < model.pointCount; i++) {\n      subtract(point.point, anchor, v1);\n      subtract(point.next.point, anchor, v2);\n      const n = [0, 0, 0];\n      cross(v1, v2, n);\n      add(model.normal, n, model.normal);\n      point = point.next;\n    }\n    return normalize(model.normal);\n  }\n  function computeMeasure(point) {\n    const v1 = [0, 0, 0];\n    const v2 = [0, 0, 0];\n    const v3 = [0, 0, 0];\n    const v4 = [0, 0, 0];\n    subtract(point.point, point.previous.point, v1);\n    subtract(point.next.point, point.point, v2);\n    subtract(point.previous.point, point.next.point, v3);\n    cross(v1, v2, v4);\n    const area = dot(v4, model.normal);\n    if (area <= 0) {\n      return -1;\n    }\n    const perimeter = norm(v1) + norm(v2) + norm(v3);\n    return perimeter * perimeter / area;\n  }\n  function canRemoveVertex(point) {\n    if (model.pointCount <= 3) {\n      return true;\n    }\n    const previous = point.previous;\n    const next = point.next;\n    const v = [0, 0, 0];\n    subtract(next.point, previous.point, v);\n    const sN = [0, 0, 0];\n    cross(v, model.normal, sN);\n    normalize(sN);\n    if (norm(sN) === 0) {\n      return false;\n    }\n    let val = vtkPlane.evaluate(sN, previous.point, next.next.point);\n    // eslint-disable-next-line no-nested-ternary\n    let currentSign = val > EPSILON ? 1 : val < -EPSILON ? -1 : 0;\n    let oneNegative = currentSign < 0 ? 1 : 0;\n    for (let vertex = next.next.next; vertex.id !== previous.id; vertex = vertex.next) {\n      const previousVertex = vertex.previous;\n      val = vtkPlane.evaluate(sN, previous.point, vertex.point);\n      // eslint-disable-next-line no-nested-ternary\n      const sign = val > EPSILON ? 1 : val < -EPSILON ? -1 : 0;\n      if (sign !== currentSign) {\n        if (!oneNegative) {\n          oneNegative = sign <= 0 ? 1 : 0;\n        }\n        if (vtkLine.intersection(previous.point, next.point, vertex.point, previousVertex.point, [0], [0]) === IntersectionState.YES_INTERSECTION) {\n          return false;\n        }\n        currentSign = sign;\n      }\n    }\n    return oneNegative === 1;\n  }\n  function removePoint(point, queue) {\n    model.pointCount -= 1;\n    const previous = point.previous;\n    const next = point.next;\n    model.tris = model.tris.concat(point.point);\n    model.tris = model.tris.concat(next.point);\n    model.tris = model.tris.concat(previous.point);\n    previous.next = next;\n    next.previous = previous;\n    queue.deleteById(previous.id);\n    queue.deleteById(next.id);\n    const previousMeasure = computeMeasure(previous);\n    if (previousMeasure > 0) {\n      queue.push(previousMeasure, previous);\n    }\n    const nextMeasure = computeMeasure(next);\n    if (nextMeasure > 0) {\n      queue.push(nextMeasure, next);\n    }\n    if (point.id === model.firstPoint.id) {\n      model.firstPoint = next;\n    }\n  }\n  function earCutTriangulation() {\n    computeNormal();\n    const vertexQueue = vtkPriorityQueue.newInstance();\n    let point = model.firstPoint;\n    for (let i = 0; i < model.pointCount; i++) {\n      const measure = computeMeasure(point);\n      if (measure > 0) {\n        vertexQueue.push(measure, point);\n      }\n      point = point.next;\n    }\n    while (model.pointCount > 2 && vertexQueue.length() > 0) {\n      if (model.pointCount === vertexQueue.length()) {\n        // convex\n        const pointToRemove = vertexQueue.pop();\n        removePoint(pointToRemove, vertexQueue);\n      } else {\n        // concave\n        const pointToRemove = vertexQueue.pop();\n        if (canRemoveVertex(pointToRemove)) {\n          removePoint(pointToRemove, vertexQueue);\n        }\n      }\n    }\n    return model.pointCount <= 2;\n  }\n  publicAPI.triangulate = () => {\n    if (!model.firstPoint) {\n      return null;\n    }\n    return earCutTriangulation();\n  };\n  publicAPI.setPoints = points => {\n    model.pointCount = points.length;\n    model.firstPoint = {\n      id: 0,\n      point: points[0],\n      next: null,\n      previous: null\n    };\n    let currentPoint = model.firstPoint;\n    for (let i = 1; i < model.pointCount; i++) {\n      currentPoint.next = {\n        id: i,\n        point: points[i],\n        next: null,\n        previous: currentPoint\n      };\n      currentPoint = currentPoint.next;\n    }\n    model.firstPoint.previous = currentPoint;\n    currentPoint.next = model.firstPoint;\n  };\n  publicAPI.getPointArray = () => model.tris;\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  firstPoint: null,\n  pointCount: 0,\n  tris: []\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  vtkPolygon(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPolygon');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPolygon$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { computeCentroid, vtkPolygon$1 as default, extend, getBounds, getNormal, newInstance };\n", "import { m as macro, T as TYPED_ARRAYS } from '../../macros2.js';\nimport vtkCell from './Cell.js';\nimport { d as dot, j as cross, l as normalize, m as multiplyAccumulate, f as distance2BetweenPoints, o as determinant2x2, s as subtract, p as invertMatrix } from '../Core/Math/index.js';\nimport vtkLine from './Line.js';\nimport vtkPlane from './Plane.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nfunction computeNormalDirection(v1, v2, v3, n) {\n  // order is important!!! maintain consistency with triangle vertex order\n  const ax = v3[0] - v2[0];\n  const ay = v3[1] - v2[1];\n  const az = v3[2] - v2[2];\n  const bx = v1[0] - v2[0];\n  const by = v1[1] - v2[1];\n  const bz = v1[2] - v2[2];\n  n[0] = ay * bz - az * by;\n  n[1] = az * bx - ax * bz;\n  n[2] = ax * by - ay * bx;\n}\nfunction computeNormal(v1, v2, v3, n) {\n  computeNormalDirection(v1, v2, v3, n);\n  const length = Math.sqrt(n[0] * n[0] + n[1] * n[1] + n[2] * n[2]);\n  if (length !== 0.0) {\n    n[0] /= length;\n    n[1] /= length;\n    n[2] /= length;\n  }\n}\nfunction interpolationDerivs(derivs) {\n  // Order: [dN1/dr, dN2/dr, dN3/dr, dN1/ds, dN2/ds, dN3/ds]\n  // r-derivatives\n  derivs[0] = -1.0;\n  derivs[1] = 1.0;\n  derivs[2] = 0.0;\n\n  // s-derivatives\n  derivs[3] = -1.0;\n  derivs[4] = 0.0;\n  derivs[5] = 1.0;\n}\nfunction intersectWithTriangle(p1, q1, r1, p2, q2, r2) {\n  let tolerance = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 1e-6;\n  let coplanar = false;\n  const pt1 = [];\n  const pt2 = [];\n  const surfaceId = [];\n  const n1 = [];\n  const n2 = [];\n\n  // Compute supporting plane normals.\n  computeNormal(p1, q1, r1, n1);\n  computeNormal(p2, q2, r2, n2);\n  const s1 = -dot(n1, p1);\n  const s2 = -dot(n2, p2);\n\n  // Compute signed distances of points p1, q1, r1 from supporting\n  // plane of second triangle.\n  const dist1 = [dot(n2, p1) + s2, dot(n2, q1) + s2, dot(n2, r1) + s2];\n\n  // If signs of all points are the same, all the points lie on the\n  // same side of the supporting plane, and we can exit early.\n  if (dist1[0] * dist1[1] > tolerance && dist1[0] * dist1[2] > tolerance) {\n    // vtkDebugMacro(<<\"Same side supporting plane 1!\");\n    return {\n      intersect: false,\n      coplanar,\n      pt1,\n      pt2,\n      surfaceId\n    };\n  }\n  // Do the same for p2, q2, r2 and supporting plane of first\n  // triangle.\n  const dist2 = [dot(n1, p2) + s1, dot(n1, q2) + s1, dot(n1, r2) + s1];\n\n  // If signs of all points are the same, all the points lie on the\n  // same side of the supporting plane, and we can exit early.\n  if (dist2[0] * dist2[1] > tolerance && dist2[0] * dist2[2] > tolerance) {\n    // vtkDebugMacro(<<\"Same side supporting plane 2!\");\n    return {\n      intersect: false,\n      coplanar,\n      pt1,\n      pt2,\n      surfaceId\n    };\n  }\n  // Check for coplanarity of the supporting planes.\n  if (Math.abs(n1[0] - n2[0]) < 1e-9 && Math.abs(n1[1] - n2[1]) < 1e-9 && Math.abs(n1[2] - n2[2]) < 1e-9 && Math.abs(s1 - s2) < 1e-9) {\n    coplanar = true;\n    // vtkDebugMacro(<<\"Coplanar!\");\n    return {\n      intersect: false,\n      coplanar,\n      pt1,\n      pt2,\n      surfaceId\n    };\n  }\n\n  // There are more efficient ways to find the intersection line (if\n  // it exists), but this is clear enough.\n  const pts1 = [p1, q1, r1];\n  const pts2 = [p2, q2, r2];\n\n  // Find line of intersection (L = p + t*v) between two planes.\n  const n1n2 = dot(n1, n2);\n  const a = (s1 - s2 * n1n2) / (n1n2 * n1n2 - 1.0);\n  const b = (s2 - s1 * n1n2) / (n1n2 * n1n2 - 1.0);\n  const p = [a * n1[0] + b * n2[0], a * n1[1] + b * n2[1], a * n1[2] + b * n2[2]];\n  const v = cross(n1, n2, []);\n  normalize(v);\n  let index1 = 0;\n  let index2 = 0;\n  const t1 = [];\n  const t2 = [];\n  let ts1 = 50;\n  let ts2 = 50;\n  for (let i = 0; i < 3; i++) {\n    const id1 = i;\n    const id2 = (i + 1) % 3;\n\n    // Find t coordinate on line of intersection between two planes.\n    const val1 = vtkPlane.intersectWithLine(pts1[id1], pts1[id2], p2, n2);\n    if (val1.intersection && val1.t > 0 - tolerance && val1.t < 1 + tolerance) {\n      if (val1.t < 1 + tolerance && val1.t > 1 - tolerance) {\n        ts1 = index1;\n      }\n      t1[index1++] = dot(val1.x, v) - dot(p, v);\n    }\n    const val2 = vtkPlane.intersectWithLine(pts2[id1], pts2[id2], p1, n1);\n    if (val2.intersection && val2.t > 0 - tolerance && val2.t < 1 + tolerance) {\n      if (val2.t < 1 + tolerance && val2.t > 1 - tolerance) {\n        ts2 = index2;\n      }\n      t2[index2++] = dot(val2.x, v) - dot(p, v);\n    }\n  }\n\n  // If the value of the index is greater than 2, the intersecting point\n  // actually is intersected by all three edges. In this case, set the two\n  // edges to the two edges where the intersecting point is not the end point\n  if (index1 > 2) {\n    index1--;\n    // swap\n    const t12 = t1[2];\n    t1[2] = t1[ts1];\n    t1[ts1] = t12;\n  }\n  if (index2 > 2) {\n    index2--;\n    const t22 = t2[2];\n    t2[2] = t2[ts2];\n    t2[ts2] = t22;\n  }\n  // Check if only one edge or all edges intersect the supporting\n  // planes intersection.\n  if (index1 !== 2 || index2 !== 2) {\n    // vtkDebugMacro(<<\"Only one edge intersecting!\");\n    return {\n      intersect: false,\n      coplanar,\n      pt1,\n      pt2,\n      surfaceId\n    };\n  }\n\n  // Check for NaNs\n  if (Number.isNaN(t1[0]) || Number.isNaN(t1[1]) || Number.isNaN(t2[0]) || Number.isNaN(t2[1])) {\n    // vtkWarningMacro(<<\"NaNs!\");\n    return {\n      intersect: false,\n      coplanar,\n      pt1,\n      pt2,\n      surfaceId\n    };\n  }\n  if (t1[0] > t1[1]) {\n    // swap\n    const t11 = t1[1];\n    t1[1] = t1[0];\n    t1[0] = t11;\n  }\n  if (t2[0] > t2[1]) {\n    // swap\n    const t21 = t2[1];\n    t2[1] = t2[0];\n    t2[0] = t21;\n  }\n  // Handle the different interval configuration cases.\n  let tt1;\n  let tt2;\n  if (t1[1] < t2[0] || t2[1] < t1[0]) {\n    // vtkDebugMacro(<<\"No Overlap!\");\n    return {\n      intersect: false,\n      coplanar,\n      pt1,\n      pt2,\n      surfaceId\n    }; // No overlap\n  }\n\n  if (t1[0] < t2[0]) {\n    if (t1[1] < t2[1]) {\n      // First point on surface 2, second point on surface 1\n      surfaceId[0] = 2;\n      surfaceId[1] = 1;\n      tt1 = t2[0];\n      tt2 = t1[1];\n    } else {\n      // Both points belong to lines on surface 2\n      surfaceId[0] = 2;\n      surfaceId[1] = 2;\n      tt1 = t2[0];\n      tt2 = t2[1];\n    }\n  } // t1[0] >= t2[0]\n  else if (t1[1] < t2[1]) {\n    // Both points belong to lines on surface 1\n    surfaceId[0] = 1;\n    surfaceId[1] = 1;\n    tt1 = t1[0];\n    tt2 = t1[1];\n  } else {\n    // First point on surface 1, second point on surface 2\n    surfaceId[0] = 1;\n    surfaceId[1] = 2;\n    tt1 = t1[0];\n    tt2 = t2[1];\n  }\n\n  // Create actual intersection points.\n  multiplyAccumulate(p, v, tt1, pt1);\n  multiplyAccumulate(p, v, tt2, pt2);\n  return {\n    intersect: true,\n    coplanar,\n    pt1,\n    pt2,\n    surfaceId\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  computeNormalDirection,\n  computeNormal,\n  interpolationDerivs,\n  intersectWithTriangle\n};\n\n// ----------------------------------------------------------------------------\n// vtkTriangle methods\n// ----------------------------------------------------------------------------\n\nfunction vtkTriangle(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkTriangle');\n  publicAPI.getCellDimension = () => 2;\n  publicAPI.intersectWithLine = (p1, p2, tol, x, pcoords) => {\n    const outObj = {\n      subId: 0,\n      t: Number.MAX_VALUE,\n      intersect: 0,\n      betweenPoints: false\n    };\n    pcoords[2] = 0.0;\n    const closestPoint = [];\n    const tol2 = tol * tol;\n\n    // Get normal for triangle\n    const pt1 = [];\n    const pt2 = [];\n    const pt3 = [];\n    model.points.getPoint(0, pt1);\n    model.points.getPoint(1, pt2);\n    model.points.getPoint(2, pt3);\n    const n = [];\n    const weights = [];\n    computeNormal(pt1, pt2, pt3, n);\n    if (n[0] !== 0 || n[1] !== 0 || n[2] !== 0) {\n      // Intersect plane of triangle with line\n      const plane = vtkPlane.intersectWithLine(p1, p2, pt1, n);\n      outObj.betweenPoints = plane.betweenPoints;\n      outObj.t = plane.t;\n      x[0] = plane.x[0];\n      x[1] = plane.x[1];\n      x[2] = plane.x[2];\n      if (!plane.intersection) {\n        pcoords[0] = 0.0;\n        pcoords[1] = 0.0;\n        outObj.intersect = 0;\n        return outObj;\n      }\n\n      // Evaluate position\n      const inside = publicAPI.evaluatePosition(x, closestPoint, pcoords, weights);\n      if (inside.evaluation >= 0) {\n        if (inside.dist2 <= tol2) {\n          outObj.intersect = 1;\n          return outObj;\n        }\n        outObj.intersect = inside.evaluation;\n        return outObj;\n      }\n    }\n\n    // Normals are null, so the triangle is degenerated and\n    // we still need to check intersection between line and\n    // the longest edge.\n    const dist2Pt1Pt2 = distance2BetweenPoints(pt1, pt2);\n    const dist2Pt2Pt3 = distance2BetweenPoints(pt2, pt3);\n    const dist2Pt3Pt1 = distance2BetweenPoints(pt3, pt1);\n    if (!model.line) {\n      model.line = vtkLine.newInstance();\n    }\n    if (dist2Pt1Pt2 > dist2Pt2Pt3 && dist2Pt1Pt2 > dist2Pt3Pt1) {\n      model.line.getPoints().setPoint(0, pt1);\n      model.line.getPoints().setPoint(1, pt2);\n    } else if (dist2Pt2Pt3 > dist2Pt3Pt1 && dist2Pt2Pt3 > dist2Pt1Pt2) {\n      model.line.getPoints().setPoint(0, pt2);\n      model.line.getPoints().setPoint(1, pt3);\n    } else {\n      model.line.getPoints().setPoint(0, pt3);\n      model.line.getPoints().setPoint(1, pt1);\n    }\n    const intersectLine = model.line.intersectWithLine(p1, p2, tol, x, pcoords);\n    outObj.betweenPoints = intersectLine.betweenPoints;\n    outObj.t = intersectLine.t;\n    if (intersectLine.intersect) {\n      const pt3Pt1 = [];\n      const pt3Pt2 = [];\n      const pt3X = [];\n      // Compute r and s manually, using dot and norm.\n      for (let i = 0; i < 3; i++) {\n        pt3Pt1[i] = pt1[i] - pt3[i];\n        pt3Pt2[i] = pt2[i] - pt3[i];\n        pt3X[i] = x[i] - pt3[i];\n      }\n      pcoords[0] = dot(pt3X, pt3Pt1) / dist2Pt3Pt1;\n      pcoords[1] = dot(pt3X, pt3Pt2) / dist2Pt2Pt3;\n      outObj.intersect = 1;\n      return outObj;\n    }\n    pcoords[0] = 0.0;\n    pcoords[1] = 0.0;\n    outObj.intersect = 0;\n    return outObj;\n  };\n\n  /**\n   * Evaluates whether the specified point is inside (1), outside (0), or\n   * indeterminate (-1) for the cell; computes parametric coordinates, sub-cell\n   * ID (if applicable), squared distance to the cell (and closest point if\n   * requested), and interpolation weights for the cell.\n   *\n   * @param {Vector3} x The x point coordinate.\n   * @param {Vector3} closestPoint The closest point coordinate.\n   * @param {Vector3} pcoords The parametric coordinates.\n   * @param {Number[]} weights The number of weights.\n   */\n  publicAPI.evaluatePosition = (x, closestPoint, pcoords, weights) => {\n    // will return obj\n    const outObj = {\n      subId: 0,\n      dist2: 0,\n      evaluation: -1\n    };\n    let i;\n    let j;\n    const pt1 = [];\n    const pt2 = [];\n    const pt3 = [];\n    const n = [];\n    let fabsn;\n    const rhs = [];\n    const c1 = [];\n    const c2 = [];\n    let det = 0;\n    let idx = 0;\n    const indices = [];\n    let dist2Point;\n    let dist2Line1;\n    let dist2Line2;\n    let closest = [];\n    const closestPoint1 = [];\n    const closestPoint2 = [];\n    const cp = [];\n    outObj.subId = 0;\n    pcoords[2] = 0.0;\n\n    // Get normal for triangle, only the normal direction is needed, i.e. the\n    // normal need not be normalized (unit length)\n    //\n    model.points.getPoint(1, pt1);\n    model.points.getPoint(2, pt2);\n    model.points.getPoint(0, pt3);\n    computeNormalDirection(pt1, pt2, pt3, n);\n\n    // Project point to plane\n    vtkPlane.generalizedProjectPoint(x, pt1, n, cp);\n\n    // Construct matrices.  Since we have over determined system, need to find\n    // which 2 out of 3 equations to use to develop equations. (Any 2 should\n    // work since we've projected point to plane.)\n    let maxComponent = 0.0;\n    for (i = 0; i < 3; i++) {\n      // trying to avoid an expensive call to fabs()\n      if (n[i] < 0) {\n        fabsn = -n[i];\n      } else {\n        fabsn = n[i];\n      }\n      if (fabsn > maxComponent) {\n        maxComponent = fabsn;\n        idx = i;\n      }\n    }\n    for (j = 0, i = 0; i < 3; i++) {\n      if (i !== idx) {\n        indices[j++] = i;\n      }\n    }\n    for (i = 0; i < 2; i++) {\n      rhs[i] = cp[indices[i]] - pt3[indices[i]];\n      c1[i] = pt1[indices[i]] - pt3[indices[i]];\n      c2[i] = pt2[indices[i]] - pt3[indices[i]];\n    }\n    det = determinant2x2(c1, c2);\n    if (det === 0.0) {\n      pcoords[0] = 0.0;\n      pcoords[1] = 0.0;\n      outObj.evaluation = -1;\n      return outObj;\n    }\n    pcoords[0] = determinant2x2(rhs, c2) / det;\n    pcoords[1] = determinant2x2(c1, rhs) / det;\n\n    // Okay, now find closest point to element\n    weights[0] = 1 - (pcoords[0] + pcoords[1]);\n    weights[1] = pcoords[0];\n    weights[2] = pcoords[1];\n    if (weights[0] >= 0.0 && weights[0] <= 1.0 && weights[1] >= 0.0 && weights[1] <= 1.0 && weights[2] >= 0.0 && weights[2] <= 1.0) {\n      // projection distance\n      if (closestPoint) {\n        outObj.dist2 = distance2BetweenPoints(cp, x);\n        closestPoint[0] = cp[0];\n        closestPoint[1] = cp[1];\n        closestPoint[2] = cp[2];\n      }\n      outObj.evaluation = 1;\n    } else {\n      let t;\n      if (closestPoint) {\n        if (weights[1] < 0.0 && weights[2] < 0.0) {\n          dist2Point = distance2BetweenPoints(x, pt3);\n          dist2Line1 = vtkLine.distanceToLine(x, pt1, pt3, t, closestPoint1);\n          dist2Line2 = vtkLine.distanceToLine(x, pt3, pt2, t, closestPoint2);\n          if (dist2Point < dist2Line1) {\n            outObj.dist2 = dist2Point;\n            closest = pt3;\n          } else {\n            outObj.dist2 = dist2Line1;\n            closest = closestPoint1;\n          }\n          if (dist2Line2 < outObj.dist2) {\n            outObj.dist2 = dist2Line2;\n            closest = closestPoint2;\n          }\n          for (i = 0; i < 3; i++) {\n            closestPoint[i] = closest[i];\n          }\n        } else if (weights[2] < 0.0 && weights[0] < 0.0) {\n          dist2Point = distance2BetweenPoints(x, pt1);\n          dist2Line1 = vtkLine.distanceToLine(x, pt1, pt3, t, closestPoint1);\n          dist2Line2 = vtkLine.distanceToLine(x, pt1, pt2, t, closestPoint2);\n          if (dist2Point < dist2Line1) {\n            outObj.dist2 = dist2Point;\n            closest = pt1;\n          } else {\n            outObj.dist2 = dist2Line1;\n            closest = closestPoint1;\n          }\n          if (dist2Line2 < outObj.dist2) {\n            outObj.dist2 = dist2Line2;\n            closest = closestPoint2;\n          }\n          for (i = 0; i < 3; i++) {\n            closestPoint[i] = closest[i];\n          }\n        } else if (weights[1] < 0.0 && weights[0] < 0.0) {\n          dist2Point = distance2BetweenPoints(x, pt2);\n          dist2Line1 = vtkLine.distanceToLine(x, pt2, pt3, t, closestPoint1);\n          dist2Line2 = vtkLine.distanceToLine(x, pt1, pt2, t, closestPoint2);\n          if (dist2Point < dist2Line1) {\n            outObj.dist2 = dist2Point;\n            closest = pt2;\n          } else {\n            outObj.dist2 = dist2Line1;\n            closest = closestPoint1;\n          }\n          if (dist2Line2 < outObj.dist2) {\n            outObj.dist2 = dist2Line2;\n            closest = closestPoint2;\n          }\n          for (i = 0; i < 3; i++) {\n            closestPoint[i] = closest[i];\n          }\n        } else if (weights[0] < 0.0) {\n          const lineDistance = vtkLine.distanceToLine(x, pt1, pt2, closestPoint);\n          outObj.dist2 = lineDistance.distance;\n        } else if (weights[1] < 0.0) {\n          const lineDistance = vtkLine.distanceToLine(x, pt2, pt3, closestPoint);\n          outObj.dist2 = lineDistance.distance;\n        } else if (weights[2] < 0.0) {\n          const lineDistance = vtkLine.distanceToLine(x, pt1, pt3, closestPoint);\n          outObj.dist2 = lineDistance.distance;\n        }\n      }\n      outObj.evaluation = 0;\n    }\n    return outObj;\n  };\n\n  /**\n   * Determine global coordinates (x) from the given subId and parametric\n   * coordinates.\n   * @param {Vector3} pcoords The parametric coordinates.\n   * @param {Vector3} x The x point coordinate.\n   * @param {Number[]} weights The number of weights.\n   */\n  publicAPI.evaluateLocation = (pcoords, x, weights) => {\n    const p0 = [];\n    const p1 = [];\n    const p2 = [];\n    model.points.getPoint(0, p0);\n    model.points.getPoint(1, p1);\n    model.points.getPoint(2, p2);\n    const u3 = 1.0 - pcoords[0] - pcoords[1];\n    for (let i = 0; i < 3; i++) {\n      x[i] = p0[i] * u3 + p1[i] * pcoords[0] + p2[i] * pcoords[1];\n    }\n    weights[0] = u3;\n    weights[1] = pcoords[0];\n    weights[2] = pcoords[1];\n  };\n\n  /**\n   * Get the distance of the parametric coordinate provided to the cell.\n   * @param {Vector3} pcoords The parametric coordinates.\n   */\n  publicAPI.getParametricDistance = pcoords => {\n    let pDist;\n    let pDistMax = 0.0;\n    const pc = [];\n    pc[0] = pcoords[0];\n    pc[1] = pcoords[1];\n    pc[2] = 1.0 - pcoords[0] - pcoords[1];\n    for (let i = 0; i < 3; i++) {\n      if (pc[i] < 0.0) {\n        pDist = -pc[i];\n      } else if (pc[i] > 1.0) {\n        pDist = pc[i] - 1.0;\n      } else {\n        // inside the cell in the parametric direction\n        pDist = 0.0;\n      }\n      if (pDist > pDistMax) {\n        pDistMax = pDist;\n      }\n    }\n    return pDistMax;\n  };\n\n  /**\n   * Get the derivatives of the triangle strip.\n   * @param {Number} subId - The sub-id of the triangle.\n   * @param {Vector3} pcoords - The parametric coordinates.\n   * @param {Number[]} values - The values at the points.\n   * @param {Number} dim - The dimension.\n   * @param {Number[]} derivs - The derivatives.\n   */\n  publicAPI.derivatives = (subId, pcoords, values, dim, derivs) => {\n    const x0 = model.points.getPoint(0);\n    const x1 = model.points.getPoint(1);\n    const x2 = model.points.getPoint(2);\n    const n = [];\n    const v10 = [];\n    const v20 = [];\n    const v = [];\n    computeNormal(x0, x1, x2, n);\n    subtract(x1, x0, v10);\n    subtract(x2, x0, v);\n    cross(n, v10, v20);\n    const lenX = normalize(v10); // check for degenerate triangle\n\n    if (lenX <= 0.0 || normalize(v20) <= 0.0) {\n      // degenerate\n      for (let j = 0; j < dim; j++) {\n        for (let i = 0; i < 3; i++) {\n          derivs[j * dim + i] = 0.0;\n        }\n      }\n      return;\n    }\n\n    // 2D coordinates\n    const v0 = [0, 0];\n    const v1 = [lenX, 0];\n    const v2 = [dot(v, v10), dot(v, v20)];\n    const functionDerivs = new Array(6);\n    interpolationDerivs(functionDerivs);\n\n    // Compute Jacobian: Jacobian is constant for a triangle.\n    const J = [v1[0] - v0[0], v1[1] - v0[1], v2[0] - v0[0], v2[1] - v0[1]];\n\n    // Compute inverse Jacobian (expects flat array)\n    const JI = macro.newTypedArray(TYPED_ARRAYS.Float64Array, 4);\n    invertMatrix(J, JI, 2); // returns flat array [JI00, JI01, JI10, JI11]\n\n    // Compute derivatives\n    for (let j = 0; j < dim; j++) {\n      let sum0 = 0.0;\n      let sum1 = 0.0;\n      for (let i = 0; i < 3; i++) {\n        sum0 += functionDerivs[i] * values[dim * i + j];\n        sum1 += functionDerivs[3 + i] * values[dim * i + j];\n      }\n      const dBydx = sum0 * JI[0] + sum1 * JI[1];\n      const dBydy = sum0 * JI[2] + sum1 * JI[3];\n\n      // Transform into global system (dot product with global axes)\n      derivs[3 * j] = dBydx * v10[0] + dBydy * v20[0];\n      derivs[3 * j + 1] = dBydx * v10[1] + dBydy * v20[1];\n      derivs[3 * j + 2] = dBydx * v10[2] + dBydy * v20[2];\n    }\n  };\n\n  /**\n   * Get the nearest cell boundary to the specified parametric\n   * coordinates and whether the point is inside or outside the cell.\n   * @param {Number} subId The sub-id of the cell.\n   * @param {Vector3} pcoords The parametric coordinates.\n   * @param {Vector2} pts The points of the cell.\n   */\n  publicAPI.cellBoundary = (subId, pcoords, pts) => {\n    const t1 = pcoords[0] - pcoords[1];\n    const t2 = 0.5 * (1.0 - pcoords[0]) - pcoords[1];\n    const t3 = 2.0 * pcoords[0] + pcoords[1] - 1.0;\n\n    // compare against three lines in parametric space that divide element\n    // into three pieces\n    if (t1 >= 0.0 && t2 >= 0.0) {\n      pts[0] = model.pointsIds[0];\n      pts[1] = model.pointsIds[1];\n    } else if (t2 < 0.0 && t3 >= 0.0) {\n      pts[0] = model.pointsIds[1];\n      pts[1] = model.pointsIds[2];\n    } // ( t1 < 0.0 && t3 < 0.0 )\n    else {\n      pts[0] = model.pointsIds[2];\n      pts[1] = model.pointsIds[0];\n    }\n    if (pcoords[0] < 0.0 || pcoords[1] < 0.0 || pcoords[0] > 1.0 || pcoords[1] > 1.0 || 1.0 - pcoords[0] - pcoords[1] < 0.0) {\n      return false; // outside of triangle\n    }\n\n    return true; // inside triangle\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  vtkCell.extend(publicAPI, model, initialValues);\n  vtkTriangle(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkTriangle');\n\n// ----------------------------------------------------------------------------\n\nvar vtkTriangle$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { STATIC, vtkTriangle$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkCell from './Cell.js';\nimport { f as distance2BetweenPoints } from '../Core/Math/index.js';\nimport { CellType } from './CellTypes/Constants.js';\nimport vtkTriangle from './Triangle.js';\nimport vtkPoints from '../Core/Points.js';\n\nfunction intersectionStruct() {\n  return {\n    intersected: false,\n    subId: -1,\n    x: [0.0, 0.0, 0.0],\n    pCoords: [0.0, 0.0, 0.0],\n    t: -1\n  };\n}\nfunction vtkQuad(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkQuad');\n  publicAPI.getCellDimension = () => 2;\n  publicAPI.getCellType = () => CellType.VTK_QUAD;\n  publicAPI.getNumberOfEdges = () => 4;\n  publicAPI.getNumberOfFaces = () => 0;\n  publicAPI.intersectWithLine = (p1, p2, tol, x, pcoords) => {\n    let outObj = {\n      subId: 0,\n      t: Number.MAX_VALUE,\n      intersect: 0,\n      betweenPoints: false\n    };\n    let diagonalCase;\n    const point0 = model.points.getPoint(0, []);\n    const point1 = model.points.getPoint(1, []);\n    const point2 = model.points.getPoint(2, []);\n    const point3 = model.points.getPoint(3, []);\n    const d1 = distance2BetweenPoints(point0, point2);\n    const d2 = distance2BetweenPoints(point1, point3);\n\n    /* Figure out how to uniquely tessellate the quad. Watch out for\n     * equivalent triangulations (i.e., the triangulation is equivalent\n     * no matter where the diagonal). In this case use the point ids as\n     * a tie breaker to ensure unique triangulation across the quad.\n     */\n\n    // rare case; discriminate based on point id\n    if (d1 === d2) {\n      // find the maximum id\n      let id;\n      let maxId = 0;\n      let maxIdx = 0;\n      for (let i = 0; i < 4; i++) {\n        id = model.pointsIds[i];\n        if (id > maxId) {\n          maxId = id;\n          maxIdx = i;\n        }\n      }\n      if (maxIdx === 0 || maxIdx === 2) {\n        diagonalCase = 0;\n      } else {\n        diagonalCase = 1;\n      }\n    } else if (d1 < d2) {\n      diagonalCase = 0;\n    } else {\n      diagonalCase = 1;\n    }\n    let points = null;\n    if (!model.triangle) {\n      model.triangle = vtkTriangle.newInstance();\n      points = vtkPoints.newInstance();\n      points.setNumberOfPoints(3);\n      model.triangle.initialize(points);\n    } else {\n      points = model.triangle.getPoints();\n    }\n    let firstIntersect;\n    const firstIntersectTmpObj = intersectionStruct();\n    let secondIntersect;\n    const secondIntersectTmpObj = intersectionStruct();\n    let useFirstIntersection;\n    let useSecondIntersection;\n    switch (diagonalCase) {\n      case 0:\n        points.setPoint(0, ...point0);\n        points.setPoint(1, ...point1);\n        points.setPoint(2, ...point2);\n        firstIntersect = model.triangle.intersectWithLine(p1, p2, tol, firstIntersectTmpObj.x, firstIntersectTmpObj.pCoords);\n        points.setPoint(0, ...point2);\n        points.setPoint(1, ...point3);\n        points.setPoint(2, ...point0);\n        secondIntersect = model.triangle.intersectWithLine(p1, p2, tol, secondIntersectTmpObj.x, secondIntersectTmpObj.pCoords);\n        useFirstIntersection = firstIntersect.intersect && secondIntersect.intersect ? firstIntersect.t <= secondIntersect.t : firstIntersect.intersect;\n        useSecondIntersection = firstIntersect.intersect && secondIntersect.intersect ? secondIntersect.t < firstIntersect.t : secondIntersect.intersect;\n        if (useFirstIntersection) {\n          outObj = firstIntersect;\n          x[0] = firstIntersectTmpObj.x[0];\n          x[1] = firstIntersectTmpObj.x[1];\n          x[2] = firstIntersectTmpObj.x[2];\n          pcoords[0] = firstIntersectTmpObj.pCoords[0] + firstIntersectTmpObj.pCoords[1];\n          pcoords[1] = firstIntersectTmpObj.pCoords[1];\n          pcoords[2] = firstIntersectTmpObj.pCoords[2];\n        } else if (useSecondIntersection) {\n          outObj = secondIntersect;\n          x[0] = secondIntersectTmpObj.x[0];\n          x[1] = secondIntersectTmpObj.x[1];\n          x[2] = secondIntersectTmpObj.x[2];\n          pcoords[0] = 1.0 - (secondIntersectTmpObj.pCoords[0] + secondIntersectTmpObj.pCoords[1]);\n          pcoords[1] = 1 - secondIntersectTmpObj.pCoords[1];\n          pcoords[2] = secondIntersectTmpObj.pCoords[2];\n        }\n        break;\n      case 1:\n        points.setPoint(0, ...point0);\n        points.setPoint(1, ...point1);\n        points.setPoint(2, ...point3);\n        firstIntersect = model.triangle.intersectWithLine(p1, p2, tol, firstIntersectTmpObj.x, firstIntersectTmpObj.pCoords);\n        points.setPoint(0, ...point2);\n        points.setPoint(1, ...point3);\n        points.setPoint(2, ...point1);\n        secondIntersect = model.triangle.intersectWithLine(p1, p2, tol, secondIntersectTmpObj.x, secondIntersectTmpObj.pCoords);\n        useFirstIntersection = firstIntersect.intersect && secondIntersect.intersect ? firstIntersect.t <= secondIntersect.t : firstIntersect.intersect;\n        useSecondIntersection = firstIntersect.intersect && secondIntersect.intersect ? secondIntersect.t < firstIntersect.t : secondIntersect.intersect;\n        if (useFirstIntersection) {\n          outObj = firstIntersect;\n          x[0] = firstIntersectTmpObj.x[0];\n          x[1] = firstIntersectTmpObj.x[1];\n          x[2] = firstIntersectTmpObj.x[2];\n          pcoords[0] = firstIntersectTmpObj.pCoords[0];\n          pcoords[1] = firstIntersectTmpObj.pCoords[1];\n          pcoords[2] = firstIntersectTmpObj.pCoords[2];\n        } else if (useSecondIntersection) {\n          outObj = secondIntersect;\n          x[0] = secondIntersectTmpObj.x[0];\n          x[1] = secondIntersectTmpObj.x[1];\n          x[2] = secondIntersectTmpObj.x[2];\n          pcoords[0] = 1 - secondIntersectTmpObj.pCoords[0];\n          pcoords[1] = 1 - secondIntersectTmpObj.pCoords[1];\n          pcoords[2] = secondIntersectTmpObj.pCoords[2];\n        }\n        break;\n    }\n    return outObj;\n  };\n  publicAPI.interpolationFunctions = (pcoords, weights) => {\n    const rm = 1 - pcoords[0];\n    const sm = 1 - pcoords[1];\n    weights[0] = rm * sm;\n    weights[1] = pcoords[0] * sm;\n    weights[2] = pcoords[0] * pcoords[1];\n    weights[3] = rm * pcoords[1];\n  };\n  publicAPI.evaluateLocation = (pcoords, x, weights) => {\n    const point = [];\n\n    // Calculate the weights\n    publicAPI.interpolationFunctions(pcoords, weights);\n    x[0] = 0.0;\n    x[1] = 0.0;\n    x[2] = 0.0;\n    for (let i = 0; i < 4; i++) {\n      model.points.getPoint(i, point);\n      for (let j = 0; j < 3; j++) {\n        x[j] += point[j] * weights[i];\n      }\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  vtkCell.extend(publicAPI, model, initialValues);\n  vtkQuad(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkQuad');\n\n// ----------------------------------------------------------------------------\n\nvar vtkQuad$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkQuad$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkCell from './Cell.js';\nimport vtkLine from './Line.js';\nimport vtkTriangle from './Triangle.js';\nimport { CellType } from './CellTypes/Constants.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nfunction notImplemented(method) {\n  return () => vtkErrorMacro(`vtkTriangleStrip.${method} - NOT IMPLEMENTED`);\n}\n\n/**\n * Decomposes a triangle strip into individual triangles.\n * @param {*} pts Points of the triangle strip\n * @param {*} polys Cell array to store the resulting triangles\n */\nfunction decomposeStrip(pts, polys) {\n  if (!Array.isArray(pts) || pts.length < 3) {\n    vtkErrorMacro('decomposeStrip - Invalid points array');\n    return;\n  }\n  let p1 = pts[0];\n  let p2 = pts[1];\n  for (let i = 0; i < pts.length - 2; i++) {\n    const p3 = pts[i + 2];\n    if (i % 2) {\n      // Flip ordering to preserve consistency\n      polys.insertNextCell([p2, p1, p3]);\n    } else {\n      polys.insertNextCell([p1, p2, p3]);\n    }\n    p1 = p2;\n    p2 = p3;\n  }\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  decomposeStrip\n};\n\n// ----------------------------------------------------------------------------\n// vtkTriangleStrip methods\n// ----------------------------------------------------------------------------\n\nfunction vtkTriangleStrip(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkTriangleStrip');\n  const superInitialize = publicAPI.initialize;\n  publicAPI.initialize = (points, pointsIds) => {\n    model.triangle.initialize(points, pointsIds);\n    superInitialize(points, pointsIds);\n  };\n\n  /**\n   * Get the cell type.\n   * @returns {number} Cell type\n   */\n  publicAPI.getCellType = () => CellType.VTK_TRIANGLE_STRIP;\n\n  /**\n   * Get the cell dimension.\n   * The dimension of a triangle strip is always 2.\n   * @returns {number} Cell dimension\n   */\n  publicAPI.getCellDimension = () => 2;\n\n  /**\n   * Get the number of edges.\n   * @returns {number} Number of edges\n   */\n  publicAPI.getNumberOfEdges = () => model.pointsIds.length;\n\n  /**\n   * Get the number of faces.\n   * @returns {number} Number of faces\n   */\n  publicAPI.getNumberOfFaces = () => 0;\n\n  /**\n   * Evaluate the position within the triangle strip.\n   * @param {*} x Intersection point\n   * @param {*} closestPoint Closest point on the triangle\n   * @param {*} pcoords Parametric coordinates\n   * @param {*} dist2 Squared distance to the closest point\n   * @param {*} weights Weights for interpolation\n   * @returns {number} Evaluation status\n   */\n  publicAPI.evaluatePosition = (x, closestPoint, pcoords, dist2, weights) => {\n    const pc = [0, 0, 0];\n    let minDist2 = Number.MAX_VALUE;\n    let returnStatus = 0;\n    const tempWeights = [];\n    const activeWeights = [];\n    const closest = [];\n    pcoords[2] = 0.0;\n    activeWeights[0] = 0.0;\n    activeWeights[1] = 0.0;\n    activeWeights[2] = 0.0;\n    const points = model.triangle.getPoints();\n    points.setNumberOfPoints(3);\n    const pointsIds = model.triangle.getPointsIds();\n    const numPoints = pointsIds.length;\n\n    // Initialize weights\n    for (let i = 0; i < numPoints; i++) {\n      weights[i] = 0.0;\n    }\n\n    // Iterate through triangles in the strip\n    for (let i = 0; i < numPoints - 2; i++) {\n      // Set triangle points\n      const pt0 = [];\n      points.getPoint(i, pt0);\n      const pt1 = [];\n      points.getPoint(i + 1, pt1);\n      const pt2 = [];\n      points.getPoint(i + 2, pt2);\n      points.setData(Float32Array.from([...pt0, ...pt1, ...pt2]), 3);\n\n      // Use dist2 from triangle's evaluatePosition return value\n      const status = model.triangle.evaluatePosition(x, closest, pc, tempWeights);\n      const currentDist2 = status.dist2;\n      if (status.evaluation >= 0 && (currentDist2 < minDist2 || currentDist2 === minDist2 && returnStatus === 0)) {\n        returnStatus = status;\n        if (closestPoint) {\n          closestPoint[0] = closest[0];\n          closestPoint[1] = closest[1];\n          closestPoint[2] = closest[2];\n        }\n        pcoords[0] = pc[0];\n        pcoords[1] = pc[1];\n        minDist2 = currentDist2;\n        activeWeights[0] = tempWeights[0];\n        activeWeights[1] = tempWeights[1];\n        activeWeights[2] = tempWeights[2];\n      }\n    }\n    dist2[0] = minDist2;\n    weights[0] = activeWeights[0];\n    weights[1] = activeWeights[1];\n    weights[2] = activeWeights[2];\n    return returnStatus;\n  };\n\n  /**\n   * Evaluate the location within the triangle strip.\n   * @param {*} subId Sub-Id of the triangle\n   * @param {*} pcoords Parametric coordinates\n   * @param {*} x Intersection point\n   * @param {*} weights Weights for interpolation\n   */\n  publicAPI.evaluateLocation = (subId, pcoords, x, weights) => {\n    const idx = [[0, 1, 2], [1, 0, 2]];\n    const order = subId % 2;\n    const numPoints = model.pointsIds.length;\n\n    // Initialize weights\n    for (let i = 0; i < numPoints; i++) {\n      weights[i] = 0.0;\n    }\n    const u3 = 1.0 - pcoords[0] - pcoords[1];\n    weights[subId] = u3;\n    weights[subId + 1] = pcoords[0];\n    weights[subId + 2] = pcoords[1];\n\n    // Get points\n    const pt1 = [];\n    model.points.getPoint(subId + idx[order][0], pt1);\n    const pt2 = [];\n    model.points.getPoint(subId + idx[order][1], pt2);\n    const pt3 = [];\n    model.points.getPoint(subId + idx[order][2], pt3);\n\n    // Interpolate position\n    for (let i = 0; i < 3; i++) {\n      x[i] = pt1[i] * weights[subId] + pt2[i] * weights[subId + 1] + pt3[i] * weights[subId + 2];\n    }\n  };\n\n  /**\n   * Get the cell boundary of the triangle strip.\n   * @param {Number} subId The sub-id of the cell.\n   * @param {Vector3} pcoords The parametric coordinates.\n   * @param {Vector2} pts The points of the cell.\n   */\n  publicAPI.cellBoundary = (subId, pcoords, pts) => {\n    const idx = [[0, 1, 2], [1, 0, 2]];\n    const order = subId % 2;\n    const pointsIds = model.triangle.getPointsIds();\n    pointsIds[0] = model.pointsIds[idx[order][0]];\n    pointsIds[1] = model.pointsIds[idx[order][1]];\n    pointsIds[2] = model.pointsIds[idx[order][2]];\n    return model.triangle.cellBoundary(0, pcoords, pts);\n  };\n\n  /**\n   * Get the edge of the triangle strip.\n   * @param {Number} edgeId Edge index (0 to n-1)\n   * @returns {vtkLine} The edge as a vtkLine instance\n   */\n  publicAPI.getEdge = edgeId => {\n    let id1;\n    let id2;\n    const numPoints = model.pointsIds.length;\n    if (edgeId === 0) {\n      id1 = 0;\n      id2 = 1;\n    } else if (edgeId === numPoints - 1) {\n      id1 = edgeId - 1;\n      id2 = edgeId;\n    } else {\n      id1 = edgeId - 1;\n      id2 = edgeId + 1;\n    }\n    model.line.getPointsIds()[0] = model.pointsIds[id1];\n    model.line.getPointsIds()[1] = model.pointsIds[id2];\n    model.line.getPoints().setPoint(0, model.points.getPoint(id1));\n    model.line.getPoints().setPoint(1, model.points.getPoint(id2));\n    return model.line;\n  };\n\n  /**\n   * Intersects a line with the triangle strip.\n   * @param {Vector3} p1 Start point of the line\n   * @param {Vector3} p2 End point of the line\n   * @param {number} tol Tolerance for intersection\n   * @param {Vector3} x Intersection point\n   * @param {Vector3} pcoords Parametric coordinates of the intersection\n   * @returns {Boolean} True if the line intersects the triangle strip\n   */\n  publicAPI.intersectWithLine = (p1, p2, tol, x, pcoords) => {\n    const numTris = model.pointsIds.length - 2;\n    const points = model.triangle.getPoints();\n    points.setNumberOfPoints(3);\n    for (let i = 0; i < numTris; i++) {\n      const pt0 = [];\n      model.points.getPoint(model.pointsIds[i], pt0);\n      const pt1 = [];\n      model.points.getPoint(model.pointsIds[i + 1], pt1);\n      const pt2 = [];\n      model.points.getPoint(model.pointsIds[i + 2], pt2);\n      points.setData(Float32Array.from([...pt0, ...pt1, ...pt2]), 3);\n      const ret = model.triangle.intersectWithLine(p1, p2, tol, x, pcoords);\n      if (ret.intersect) {\n        return ret;\n      }\n    }\n    return false;\n  };\n\n  // Triangulate\n  /**\n   * Triangulate the triangle strip.\n   * @returns {Boolean} True if the triangulation is successful.\n   */\n  publicAPI.triangulate = () => {\n    const numTris = model.points.getNumberOfPoints() - 2;\n    model.tris = new Array(3 * numTris);\n    const idx = [[0, 1, 2], [1, 0, 2]];\n    for (let subId = 0; subId < numTris; subId++) {\n      const order = subId % 2;\n      for (let i = 0; i < 3; i++) {\n        model.tris[subId * 3 + i] = subId + idx[order][i];\n      }\n    }\n    return true;\n  };\n\n  /**\n   * Get the point array of the triangle strip.\n   * @returns {Array} The point array.\n   */\n  publicAPI.getPointArray = () => model.tris;\n\n  // Derivatives\n  /**\n   * Get the derivatives of the triangle strip.\n   * @param {Number} subId - The sub-id of the triangle.\n   * @param {Vector3} pcoords - The parametric coordinates.\n   * @param {Number[]} values - The values at the points.\n   * @param {Number} dim - The dimension.\n   * @param {Number[]} derivs - The derivatives.\n   */\n  publicAPI.derivatives = (subId, pcoords, values, dim, derivs) => {\n    const pt0 = [];\n    model.points.getPoint(subId, pt0);\n    const pt1 = [];\n    model.points.getPoint(subId + 1, pt1);\n    const pt2 = [];\n    model.points.getPoint(subId + 2, pt2);\n    const points = model.triangle.getPoints();\n    points.setPoint(0, ...pt0);\n    points.setPoint(1, ...pt1);\n    points.setPoint(2, ...pt2);\n    model.triangle.derivatives(0, pcoords, values, dim, derivs);\n  };\n\n  /**\n   * Get the parametric center of the triangle strip.\n   * @param {Vector3} pcoords - The parametric coordinates.\n   * @returns {Number} The parametric center.\n   */\n  publicAPI.getParametricCenter = pcoords => {\n    pcoords[0] = 0.333333;\n    pcoords[1] = 0.333333;\n    pcoords[2] = 0.0;\n    return Math.floor((model.pointsIds.length - 2) / 2);\n  };\n\n  /**\n   * Contour the triangle strip.\n   * @param {*} value\n   * @param {*} cellScalars\n   * @param {*} locator\n   * @param {*} verts\n   * @param {*} lines\n   * @param {*} polys\n   * @param {*} inPd\n   * @param {*} outPd\n   * @param {*} inCd\n   * @param {*} cellId\n   * @param {*} outCd\n   * @returns\n   */\n  publicAPI.contour = (value, cellScalars, locator, verts, lines, polys, inPd, outPd, inCd, cellId, outCd) => notImplemented('contour')();\n\n  /**\n   * Clip the triangle strip.\n   * @param {*} value Clipping value\n   * @param {*} cellScalars Cell scalars\n   * @param {*} locator Locator\n   * @param {*} tris Triangle indices\n   * @param {*} inPd Input point data\n   * @param {*} outPd Output point data\n   * @param {*} inCd\n   * @param {*} cellId\n   * @param {*} outCd\n   * @param {*} insideOut\n   * @returns\n   */\n  publicAPI.clip = (value, cellScalars, locator, tris, inPd, outPd, inCd, cellId, outCd, insideOut) => notImplemented('clip')();\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  line: null,\n  triangle: null,\n  tris: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkCell.extend(publicAPI, model, initialValues);\n  if (!model.line) {\n    model.line = vtkLine.newInstance();\n  }\n  if (!model.triangle) {\n    model.triangle = vtkTriangle.newInstance();\n  }\n\n  // Build VTK API\n  vtkTriangleStrip(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkTriangleStrip');\n\n// ----------------------------------------------------------------------------\n\nvar vtkTriangleStrip$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { STATIC, vtkTriangleStrip$1 as default, extend, newInstance };\n", "const POLYDATA_FIELDS = ['verts', 'lines', 'polys', 'strips'];\nvar Constants = {\n  POLYDATA_FIELDS\n};\n\nexport { POLYDATA_FIELDS, Constants as default };\n", "import { m as macro } from '../../macros2.js';\nimport vtk from '../../vtk.js';\nimport vtkCellArray from '../Core/CellArray.js';\nimport vtkCellLinks from './CellLinks.js';\nimport vtkCellTypes from './CellTypes.js';\nimport vtkLine from './Line.js';\nimport vtkPointSet from './PointSet.js';\nimport vtkPolyLine from './PolyLine.js';\nimport vtkPolygon from './Polygon.js';\nimport vtkQuad from './Quad.js';\nimport vtkTriangle from './Triangle.js';\nimport vtkTriangleStrip from './TriangleStrip.js';\nimport { CellType } from './CellTypes/Constants.js';\nimport { POLYDATA_FIELDS } from './PolyData/Constants.js';\n\nconst {\n  vtkWarningMacro\n} = macro;\nconst CELL_FACTORY = {\n  [CellType.VTK_LINE]: vtkLine,\n  [CellType.VTK_QUAD]: vtkQuad,\n  [CellType.VTK_POLY_LINE]: vtkLine,\n  [CellType.VTK_TRIANGLE]: vtkTriangle,\n  [CellType.VTK_TRIANGLE_STRIP]: vtkTriangleStrip,\n  [CellType.VTK_POLY_LINE]: vtkPolyLine,\n  [CellType.VTK_POLYGON]: vtkPolygon\n};\n\n// ----------------------------------------------------------------------------\n// vtkPolyData methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPolyData(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkPolyData');\n  function camelize(str) {\n    return str.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, letter => letter.toUpperCase()).replace(/\\s+/g, '');\n  }\n  function clearCells() {\n    model.cells = undefined;\n    model.links = undefined;\n  }\n\n  // build empty cell arrays and set methods\n  POLYDATA_FIELDS.forEach(type => {\n    publicAPI[`getNumberOf${camelize(type)}`] = () => model[type].getNumberOfCells();\n    if (!model[type]) {\n      model[type] = vtkCellArray.newInstance();\n    } else {\n      model[type] = vtk(model[type]);\n    }\n    model[`_on${camelize(type)}Changed`] = clearCells;\n  });\n  publicAPI.getNumberOfCells = () => POLYDATA_FIELDS.reduce((num, cellType) => num + model[cellType].getNumberOfCells(), 0);\n  const superShallowCopy = publicAPI.shallowCopy;\n  publicAPI.shallowCopy = function (other) {\n    let debug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    superShallowCopy(other, debug);\n    POLYDATA_FIELDS.forEach(type => {\n      model[type] = vtkCellArray.newInstance();\n      model[type].shallowCopy(other.getReferenceByName(type));\n    });\n  };\n  const superGetMTime = publicAPI.getMTime;\n  publicAPI.getMTime = () => POLYDATA_FIELDS.reduce((mTime, type) => Math.max(mTime, model[type]?.getMTime() ?? mTime), superGetMTime());\n  const superInitialize = publicAPI.initialize;\n  publicAPI.initialize = () => {\n    POLYDATA_FIELDS.forEach(type => model[type]?.initialize());\n    clearCells();\n    return superInitialize();\n  };\n  publicAPI.buildCells = () => {\n    // here are the number of cells we have\n    const nVerts = publicAPI.getNumberOfVerts();\n    const nLines = publicAPI.getNumberOfLines();\n    const nPolys = publicAPI.getNumberOfPolys();\n    const nStrips = publicAPI.getNumberOfStrips();\n\n    // pre-allocate the space we need\n    const nCells = nVerts + nLines + nPolys + nStrips;\n    const types = new Uint8Array(nCells);\n    let pTypes = types;\n    const locs = new Uint32Array(nCells);\n    let pLocs = locs;\n\n    // record locations and type of each cell.\n    // verts\n    if (nVerts) {\n      let nextCellPts = 0;\n      model.verts.getCellSizes().forEach((numCellPts, index) => {\n        pLocs[index] = nextCellPts;\n        pTypes[index] = numCellPts > 1 ? CellType.VTK_POLY_VERTEX : CellType.VTK_VERTEX;\n        nextCellPts += numCellPts + 1;\n      });\n      pLocs = pLocs.subarray(nVerts);\n      pTypes = pTypes.subarray(nVerts);\n    }\n\n    // lines\n    if (nLines) {\n      let nextCellPts = 0;\n      model.lines.getCellSizes().forEach((numCellPts, index) => {\n        pLocs[index] = nextCellPts;\n        pTypes[index] = numCellPts > 2 ? CellType.VTK_POLY_LINE : CellType.VTK_LINE;\n        if (numCellPts === 1) {\n          vtkWarningMacro('Building VTK_LINE ', index, ' with only one point, but VTK_LINE needs at least two points. Check the input.');\n        }\n        nextCellPts += numCellPts + 1;\n      });\n      pLocs = pLocs.subarray(nLines);\n      pTypes = pTypes.subarray(nLines);\n    }\n\n    // polys\n    if (nPolys) {\n      let nextCellPts = 0;\n      model.polys.getCellSizes().forEach((numCellPts, index) => {\n        pLocs[index] = nextCellPts;\n        switch (numCellPts) {\n          case 3:\n            pTypes[index] = CellType.VTK_TRIANGLE;\n            break;\n          case 4:\n            pTypes[index] = CellType.VTK_QUAD;\n            break;\n          default:\n            pTypes[index] = CellType.VTK_POLYGON;\n            break;\n        }\n        if (numCellPts < 3) {\n          vtkWarningMacro('Building VTK_TRIANGLE ', index, ' with less than three points, but VTK_TRIANGLE needs at least three points. Check the input.');\n        }\n        nextCellPts += numCellPts + 1;\n      });\n      pLocs += pLocs.subarray(nPolys);\n      pTypes += pTypes.subarray(nPolys);\n    }\n\n    // strips\n    if (nStrips) {\n      let nextCellPts = 0;\n      pTypes.fill(CellType.VTK_TRIANGLE_STRIP, 0, nStrips);\n      model.strips.getCellSizes().forEach((numCellPts, index) => {\n        pLocs[index] = nextCellPts;\n        nextCellPts += numCellPts + 1;\n      });\n    }\n\n    // set up the cell types data structure\n    model.cells = vtkCellTypes.newInstance();\n    model.cells.setCellTypes(nCells, types, locs);\n  };\n\n  /**\n   * Create upward links from points to cells that use each point. Enables\n   * topologically complex queries.\n   */\n  publicAPI.buildLinks = function () {\n    let initialSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (model.cells == null) {\n      publicAPI.buildCells();\n    }\n    model.links = vtkCellLinks.newInstance();\n    if (initialSize > 0) {\n      model.links.allocate(initialSize);\n    } else {\n      model.links.allocate(publicAPI.getPoints().getNumberOfPoints());\n    }\n    model.links.buildLinks(publicAPI);\n  };\n  publicAPI.getCellType = cellId => model.cells.getCellType(cellId);\n  publicAPI.getCellPoints = cellId => {\n    const cellType = publicAPI.getCellType(cellId);\n    let cells = null;\n    switch (cellType) {\n      case CellType.VTK_VERTEX:\n      case CellType.VTK_POLY_VERTEX:\n        cells = model.verts;\n        break;\n      case CellType.VTK_LINE:\n      case CellType.VTK_POLY_LINE:\n        cells = model.lines;\n        break;\n      case CellType.VTK_TRIANGLE:\n      case CellType.VTK_QUAD:\n      case CellType.VTK_POLYGON:\n        cells = model.polys;\n        break;\n      case CellType.VTK_TRIANGLE_STRIP:\n        cells = model.strips;\n        break;\n      default:\n        cells = null;\n        return {\n          type: 0,\n          cellPointIds: null\n        };\n    }\n    const loc = model.cells.getCellLocation(cellId);\n    const cellPointIds = cells.getCell(loc);\n    return {\n      cellType,\n      cellPointIds\n    };\n  };\n  publicAPI.getPointCells = ptId => model.links.getCells(ptId);\n  publicAPI.getCellEdgeNeighbors = (cellId, point1, point2) => {\n    const link1 = model.links.getLink(point1);\n    const link2 = model.links.getLink(point2);\n    return link1.cells.filter(cell => cell !== cellId && link2.cells.indexOf(cell) !== -1);\n  };\n\n  /**\n   * If you know the type of cell, you may provide it to improve performances.\n   */\n  publicAPI.getCell = function (cellId) {\n    let cellHint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    const cellInfo = publicAPI.getCellPoints(cellId);\n    const cell = cellHint || CELL_FACTORY[cellInfo.cellType].newInstance();\n    cell.initialize(publicAPI.getPoints(), cellInfo.cellPointIds);\n    return cell;\n  };\n  publicAPI.getMaxCellSize = () => POLYDATA_FIELDS.reduce((max, type) => Math.max(max, model[type]?.getMaxCellSize?.() ?? 0), 0);\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // verts: null,\n  // lines: null,\n  // polys: null,\n  // strips: null,\n  // cells: null,\n  // links: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkPointSet.extend(publicAPI, model, initialValues);\n  macro.get(publicAPI, model, ['cells', 'links']);\n  macro.setGet(publicAPI, model, ['verts', 'lines', 'polys', 'strips']);\n\n  // Object specific methods\n  vtkPolyData(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPolyData');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPolyData$1 = {\n  newInstance,\n  extend\n};\n\nexport { CELL_FACTORY, vtkPolyData$1 as default, extend, newInstance };\n", "import { vec3, mat4 } from 'gl-matrix';\nimport * as d3 from 'd3-scale';\nimport { S as normalize2D, T as nearestPowerOfTwo } from '../../Common/Core/Math/index.js';\nimport { m as macro } from '../../macros2.js';\nimport vtkActor from './Actor.js';\nimport vtkBoundingBox from '../../Common/DataModel/BoundingBox.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport vtkMapper from './Mapper.js';\nimport vtkPolyData from '../../Common/DataModel/PolyData.js';\nimport vtkTexture from './Texture.js';\n\n// ----------------------------------------------------------------------------\n// vtkCubeAxesActor\n// ----------------------------------------------------------------------------\n// faces are -x x -y y -z z\n// point 0 is 0,0,0 and then +x fastest changing, +y then +z\nconst faceNormals = [[-1, 0, 0], [1, 0, 0], [0, -1, 0], [0, 1, 0], [0, 0, -1], [0, 0, 1]];\nconst faceEdges = [[8, 7, 11, 3], [9, 1, 10, 5], [4, 9, 0, 8], [2, 11, 6, 10], [0, 3, 2, 1], [4, 5, 6, 7]];\nconst edgePoints = [[0, 1], [1, 3], [2, 3], [0, 2], [4, 5], [5, 7], [6, 7], [4, 6], [0, 4], [1, 5], [3, 7], [2, 6]];\nconst edgeAxes = [0, 1, 0, 1, 0, 1, 0, 1, 2, 2, 2, 2];\nconst faceAxes = [[1, 2], [1, 2], [0, 2], [0, 2], [0, 1], [0, 1]];\n\n//\n// Developer note: This class is broken into the main class and a helper\n// class. The main class holds view independent properties (those properties\n// that do not change as the view's resolution/aspect ratio change). The\n// helper class is instantiated one per view and holds properties that can\n// depend on view specific values such as resolution. The helper class code\n// could have been left to the View specific implementation (such as\n// vtkWebGPUCubeAxesActor) but is instead placed here to it can be shared by\n// multiple rendering backends.\n//\n\n// some shared temp variables to reduce heap allocs\nconst ptv3 = new Float64Array(3);\nconst pt2v3 = new Float64Array(3);\nconst tmpv3 = new Float64Array(3);\nconst tmp2v3 = new Float64Array(3);\nconst xDir = new Float64Array(3);\nconst yDir = new Float64Array(3);\nconst invmat = new Float64Array(16);\nfunction applyTextStyle(ctx, style) {\n  ctx.strokeStyle = style.strokeColor;\n  ctx.lineWidth = style.strokeSize;\n  ctx.fillStyle = style.fontColor;\n  ctx.font = `${style.fontStyle} ${style.fontSize}px ${style.fontFamily}`;\n}\nfunction defaultGenerateTicks(dataBounds) {\n  const ticks = [];\n  const tickStrings = [];\n  for (let i = 0; i < 3; i++) {\n    const scale = d3.scaleLinear().domain([dataBounds[i * 2], dataBounds[i * 2 + 1]]);\n    ticks[i] = scale.ticks(5);\n    const format = scale.tickFormat(5);\n    tickStrings[i] = ticks[i].map(format);\n  }\n  return {\n    ticks,\n    tickStrings\n  };\n}\n\n// many properties of this actor depend on the API specific view The main\n// dependency being the resolution as that drives what font sizes to use.\n// Bacause of this we need to do some of the calculations in a API specific\n// subclass. But... we don't want a lot of duplicated code between WebGL and\n// WebGPU for example so we have this helper class, that is designed to be\n// fairly API independent so that API specific views can call this to do\n// most of the work.\nfunction vtkCubeAxesActorHelper(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkCubeAxesActorHelper');\n  publicAPI.setRenderable = renderable => {\n    if (model.renderable === renderable) {\n      return;\n    }\n    model.renderable = renderable;\n    model.tmActor.addTexture(model.renderable.getTmTexture());\n    model.tmActor.setProperty(renderable.getProperty());\n    model.tmActor.setParentProp(renderable);\n    publicAPI.modified();\n  };\n\n  // called by updateTexturePolyData\n  publicAPI.createPolyDataForOneLabel = (text, pos, cmat, imat, dir, offset, results) => {\n    const value = model.renderable.get_tmAtlas().get(text);\n    if (!value) {\n      return;\n    }\n    const coords = model.renderable.getTextPolyData().getPoints().getData();\n\n    // compute pixel to distance factors\n    const size = model.lastSize;\n    ptv3[0] = coords[pos * 3];\n    ptv3[1] = coords[pos * 3 + 1];\n    ptv3[2] = coords[pos * 3 + 2];\n    vec3.transformMat4(tmpv3, ptv3, cmat);\n    // moving 0.1 in NDC\n    tmpv3[0] += 0.1;\n    vec3.transformMat4(pt2v3, tmpv3, imat);\n    // results in WC move of\n    vec3.subtract(xDir, pt2v3, ptv3);\n    tmpv3[0] -= 0.1;\n    tmpv3[1] += 0.1;\n    vec3.transformMat4(pt2v3, tmpv3, imat);\n    // results in WC move of\n    vec3.subtract(yDir, pt2v3, ptv3);\n    for (let i = 0; i < 3; i++) {\n      xDir[i] /= 0.5 * 0.1 * size[0];\n      yDir[i] /= 0.5 * 0.1 * size[1];\n    }\n\n    // have to find the four corners of the texture polygon for this label\n    // convert anchor point to View Coords\n    let ptIdx = results.ptIdx;\n    let cellIdx = results.cellIdx;\n    ptv3[0] = coords[pos * 3];\n    ptv3[1] = coords[pos * 3 + 1];\n    ptv3[2] = coords[pos * 3 + 2];\n    // horizontal left, right, or middle alignment based on dir[0]\n    if (dir[0] < -0.5) {\n      vec3.scale(tmpv3, xDir, dir[0] * offset - value.width);\n    } else if (dir[0] > 0.5) {\n      vec3.scale(tmpv3, xDir, dir[0] * offset);\n    } else {\n      vec3.scale(tmpv3, xDir, dir[0] * offset - value.width / 2.0);\n    }\n    vec3.add(ptv3, ptv3, tmpv3);\n    vec3.scale(tmpv3, yDir, dir[1] * offset - value.height / 2.0);\n    vec3.add(ptv3, ptv3, tmpv3);\n    results.points[ptIdx * 3] = ptv3[0];\n    results.points[ptIdx * 3 + 1] = ptv3[1];\n    results.points[ptIdx * 3 + 2] = ptv3[2];\n    results.tcoords[ptIdx * 2] = value.tcoords[0];\n    results.tcoords[ptIdx * 2 + 1] = value.tcoords[1];\n    ptIdx++;\n    vec3.scale(tmpv3, xDir, value.width);\n    vec3.add(ptv3, ptv3, tmpv3);\n    results.points[ptIdx * 3] = ptv3[0];\n    results.points[ptIdx * 3 + 1] = ptv3[1];\n    results.points[ptIdx * 3 + 2] = ptv3[2];\n    results.tcoords[ptIdx * 2] = value.tcoords[2];\n    results.tcoords[ptIdx * 2 + 1] = value.tcoords[3];\n    ptIdx++;\n    vec3.scale(tmpv3, yDir, value.height);\n    vec3.add(ptv3, ptv3, tmpv3);\n    results.points[ptIdx * 3] = ptv3[0];\n    results.points[ptIdx * 3 + 1] = ptv3[1];\n    results.points[ptIdx * 3 + 2] = ptv3[2];\n    results.tcoords[ptIdx * 2] = value.tcoords[4];\n    results.tcoords[ptIdx * 2 + 1] = value.tcoords[5];\n    ptIdx++;\n    vec3.scale(tmpv3, xDir, value.width);\n    vec3.subtract(ptv3, ptv3, tmpv3);\n    results.points[ptIdx * 3] = ptv3[0];\n    results.points[ptIdx * 3 + 1] = ptv3[1];\n    results.points[ptIdx * 3 + 2] = ptv3[2];\n    results.tcoords[ptIdx * 2] = value.tcoords[6];\n    results.tcoords[ptIdx * 2 + 1] = value.tcoords[7];\n    ptIdx++;\n\n    // add the two triangles to represent the quad\n    results.polys[cellIdx * 4] = 3;\n    results.polys[cellIdx * 4 + 1] = ptIdx - 4;\n    results.polys[cellIdx * 4 + 2] = ptIdx - 3;\n    results.polys[cellIdx * 4 + 3] = ptIdx - 2;\n    cellIdx++;\n    results.polys[cellIdx * 4] = 3;\n    results.polys[cellIdx * 4 + 1] = ptIdx - 4;\n    results.polys[cellIdx * 4 + 2] = ptIdx - 2;\n    results.polys[cellIdx * 4 + 3] = ptIdx - 1;\n    results.ptIdx += 4;\n    results.cellIdx += 2;\n  };\n\n  // update the polydata associated with drawing the text labels\n  // specifically the quads used for each label and their associated tcoords\n  // etc. This changes every time the camera viewpoint changes\n  publicAPI.updateTexturePolyData = () => {\n    const cmat = model.camera.getCompositeProjectionMatrix(model.lastAspectRatio, -1, 1);\n    mat4.transpose(cmat, cmat);\n\n    // update the polydata\n    const numLabels = model.renderable.getTextValues().length;\n    const numPts = numLabels * 4;\n    const numTris = numLabels * 2;\n    const points = new Float64Array(numPts * 3);\n    const polys = new Uint16Array(numTris * 4);\n    const tcoords = new Float32Array(numPts * 2);\n    mat4.invert(invmat, cmat);\n    const results = {\n      ptIdx: 0,\n      cellIdx: 0,\n      polys,\n      points,\n      tcoords\n    };\n    let ptIdx = 0;\n    let textIdx = 0;\n    let axisIdx = 0;\n    const coords = model.renderable.getTextPolyData().getPoints().getData();\n    const textValues = model.renderable.getTextValues();\n    while (ptIdx < coords.length / 3) {\n      // compute the direction to move out\n      ptv3[0] = coords[ptIdx * 3];\n      ptv3[1] = coords[ptIdx * 3 + 1];\n      ptv3[2] = coords[ptIdx * 3 + 2];\n      vec3.transformMat4(tmpv3, ptv3, cmat);\n      ptv3[0] = coords[ptIdx * 3 + 3];\n      ptv3[1] = coords[ptIdx * 3 + 4];\n      ptv3[2] = coords[ptIdx * 3 + 5];\n      vec3.transformMat4(tmp2v3, ptv3, cmat);\n      vec3.subtract(tmpv3, tmpv3, tmp2v3);\n      const dir = [tmpv3[0], tmpv3[1]];\n      normalize2D(dir);\n\n      // write the axis label\n      publicAPI.createPolyDataForOneLabel(textValues[textIdx], ptIdx, cmat, invmat, dir, model.renderable.getAxisTitlePixelOffset(), results);\n      ptIdx += 2;\n      textIdx++;\n\n      // write the tick labels\n      for (let t = 0; t < model.renderable.getTickCounts()[axisIdx]; t++) {\n        publicAPI.createPolyDataForOneLabel(textValues[textIdx], ptIdx, cmat, invmat, dir, model.renderable.getTickLabelPixelOffset(), results);\n        ptIdx++;\n        textIdx++;\n      }\n      axisIdx++;\n    }\n    const tcoordDA = vtkDataArray.newInstance({\n      numberOfComponents: 2,\n      values: tcoords,\n      name: 'TextureCoordinates'\n    });\n    model.tmPolyData.getPointData().setTCoords(tcoordDA);\n    model.tmPolyData.getPoints().setData(points, 3);\n    model.tmPolyData.getPoints().modified();\n    model.tmPolyData.getPolys().setData(polys, 1);\n    model.tmPolyData.getPolys().modified();\n    model.tmPolyData.modified();\n  };\n  publicAPI.updateAPISpecificData = (size, camera, renderWindow) => {\n    // has the size changed?\n    if (model.lastSize[0] !== size[0] || model.lastSize[1] !== size[1]) {\n      model.lastSize[0] = size[0];\n      model.lastSize[1] = size[1];\n      model.lastAspectRatio = size[0] / size[1];\n      model.forceUpdate = true;\n    }\n    model.camera = camera;\n\n    // compute bounds for label quads whenever the camera changes\n    publicAPI.updateTexturePolyData();\n  };\n}\nconst newCubeAxesActorHelper = macro.newInstance(function (publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    renderable: null\n  };\n  Object.assign(model, {}, initialValues);\n\n  // Inheritance\n  macro.obj(publicAPI, model);\n  model.tmPolyData = vtkPolyData.newInstance();\n  model.tmMapper = vtkMapper.newInstance();\n  model.tmMapper.setInputData(model.tmPolyData);\n  model.tmActor = vtkActor.newInstance({\n    parentProp: publicAPI\n  });\n  model.tmActor.setMapper(model.tmMapper);\n  macro.setGet(publicAPI, model, ['renderable']);\n  macro.get(publicAPI, model, ['lastSize', 'lastAspectRatio', 'axisTextStyle', 'tickTextStyle', 'tmActor', 'ticks']);\n  model.forceUpdate = false;\n  model.lastRedrawTime = {};\n  macro.obj(model.lastRedrawTime, {\n    mtime: 0\n  });\n  model.lastRebuildTime = {};\n  macro.obj(model.lastRebuildTime, {\n    mtime: 0\n  });\n  model.lastSize = [-1, -1];\n\n  // internal variables\n  model.lastTickBounds = [];\n  vtkCubeAxesActorHelper(publicAPI, model);\n}, 'vtkCubeAxesActorHelper');\nfunction vtkCubeAxesActor(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkCubeAxesActor');\n  publicAPI.setCamera = cam => {\n    if (model.camera === cam) {\n      return;\n    }\n    if (model.cameraModifiedSub) {\n      model.cameraModifiedSub.unsubscribe();\n      model.cameraModifiedSub = null;\n    }\n    model.camera = cam;\n    if (cam) {\n      model.cameraModifiedSub = cam.onModified(publicAPI.update);\n    }\n    publicAPI.update();\n    publicAPI.modified();\n  };\n\n  // estimate from a camera model what faces to draw\n  // return true if the list of faces to draw has changed\n  publicAPI.computeFacesToDraw = () => {\n    const cmat = model.camera.getViewMatrix();\n    mat4.transpose(cmat, cmat);\n    let changed = false;\n    const length = vtkBoundingBox.getDiagonalLength(model.dataBounds);\n    const faceDot = Math.sin(model.faceVisibilityAngle * Math.PI / 180.0);\n    for (let f = 0; f < 6; f++) {\n      let drawit = false;\n      const faceAxis = Math.floor(f / 2);\n      const otherAxis1 = (faceAxis + 1) % 3;\n      const otherAxis2 = (faceAxis + 2) % 3;\n      // only for non degenerate axes\n      if (model.dataBounds[otherAxis1 * 2] !== model.dataBounds[otherAxis1 * 2 + 1] && model.dataBounds[otherAxis2 * 2] !== model.dataBounds[otherAxis2 * 2 + 1]) {\n        // for each face transform the center and off center to get a direction vector\n        ptv3[faceAxis] = model.dataBounds[f] - 0.1 * length * faceNormals[f][faceAxis];\n        ptv3[otherAxis1] = 0.5 * (model.dataBounds[otherAxis1 * 2] + model.dataBounds[otherAxis1 * 2 + 1]);\n        ptv3[otherAxis2] = 0.5 * (model.dataBounds[otherAxis2 * 2] + model.dataBounds[otherAxis2 * 2 + 1]);\n        vec3.transformMat4(tmpv3, ptv3, cmat);\n        ptv3[faceAxis] = model.dataBounds[f];\n        vec3.transformMat4(tmp2v3, ptv3, cmat);\n        vec3.subtract(tmpv3, tmp2v3, tmpv3);\n        vec3.normalize(tmpv3, tmpv3);\n        // tmpv3 now holds the face normal vector\n        drawit = tmpv3[2] > faceDot;\n        // for perspctive we need the view direction to the plane\n        if (!model.camera.getParallelProjection()) {\n          vec3.normalize(tmp2v3, tmp2v3);\n          drawit = vec3.dot(tmp2v3, tmpv3) > faceDot;\n        }\n      }\n      if (drawit !== model.lastFacesToDraw[f]) {\n        model.lastFacesToDraw[f] = drawit;\n        changed = true;\n      }\n    }\n    return changed;\n  };\n\n  // update the polydata that represents the boundingd edges and gridlines\n  publicAPI.updatePolyData = (facesToDraw, edgesToDraw, ticks) => {\n    // compute the number of points and lines required\n    let numPts = 0;\n    let numLines = 0;\n    numPts += 8; // always start with the 8 cube points\n\n    // count edgesToDraw\n    let numEdgesToDraw = 0;\n    for (let e = 0; e < 12; e++) {\n      if (edgesToDraw[e] > 0) {\n        numEdgesToDraw++;\n      }\n    }\n    numLines += numEdgesToDraw;\n\n    // add values for gridlines\n    if (model.gridLines) {\n      for (let f = 0; f < 6; f++) {\n        if (facesToDraw[f]) {\n          numPts += ticks[faceAxes[f][0]].length * 2 + ticks[faceAxes[f][1]].length * 2;\n          numLines += ticks[faceAxes[f][0]].length + ticks[faceAxes[f][1]].length;\n        }\n      }\n    }\n\n    // now allocate the memory\n    const points = new Float64Array(numPts * 3);\n    const lines = new Uint32Array(numLines * 3);\n    let ptIdx = 0;\n    let lineIdx = 0;\n\n    // add the 8 corner points\n    for (let z = 0; z < 2; z++) {\n      for (let y = 0; y < 2; y++) {\n        for (let x = 0; x < 2; x++) {\n          points[ptIdx * 3] = model.dataBounds[x];\n          points[ptIdx * 3 + 1] = model.dataBounds[2 + y];\n          points[ptIdx * 3 + 2] = model.dataBounds[4 + z];\n          ptIdx++;\n        }\n      }\n    }\n\n    // draw the edges\n    for (let e = 0; e < 12; e++) {\n      if (edgesToDraw[e] > 0) {\n        lines[lineIdx * 3] = 2;\n        lines[lineIdx * 3 + 1] = edgePoints[e][0];\n        lines[lineIdx * 3 + 2] = edgePoints[e][1];\n        lineIdx++;\n      }\n    }\n\n    // now handle gridlines\n    // grid lines are tick[axis1] + ticks[axes2] lines each having two points\n    // for simplicity we don;t worry about duplicating points, this is tiny\n\n    if (model.gridLines) {\n      // for each visible face\n      // add the points\n      for (let f = 0; f < 6; f++) {\n        if (facesToDraw[f]) {\n          const faceIdx = Math.floor(f / 2);\n          let aticks = ticks[faceAxes[f][0]];\n          for (let t = 0; t < aticks.length; t++) {\n            points[ptIdx * 3 + faceIdx] = model.dataBounds[f];\n            points[ptIdx * 3 + faceAxes[f][0]] = aticks[t];\n            points[ptIdx * 3 + faceAxes[f][1]] = model.dataBounds[faceAxes[f][1] * 2];\n            ptIdx++;\n            points[ptIdx * 3 + faceIdx] = model.dataBounds[f];\n            points[ptIdx * 3 + faceAxes[f][0]] = aticks[t];\n            points[ptIdx * 3 + faceAxes[f][1]] = model.dataBounds[faceAxes[f][1] * 2 + 1];\n            ptIdx++;\n            lines[lineIdx * 3] = 2;\n            lines[lineIdx * 3 + 1] = ptIdx - 2;\n            lines[lineIdx * 3 + 2] = ptIdx - 1;\n            lineIdx++;\n          }\n          aticks = ticks[faceAxes[f][1]];\n          for (let t = 0; t < aticks.length; t++) {\n            points[ptIdx * 3 + faceIdx] = model.dataBounds[f];\n            points[ptIdx * 3 + faceAxes[f][1]] = aticks[t];\n            points[ptIdx * 3 + faceAxes[f][0]] = model.dataBounds[faceAxes[f][0] * 2];\n            ptIdx++;\n            points[ptIdx * 3 + faceIdx] = model.dataBounds[f];\n            points[ptIdx * 3 + faceAxes[f][1]] = aticks[t];\n            points[ptIdx * 3 + faceAxes[f][0]] = model.dataBounds[faceAxes[f][0] * 2 + 1];\n            ptIdx++;\n            lines[lineIdx * 3] = 2;\n            lines[lineIdx * 3 + 1] = ptIdx - 2;\n            lines[lineIdx * 3 + 2] = ptIdx - 1;\n            lineIdx++;\n          }\n        }\n      }\n    }\n    model.polyData.getPoints().setData(points, 3);\n    model.polyData.getPoints().modified();\n    model.polyData.getLines().setData(lines, 1);\n    model.polyData.getLines().modified();\n    model.polyData.modified();\n  };\n\n  // update the data that represents where to put the labels\n  // in world coordinates. This only changes when faces to draw changes\n  // of dataBounds changes\n  publicAPI.updateTextData = (facesToDraw, edgesToDraw, ticks, tickStrings) => {\n    // count outside edgesToDraw\n    let textPointCount = 0;\n    for (let e = 0; e < 12; e++) {\n      if (edgesToDraw[e] === 1) {\n        textPointCount += 2;\n        textPointCount += ticks[edgeAxes[e]].length;\n      }\n    }\n    const points = model.polyData.getPoints().getData();\n    const textPoints = new Float64Array(textPointCount * 3);\n    let ptIdx = 0;\n    let textIdx = 0;\n    let axisCount = 0;\n    for (let f = 0; f < 6; f++) {\n      if (facesToDraw[f]) {\n        for (let e = 0; e < 4; e++) {\n          const edgeIdx = faceEdges[f][e];\n          if (edgesToDraw[edgeIdx] === 1) {\n            const edgeAxis = edgeAxes[edgeIdx];\n            // add a middle point on the edge\n            const ptIdx1 = edgePoints[edgeIdx][0] * 3;\n            const ptIdx2 = edgePoints[edgeIdx][1] * 3;\n            textPoints[ptIdx * 3] = 0.5 * (points[ptIdx1] + points[ptIdx2]);\n            textPoints[ptIdx * 3 + 1] = 0.5 * (points[ptIdx1 + 1] + points[ptIdx2 + 1]);\n            textPoints[ptIdx * 3 + 2] = 0.5 * (points[ptIdx1 + 2] + points[ptIdx2 + 2]);\n            ptIdx++;\n            // add a middle face point, we use this to\n            // move the labels away from the edge in the right direction\n            const faceIdx = Math.floor(f / 2);\n            textPoints[ptIdx * 3 + faceIdx] = model.dataBounds[f];\n            textPoints[ptIdx * 3 + faceAxes[f][0]] = 0.5 * (model.dataBounds[faceAxes[f][0] * 2] + model.dataBounds[faceAxes[f][0] * 2 + 1]);\n            textPoints[ptIdx * 3 + faceAxes[f][1]] = 0.5 * (model.dataBounds[faceAxes[f][1] * 2] + model.dataBounds[faceAxes[f][1] * 2 + 1]);\n            ptIdx++;\n            // set the text\n            model.textValues[textIdx] = model.axisLabels[edgeAxis];\n            textIdx++;\n\n            // now add the tick marks along the edgeAxis\n            const otherAxis1 = (edgeAxis + 1) % 3;\n            const otherAxis2 = (edgeAxis + 2) % 3;\n            const aticks = ticks[edgeAxis];\n            const atickStrings = tickStrings[edgeAxis];\n            model.tickCounts[axisCount] = aticks.length;\n            for (let t = 0; t < aticks.length; t++) {\n              textPoints[ptIdx * 3 + edgeAxis] = aticks[t];\n              textPoints[ptIdx * 3 + otherAxis1] = points[ptIdx1 + otherAxis1];\n              textPoints[ptIdx * 3 + otherAxis2] = points[ptIdx1 + otherAxis2];\n              ptIdx++;\n              // set the text\n              model.textValues[textIdx] = atickStrings[t];\n              textIdx++;\n            }\n            axisCount++;\n          }\n        }\n      }\n    }\n    model.textPolyData.getPoints().setData(textPoints, 3);\n    model.textPolyData.modified();\n  };\n\n  // main method to rebuild the cube axes, gets called on camera modify\n  // and changes to key members\n  publicAPI.update = () => {\n    // Can't do anything if we don't have a camera...\n    if (!model.camera) {\n      return;\n    }\n\n    // compute what faces to draw\n    const facesChanged = publicAPI.computeFacesToDraw();\n    const facesToDraw = model.lastFacesToDraw;\n\n    // have the bounds changed?\n    let boundsChanged = false;\n    for (let i = 0; i < 6; i++) {\n      if (model.dataBounds[i] !== model.lastTickBounds[i]) {\n        boundsChanged = true;\n        model.lastTickBounds[i] = model.dataBounds[i];\n      }\n    }\n\n    // did something significant change? If so rebuild a lot of things\n    if (facesChanged || boundsChanged || model.forceUpdate) {\n      // compute the edges to draw\n      // for each drawn face, mark edges, all single mark edges we draw\n      const edgesToDraw = new Array(12).fill(0);\n      for (let f = 0; f < 6; f++) {\n        if (facesToDraw[f]) {\n          for (let e = 0; e < 4; e++) {\n            edgesToDraw[faceEdges[f][e]]++;\n          }\n        }\n      }\n\n      // compute tick marks for axes\n      const t = model.generateTicks(model.dataBounds);\n\n      // update gridlines / edge lines\n      publicAPI.updatePolyData(facesToDraw, edgesToDraw, t.ticks);\n\n      // compute label world coords and text\n      publicAPI.updateTextData(facesToDraw, edgesToDraw, t.ticks, t.tickStrings);\n\n      // rebuild the texture only when force or changed bounds, face\n      // visibility changes do to change the atlas\n      if (boundsChanged || model.forceUpdate) {\n        publicAPI.updateTextureAtlas(t.tickStrings);\n      }\n    }\n    model.forceUpdate = false;\n  };\n\n  // create the texture map atlas that contains the rendering of\n  // all the text strings. Only needs to be called when the text strings\n  // have changed (labels and ticks)\n  publicAPI.updateTextureAtlas = tickStrings => {\n    // compute the width and height we need\n\n    // set the text properties\n    model.tmContext.textBaseline = 'bottom';\n    model.tmContext.textAlign = 'left';\n\n    // first the three labels\n    model._tmAtlas.clear();\n    let maxWidth = 0;\n    let totalHeight = 1; // start one pixel in so we have a border\n    for (let i = 0; i < 3; i++) {\n      if (!model._tmAtlas.has(model.axisLabels[i])) {\n        applyTextStyle(model.tmContext, model.axisTextStyle);\n        const metrics = model.tmContext.measureText(model.axisLabels[i]);\n        const entry = {\n          height: metrics.actualBoundingBoxAscent + 2,\n          startingHeight: totalHeight,\n          width: metrics.width + 2,\n          textStyle: model.axisTextStyle\n        };\n        model._tmAtlas.set(model.axisLabels[i], entry);\n        totalHeight += entry.height;\n        if (maxWidth < entry.width) {\n          maxWidth = entry.width;\n        }\n      }\n      // and the ticks\n      applyTextStyle(model.tmContext, model.tickTextStyle);\n      for (let t = 0; t < tickStrings[i].length; t++) {\n        if (!model._tmAtlas.has(tickStrings[i][t])) {\n          const metrics = model.tmContext.measureText(tickStrings[i][t]);\n          const entry = {\n            height: metrics.actualBoundingBoxAscent + 2,\n            startingHeight: totalHeight,\n            width: metrics.width + 2,\n            textStyle: model.tickTextStyle\n          };\n          model._tmAtlas.set(tickStrings[i][t], entry);\n          totalHeight += entry.height;\n          if (maxWidth < entry.width) {\n            maxWidth = entry.width;\n          }\n        }\n      }\n    }\n\n    // always use power of two to avoid interpolation\n    // in cases where PO2 is required\n    maxWidth = nearestPowerOfTwo(maxWidth);\n    totalHeight = nearestPowerOfTwo(totalHeight);\n\n    // set the tcoord values\n    model._tmAtlas.forEach(value => {\n      value.tcoords = [0.0, (totalHeight - value.startingHeight - value.height) / totalHeight, value.width / maxWidth, (totalHeight - value.startingHeight - value.height) / totalHeight, value.width / maxWidth, (totalHeight - value.startingHeight) / totalHeight, 0.0, (totalHeight - value.startingHeight) / totalHeight];\n    });\n\n    // make sure we have power of two dimensions\n    model.tmCanvas.width = maxWidth;\n    model.tmCanvas.height = totalHeight;\n    model.tmContext.textBaseline = 'bottom';\n    model.tmContext.textAlign = 'left';\n    model.tmContext.clearRect(0, 0, maxWidth, totalHeight);\n\n    // draw the text onto the texture\n    model._tmAtlas.forEach((value, key) => {\n      applyTextStyle(model.tmContext, value.textStyle);\n      model.tmContext.fillText(key, 1, value.startingHeight + value.height - 1);\n    });\n    model.tmTexture.setCanvas(model.tmCanvas);\n    model.tmTexture.modified();\n  };\n\n  // Make sure the data is correct\n  publicAPI.onModified(() => {\n    model.forceUpdate = true;\n    publicAPI.update();\n  });\n  publicAPI.setTickTextStyle = tickStyle => {\n    model.tickTextStyle = {\n      ...model.tickTextStyle,\n      ...tickStyle\n    };\n    publicAPI.modified();\n  };\n  publicAPI.setAxisTextStyle = axisStyle => {\n    model.axisTextStyle = {\n      ...model.axisTextStyle,\n      ...axisStyle\n    };\n    publicAPI.modified();\n  };\n  publicAPI.get_tmAtlas = () => model._tmAtlas;\n\n  // try to get the bounds for the annotation. This is complicated\n  // as it relies on the pixel size of the window. Every time the camera\n  // changes the bounds change. This method simplifies by just expanding\n  // the grid bounds by a user specified factor.\n  publicAPI.getBounds = () => {\n    publicAPI.update();\n    vtkBoundingBox.setBounds(model.bounds, model.gridActor.getBounds());\n    vtkBoundingBox.scaleAboutCenter(model.bounds, model.boundsScaleFactor, model.boundsScaleFactor, model.boundsScaleFactor);\n    return model.bounds;\n  };\n\n  // Make sure the grid share the actor property\n  const _setProp = macro.chain(publicAPI.setProperty, model.gridActor.setProperty);\n  publicAPI.setProperty = p => _setProp(p)[0];\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nfunction defaultValues(publicAPI, model, initialValues) {\n  return {\n    boundsScaleFactor: 1.3,\n    camera: null,\n    dataBounds: [...vtkBoundingBox.INIT_BOUNDS],\n    faceVisibilityAngle: 8,\n    gridLines: true,\n    axisLabels: null,\n    axisTitlePixelOffset: 35.0,\n    tickLabelPixelOffset: 12.0,\n    generateTicks: defaultGenerateTicks,\n    ...initialValues,\n    axisTextStyle: {\n      fontColor: 'white',\n      fontStyle: 'normal',\n      fontSize: 18,\n      fontFamily: 'serif',\n      ...initialValues?.axisTextStyle\n    },\n    tickTextStyle: {\n      fontColor: 'white',\n      fontStyle: 'normal',\n      fontSize: 14,\n      fontFamily: 'serif',\n      ...initialValues?.tickTextStyle\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  // Inheritance\n  vtkActor.extend(publicAPI, model, defaultValues(publicAPI, model, initialValues));\n\n  // internal variables\n  model.lastFacesToDraw = [false, false, false, false, false, false];\n  model.axisLabels = ['X-Axis', 'Y-Axis', 'Z-Axis'];\n  model.tickCounts = [];\n  model.textValues = [];\n  model.lastTickBounds = [];\n  model.tmCanvas = document.createElement('canvas');\n  model.tmContext = model.tmCanvas.getContext('2d');\n  model._tmAtlas = new Map();\n\n  // for texture atlas\n  model.tmTexture = vtkTexture.newInstance({\n    resizable: true\n  });\n  model.tmTexture.setInterpolate(false);\n  publicAPI.getProperty().setDiffuse(0.0);\n  publicAPI.getProperty().setAmbient(1.0);\n  model.gridMapper = vtkMapper.newInstance();\n  model.polyData = vtkPolyData.newInstance();\n  model.gridMapper.setInputData(model.polyData);\n  model.gridActor = vtkActor.newInstance();\n  model.gridActor.setMapper(model.gridMapper);\n  model.gridActor.setProperty(publicAPI.getProperty());\n  model.gridActor.setParentProp(publicAPI);\n  model.textPolyData = vtkPolyData.newInstance();\n  macro.setGet(publicAPI, model, ['axisTitlePixelOffset', 'boundsScaleFactor', 'faceVisibilityAngle', 'gridLines', 'tickLabelPixelOffset', 'generateTicks']);\n  macro.setGetArray(publicAPI, model, ['dataBounds'], 6);\n  macro.setGetArray(publicAPI, model, ['axisLabels'], 3);\n  macro.get(publicAPI, model, ['axisTextStyle', 'tickTextStyle', 'camera', 'tmTexture', 'textValues', 'textPolyData', 'tickCounts', 'gridActor']);\n\n  // Object methods\n  vtkCubeAxesActor(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkCubeAxesActor');\n\n// ----------------------------------------------------------------------------\n\nvar vtkCubeAxesActor$1 = {\n  newInstance,\n  extend,\n  newCubeAxesActorHelper,\n  defaultGenerateTicks\n};\n\nexport { vtkCubeAxesActor$1 as default, extend, newInstance };\n", "import { n as newInstance$1 } from '../../macros2.js';\nimport vtkCubeAxesActor from '../Core/CubeAxesActor.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLCubeAxesActor methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLCubeAxesActor(publicAPI, model) {\n  model.classHierarchy.push('vtkOpenGLCubeAxesActor');\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      model._openGLRenderer = publicAPI.getFirstAncestorOfType('vtkOpenGLRenderer');\n      model._openGLRenderWindow = model._openGLRenderer.getParent();\n      if (!model.CubeAxesActorHelper.getRenderable()) {\n        model.CubeAxesActorHelper.setRenderable(model.renderable);\n      }\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNode(model.CubeAxesActorHelper.getTmActor());\n      publicAPI.addMissingNode(model.renderable.getGridActor());\n      publicAPI.removeUnusedNodes();\n    }\n  };\n  publicAPI.opaquePass = (prepass, renderPass) => {\n    if (prepass) {\n      const camera = model._openGLRenderer ? model._openGLRenderer.getRenderable().getActiveCamera() : null;\n      const tsize = model._openGLRenderer.getTiledSizeAndOrigin();\n      model.CubeAxesActorHelper.updateAPISpecificData([tsize.usize, tsize.vsize], camera, model._openGLRenderWindow.getRenderable());\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.CubeAxesActorHelper = vtkCubeAxesActor.newCubeAxesActorHelper();\n\n  // Object methods\n  vtkOpenGLCubeAxesActor(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkOpenGLCubeAxesActor');\n\n// ----------------------------------------------------------------------------\n\nvar index = {\n  newInstance,\n  extend\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkCubeAxesActor', newInstance);\n\nexport { index as default, extend, newInstance };\n", "const ObjectType = {\n  ARRAY_BUFFER: 0,\n  ELEMENT_ARRAY_BUFFER: 1,\n  TEXTURE_BUFFER: 2\n};\nvar Constants = {\n  ObjectType\n};\n\nexport { ObjectType, Constants as default };\n", "import { m as macro } from '../../macros2.js';\nimport Constants from './BufferObject/Constants.js';\n\nconst {\n  ObjectType\n} = Constants;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {};\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLBufferObject methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLBufferObject(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLBufferObject');\n\n  // Class-specific private functions\n  function convertType(type) {\n    switch (type) {\n      case ObjectType.ELEMENT_ARRAY_BUFFER:\n        return model.context.ELEMENT_ARRAY_BUFFER;\n      case ObjectType.TEXTURE_BUFFER:\n        if ('TEXTURE_BUFFER' in model.context) {\n          return model.context.TEXTURE_BUFFER;\n        }\n      /* eslint-disable no-fallthrough */\n      // Intentional fallthrough in case there is no TEXTURE_BUFFER in WebGL\n      case ObjectType.ARRAY_BUFFER:\n      default:\n        return model.context.ARRAY_BUFFER;\n      /* eslint-enable no-fallthrough */\n    }\n  }\n\n  let internalType = null;\n  let internalHandle = null;\n  let dirty = true;\n  let error = '';\n\n  // Public API methods\n  publicAPI.getType = () => internalType;\n  publicAPI.setType = value => {\n    internalType = value;\n  };\n  publicAPI.getHandle = () => internalHandle;\n  publicAPI.isReady = () => dirty === false;\n  publicAPI.generateBuffer = type => {\n    const objectTypeGL = convertType(type);\n    if (internalHandle === null) {\n      internalHandle = model.context.createBuffer();\n      internalType = type;\n    }\n    return convertType(internalType) === objectTypeGL;\n  };\n  publicAPI.upload = (data, type) => {\n    // buffer, size, type\n    const alreadyGenerated = publicAPI.generateBuffer(type);\n    if (!alreadyGenerated) {\n      error = 'Trying to upload array buffer to incompatible buffer.';\n      return false;\n    }\n    model.context.bindBuffer(convertType(internalType), internalHandle);\n    model.context.bufferData(convertType(internalType), data, model.context.STATIC_DRAW);\n    model.allocatedGPUMemoryInBytes = data.length * data.BYTES_PER_ELEMENT;\n    dirty = false;\n    return true;\n  };\n  publicAPI.bind = () => {\n    if (!internalHandle) {\n      return false;\n    }\n    model.context.bindBuffer(convertType(internalType), internalHandle);\n    return true;\n  };\n  publicAPI.release = () => {\n    if (!internalHandle) {\n      return false;\n    }\n    model.context.bindBuffer(convertType(internalType), null);\n    return true;\n  };\n  publicAPI.releaseGraphicsResources = () => {\n    if (internalHandle !== null) {\n      model.context.bindBuffer(convertType(internalType), null);\n      model.context.deleteBuffer(internalHandle);\n      internalHandle = null;\n      model.allocatedGPUMemoryInBytes = 0;\n    }\n  };\n  publicAPI.setOpenGLRenderWindow = rw => {\n    if (model._openGLRenderWindow === rw) {\n      return;\n    }\n    publicAPI.releaseGraphicsResources();\n    model._openGLRenderWindow = rw;\n    model.context = null;\n    if (rw) {\n      model.context = model._openGLRenderWindow.getContext();\n    }\n  };\n  publicAPI.getError = () => error;\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  objectType: ObjectType.ARRAY_BUFFER,\n  // _openGLRenderWindow: null,\n  context: null,\n  allocatedGPUMemoryInBytes: 0\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['_openGLRenderWindow', 'allocatedGPUMemoryInBytes']);\n  macro.moveToProtected(publicAPI, model, ['openGLRenderWindow']);\n  vtkOpenGLBufferObject(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkBufferObject = {\n  newInstance,\n  extend,\n  ...STATIC,\n  ...Constants\n};\n\nexport { STATIC, vtkBufferObject as default, extend, newInstance };\n", "function computeCoordShiftAndScale(points) {\n  // Find out if shift scale should be used\n  // Compute squares of diagonal size and distance from the origin\n  let diagSq = 0.0;\n  let distSq = 0.0;\n  for (let i = 0; i < 3; ++i) {\n    const range = points.getRange(i);\n    const delta = range[1] - range[0];\n    diagSq += delta * delta;\n    const distShift = 0.5 * (range[1] + range[0]);\n    distSq += distShift * distShift;\n  }\n  const useShiftAndScale = diagSq > 0 && (Math.abs(distSq) / diagSq > 1.0e6 ||\n  // If data is far from the origin relative to its size\n  Math.abs(Math.log10(diagSq)) > 3.0 ||\n  // If the size is huge when not far from the origin\n  diagSq === 0 && distSq > 1.0e6); // If data is a point, but far from the origin\n\n  if (useShiftAndScale) {\n    // Compute shift and scale vectors\n    const coordShift = new Float64Array(3);\n    const coordScale = new Float64Array(3);\n    for (let i = 0; i < 3; ++i) {\n      const range = points.getRange(i);\n      const delta = range[1] - range[0];\n      coordShift[i] = 0.5 * (range[1] + range[0]);\n      coordScale[i] = delta > 0 ? 1.0 / delta : 1.0;\n    }\n    return {\n      useShiftAndScale,\n      coordShift,\n      coordScale\n    };\n  }\n  return {\n    useShiftAndScale,\n    coordShift: new Float32Array([0, 0, 0]),\n    coordScale: new Float32Array([1, 1, 1])\n  };\n}\nvar helpers = {\n  computeCoordShiftAndScale\n};\n\nexport { computeCoordShiftAndScale, helpers as default };\n", "import { vec3, mat4, quat } from 'gl-matrix';\nimport { m as macro } from '../../macros2.js';\nimport vtkBufferObject from './BufferObject.js';\nimport { ObjectType } from './BufferObject/Constants.js';\nimport { Representation } from '../Core/Property/Constants.js';\nimport { computeCoordShiftAndScale } from './CellArrayBufferObject/helpers.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// Static functions\n// ----------------------------------------------------------------------------\n\nfunction computeInverseShiftAndScaleMatrix(coordShift, coordScale) {\n  const inverseScale = new Float64Array(3);\n  vec3.inverse(inverseScale, coordScale);\n  const matrix = new Float64Array(16);\n  mat4.fromRotationTranslationScale(matrix, quat.create(), coordShift, inverseScale);\n  return matrix;\n}\nfunction shouldApplyCoordShiftAndScale(coordShift, coordScale) {\n  if (coordShift === null || coordScale === null) {\n    return false;\n  }\n  return !(vec3.exactEquals(coordShift, [0, 0, 0]) && vec3.exactEquals(coordScale, [1, 1, 1]));\n}\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLCellArrayBufferObject methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLCellArrayBufferObject(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLCellArrayBufferObject');\n  publicAPI.setType(ObjectType.ARRAY_BUFFER);\n  publicAPI.createVBO = function (cellArray, inRep, outRep, options) {\n    let selectionMaps = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n    if (!cellArray.getData() || !cellArray.getData().length) {\n      model.elementCount = 0;\n      return 0;\n    }\n\n    // Figure out how big each block will be, currently 6 or 7 floats.\n    model.blockSize = 3;\n    model.vertexOffset = 0;\n    model.normalOffset = 0;\n    model.tCoordOffset = 0;\n    model.tCoordComponents = 0;\n    model.colorComponents = 0;\n    model.colorOffset = 0;\n    model.customData = [];\n    const pointData = options.points.getData();\n    let normalData = null;\n    let tcoordData = null;\n    let colorData = null;\n    const colorComponents = options.colors ? options.colors.getNumberOfComponents() : 0;\n    const textureComponents = options.tcoords ? options.tcoords.getNumberOfComponents() : 0;\n\n    // the values of 4 below are because floats are 4 bytes\n\n    if (options.normals) {\n      model.normalOffset = 4 * model.blockSize;\n      model.blockSize += 3;\n      normalData = options.normals.getData();\n    }\n    if (options.customAttributes) {\n      options.customAttributes.forEach(a => {\n        if (a) {\n          model.customData.push({\n            data: a.getData(),\n            offset: 4 * model.blockSize,\n            components: a.getNumberOfComponents(),\n            name: a.getName()\n          });\n          model.blockSize += a.getNumberOfComponents();\n        }\n      });\n    }\n    if (options.tcoords) {\n      model.tCoordOffset = 4 * model.blockSize;\n      model.tCoordComponents = textureComponents;\n      model.blockSize += textureComponents;\n      tcoordData = options.tcoords.getData();\n    }\n    if (options.colors) {\n      model.colorComponents = options.colors.getNumberOfComponents();\n      model.colorOffset = 0;\n      colorData = options.colors.getData();\n      if (!model.colorBO) {\n        model.colorBO = vtkBufferObject.newInstance();\n      }\n      model.colorBO.setOpenGLRenderWindow(model._openGLRenderWindow);\n    } else {\n      model.colorBO = null;\n    }\n    model.stride = 4 * model.blockSize;\n    let pointIdx = 0;\n    let normalIdx = 0;\n    let tcoordIdx = 0;\n    let colorIdx = 0;\n    let custIdx = 0;\n    let cellCount = 0;\n    let addAPoint;\n    const cellBuilders = {\n      // easy, every input point becomes an output point\n      anythingToPoints(numPoints, cellPts, offset, cellId) {\n        for (let i = 0; i < numPoints; ++i) {\n          addAPoint(cellPts[offset + i], cellId);\n        }\n      },\n      linesToWireframe(numPoints, cellPts, offset, cellIdx) {\n        // for lines we add a bunch of segments\n        for (let i = 0; i < numPoints - 1; ++i) {\n          addAPoint(cellPts[offset + i], cellIdx);\n          addAPoint(cellPts[offset + i + 1], cellIdx);\n        }\n      },\n      polysToWireframe(numPoints, cellPts, offset, cellIdx) {\n        // for polys we add a bunch of segments and close it\n        if (numPoints > 2) {\n          for (let i = 0; i < numPoints; ++i) {\n            addAPoint(cellPts[offset + i], cellIdx);\n            addAPoint(cellPts[offset + (i + 1) % numPoints], cellIdx);\n          }\n        }\n      },\n      stripsToWireframe(numPoints, cellPts, offset, cellIdx) {\n        if (numPoints > 2) {\n          // for strips we add a bunch of segments and close it\n          for (let i = 0; i < numPoints - 1; ++i) {\n            addAPoint(cellPts[offset + i], cellIdx);\n            addAPoint(cellPts[offset + i + 1], cellIdx);\n          }\n          for (let i = 0; i < numPoints - 2; i++) {\n            addAPoint(cellPts[offset + i], cellIdx);\n            addAPoint(cellPts[offset + i + 2], cellIdx);\n          }\n        }\n      },\n      polysToSurface(npts, cellPts, offset, cellIdx) {\n        for (let i = 0; i < npts - 2; i++) {\n          addAPoint(cellPts[offset + 0], cellIdx);\n          addAPoint(cellPts[offset + i + 1], cellIdx);\n          addAPoint(cellPts[offset + i + 2], cellIdx);\n        }\n      },\n      stripsToSurface(npts, cellPts, offset, cellIdx) {\n        for (let i = 0; i < npts - 2; i++) {\n          addAPoint(cellPts[offset + i], cellIdx);\n          addAPoint(cellPts[offset + i + 1 + i % 2], cellIdx);\n          addAPoint(cellPts[offset + i + 1 + (i + 1) % 2], cellIdx);\n        }\n      }\n    };\n    const cellCounters = {\n      // easy, every input point becomes an output point\n      anythingToPoints(numPoints, cellPts) {\n        return numPoints;\n      },\n      linesToWireframe(numPoints, cellPts) {\n        if (numPoints > 1) {\n          return (numPoints - 1) * 2;\n        }\n        return 0;\n      },\n      polysToWireframe(numPoints, cellPts) {\n        if (numPoints > 2) {\n          return numPoints * 2;\n        }\n        return 0;\n      },\n      stripsToWireframe(numPoints, cellPts) {\n        if (numPoints > 2) {\n          return numPoints * 4 - 6;\n        }\n        return 0;\n      },\n      polysToSurface(npts, cellPts) {\n        if (npts > 2) {\n          return (npts - 2) * 3;\n        }\n        return 0;\n      },\n      stripsToSurface(npts, cellPts, offset) {\n        if (npts > 2) {\n          return (npts - 2) * 3;\n        }\n        return 0;\n      }\n    };\n    let func = null;\n    let countFunc = null;\n    if (outRep === Representation.POINTS || inRep === 'verts') {\n      func = cellBuilders.anythingToPoints;\n      countFunc = cellCounters.anythingToPoints;\n    } else if (outRep === Representation.WIREFRAME || inRep === 'lines') {\n      func = cellBuilders[`${inRep}ToWireframe`];\n      countFunc = cellCounters[`${inRep}ToWireframe`];\n    } else {\n      func = cellBuilders[`${inRep}ToSurface`];\n      countFunc = cellCounters[`${inRep}ToSurface`];\n    }\n    const array = cellArray.getData();\n    const size = array.length;\n    let caboCount = 0;\n    for (let index = 0; index < size;) {\n      caboCount += countFunc(array[index], array);\n      index += array[index] + 1;\n    }\n    let packedUCVBO = null;\n    const packedVBO = new Float32Array(caboCount * model.blockSize);\n    if (colorData) {\n      packedUCVBO = new Uint8Array(caboCount * 4);\n    }\n    let vboidx = 0;\n    let ucidx = 0;\n\n    // Find out if shift scale should be used\n    const {\n      useShiftAndScale,\n      coordShift,\n      coordScale\n    } = computeCoordShiftAndScale(options.points);\n    if (useShiftAndScale) {\n      publicAPI.setCoordShiftAndScale(coordShift, coordScale);\n    } else if (model.coordShiftAndScaleEnabled === true) {\n      // Make sure to reset\n      publicAPI.setCoordShiftAndScale(null, null);\n    }\n\n    // Initialize the structures used to keep track of point ids and cell ids for selectors\n    if (selectionMaps) {\n      if (!selectionMaps.points && !selectionMaps.cells) {\n        selectionMaps.points = new Int32Array(caboCount);\n        selectionMaps.cells = new Int32Array(caboCount);\n      } else {\n        const newPoints = new Int32Array(caboCount + selectionMaps.points.length);\n        newPoints.set(selectionMaps.points);\n        selectionMaps.points = newPoints;\n        const newCells = new Int32Array(caboCount + selectionMaps.cells.length);\n        newCells.set(selectionMaps.cells);\n        selectionMaps.cells = newCells;\n      }\n    }\n    let pointCount = options.vertexOffset;\n    addAPoint = function addAPointFunc(pointId, cellId) {\n      // Keep track of original point and cell ids, for selection\n      if (selectionMaps) {\n        selectionMaps.points[pointCount] = pointId;\n        selectionMaps.cells[pointCount] = cellCount + options.cellOffset;\n      }\n      ++pointCount;\n\n      // Vertices\n      pointIdx = pointId * 3;\n      if (!model.coordShiftAndScaleEnabled) {\n        packedVBO[vboidx++] = pointData[pointIdx++];\n        packedVBO[vboidx++] = pointData[pointIdx++];\n        packedVBO[vboidx++] = pointData[pointIdx++];\n      } else {\n        // Apply shift and scale\n        packedVBO[vboidx++] = (pointData[pointIdx++] - model.coordShift[0]) * model.coordScale[0];\n        packedVBO[vboidx++] = (pointData[pointIdx++] - model.coordShift[1]) * model.coordScale[1];\n        packedVBO[vboidx++] = (pointData[pointIdx++] - model.coordShift[2]) * model.coordScale[2];\n      }\n      if (normalData !== null) {\n        if (options.haveCellNormals) {\n          normalIdx = (cellCount + options.cellOffset) * 3;\n        } else {\n          normalIdx = pointId * 3;\n        }\n        packedVBO[vboidx++] = normalData[normalIdx++];\n        packedVBO[vboidx++] = normalData[normalIdx++];\n        packedVBO[vboidx++] = normalData[normalIdx++];\n      }\n      model.customData.forEach(attr => {\n        custIdx = pointId * attr.components;\n        for (let j = 0; j < attr.components; ++j) {\n          packedVBO[vboidx++] = attr.data[custIdx++];\n        }\n      });\n      if (tcoordData !== null) {\n        if (options.useTCoordsPerCell) {\n          tcoordIdx = cellId * textureComponents;\n        } else {\n          tcoordIdx = pointId * textureComponents;\n        }\n        for (let j = 0; j < textureComponents; ++j) {\n          packedVBO[vboidx++] = tcoordData[tcoordIdx++];\n        }\n      }\n      if (colorData !== null) {\n        if (options.haveCellScalars) {\n          colorIdx = (cellCount + options.cellOffset) * colorComponents;\n        } else {\n          colorIdx = pointId * colorComponents;\n        }\n        packedUCVBO[ucidx++] = colorData[colorIdx++];\n        packedUCVBO[ucidx++] = colorData[colorIdx++];\n        packedUCVBO[ucidx++] = colorData[colorIdx++];\n        packedUCVBO[ucidx++] = colorComponents === 4 ? colorData[colorIdx++] : 255;\n      }\n    };\n\n    // Browse the cell array: the index is at the beginning of a cell\n    // The value of 'array' at the position 'index' is the number of points in the cell\n    for (let index = 0; index < size; index += array[index] + 1, cellCount++) {\n      func(array[index], array, index + 1, cellCount + options.cellOffset);\n    }\n    model.elementCount = caboCount;\n    publicAPI.upload(packedVBO, ObjectType.ARRAY_BUFFER);\n    if (model.colorBO) {\n      model.colorBOStride = 4;\n      model.colorBO.upload(packedUCVBO, ObjectType.ARRAY_BUFFER);\n    }\n    return cellCount;\n  };\n  publicAPI.setCoordShiftAndScale = (coordShift, coordScale) => {\n    if (coordShift !== null && (coordShift.constructor !== Float64Array || coordShift.length !== 3)) {\n      vtkErrorMacro('Wrong type for coordShift, expected vec3 or null');\n      return;\n    }\n    if (coordScale !== null && (coordScale.constructor !== Float64Array || coordScale.length !== 3)) {\n      vtkErrorMacro('Wrong type for coordScale, expected vec3 or null');\n      return;\n    }\n    if (model.coordShift === null || coordShift === null || !vec3.equals(coordShift, model.coordShift)) {\n      model.coordShift = coordShift;\n    }\n    if (model.coordScale === null || coordScale === null || !vec3.equals(coordScale, model.coordScale)) {\n      model.coordScale = coordScale;\n    }\n    model.coordShiftAndScaleEnabled = shouldApplyCoordShiftAndScale(model.coordShift, model.coordScale);\n    if (model.coordShiftAndScaleEnabled) {\n      model.inverseShiftAndScaleMatrix = computeInverseShiftAndScaleMatrix(model.coordShift, model.coordScale);\n    } else {\n      model.inverseShiftAndScaleMatrix = null;\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  elementCount: 0,\n  stride: 0,\n  colorBOStride: 0,\n  vertexOffset: 0,\n  normalOffset: 0,\n  tCoordOffset: 0,\n  tCoordComponents: 0,\n  colorOffset: 0,\n  colorComponents: 0,\n  tcoordBO: null,\n  customData: [],\n  coordShift: null,\n  coordScale: null,\n  coordShiftAndScaleEnabled: false,\n  inverseShiftAndScaleMatrix: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkBufferObject.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['colorBO', 'elementCount', 'stride', 'colorBOStride', 'vertexOffset', 'normalOffset', 'tCoordOffset', 'tCoordComponents', 'colorOffset', 'colorComponents', 'customData']);\n  macro.get(publicAPI, model, ['coordShift', 'coordScale', 'coordShiftAndScaleEnabled', 'inverseShiftAndScaleMatrix']);\n\n  // Object specific methods\n  vtkOpenGLCellArrayBufferObject(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkCellArrayBufferObject = {\n  newInstance,\n  extend\n};\n\nexport { vtkCellArrayBufferObject as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\n\n// export const SHADER_TYPES = ['Vertex', 'Fragment', 'Geometry', 'Unknown'];\n\n// ----------------------------------------------------------------------------\n// vtkShader methods\n// ----------------------------------------------------------------------------\n\nfunction vtkShader(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkShader');\n  publicAPI.compile = () => {\n    let stype = model.context.VERTEX_SHADER;\n    if (!model.source || !model.source.length || model.shaderType === 'Unknown') {\n      return false;\n    }\n\n    // Ensure we delete the previous shader if necessary.\n    if (model.handle !== 0) {\n      model.context.deleteShader(model.handle);\n      model.handle = 0;\n    }\n    switch (model.shaderType) {\n      // case vtkShader::Geometry:\n      //   type = GL_GEOMETRY_SHADER;\n      //   break;\n      case 'Fragment':\n        stype = model.context.FRAGMENT_SHADER;\n        break;\n      case 'Vertex':\n      default:\n        stype = model.context.VERTEX_SHADER;\n        break;\n    }\n    model.handle = model.context.createShader(stype);\n    model.context.shaderSource(model.handle, model.source);\n    model.context.compileShader(model.handle);\n    const isCompiled = model.context.getShaderParameter(model.handle, model.context.COMPILE_STATUS);\n    if (!isCompiled) {\n      const lastError = model.context.getShaderInfoLog(model.handle);\n      vtkErrorMacro(`Error compiling shader '${model.source}': ${lastError}`);\n      model.context.deleteShader(model.handle);\n      model.handle = 0;\n      return false;\n    }\n\n    // The shader compiled, store its handle and return success.\n    return true;\n  };\n  publicAPI.cleanup = () => {\n    if (model.shaderType === 'Unknown' || model.handle === 0) {\n      return;\n    }\n    model.context.deleteShader(model.handle);\n    model.handle = 0;\n    model.dirty = true;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  shaderType: 'Unknown',\n  source: '',\n  error: '',\n  handle: 0,\n  dirty: false,\n  context: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['shaderType', 'source', 'error', 'handle', 'context']);\n\n  // Object methods\n  vtkShader(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkShader');\n\n// ----------------------------------------------------------------------------\n\nvar vtkShader$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkShader$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkShader from './Shader.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\n\n// perform in place string substitutions, indicate if a substitution was done\n// this is useful for building up shader strings which typically involve\n// lots of string substitutions. Return true if a substitution was done.\nfunction substitute(source, search, replace, all) {\n  // We only accept strings or array of strings, typeof is faster than Array.isArray\n  const replaceStr = typeof replace === 'string' ? replace : replace.join('\\n');\n\n  // We don't need to instantiate a RegExp if we don't want a global substitution.\n  // In all other cases, we need to take the provided string or RegExp and\n  // instantiate a new one to add the `g` flag.\n  // Argument defaults are transpiled to slow `arguments`-based operations\n  // better assume undefined as flag to know if the value is set or not\n  const replaceSearch = all === false ? search : new RegExp(search, 'g');\n  const resultstr = source.replace(replaceSearch, replaceStr);\n  return {\n    // If the result is different than the input, we did perform a replacement\n    replace: resultstr !== replaceStr,\n    result: resultstr\n  };\n}\n\n// ----------------------------------------------------------------------------\n// vtkShaderProgram methods\n// ----------------------------------------------------------------------------\n\nfunction vtkShaderProgram(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkShaderProgram');\n  publicAPI.compileShader = () => {\n    if (!model.vertexShader.compile()) {\n      vtkErrorMacro(model.vertexShader.getSource().split('\\n').map((line, index) => `${index}: ${line}`).join('\\n'));\n      vtkErrorMacro(model.vertexShader.getError());\n      return 0;\n    }\n    if (!model.fragmentShader.compile()) {\n      vtkErrorMacro(model.fragmentShader.getSource().split('\\n').map((line, index) => `${index}: ${line}`).join('\\n'));\n      vtkErrorMacro(model.fragmentShader.getError());\n      return 0;\n    }\n    // skip geometry for now\n    if (!publicAPI.attachShader(model.vertexShader)) {\n      vtkErrorMacro(model.error);\n      return 0;\n    }\n    if (!publicAPI.attachShader(model.fragmentShader)) {\n      vtkErrorMacro(model.error);\n      return 0;\n    }\n    if (!publicAPI.link()) {\n      vtkErrorMacro(`Links failed: ${model.error}`);\n      return 0;\n    }\n    publicAPI.setCompiled(true);\n    return 1;\n  };\n  publicAPI.cleanup = () => {\n    if (model.shaderType === 'Unknown' || model.handle === 0) {\n      return;\n    }\n    publicAPI.release();\n    if (model.vertexShaderHandle !== 0) {\n      model.context.detachShader(model.handle, model.vertexShaderHandle);\n      model.vertexShaderHandle = 0;\n    }\n    if (model.fragmentShaderHandle !== 0) {\n      model.context.detachShader(model.handle, model.fragmentShaderHandle);\n      model.fragmentShaderHandle = 0;\n    }\n    model.context.deleteProgram(model.handle);\n    model.handle = 0;\n    publicAPI.setCompiled(false);\n  };\n  publicAPI.bind = () => {\n    if (!model.linked && !publicAPI.link()) {\n      return false;\n    }\n    model.context.useProgram(model.handle);\n    publicAPI.setBound(true);\n    return true;\n  };\n  publicAPI.isBound = () => !!model.bound;\n  publicAPI.release = () => {\n    model.context.useProgram(null);\n    publicAPI.setBound(false);\n  };\n  publicAPI.setContext = ctx => {\n    model.vertexShader.setContext(ctx);\n    model.fragmentShader.setContext(ctx);\n    model.geometryShader.setContext(ctx);\n  };\n  publicAPI.link = () => {\n    if (model.linked) {\n      return true;\n    }\n    if (model.handle === 0) {\n      model.error = 'Program has not been initialized, and/or does not have shaders.';\n      return false;\n    }\n\n    // clear out the list of uniforms used\n    model.uniformLocs = {};\n    model.context.linkProgram(model.handle);\n    const isCompiled = model.context.getProgramParameter(model.handle, model.context.LINK_STATUS);\n    if (!isCompiled) {\n      const lastError = model.context.getProgramInfoLog(model.handle);\n      vtkErrorMacro(`Error linking shader ${lastError}`);\n      model.handle = 0;\n      return false;\n    }\n    publicAPI.setLinked(true);\n    model.attributeLocs = {};\n    return true;\n  };\n  publicAPI.setUniformMatrix = (name, v) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    const f32 = new Float32Array(v);\n    model.context.uniformMatrix4fv(location, false, f32);\n    return true;\n  };\n  publicAPI.setUniformMatrix3x3 = (name, v) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    const f32 = new Float32Array(v);\n    model.context.uniformMatrix3fv(location, false, f32);\n    return true;\n  };\n  publicAPI.setUniformf = (name, v) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    model.context.uniform1f(location, v);\n    return true;\n  };\n  publicAPI.setUniformfv = (name, v) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    model.context.uniform1fv(location, v);\n    return true;\n  };\n  publicAPI.setUniformi = (name, v) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    model.context.uniform1i(location, v);\n    return true;\n  };\n  publicAPI.setUniformiv = (name, v) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    model.context.uniform1iv(location, v);\n    return true;\n  };\n  publicAPI.setUniform2f = (name, v1, v2) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    if (v2 === undefined) {\n      throw new RangeError('Invalid number of values for array');\n    }\n    model.context.uniform2f(location, v1, v2);\n    return true;\n  };\n  publicAPI.setUniform2fv = (name, v) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    model.context.uniform2fv(location, v);\n    return true;\n  };\n  publicAPI.setUniform2i = (name, v1, v2) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    if (v2 === undefined) {\n      throw new RangeError('Invalid number of values for array');\n    }\n    model.context.uniform2i(location, v1, v2);\n    return true;\n  };\n  publicAPI.setUniform2iv = (name, v) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    model.context.uniform2iv(location, v);\n    return true;\n  };\n  publicAPI.setUniform3f = (name, a1, a2, a3) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    if (a3 === undefined) {\n      throw new RangeError('Invalid number of values for array');\n    }\n    model.context.uniform3f(location, a1, a2, a3);\n    return true;\n  };\n  publicAPI.setUniform3fArray = (name, a) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    if (!Array.isArray(a) || a.length !== 3) {\n      throw new RangeError('Invalid number of values for array');\n    }\n    model.context.uniform3f(location, a[0], a[1], a[2]);\n    return true;\n  };\n  publicAPI.setUniform3fv = (name, v) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    model.context.uniform3fv(location, v);\n    return true;\n  };\n  publicAPI.setUniform3i = function (name) {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    let array = args;\n    // allow an array passed as a single argument\n    if (array.length === 1 && Array.isArray(array[0])) {\n      array = array[0];\n    }\n    if (array.length !== 3) {\n      throw new RangeError('Invalid number of values for array');\n    }\n    model.context.uniform3i(location, array[0], array[1], array[2]);\n    return true;\n  };\n  publicAPI.setUniform3iv = (name, v) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    model.context.uniform3iv(location, v);\n    return true;\n  };\n  publicAPI.setUniform4f = function (name) {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n    let array = args;\n    // allow an array passed as a single argument\n    if (array.length === 1 && Array.isArray(array[0])) {\n      array = array[0];\n    }\n    if (array.length !== 4) {\n      throw new RangeError('Invalid number of values for array');\n    }\n    model.context.uniform4f(location, array[0], array[1], array[2], array[3]);\n    return true;\n  };\n  publicAPI.setUniform4fv = (name, v) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    model.context.uniform4fv(location, v);\n    return true;\n  };\n  publicAPI.setUniform4i = function (name) {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    let array = args;\n    // allow an array passed as a single argument\n    if (array.length === 1 && Array.isArray(array[0])) {\n      array = array[0];\n    }\n    if (array.length !== 4) {\n      throw new RangeError('Invalid number of values for array');\n    }\n    model.context.uniform4i(location, array[0], array[1], array[2], array[3]);\n    return true;\n  };\n  publicAPI.setUniform4iv = (name, v) => {\n    const location = publicAPI.findUniform(name);\n    if (location === -1) {\n      model.error = `Could not set uniform ${name} . No such uniform.`;\n      return false;\n    }\n    model.context.uniform4iv(location, v);\n    return true;\n  };\n  publicAPI.findUniform = name => {\n    if (!name || !model.linked) {\n      return -1;\n    }\n\n    // see if we have cached the result\n    let loc = model.uniformLocs[name];\n    if (loc !== undefined) {\n      return loc;\n    }\n    loc = model.context.getUniformLocation(model.handle, name);\n    if (loc === null) {\n      model.error = `Uniform ${name} not found in current shader program.`;\n      model.uniformLocs[name] = -1;\n      return -1;\n    }\n    model.uniformLocs[name] = loc;\n    return loc;\n  };\n  publicAPI.isUniformUsed = name => {\n    if (!name) {\n      return false;\n    }\n\n    // see if we have cached the result\n    let loc = model.uniformLocs[name];\n    if (loc !== undefined) {\n      return loc !== null;\n    }\n    if (!model.linked) {\n      vtkErrorMacro('attempt to find uniform when the shader program is not linked');\n      return false;\n    }\n    loc = model.context.getUniformLocation(model.handle, name);\n    model.uniformLocs[name] = loc;\n    if (loc === null) {\n      return false;\n    }\n    return true;\n  };\n  publicAPI.isAttributeUsed = name => {\n    if (!name) {\n      return false;\n    }\n\n    // see if we have cached the result\n    if (name in model.attributeLocs) {\n      return true;\n    }\n    if (!model.linked) {\n      vtkErrorMacro('attempt to find uniform when the shader program is not linked');\n      return false;\n    }\n    const loc = model.context.getAttribLocation(model.handle, name);\n    if (loc === -1) {\n      return false;\n    }\n    model.attributeLocs[name] = loc;\n    return true;\n  };\n  publicAPI.attachShader = shader => {\n    if (shader.getHandle() === 0) {\n      model.error = 'Shader object was not initialized, cannot attach it.';\n      return false;\n    }\n    if (shader.getShaderType() === 'Unknown') {\n      model.error = 'Shader object is of type Unknown and cannot be used.';\n      return false;\n    }\n    if (model.handle === 0) {\n      const thandle = model.context.createProgram();\n      if (thandle === 0) {\n        model.error = 'Could not create shader program.';\n        return false;\n      }\n      model.handle = thandle;\n      model.linked = false;\n    }\n    if (shader.getShaderType() === 'Vertex') {\n      if (model.vertexShaderHandle !== 0) {\n        model.context.detachShader(model.handle, model.vertexShaderHandle);\n      }\n      model.vertexShaderHandle = shader.getHandle();\n    }\n    if (shader.getShaderType() === 'Fragment') {\n      if (model.fragmentShaderHandle !== 0) {\n        model.context.detachShader(model.handle, model.fragmentShaderHandle);\n      }\n      model.fragmentShaderHandle = shader.getHandle();\n    }\n    model.context.attachShader(model.handle, shader.getHandle());\n    publicAPI.setLinked(false);\n    return true;\n  };\n  publicAPI.detachShader = shader => {\n    if (shader.getHandle() === 0) {\n      model.error = 'shader object was not initialized, cannot attach it.';\n      return false;\n    }\n    if (shader.getShaderType() === 'Unknown') {\n      model.error = 'Shader object is of type Unknown and cannot be used.';\n      return false;\n    }\n    if (model.handle === 0) {\n      model.error = 'This shader program has not been initialized yet.';\n    }\n    switch (shader.getShaderType()) {\n      case 'Vertex':\n        if (model.vertexShaderHandle !== shader.getHandle()) {\n          model.error = 'The supplied shader was not attached to this program.';\n          return false;\n        }\n        model.context.detachShader(model.handle, shader.getHandle());\n        model.vertexShaderHandle = 0;\n        model.linked = false;\n        return true;\n      case 'Fragment':\n        if (model.fragmentShaderHandle !== shader.getHandle()) {\n          model.error = 'The supplied shader was not attached to this program.';\n          return false;\n        }\n        model.context.detachShader(model.handle, shader.getHandle());\n        model.fragmentShaderHandle = 0;\n        model.linked = false;\n        return true;\n      default:\n        return false;\n    }\n  };\n  publicAPI.setContext = ctx => {\n    model.context = ctx;\n    model.vertexShader.setContext(ctx);\n    model.fragmentShader.setContext(ctx);\n    model.geometryShader.setContext(ctx);\n  };\n  publicAPI.setLastCameraMTime = mtime => {\n    model.lastCameraMTime = mtime;\n  };\n\n  // publicAPI.enableAttributeArray = (name) => {\n  //   const location = publicAPI.findAttributeArray(name);\n  //   if (location === -1) {\n  //     model.error = `Could not enable attribute ${name} No such attribute.`;\n  //     return false;\n  //   }\n  //   model.context.enableVertexAttribArray(location);\n  //   return true;\n  // };\n\n  // publicAPI.disableAttributeArray = (name) => {\n  //   const location = publicAPI.findAttributeArray(name);\n  //   if (location === -1) {\n  //     model.error = `Could not enable attribute ${name} No such attribute.`;\n  //     return false;\n  //   }\n  //   model.context.disableVertexAttribArray(location);\n  //   return true;\n  // };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  vertexShaderHandle: 0,\n  fragmentShaderHandle: 0,\n  geometryShaderHandle: 0,\n  vertexShader: null,\n  fragmentShader: null,\n  geometryShader: null,\n  linked: false,\n  bound: false,\n  compiled: false,\n  error: '',\n  handle: 0,\n  numberOfOutputs: 0,\n  attributesLocs: null,\n  uniformLocs: null,\n  md5Hash: 0,\n  context: null,\n  lastCameraMTime: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Instantiate internal objects\n  model.attributesLocs = {};\n  model.uniformLocs = {};\n  model.vertexShader = vtkShader.newInstance();\n  model.vertexShader.setShaderType('Vertex');\n  model.fragmentShader = vtkShader.newInstance();\n  model.fragmentShader.setShaderType('Fragment');\n  model.geometryShader = vtkShader.newInstance();\n  model.geometryShader.setShaderType('Geometry');\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['lastCameraMTime']);\n  macro.setGet(publicAPI, model, ['error', 'handle', 'compiled', 'bound', 'md5Hash', 'vertexShader', 'fragmentShader', 'geometryShader', 'linked']);\n\n  // Object methods\n  vtkShaderProgram(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkShaderProgram');\n\n// ----------------------------------------------------------------------------\n\nvar vtkShaderProgram$1 = {\n  newInstance,\n  extend,\n  substitute\n};\n\nexport { vtkShaderProgram$1 as default, substitute };\n", "import { m as macro } from '../../macros2.js';\nimport { ObjectType } from './BufferObject/Constants.js';\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLVertexArrayObject methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLVertexArrayObject(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLVertexArrayObject');\n\n  // Public API methods\n  publicAPI.exposedMethod = () => {\n    // This is a publicly exposed method of this object\n  };\n  publicAPI.initialize = () => {\n    model.instancingExtension = null;\n    if (!model._openGLRenderWindow.getWebgl2()) {\n      model.instancingExtension = model.context.getExtension('ANGLE_instanced_arrays');\n    }\n    if (!model.forceEmulation && model._openGLRenderWindow && model._openGLRenderWindow.getWebgl2()) {\n      model.extension = null;\n      model.supported = true;\n      model.handleVAO = model.context.createVertexArray();\n    } else {\n      model.extension = model.context.getExtension('OES_vertex_array_object');\n      // Start setting up VAO\n      if (!model.forceEmulation && model.extension) {\n        model.supported = true;\n        model.handleVAO = model.extension.createVertexArrayOES();\n      } else {\n        model.supported = false;\n      }\n    }\n  };\n  publicAPI.isReady = () =>\n  // We either probed and allocated a VAO, or are falling back as the current\n  // hardware does not support VAOs.\n  model.handleVAO !== 0 || model.supported === false;\n  publicAPI.bind = () => {\n    // Either simply bind the VAO, or emulate behavior by binding all attributes.\n    if (!publicAPI.isReady()) {\n      publicAPI.initialize();\n    }\n    if (publicAPI.isReady() && model.supported) {\n      if (model.extension) {\n        model.extension.bindVertexArrayOES(model.handleVAO);\n      } else {\n        model.context.bindVertexArray(model.handleVAO);\n      }\n    } else if (publicAPI.isReady()) {\n      const gl = model.context;\n      for (let ibuff = 0; ibuff < model.buffers.length; ++ibuff) {\n        const buff = model.buffers[ibuff];\n        model.context.bindBuffer(gl.ARRAY_BUFFER, buff.buffer);\n        for (let iatt = 0; iatt < buff.attributes.length; ++iatt) {\n          const attrIt = buff.attributes[iatt];\n          const matrixCount = attrIt.isMatrix ? attrIt.size : 1;\n          for (let i = 0; i < matrixCount; ++i) {\n            gl.enableVertexAttribArray(attrIt.index + i);\n            gl.vertexAttribPointer(attrIt.index + i, attrIt.size, attrIt.type, attrIt.normalize, attrIt.stride, attrIt.offset + attrIt.stride * i / attrIt.size);\n            if (attrIt.divisor > 0) {\n              if (model.instancingExtension) {\n                model.instancingExtension.vertexAttribDivisorANGLE(attrIt.index + i, 1);\n              } else {\n                gl.vertexAttribDivisor(attrIt.index + i, 1);\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  publicAPI.release = () => {\n    // Either simply release the VAO, or emulate behavior by releasing all attributes.\n    if (publicAPI.isReady() && model.supported) {\n      if (model.extension) {\n        model.extension.bindVertexArrayOES(null);\n      } else {\n        model.context.bindVertexArray(null);\n      }\n    } else if (publicAPI.isReady()) {\n      const gl = model.context;\n      for (let ibuff = 0; ibuff < model.buffers.length; ++ibuff) {\n        const buff = model.buffers[ibuff];\n        model.context.bindBuffer(gl.ARRAY_BUFFER, buff.buffer);\n        for (let iatt = 0; iatt < buff.attributes.length; ++iatt) {\n          const attrIt = buff.attributes[iatt];\n          const matrixCount = attrIt.isMatrix ? attrIt.size : 1;\n          for (let i = 0; i < matrixCount; ++i) {\n            gl.enableVertexAttribArray(attrIt.index + i);\n            gl.vertexAttribPointer(attrIt.index + i, attrIt.size, attrIt.type, attrIt.normalize, attrIt.stride, attrIt.offset + attrIt.stride * i / attrIt.size);\n            if (attrIt.divisor > 0) {\n              if (model.instancingExtension) {\n                model.instancingExtension.vertexAttribDivisorANGLE(attrIt.index + i, 0);\n              } else {\n                gl.vertexAttribDivisor(attrIt.index + i, 0);\n              }\n            }\n            gl.disableVertexAttribArray(attrIt.index + i);\n          }\n        }\n      }\n    }\n  };\n  publicAPI.shaderProgramChanged = () => {\n    publicAPI.release();\n    if (model.handleVAO) {\n      if (model.extension) {\n        model.extension.deleteVertexArrayOES(model.handleVAO);\n      } else {\n        model.context.deleteVertexArray(model.handleVAO);\n      }\n    }\n    model.handleVAO = 0;\n    model.handleProgram = 0;\n  };\n  publicAPI.releaseGraphicsResources = () => {\n    publicAPI.shaderProgramChanged();\n    if (model.handleVAO) {\n      if (model.extension) {\n        model.extension.deleteVertexArrayOES(model.handleVAO);\n      } else {\n        model.context.deleteVertexArray(model.handleVAO);\n      }\n    }\n    model.handleVAO = 0;\n    model.supported = true;\n    model.handleProgram = 0;\n  };\n  publicAPI.addAttributeArray = (program, buffer, name, offset, stride, elementType, elementTupleSize, normalize) => publicAPI.addAttributeArrayWithDivisor(program, buffer, name, offset, stride, elementType, elementTupleSize, normalize, 0, false);\n  publicAPI.addAttributeArrayWithDivisor = (program, buffer, name, offset, stride, elementType, elementTupleSize, normalize, divisor, isMatrix) => {\n    if (!program) {\n      return false;\n    }\n\n    // Check the program is bound, and the buffer is valid.\n    if (!program.isBound() || buffer.getHandle() === 0 || buffer.getType() !== ObjectType.ARRAY_BUFFER) {\n      return false;\n    }\n\n    // Perform initialization if necessary, ensure program matches VAOs.\n    if (model.handleProgram === 0) {\n      model.handleProgram = program.getHandle();\n    }\n    if (!publicAPI.isReady()) {\n      publicAPI.initialize();\n    }\n    if (!publicAPI.isReady() || model.handleProgram !== program.getHandle()) {\n      return false;\n    }\n    const gl = model.context;\n    const attribs = {};\n    attribs.name = name;\n    attribs.index = gl.getAttribLocation(model.handleProgram, name);\n    attribs.offset = offset;\n    attribs.stride = stride;\n    attribs.type = elementType;\n    attribs.size = elementTupleSize;\n    attribs.normalize = normalize;\n    attribs.isMatrix = isMatrix;\n    attribs.divisor = divisor;\n    if (attribs.Index === -1) {\n      return false;\n    }\n\n    // Always make the call as even the first use wants the attrib pointer setting\n    // up when we are emulating.\n    buffer.bind();\n    gl.enableVertexAttribArray(attribs.index);\n    gl.vertexAttribPointer(attribs.index, attribs.size, attribs.type, attribs.normalize, attribs.stride, attribs.offset);\n    if (divisor > 0) {\n      if (model.instancingExtension) {\n        model.instancingExtension.vertexAttribDivisorANGLE(attribs.index, 1);\n      } else {\n        gl.vertexAttribDivisor(attribs.index, 1);\n      }\n    }\n    attribs.buffer = buffer.getHandle();\n\n    // If vertex array objects are not supported then build up our list.\n    if (!model.supported) {\n      // find the buffer\n      let buffFound = false;\n      for (let ibuff = 0; ibuff < model.buffers.length; ++ibuff) {\n        const buff = model.buffers[ibuff];\n        if (buff.buffer === attribs.buffer) {\n          buffFound = true;\n          let found = false;\n          for (let iatt = 0; iatt < buff.attributes.length; ++iatt) {\n            const attrIt = buff.attributes[iatt];\n            if (attrIt.name === name) {\n              found = true;\n              buff.attributes[iatt] = attribs;\n            }\n          }\n          if (!found) {\n            buff.attributes.push(attribs);\n          }\n        }\n      }\n      if (!buffFound) {\n        model.buffers.push({\n          buffer: attribs.buffer,\n          attributes: [attribs]\n        });\n      }\n    }\n    return true;\n  };\n  publicAPI.addAttributeMatrixWithDivisor = (program, buffer, name, offset, stride, elementType, elementTupleSize, normalize, divisor) => {\n    // bind the first row of values\n    const result = publicAPI.addAttributeArrayWithDivisor(program, buffer, name, offset, stride, elementType, elementTupleSize, normalize, divisor, true);\n    if (!result) {\n      return result;\n    }\n    const gl = model.context;\n    const index = gl.getAttribLocation(model.handleProgram, name);\n    for (let i = 1; i < elementTupleSize; i++) {\n      gl.enableVertexAttribArray(index + i);\n      gl.vertexAttribPointer(index + i, elementTupleSize, elementType, normalize, stride, offset + stride * i / elementTupleSize);\n      if (divisor > 0) {\n        if (model.instancingExtension) {\n          model.instancingExtension.vertexAttribDivisorANGLE(index + i, 1);\n        } else {\n          gl.vertexAttribDivisor(index + i, 1);\n        }\n      }\n    }\n    return true;\n  };\n  publicAPI.removeAttributeArray = name => {\n    if (!publicAPI.isReady() || model.handleProgram === 0) {\n      return false;\n    }\n\n    // If we don't have real VAOs find the entry and remove it too.\n    if (!model.supported) {\n      for (let ibuff = 0; ibuff < model.buffers.length; ++ibuff) {\n        const buff = model.buffers[ibuff];\n        for (let iatt = 0; iatt < buff.attributes.length; ++iatt) {\n          const attrIt = buff.attributes[iatt];\n          if (attrIt.name === name) {\n            buff.attributes.splice(iatt, 1);\n            if (!buff.attributes.length) {\n              model.buffers.splice(ibuff, 1);\n            }\n            return true;\n          }\n        }\n      }\n    }\n    return true;\n  };\n  publicAPI.setOpenGLRenderWindow = rw => {\n    if (model._openGLRenderWindow === rw) {\n      return;\n    }\n    publicAPI.releaseGraphicsResources();\n    model._openGLRenderWindow = rw;\n    model.context = null;\n    if (rw) {\n      model.context = model._openGLRenderWindow.getContext();\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  forceEmulation: false,\n  handleVAO: 0,\n  handleProgram: 0,\n  supported: true,\n  buffers: null,\n  context: null\n  // _openGLRenderWindow: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Internal objects initialization\n  model.buffers = [];\n\n  // Object methods\n  macro.obj(publicAPI, model);\n\n  // Create get-only macros\n  macro.get(publicAPI, model, ['supported']);\n\n  // Create get-set macros\n  macro.setGet(publicAPI, model, ['forceEmulation']);\n\n  // For more macro methods, see \"Sources/macros.js\"\n\n  // Object specific methods\n  vtkOpenGLVertexArrayObject(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkOpenGLVertexArrayObject');\n\n// ----------------------------------------------------------------------------\n\nvar vtkVertexArrayObject = {\n  newInstance,\n  extend\n};\n\nexport { vtkVertexArrayObject as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkCellArrayBufferObject from './CellArrayBufferObject.js';\nimport vtkShaderProgram from './ShaderProgram.js';\nimport vtkVertexArrayObject from './VertexArrayObject.js';\nimport { Representation } from '../Core/Property/Constants.js';\n\nconst primTypes = {\n  Start: 0,\n  Points: 0,\n  Lines: 1,\n  Tris: 2,\n  TriStrips: 3,\n  TrisEdges: 4,\n  TriStripsEdges: 5,\n  End: 6\n};\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLHelper methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLHelper(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLHelper');\n  publicAPI.setOpenGLRenderWindow = win => {\n    model.context = win.getContext();\n    model.program.setContext(model.context);\n    model.VAO.setOpenGLRenderWindow(win);\n    model.CABO.setOpenGLRenderWindow(win);\n  };\n  publicAPI.releaseGraphicsResources = oglwin => {\n    model.VAO.releaseGraphicsResources();\n    model.CABO.releaseGraphicsResources();\n    model.CABO.setElementCount(0);\n  };\n  publicAPI.drawArrays = (ren, actor, rep, oglMapper) => {\n    // Are there any entries\n    if (model.CABO.getElementCount()) {\n      // are we drawing edges\n      const mode = publicAPI.getOpenGLMode(rep);\n      const wideLines = publicAPI.haveWideLines(ren, actor);\n      const gl = model.context;\n      const depthMask = gl.getParameter(gl.DEPTH_WRITEMASK);\n      if (model.pointPicking) {\n        gl.depthMask(false);\n      }\n      const drawingLines = mode === gl.LINES;\n      if (drawingLines && wideLines) {\n        publicAPI.updateShaders(ren, actor, oglMapper);\n        gl.drawArraysInstanced(mode, 0, model.CABO.getElementCount(), 2 * Math.ceil(actor.getProperty().getLineWidth()));\n      } else {\n        gl.lineWidth(actor.getProperty().getLineWidth());\n        publicAPI.updateShaders(ren, actor, oglMapper);\n        gl.drawArrays(mode, 0, model.CABO.getElementCount());\n        // reset the line width\n        gl.lineWidth(1);\n      }\n      const stride = (mode === gl.POINTS ? 1 : 0) || (mode === gl.LINES ? 2 : 3);\n      if (model.pointPicking) {\n        gl.depthMask(depthMask);\n      }\n      return model.CABO.getElementCount() / stride;\n    }\n    return 0;\n  };\n  publicAPI.getOpenGLMode = rep => {\n    if (model.pointPicking) {\n      return model.context.POINTS;\n    }\n    const type = model.primitiveType;\n    if (rep === Representation.POINTS || type === primTypes.Points) {\n      return model.context.POINTS;\n    }\n    if (rep === Representation.WIREFRAME || type === primTypes.Lines || type === primTypes.TrisEdges || type === primTypes.TriStripsEdges) {\n      return model.context.LINES;\n    }\n    return model.context.TRIANGLES;\n  };\n  publicAPI.haveWideLines = (ren, actor) => {\n    if (actor.getProperty().getLineWidth() > 1.0) {\n      // we have wide lines, but the OpenGL implementation may\n      // actually support them, check the range to see if we\n      // really need have to implement our own wide lines\n      if (model.CABO.getOpenGLRenderWindow()) {\n        if (model.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth() >= actor.getProperty().getLineWidth()) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return false;\n  };\n  publicAPI.getNeedToRebuildShaders = (ren, actor, oglMapper) => {\n    // has something changed that would require us to recreate the shader?\n    // candidates are\n    // property modified (representation interpolation and lighting)\n    // input modified\n    // mapper modified (lighting complexity)\n    if (oglMapper.getNeedToRebuildShaders(publicAPI, ren, actor) || publicAPI.getProgram() === 0 || publicAPI.getShaderSourceTime().getMTime() < oglMapper.getMTime() || publicAPI.getShaderSourceTime().getMTime() < actor.getMTime()) {\n      return true;\n    }\n    return false;\n  };\n  publicAPI.updateShaders = (ren, actor, oglMapper) => {\n    // has something changed that would require us to recreate the shader?\n    if (publicAPI.getNeedToRebuildShaders(ren, actor, oglMapper)) {\n      const shaders = {\n        Vertex: null,\n        Fragment: null,\n        Geometry: null\n      };\n      oglMapper.buildShaders(shaders, ren, actor);\n\n      // compile and bind the program if needed\n      const newShader = model.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(shaders.Vertex, shaders.Fragment, shaders.Geometry);\n\n      // if the shader changed reinitialize the VAO\n      if (newShader !== publicAPI.getProgram()) {\n        publicAPI.setProgram(newShader);\n        // reset the VAO as the shader has changed\n        publicAPI.getVAO().releaseGraphicsResources();\n      }\n      publicAPI.getShaderSourceTime().modified();\n    } else {\n      model.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(publicAPI.getProgram());\n    }\n    publicAPI.getVAO().bind();\n    oglMapper.setMapperShaderParameters(publicAPI, ren, actor);\n    oglMapper.setPropertyShaderParameters(publicAPI, ren, actor);\n    oglMapper.setCameraShaderParameters(publicAPI, ren, actor);\n    oglMapper.setLightingShaderParameters(publicAPI, ren, actor);\n    oglMapper.invokeShaderCallbacks(publicAPI, ren, actor);\n  };\n  publicAPI.setMapperShaderParameters = (ren, actor, size) => {\n    if (publicAPI.haveWideLines(ren, actor)) {\n      publicAPI.getProgram().setUniform2f('viewportSize', size.usize, size.vsize);\n      const lineWidth = parseFloat(actor.getProperty().getLineWidth());\n      const halfLineWidth = lineWidth / 2.0;\n      publicAPI.getProgram().setUniformf('lineWidthStepSize', lineWidth / Math.ceil(lineWidth));\n      publicAPI.getProgram().setUniformf('halfLineWidth', halfLineWidth);\n    }\n    if (model.primitiveType === primTypes.Points || actor.getProperty().getRepresentation() === Representation.POINTS) {\n      publicAPI.getProgram().setUniformf('pointSize', actor.getProperty().getPointSize());\n    } else if (model.pointPicking) {\n      publicAPI.getProgram().setUniformf('pointSize', publicAPI.getPointPickingPrimitiveSize());\n    }\n  };\n  publicAPI.replaceShaderPositionVC = (shaders, ren, actor) => {\n    let VSSource = shaders.Vertex;\n\n    // Always set point size in case we need picking\n    VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::PositionVC::Dec', ['//VTK::PositionVC::Dec', 'uniform float pointSize;']).result;\n    VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::PositionVC::Impl', ['//VTK::PositionVC::Impl', '  gl_PointSize = pointSize;'], false).result;\n\n    // for lines, make sure we add the width code\n    if (publicAPI.getOpenGLMode(actor.getProperty().getRepresentation()) === model.context.LINES && publicAPI.haveWideLines(ren, actor)) {\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::PositionVC::Dec', ['//VTK::PositionVC::Dec', 'uniform vec2 viewportSize;', 'uniform float lineWidthStepSize;', 'uniform float halfLineWidth;']).result;\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::PositionVC::Impl', ['//VTK::PositionVC::Impl', ' if (halfLineWidth > 0.0)', '   {', '   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;', '   vec4 tmpPos = gl_Position;', '   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;', '   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];', '   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];', '   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);', '   }']).result;\n    }\n    shaders.Vertex = VSSource;\n  };\n  publicAPI.getPointPickingPrimitiveSize = () => {\n    if (model.primitiveType === primTypes.Points) {\n      return 2;\n    }\n    if (model.primitiveType === primTypes.Lines) {\n      return 4;\n    }\n    return 6;\n  };\n  publicAPI.getAllocatedGPUMemoryInBytes = () => publicAPI.getCABO().getAllocatedGPUMemoryInBytes();\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  context: null,\n  program: null,\n  shaderSourceTime: null,\n  VAO: null,\n  attributeUpdateTime: null,\n  CABO: null,\n  primitiveType: 0,\n  pointPicking: false\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  model.shaderSourceTime = {};\n  macro.obj(model.shaderSourceTime);\n  model.attributeUpdateTime = {};\n  macro.obj(model.attributeUpdateTime);\n  macro.setGet(publicAPI, model, ['program', 'shaderSourceTime', 'VAO', 'attributeUpdateTime', 'CABO', 'primitiveType', 'pointPicking']);\n  model.program = vtkShaderProgram.newInstance();\n  model.VAO = vtkVertexArrayObject.newInstance();\n  model.CABO = vtkCellArrayBufferObject.newInstance();\n\n  // Object methods\n  vtkOpenGLHelper(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkHelper = {\n  newInstance,\n  extend,\n  primTypes\n};\n\nexport { vtkHelper as default, extend, newInstance, primTypes };\n", "var vtkPolyDataVS = \"//VTK::System::Dec\\n\\n/*=========================================================================\\n\\n  Program:   Visualization Toolkit\\n  Module:    vtkPolyDataVS.glsl\\n\\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\\n  All rights reserved.\\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\\n\\n     This software is distributed WITHOUT ANY WARRANTY; without even\\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\\n     PURPOSE.  See the above copyright notice for more information.\\n\\n=========================================================================*/\\n\\nattribute vec4 vertexMC;\\n\\n// frag position in VC\\n//VTK::PositionVC::Dec\\n\\n// optional normal declaration\\n//VTK::Normal::Dec\\n\\n// extra lighting parameters\\n//VTK::Light::Dec\\n\\n// Texture coordinates\\n//VTK::TCoord::Dec\\n\\n// material property values\\n//VTK::Color::Dec\\n\\n// clipping plane vars\\n//VTK::Clip::Dec\\n\\n// camera and actor matrix values\\n//VTK::Camera::Dec\\n\\n// Apple Bug\\n//VTK::PrimID::Dec\\n\\n// picking support\\n//VTK::Picking::Dec\\n\\nvoid main()\\n{\\n  //VTK::Color::Impl\\n\\n  //VTK::Normal::Impl\\n\\n  //VTK::TCoord::Impl\\n\\n  //VTK::Clip::Impl\\n\\n  //VTK::PrimID::Impl\\n\\n  //VTK::PositionVC::Impl\\n\\n  //VTK::Light::Impl\\n\\n  //VTK::Picking::Impl\\n}\\n\";\n\nexport { vtkPolyDataVS as v };\n", "var vtkPolyDataFS = \"//VTK::System::Dec\\n\\n/*=========================================================================\\n\\n  Program:   Visualization Toolkit\\n  Module:    vtkPolyDataFS.glsl\\n\\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\\n  All rights reserved.\\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\\n\\n     This software is distributed WITHOUT ANY WARRANTY; without even\\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\\n     PURPOSE.  See the above copyright notice for more information.\\n\\n=========================================================================*/\\n// Template for the polydata mappers fragment shader\\n\\nuniform int PrimitiveIDOffset;\\n\\n// VC position of this fragment\\n//VTK::PositionVC::Dec\\n\\n// optional color passed in from the vertex shader, vertexColor\\n//VTK::Color::Dec\\n\\n// optional surface normal declaration\\n//VTK::Normal::Dec\\n\\n// extra lighting parameters\\n//VTK::Light::Dec\\n\\n// define vtkImageLabelOutlineOn\\n//VTK::ImageLabelOutlineOn\\n\\n// Texture coordinates\\n//VTK::TCoord::Dec\\n\\n// picking support\\n//VTK::Picking::Dec\\n\\n// Depth Peeling Support\\n//VTK::DepthPeeling::Dec\\n\\n// clipping plane vars\\n//VTK::Clip::Dec\\n\\n// label outline \\n//VTK::LabelOutline::Dec\\n\\n// the output of this shader\\n//VTK::Output::Dec\\n\\n// Apple Bug\\n//VTK::PrimID::Dec\\n\\n// handle coincident offsets\\n//VTK::Coincident::Dec\\n\\n//VTK::ZBuffer::Dec\\n\\n//VTK::LabelOutlineHelperFunction\\n\\nvoid main()\\n{\\n  // VC position of this fragment. This should not branch/return/discard.\\n  //VTK::PositionVC::Impl\\n\\n  // Place any calls that require uniform flow (e.g. dFdx) here.\\n  //VTK::UniformFlow::Impl\\n\\n  // Set gl_FragDepth here (gl_FragCoord.z by default)\\n  //VTK::Depth::Impl\\n\\n  // Early depth peeling abort:\\n  //VTK::DepthPeeling::PreColor\\n\\n  // Apple Bug\\n  //VTK::PrimID::Impl\\n\\n  //VTK::Clip::Impl\\n\\n  //VTK::Color::Impl\\n\\n  // Generate the normal if we are not passed in one\\n  //VTK::Normal::Impl\\n\\n  //VTK::TCoord::Impl\\n\\n  //VTK::Light::Impl\\n\\n  if (gl_FragData[0].a <= 0.0)\\n    {\\n    discard;\\n    }\\n\\n  //VTK::DepthPeeling::Impl\\n\\n  //VTK::Picking::Impl\\n\\n  // handle coincident offsets\\n  //VTK::Coincident::Impl\\n\\n  //VTK::ZBuffer::Impl\\n\\n  //VTK::RenderPassFragmentShader::Impl\\n}\\n\";\n\nexport { vtkPolyDataFS as v };\n", "import vtkShaderProgram from './ShaderProgram.js';\n\nfunction implementReplaceShaderCoincidentOffset(publicAPI, model) {\n  publicAPI.replaceShaderCoincidentOffset = (shaders, ren, actor) => {\n    const cp = publicAPI.getCoincidentParameters(ren, actor);\n\n    // if we need an offset handle it here\n    // The value of .000016 is suitable for depth buffers\n    // of at least 16 bit depth. We do not query the depth\n    // right now because we would need some mechanism to\n    // cache the result taking into account FBO changes etc.\n    if (cp && (cp.factor !== 0.0 || cp.offset !== 0.0)) {\n      let FSSource = shaders.Fragment;\n      FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Coincident::Dec', ['uniform float cfactor;', 'uniform float coffset;']).result;\n      if (model.context.getExtension('EXT_frag_depth')) {\n        if (cp.factor !== 0.0) {\n          FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::UniformFlow::Impl', ['float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));', '//VTK::UniformFlow::Impl'], false).result;\n          FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Depth::Impl', 'gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;').result;\n        } else {\n          FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Depth::Impl', 'gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;').result;\n        }\n      }\n      if (model._openGLRenderWindow.getWebgl2()) {\n        if (cp.factor !== 0.0) {\n          FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::UniformFlow::Impl', ['float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));', '//VTK::UniformFlow::Impl'], false).result;\n          FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Depth::Impl', 'gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;').result;\n        } else {\n          FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Depth::Impl', 'gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;').result;\n        }\n      }\n      shaders.Fragment = FSSource;\n    }\n  };\n}\nfunction implementBuildShadersWithReplacements(publicAPI, model) {\n  publicAPI.applyShaderReplacements = (shaders, viewSpec, pre) => {\n    let shaderReplacements = null;\n    if (viewSpec) {\n      shaderReplacements = viewSpec.ShaderReplacements;\n    }\n    if (shaderReplacements) {\n      for (let i = 0; i < shaderReplacements.length; i++) {\n        const currReplacement = shaderReplacements[i];\n        if (pre && currReplacement.replaceFirst || !pre && !currReplacement.replaceFirst) {\n          const shaderType = currReplacement.shaderType;\n          const ssrc = shaders[shaderType];\n          const substituteRes = vtkShaderProgram.substitute(ssrc, currReplacement.originalValue, currReplacement.replacementValue, currReplacement.replaceAll);\n          shaders[shaderType] = substituteRes.result;\n        }\n      }\n    }\n  };\n  publicAPI.buildShaders = (shaders, ren, actor) => {\n    publicAPI.getReplacedShaderTemplate(shaders, ren, actor);\n    model.lastRenderPassShaderReplacement = model.currentRenderPass ? model.currentRenderPass.getShaderReplacement() : null;\n\n    // apply any renderPassReplacements\n    if (model.lastRenderPassShaderReplacement) {\n      model.lastRenderPassShaderReplacement(shaders);\n    }\n    const openGLSpec = model.renderable.getViewSpecificProperties().OpenGL;\n\n    // user specified pre replacements\n    publicAPI.applyShaderReplacements(shaders, openGLSpec, true);\n    publicAPI.replaceShaderValues(shaders, ren, actor);\n\n    // user specified post replacements\n    publicAPI.applyShaderReplacements(shaders, openGLSpec);\n  };\n  publicAPI.getReplacedShaderTemplate = (shaders, ren, actor) => {\n    const openGLSpecProp = model.renderable.getViewSpecificProperties().OpenGL;\n    publicAPI.getShaderTemplate(shaders, ren, actor);\n    let vertexShaderCode = shaders.Vertex;\n    if (openGLSpecProp) {\n      const vertexSpecProp = openGLSpecProp.VertexShaderCode;\n      if (vertexSpecProp !== undefined && vertexSpecProp !== '') {\n        vertexShaderCode = vertexSpecProp;\n      }\n    }\n    shaders.Vertex = vertexShaderCode;\n    let fragmentShaderCode = shaders.Fragment;\n    if (openGLSpecProp) {\n      const fragmentSpecProp = openGLSpecProp.FragmentShaderCode;\n      if (fragmentSpecProp !== undefined && fragmentSpecProp !== '') {\n        fragmentShaderCode = fragmentSpecProp;\n      }\n    }\n    shaders.Fragment = fragmentShaderCode;\n    let geometryShaderCode = shaders.Geometry;\n    if (openGLSpecProp) {\n      const geometrySpecProp = openGLSpecProp.GeometryShaderCode;\n      if (geometrySpecProp !== undefined) {\n        geometryShaderCode = geometrySpecProp;\n      }\n    }\n    shaders.Geometry = geometryShaderCode;\n  };\n}\nvar vtkReplacementShaderMapper = {\n  implementReplaceShaderCoincidentOffset,\n  implementBuildShadersWithReplacements\n};\n\nexport { vtkReplacementShaderMapper as default };\n", "import { mat3, mat4, vec3 } from 'gl-matrix';\nimport { n as newInstance$1, e as setGet, o as obj, c as macro } from '../../macros2.js';\nimport vtkHelper from './Helper.js';\nimport vtkMapper from '../Core/Mapper.js';\nimport { l as normalize } from '../../Common/Core/Math/index.js';\nimport vtkOpenGLTexture from './Texture.js';\nimport vtkProp from '../Core/Prop.js';\nimport vtkProperty from '../Core/Property.js';\nimport vtkShaderProgram from './ShaderProgram.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { v as vtkPolyDataVS } from './glsl/vtkPolyDataVS.glsl.js';\nimport { v as vtkPolyDataFS } from './glsl/vtkPolyDataFS.glsl.js';\nimport vtkReplacementShaderMapper from './ReplacementShaderMapper.js';\nimport { registerOverride } from './ViewNodeFactory.js';\nimport { PassTypes } from './HardwareSelector/Constants.js';\nimport vtkDataSet from '../../Common/DataModel/DataSet.js';\nimport '../Core/Mapper/CoincidentTopologyHelper.js';\nimport { Resolve } from '../Core/Mapper/Static.js';\n\nconst {\n  FieldAssociations\n} = vtkDataSet;\n\n/* eslint-disable no-lonely-if */\n\nconst {\n  primTypes\n} = vtkHelper;\nconst {\n  Representation,\n  Shading\n} = vtkProperty;\nconst {\n  ScalarMode\n} = vtkMapper;\nconst {\n  Filter,\n  Wrap\n} = vtkOpenGLTexture;\nconst {\n  vtkErrorMacro\n} = macro;\nconst StartEvent = {\n  type: 'StartEvent'\n};\nconst EndEvent = {\n  type: 'EndEvent'\n};\nconst {\n  CoordinateSystem\n} = vtkProp;\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLPolyDataMapper methods\n// ----------------------------------------------------------------------------\n\nfunction getPickState(renderer) {\n  const selector = renderer.getSelector();\n  if (selector) {\n    return selector.getCurrentPass();\n  }\n  return PassTypes.MIN_KNOWN_PASS - 1;\n}\nfunction vtkOpenGLPolyDataMapper(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLPolyDataMapper');\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      model.currentRenderPass = null;\n      model.openGLActor = publicAPI.getFirstAncestorOfType('vtkOpenGLActor');\n      model._openGLRenderer = model.openGLActor.getFirstAncestorOfType('vtkOpenGLRenderer');\n      model._openGLRenderWindow = model._openGLRenderer.getLastAncestorOfType('vtkOpenGLRenderWindow');\n      model.openGLCamera = model._openGLRenderer.getViewNodeFor(model._openGLRenderer.getRenderable().getActiveCamera(), model.openGLCamera);\n    }\n  };\n\n  // Renders myself\n  publicAPI.translucentPass = (prepass, renderPass) => {\n    if (prepass) {\n      model.currentRenderPass = renderPass;\n      publicAPI.render();\n    }\n  };\n  publicAPI.zBufferPass = prepass => {\n    if (prepass) {\n      model.haveSeenDepthRequest = true;\n      model.renderDepth = true;\n      publicAPI.render();\n      model.renderDepth = false;\n    }\n  };\n  publicAPI.opaqueZBufferPass = prepass => publicAPI.zBufferPass(prepass);\n  publicAPI.opaquePass = prepass => {\n    if (prepass) {\n      publicAPI.render();\n    }\n  };\n  publicAPI.render = () => {\n    const ctx = model._openGLRenderWindow.getContext();\n    if (model.context !== ctx) {\n      model.context = ctx;\n      for (let i = primTypes.Start; i < primTypes.End; i++) {\n        model.primitives[i].setOpenGLRenderWindow(model._openGLRenderWindow);\n      }\n    }\n    const actor = model.openGLActor.getRenderable();\n    const ren = model._openGLRenderer.getRenderable();\n    publicAPI.renderPiece(ren, actor);\n  };\n  publicAPI.getShaderTemplate = (shaders, ren, actor) => {\n    shaders.Vertex = vtkPolyDataVS;\n    shaders.Fragment = vtkPolyDataFS;\n    shaders.Geometry = '';\n  };\n  publicAPI.replaceShaderColor = (shaders, ren, actor) => {\n    let VSSource = shaders.Vertex;\n    let GSSource = shaders.Geometry;\n    let FSSource = shaders.Fragment;\n    const lastLightComplexity = model.lastBoundBO.getReferenceByName('lastLightComplexity');\n\n    // create the material/color property declarations, and VS implementation\n    // these are always defined\n    let colorDec = ['uniform float ambient;', 'uniform float diffuse;', 'uniform float specular;', 'uniform float opacityUniform; // the fragment opacity', 'uniform vec3 ambientColorUniform;', 'uniform vec3 diffuseColorUniform;'];\n    // add more for specular\n    if (lastLightComplexity) {\n      colorDec = colorDec.concat(['uniform vec3 specularColorUniform;', 'uniform float specularPowerUniform;']);\n    }\n\n    // now handle the more complex fragment shader implementation\n    // the following are always defined variables.  We start\n    // by assigning a default value from the uniform\n    let colorImpl = ['vec3 ambientColor;', '  vec3 diffuseColor;', '  float opacity;'];\n    if (lastLightComplexity) {\n      colorImpl = colorImpl.concat(['  vec3 specularColor;', '  float specularPower;']);\n    }\n    colorImpl = colorImpl.concat(['  ambientColor = ambientColorUniform;', '  diffuseColor = diffuseColorUniform;', '  opacity = opacityUniform;']);\n    if (lastLightComplexity) {\n      colorImpl = colorImpl.concat(['  specularColor = specularColorUniform;', '  specularPower = specularPowerUniform;']);\n    }\n\n    // add scalar vertex coloring\n    if (model.lastBoundBO.getCABO().getColorComponents() !== 0 && !model.drawingEdges) {\n      colorDec = colorDec.concat(['varying vec4 vertexColorVSOutput;']);\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::Color::Dec', ['attribute vec4 scalarColor;', 'varying vec4 vertexColorVSOutput;']).result;\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::Color::Impl', ['vertexColorVSOutput =  scalarColor;']).result;\n      GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::Color::Dec', ['in vec4 vertexColorVSOutput[];', 'out vec4 vertexColorGSOutput;']).result;\n      GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::Color::Impl', ['vertexColorGSOutput = vertexColorVSOutput[i];']).result;\n    }\n    if (model.lastBoundBO.getCABO().getColorComponents() !== 0 && !model.drawingEdges) {\n      FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Color::Impl', colorImpl.concat(['  diffuseColor = vertexColorVSOutput.rgb;', '  ambientColor = vertexColorVSOutput.rgb;', '  opacity = opacity*vertexColorVSOutput.a;'])).result;\n    } else {\n      if ((model.renderable.getAreScalarsMappedFromCells() || model.renderable.getInterpolateScalarsBeforeMapping()) && model.renderable.getColorCoordinates() && !model.drawingEdges) {\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Color::Impl', colorImpl.concat(['  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);', '  diffuseColor = texColor.rgb;', '  ambientColor = texColor.rgb;', '  opacity = opacity*texColor.a;'])).result;\n      } else {\n        if (actor.getBackfaceProperty() && !model.drawingEdges) {\n          colorDec = colorDec.concat(['uniform float opacityUniformBF; // the fragment opacity', 'uniform float ambientIntensityBF; // the material ambient', 'uniform float diffuseIntensityBF; // the material diffuse', 'uniform vec3 ambientColorUniformBF; // ambient material color', 'uniform vec3 diffuseColorUniformBF; // diffuse material color']);\n          if (lastLightComplexity) {\n            colorDec = colorDec.concat(['uniform float specularIntensityBF; // the material specular intensity', 'uniform vec3 specularColorUniformBF; // intensity weighted color', 'uniform float specularPowerUniformBF;']);\n            colorImpl = colorImpl.concat(['if (gl_FrontFacing == false) {', '  ambientColor = ambientIntensityBF * ambientColorUniformBF;', '  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;', '  specularColor = specularIntensityBF * specularColorUniformBF;', '  specularPower = specularPowerUniformBF;', '  opacity = opacityUniformBF; }']);\n          } else {\n            colorImpl = colorImpl.concat(['if (gl_FrontFacing == false) {', '  ambientColor = ambientIntensityBF * ambientColorUniformBF;', '  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;', '  opacity = opacityUniformBF; }']);\n          }\n        }\n        if (model.haveCellScalars && !model.drawingEdges) {\n          colorDec = colorDec.concat(['uniform samplerBuffer texture1;']);\n        }\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Color::Impl', colorImpl).result;\n      }\n    }\n    FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Color::Dec', colorDec).result;\n    shaders.Vertex = VSSource;\n    shaders.Geometry = GSSource;\n    shaders.Fragment = FSSource;\n  };\n  publicAPI.replaceShaderLight = (shaders, ren, actor) => {\n    let FSSource = shaders.Fragment;\n\n    // check for shadow maps\n    const shadowFactor = '';\n    const lastLightComplexity = model.lastBoundBO.getReferenceByName('lastLightComplexity');\n    const lastLightCount = model.lastBoundBO.getReferenceByName('lastLightCount');\n    let sstring = [];\n    switch (lastLightComplexity) {\n      case 0:\n        // no lighting or RENDER_VALUES\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Light::Impl', ['  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);', '  //VTK::Light::Impl'], false).result;\n        break;\n      case 1:\n        // headlight\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Light::Impl', ['  float df = max(0.0, normalVCVSOutput.z);', '  float sf = pow(df, specularPower);', '  vec3 diffuseL = df * diffuseColor;', '  vec3 specularL = sf * specularColor;', '  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);', '  //VTK::Light::Impl'], false).result;\n        break;\n      case 2:\n        // light kit\n        for (let lc = 0; lc < lastLightCount; ++lc) {\n          sstring = sstring.concat([`uniform vec3 lightColor${lc};`, `uniform vec3 lightDirectionVC${lc}; // normalized`, `uniform vec3 lightHalfAngleVC${lc}; // normalized`]);\n        }\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Light::Dec', sstring).result;\n        sstring = ['vec3 diffuseL = vec3(0,0,0);', '  vec3 specularL = vec3(0,0,0);', '  float df;'];\n        for (let lc = 0; lc < lastLightCount; ++lc) {\n          sstring = sstring.concat([`  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC${lc}));`, `  diffuseL += ((df${shadowFactor}) * lightColor${lc});`, `  if (dot(normalVCVSOutput, lightDirectionVC${lc}) < 0.0)`, '    {', `    float sf = sign(df)*pow(max(1e-5,\n                                              dot(reflect(lightDirectionVC${lc},normalVCVSOutput),\n                                                  normalize(-vertexVC.xyz))),\n                                         specularPower);`, `    specularL += (sf${shadowFactor} * lightColor${lc});`, '    }']);\n        }\n        sstring = sstring.concat(['  diffuseL = diffuseL * diffuseColor;', '  specularL = specularL * specularColor;', '  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);', '  //VTK::Light::Impl']);\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Light::Impl', sstring, false).result;\n        break;\n      case 3:\n        // positional\n        for (let lc = 0; lc < lastLightCount; ++lc) {\n          sstring = sstring.concat([`uniform vec3 lightColor${lc};`, `uniform vec3 lightDirectionVC${lc}; // normalized`, `uniform vec3 lightHalfAngleVC${lc}; // normalized`, `uniform vec3 lightPositionVC${lc};`, `uniform vec3 lightAttenuation${lc};`, `uniform float lightConeAngle${lc};`, `uniform float lightExponent${lc};`, `uniform int lightPositional${lc};`]);\n        }\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Light::Dec', sstring).result;\n        sstring = ['vec3 diffuseL = vec3(0,0,0);', '  vec3 specularL = vec3(0,0,0);', '  vec3 vertLightDirectionVC;', '  float attenuation;', '  float df;'];\n        for (let lc = 0; lc < lastLightCount; ++lc) {\n          sstring = sstring.concat(['  attenuation = 1.0;', `  if (lightPositional${lc} == 0)`, '    {', `      vertLightDirectionVC = lightDirectionVC${lc};`, '    }', '  else', '    {', `    vertLightDirectionVC = vertexVC.xyz - lightPositionVC${lc};`, '    float distanceVC = length(vertLightDirectionVC);', '    vertLightDirectionVC = normalize(vertLightDirectionVC);', '    attenuation = 1.0 /', `      (lightAttenuation${lc}.x`, `       + lightAttenuation${lc}.y * distanceVC`, `       + lightAttenuation${lc}.z * distanceVC * distanceVC);`, '    // per OpenGL standard cone angle is 90 or less for a spot light', `    if (lightConeAngle${lc} <= 90.0)`, '      {', `      float coneDot = dot(vertLightDirectionVC, lightDirectionVC${lc});`, '      // if inside the cone', `      if (coneDot >= cos(radians(lightConeAngle${lc})))`, '        {', `        attenuation = attenuation * pow(coneDot, lightExponent${lc});`, '        }', '      else', '        {', '        attenuation = 0.0;', '        }', '      }', '    }', '    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));', `    diffuseL += ((df${shadowFactor}) * lightColor${lc});`, '    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)', '      {', `      float sf = sign(df)*attenuation*pow(max(1e-5,\n                                                           dot(reflect(lightDirectionVC${lc},\n                                                                       normalVCVSOutput),\n                                                               normalize(-vertexVC.xyz))),\n                                                       specularPower);`, `    specularL += ((sf${shadowFactor}) * lightColor${lc});`, '    }']);\n        }\n        sstring = sstring.concat(['  diffuseL = diffuseL * diffuseColor;', '  specularL = specularL * specularColor;', '  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);', '  //VTK::Light::Impl']);\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Light::Impl', sstring, false).result;\n        break;\n      default:\n        vtkErrorMacro('bad light complexity');\n    }\n    shaders.Fragment = FSSource;\n  };\n  publicAPI.replaceShaderNormal = (shaders, ren, actor) => {\n    const lastLightComplexity = model.lastBoundBO.getReferenceByName('lastLightComplexity');\n    if (lastLightComplexity > 0) {\n      let VSSource = shaders.Vertex;\n      let GSSource = shaders.Geometry;\n      let FSSource = shaders.Fragment;\n      if (model.lastBoundBO.getCABO().getNormalOffset()) {\n        VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::Normal::Dec', ['attribute vec3 normalMC;', 'uniform mat3 normalMatrix;', 'varying vec3 normalVCVSOutput;']).result;\n        VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::Normal::Impl', ['normalVCVSOutput = normalMatrix * normalMC;']).result;\n        GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::Normal::Dec', ['in vec3 normalVCVSOutput[];', 'out vec3 normalVCGSOutput;']).result;\n        GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::Normal::Impl', ['normalVCGSOutput = normalVCVSOutput[i];']).result;\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Normal::Dec', ['varying vec3 normalVCVSOutput;']).result;\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Normal::Impl', ['vec3 normalVCVSOutput = normalize(normalVCVSOutput);',\n        //  if (!gl_FrontFacing) does not work in intel hd4000 mac\n        //  if (int(gl_FrontFacing) == 0) does not work on mesa\n        '  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }']).result;\n      } else {\n        if (model.haveCellNormals) {\n          FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Normal::Dec', ['uniform mat3 normalMatrix;', 'uniform samplerBuffer textureN;']).result;\n          FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Normal::Impl', ['vec3 normalVCVSOutput = normalize(normalMatrix *', '    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);', '  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }']).result;\n        } else {\n          if (model.lastBoundBO.getOpenGLMode(actor.getProperty().getRepresentation()) === model.context.LINES) {\n            // generate a normal for lines, it will be perpendicular to the line\n            // and maximally aligned with the camera view direction\n            // no clue if this is the best way to do this.\n            // the code below has been optimized a bit so what follows is\n            // an explanation of the basic approach. Compute the gradient of the line\n            // with respect to x and y, the the larger of the two\n            // cross that with the camera view direction. That gives a vector\n            // orthogonal to the camera view and the line. Note that the line and the camera\n            // view are probably not orthogonal. Which is why when we cross result that with\n            // the line gradient again we get a reasonable normal. It will be othogonal to\n            // the line (which is a plane but maximally aligned with the camera view.\n            FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::UniformFlow::Impl', ['  vec3 fdx = dFdx(vertexVC.xyz);', '  vec3 fdy = dFdy(vertexVC.xyz);', '  //VTK::UniformFlow::Impl'] // For further replacements\n            ).result;\n            FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Normal::Impl', ['vec3 normalVCVSOutput;', '  if (abs(fdx.x) > 0.0)', '    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }', '  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}']).result;\n          } else {\n            FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Normal::Dec', ['uniform int cameraParallel;']).result;\n            FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::UniformFlow::Impl', [\n            // '  vec3 fdx = vec3(dFdx(vertexVC.x),dFdx(vertexVC.y),dFdx(vertexVC.z));',\n            // '  vec3 fdy = vec3(dFdy(vertexVC.x),dFdy(vertexVC.y),dFdy(vertexVC.z));',\n            '  vec3 fdx = dFdx(vertexVC.xyz);', '  vec3 fdy = dFdy(vertexVC.xyz);', '  //VTK::UniformFlow::Impl'] // For further replacements\n            ).result;\n            FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Normal::Impl', ['  fdx = normalize(fdx);', '  fdy = normalize(fdy);', '  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));',\n            // the code below is faster, but does not work on some devices\n            // 'vec3 normalVC = normalize(cross(dFdx(vertexVC.xyz), dFdy(vertexVC.xyz)));',\n            '  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }', '  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }']).result;\n          }\n        }\n      }\n      shaders.Vertex = VSSource;\n      shaders.Geometry = GSSource;\n      shaders.Fragment = FSSource;\n    }\n  };\n  publicAPI.replaceShaderPositionVC = (shaders, ren, actor) => {\n    // replace common shader code\n    model.lastBoundBO.replaceShaderPositionVC(shaders, ren, actor);\n    let VSSource = shaders.Vertex;\n    let GSSource = shaders.Geometry;\n    let FSSource = shaders.Fragment;\n\n    // do we need the vertex in the shader in View Coordinates\n    const lastLightComplexity = model.lastBoundBO.getReferenceByName('lastLightComplexity');\n    if (lastLightComplexity > 0) {\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::PositionVC::Dec', ['varying vec4 vertexVCVSOutput;']).result;\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::PositionVC::Impl', ['vertexVCVSOutput = MCVCMatrix * vertexMC;', '  gl_Position = MCPCMatrix * vertexMC;']).result;\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::Camera::Dec', ['uniform mat4 MCPCMatrix;', 'uniform mat4 MCVCMatrix;']).result;\n      GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::PositionVC::Dec', ['in vec4 vertexVCVSOutput[];', 'out vec4 vertexVCGSOutput;']).result;\n      GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::PositionVC::Impl', ['vertexVCGSOutput = vertexVCVSOutput[i];']).result;\n      FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::PositionVC::Dec', ['varying vec4 vertexVCVSOutput;']).result;\n      FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::PositionVC::Impl', ['vec4 vertexVC = vertexVCVSOutput;']).result;\n    } else {\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::Camera::Dec', ['uniform mat4 MCPCMatrix;']).result;\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::PositionVC::Impl', ['  gl_Position = MCPCMatrix * vertexMC;']).result;\n    }\n    shaders.Vertex = VSSource;\n    shaders.Geometry = GSSource;\n    shaders.Fragment = FSSource;\n  };\n  publicAPI.replaceShaderTCoord = (shaders, ren, actor) => {\n    if (model.lastBoundBO.getCABO().getTCoordOffset()) {\n      let VSSource = shaders.Vertex;\n      let GSSource = shaders.Geometry;\n      let FSSource = shaders.Fragment;\n      if (model.drawingEdges) {\n        return;\n      }\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::TCoord::Impl', 'tcoordVCVSOutput = tcoordMC;').result;\n\n      // we only handle the first texture by default\n      // additional textures are activated and we set the uniform\n      // for the texture unit they are assigned to, but you have to\n      // add in the shader code to do something with them\n      const tus = model.openGLActor.getActiveTextures();\n      let tNumComp = 2;\n      let tcdim = 2;\n      if (tus && tus.length > 0) {\n        tNumComp = tus[0].getComponents();\n        if (tus[0].getTarget() === model.context.TEXTURE_CUBE_MAP) {\n          tcdim = 3;\n        }\n      }\n      if (model.renderable.getColorTextureMap()) {\n        tNumComp = model.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents();\n        tcdim = 2;\n      }\n      if (tcdim === 2) {\n        VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::TCoord::Dec', 'attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;').result;\n        GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::TCoord::Dec', ['in vec2 tcoordVCVSOutput[];', 'out vec2 tcoordVCGSOutput;']).result;\n        GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::TCoord::Impl', 'tcoordVCGSOutput = tcoordVCVSOutput[i];').result;\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::TCoord::Dec', ['varying vec2 tcoordVCVSOutput;', 'uniform sampler2D texture1;']).result;\n        if (tus && tus.length >= 1) {\n          switch (tNumComp) {\n            case 1:\n              FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::TCoord::Impl', ['  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);', '  ambientColor = ambientColor*tcolor.r;', '  diffuseColor = diffuseColor*tcolor.r;']).result;\n              break;\n            case 2:\n              FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::TCoord::Impl', ['  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);', '  ambientColor = ambientColor*tcolor.r;', '  diffuseColor = diffuseColor*tcolor.r;', '  opacity = opacity * tcolor.g;']).result;\n              break;\n            default:\n              FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::TCoord::Impl', ['  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);', '  ambientColor = ambientColor*tcolor.rgb;', '  diffuseColor = diffuseColor*tcolor.rgb;', '  opacity = opacity * tcolor.a;']).result;\n          }\n        }\n      } else {\n        VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::TCoord::Dec', 'attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;').result;\n        GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::TCoord::Dec', ['in vec3 tcoordVCVSOutput[];', 'out vec3 tcoordVCGSOutput;']).result;\n        GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::TCoord::Impl', 'tcoordVCGSOutput = tcoordVCVSOutput[i];').result;\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::TCoord::Dec', ['varying vec3 tcoordVCVSOutput;', 'uniform samplerCube texture1;']).result;\n        switch (tNumComp) {\n          case 1:\n            FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::TCoord::Impl', ['  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);', '  ambientColor = ambientColor*tcolor.r;', '  diffuseColor = diffuseColor*tcolor.r;']).result;\n            break;\n          case 2:\n            FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::TCoord::Impl', ['  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);', '  ambientColor = ambientColor*tcolor.r;', '  diffuseColor = diffuseColor*tcolor.r;', '  opacity = opacity * tcolor.g;']).result;\n            break;\n          default:\n            FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::TCoord::Impl', ['  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);', '  ambientColor = ambientColor*tcolor.rgb;', '  diffuseColor = diffuseColor*tcolor.rgb;', '  opacity = opacity * tcolor.a;']).result;\n        }\n      }\n      shaders.Vertex = VSSource;\n      shaders.Geometry = GSSource;\n      shaders.Fragment = FSSource;\n    }\n  };\n  publicAPI.replaceShaderClip = (shaders, ren, actor) => {\n    let VSSource = shaders.Vertex;\n    let FSSource = shaders.Fragment;\n    if (model.renderable.getNumberOfClippingPlanes()) {\n      const numClipPlanes = model.renderable.getNumberOfClippingPlanes();\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::Clip::Dec', ['uniform int numClipPlanes;', `uniform vec4 clipPlanes[${numClipPlanes}];`, `varying float clipDistancesVSOutput[${numClipPlanes}];`]).result;\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::Clip::Impl', [`for (int planeNum = 0; planeNum < ${numClipPlanes}; planeNum++)`, '    {', '    if (planeNum >= numClipPlanes)', '        {', '        break;', '        }', '    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);', '    }']).result;\n      FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Clip::Dec', ['uniform int numClipPlanes;', `varying float clipDistancesVSOutput[${numClipPlanes}];`]).result;\n      FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Clip::Impl', [`for (int planeNum = 0; planeNum < ${numClipPlanes}; planeNum++)`, '    {', '    if (planeNum >= numClipPlanes)', '        {', '        break;', '        }', '    if (clipDistancesVSOutput[planeNum] < 0.0) discard;', '    }']).result;\n    }\n    shaders.Vertex = VSSource;\n    shaders.Fragment = FSSource;\n  };\n  publicAPI.getCoincidentParameters = (ren, actor) => {\n    // 1. ResolveCoincidentTopology is On and non zero for this primitive\n    // type\n    let cp = {\n      factor: 0.0,\n      offset: 0.0\n    };\n    const prop = actor.getProperty();\n    if (\n    // backwards compat with code that (errorneously) set this to boolean\n    // eslint-disable-next-line eqeqeq\n    model.renderable.getResolveCoincidentTopology() == Resolve.PolygonOffset || prop.getEdgeVisibility() && prop.getRepresentation() === Representation.SURFACE) {\n      const primType = model.lastBoundBO.getPrimitiveType();\n      if (primType === primTypes.Points || prop.getRepresentation() === Representation.POINTS) {\n        cp = model.renderable.getCoincidentTopologyPointOffsetParameter();\n      } else if (primType === primTypes.Lines || prop.getRepresentation() === Representation.WIREFRAME) {\n        cp = model.renderable.getCoincidentTopologyLineOffsetParameters();\n      } else if (primType === primTypes.Tris || primType === primTypes.TriStrips) {\n        cp = model.renderable.getCoincidentTopologyPolygonOffsetParameters();\n      }\n      if (primType === primTypes.TrisEdges || primType === primTypes.TriStripsEdges) {\n        cp = model.renderable.getCoincidentTopologyPolygonOffsetParameters();\n        cp.factor /= 2.0;\n        cp.offset /= 2.0;\n      }\n    }\n\n    // hardware picking always offset due to saved zbuffer\n    // This gets you above the saved surface depth buffer.\n    const selector = model._openGLRenderer.getSelector();\n    if (selector && selector.getFieldAssociation() === FieldAssociations.FIELD_ASSOCIATION_POINTS) {\n      cp.offset -= 2.0;\n    }\n    return cp;\n  };\n  publicAPI.replaceShaderPicking = (shaders, ren, actor) => {\n    let FSSource = shaders.Fragment;\n    let VSSource = shaders.Vertex;\n    FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Picking::Dec', ['uniform int picking;', '//VTK::Picking::Dec']).result;\n    if (!model._openGLRenderer.getSelector()) {\n      return;\n    }\n    if (model.lastSelectionState === PassTypes.ID_LOW24 || model.lastSelectionState === PassTypes.ID_HIGH24) {\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::Picking::Dec', ['flat out int vertexIDVSOutput;\\n', 'uniform int VertexIDOffset;\\n']).result;\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::Picking::Impl', '  vertexIDVSOutput = gl_VertexID + VertexIDOffset;\\n').result;\n      FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Picking::Dec', 'flat in int vertexIDVSOutput;\\n').result;\n      FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Picking::Impl', ['  int idx = vertexIDVSOutput;', '//VTK::Picking::Impl']).result;\n    }\n    switch (model.lastSelectionState) {\n      case PassTypes.ID_LOW24:\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Picking::Impl', '  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);').result;\n        break;\n      case PassTypes.ID_HIGH24:\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Picking::Impl', '  gl_FragData[0] = vec4(float((idx/16777216)%256)/255.0, 0.0, 0.0, 1.0);').result;\n        break;\n      default:\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Picking::Dec', 'uniform vec3 mapperIndex;').result;\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Picking::Impl', '  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];').result;\n    }\n    shaders.Fragment = FSSource;\n    shaders.Vertex = VSSource;\n  };\n  publicAPI.replaceShaderValues = (shaders, ren, actor) => {\n    publicAPI.replaceShaderColor(shaders, ren, actor);\n    publicAPI.replaceShaderNormal(shaders, ren, actor);\n    publicAPI.replaceShaderLight(shaders, ren, actor);\n    publicAPI.replaceShaderTCoord(shaders, ren, actor);\n    publicAPI.replaceShaderPicking(shaders, ren, actor);\n    publicAPI.replaceShaderClip(shaders, ren, actor);\n    publicAPI.replaceShaderCoincidentOffset(shaders, ren, actor);\n    publicAPI.replaceShaderPositionVC(shaders, ren, actor);\n    if (model.haveSeenDepthRequest) {\n      let FSSource = shaders.Fragment;\n      FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::ZBuffer::Dec', 'uniform int depthRequest;').result;\n      FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::ZBuffer::Impl', ['if (depthRequest == 1) {', 'float iz = floor(gl_FragCoord.z*65535.0 + 0.1);', 'float rf = floor(iz/256.0)/255.0;', 'float gf = mod(iz,256.0)/255.0;', 'gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }']).result;\n      shaders.Fragment = FSSource;\n    }\n  };\n  publicAPI.getNeedToRebuildShaders = (cellBO, ren, actor) => {\n    let lightComplexity = 0;\n    let numberOfLights = 0;\n    const primType = cellBO.getPrimitiveType();\n    const poly = model.currentInput;\n\n    // different algo from C++ as of 5/2019\n    let needLighting = false;\n    const pointNormals = poly.getPointData().getNormals();\n    const cellNormals = poly.getCellData().getNormals();\n    const flat = actor.getProperty().getInterpolation() === Shading.FLAT;\n    const representation = actor.getProperty().getRepresentation();\n    const mode = cellBO.getOpenGLMode(representation, primType);\n    // 1) all surfaces need lighting\n    if (mode === model.context.TRIANGLES) {\n      needLighting = true;\n      // 2) all cell normals without point normals need lighting\n    } else if (cellNormals && !pointNormals) {\n      needLighting = true;\n      // 3) Phong + pointNormals need lighting\n    } else if (!flat && pointNormals) {\n      needLighting = true;\n      // 4) Phong Lines need lighting\n    } else if (!flat && mode === model.context.LINES) {\n      needLighting = true;\n    }\n    // 5) everything else is unlit\n\n    // do we need lighting?\n    if (actor.getProperty().getLighting() && needLighting) {\n      // consider the lighting complexity to determine which case applies\n      // simple headlight, Light Kit, the whole feature set of VTK\n      lightComplexity = 0;\n      const lights = ren.getLightsByReference();\n      for (let index = 0; index < lights.length; ++index) {\n        const light = lights[index];\n        const status = light.getSwitch();\n        if (status > 0) {\n          numberOfLights++;\n          if (lightComplexity === 0) {\n            lightComplexity = 1;\n          }\n        }\n        if (lightComplexity === 1 && (numberOfLights > 1 || light.getIntensity() !== 1.0 || !light.lightTypeIsHeadLight())) {\n          lightComplexity = 2;\n        }\n        if (lightComplexity < 3 && light.getPositional()) {\n          lightComplexity = 3;\n        }\n      }\n    }\n    let needRebuild = false;\n    const lastLightComplexity = model.lastBoundBO.getReferenceByName('lastLightComplexity');\n    const lastLightCount = model.lastBoundBO.getReferenceByName('lastLightCount');\n    if (lastLightComplexity !== lightComplexity || lastLightCount !== numberOfLights) {\n      model.lastBoundBO.set({\n        lastLightComplexity: lightComplexity\n      }, true);\n      model.lastBoundBO.set({\n        lastLightCount: numberOfLights\n      }, true);\n      needRebuild = true;\n    }\n\n    // has the render pass shader replacement changed? Two options\n    if (!model.currentRenderPass && model.lastRenderPassShaderReplacement || model.currentRenderPass && model.currentRenderPass.getShaderReplacement() !== model.lastRenderPassShaderReplacement) {\n      needRebuild = true;\n    }\n\n    // has something changed that would require us to recreate the shader?\n    // candidates are\n    // property modified (representation interpolation and lighting)\n    // input modified\n    // light complexity changed\n    // render pass shader replacement changed\n    if (model.lastHaveSeenDepthRequest !== model.haveSeenDepthRequest || cellBO.getShaderSourceTime().getMTime() < model.renderable.getMTime() || cellBO.getShaderSourceTime().getMTime() < model.currentInput.getMTime() || cellBO.getShaderSourceTime().getMTime() < model.selectionStateChanged.getMTime() || needRebuild) {\n      model.lastHaveSeenDepthRequest = model.haveSeenDepthRequest;\n      return true;\n    }\n    return false;\n  };\n  publicAPI.invokeShaderCallbacks = (cellBO, ren, actor) => {\n    const listCallbacks = model.renderable.getViewSpecificProperties().ShadersCallbacks;\n    if (listCallbacks) {\n      listCallbacks.forEach(object => {\n        object.callback(object.userData, cellBO, ren, actor);\n      });\n    }\n  };\n  publicAPI.setMapperShaderParameters = (cellBO, ren, actor) => {\n    // Now to update the VAO too, if necessary.\n    if (cellBO.getProgram().isUniformUsed('PrimitiveIDOffset')) {\n      cellBO.getProgram().setUniformi('PrimitiveIDOffset', model.primitiveIDOffset);\n    }\n    if (cellBO.getProgram().isUniformUsed('VertexIDOffset')) {\n      cellBO.getProgram().setUniformi('VertexIDOffset', model.vertexIDOffset);\n    }\n    if (cellBO.getCABO().getElementCount() && (model.VBOBuildTime.getMTime() > cellBO.getAttributeUpdateTime().getMTime() || cellBO.getShaderSourceTime().getMTime() > cellBO.getAttributeUpdateTime().getMTime())) {\n      const lastLightComplexity = model.lastBoundBO.getReferenceByName('lastLightComplexity');\n      if (cellBO.getProgram().isAttributeUsed('vertexMC')) {\n        if (!cellBO.getVAO().addAttributeArray(cellBO.getProgram(), cellBO.getCABO(), 'vertexMC', cellBO.getCABO().getVertexOffset(), cellBO.getCABO().getStride(), model.context.FLOAT, 3, false)) {\n          vtkErrorMacro('Error setting vertexMC in shader VAO.');\n        }\n      }\n      if (cellBO.getProgram().isAttributeUsed('normalMC') && cellBO.getCABO().getNormalOffset() && lastLightComplexity > 0) {\n        if (!cellBO.getVAO().addAttributeArray(cellBO.getProgram(), cellBO.getCABO(), 'normalMC', cellBO.getCABO().getNormalOffset(), cellBO.getCABO().getStride(), model.context.FLOAT, 3, false)) {\n          vtkErrorMacro('Error setting normalMC in shader VAO.');\n        }\n      } else {\n        cellBO.getVAO().removeAttributeArray('normalMC');\n      }\n      model.renderable.getCustomShaderAttributes().forEach((attrName, idx) => {\n        if (cellBO.getProgram().isAttributeUsed(`${attrName}MC`)) {\n          if (!cellBO.getVAO().addAttributeArray(cellBO.getProgram(), cellBO.getCABO(), `${attrName}MC`, cellBO.getCABO().getCustomData()[idx].offset, cellBO.getCABO().getStride(), model.context.FLOAT, cellBO.getCABO().getCustomData()[idx].components, false)) {\n            vtkErrorMacro(`Error setting ${attrName}MC in shader VAO.`);\n          }\n        }\n      });\n      if (cellBO.getProgram().isAttributeUsed('tcoordMC') && cellBO.getCABO().getTCoordOffset()) {\n        if (!cellBO.getVAO().addAttributeArray(cellBO.getProgram(), cellBO.getCABO(), 'tcoordMC', cellBO.getCABO().getTCoordOffset(), cellBO.getCABO().getStride(), model.context.FLOAT, cellBO.getCABO().getTCoordComponents(), false)) {\n          vtkErrorMacro('Error setting tcoordMC in shader VAO.');\n        }\n      } else {\n        cellBO.getVAO().removeAttributeArray('tcoordMC');\n      }\n      if (cellBO.getProgram().isAttributeUsed('scalarColor') && cellBO.getCABO().getColorComponents()) {\n        if (!cellBO.getVAO().addAttributeArray(cellBO.getProgram(), cellBO.getCABO().getColorBO(), 'scalarColor', cellBO.getCABO().getColorOffset(), cellBO.getCABO().getColorBOStride(), model.context.UNSIGNED_BYTE, 4, true)) {\n          vtkErrorMacro('Error setting scalarColor in shader VAO.');\n        }\n      } else {\n        cellBO.getVAO().removeAttributeArray('scalarColor');\n      }\n      cellBO.getAttributeUpdateTime().modified();\n    }\n    if (model.renderable.getNumberOfClippingPlanes()) {\n      // add all the clipping planes\n      const numClipPlanes = model.renderable.getNumberOfClippingPlanes();\n      const planeEquations = [];\n      const shiftScaleEnabled = cellBO.getCABO().getCoordShiftAndScaleEnabled();\n      const inverseShiftScaleMatrix = shiftScaleEnabled ? cellBO.getCABO().getInverseShiftAndScaleMatrix() : null;\n      const mat = inverseShiftScaleMatrix ? mat4.copy(model.tmpMat4, actor.getMatrix()) : actor.getMatrix();\n      if (inverseShiftScaleMatrix) {\n        mat4.transpose(mat, mat);\n        mat4.multiply(mat, mat, inverseShiftScaleMatrix);\n        mat4.transpose(mat, mat);\n      }\n      for (let i = 0; i < numClipPlanes; i++) {\n        const planeEquation = [];\n        model.renderable.getClippingPlaneInDataCoords(mat, i, planeEquation);\n        for (let j = 0; j < 4; j++) {\n          planeEquations.push(planeEquation[j]);\n        }\n      }\n      cellBO.getProgram().setUniformi('numClipPlanes', numClipPlanes);\n      cellBO.getProgram().setUniform4fv('clipPlanes', planeEquations);\n    }\n    if (model.internalColorTexture && cellBO.getProgram().isUniformUsed('texture1')) {\n      cellBO.getProgram().setUniformi('texture1', model.internalColorTexture.getTextureUnit());\n    }\n    const tus = model.openGLActor.getActiveTextures();\n    if (tus) {\n      for (let index = 0; index < tus.length; ++index) {\n        const tex = tus[index];\n        const texUnit = tex.getTextureUnit();\n        const tname = `texture${texUnit + 1}`;\n        if (cellBO.getProgram().isUniformUsed(tname)) {\n          cellBO.getProgram().setUniformi(tname, texUnit);\n        }\n      }\n    }\n\n    // handle depth requests\n    if (model.haveSeenDepthRequest) {\n      cellBO.getProgram().setUniformi('depthRequest', model.renderDepth ? 1 : 0);\n    }\n\n    // handle coincident\n    if (cellBO.getProgram().isUniformUsed('coffset')) {\n      const cp = publicAPI.getCoincidentParameters(ren, actor);\n      cellBO.getProgram().setUniformf('coffset', cp.offset);\n      // cfactor isn't always used when coffset is.\n      if (cellBO.getProgram().isUniformUsed('cfactor')) {\n        cellBO.getProgram().setUniformf('cfactor', cp.factor);\n      }\n    }\n\n    // handle wide lines\n    cellBO.setMapperShaderParameters(ren, actor, model._openGLRenderer.getTiledSizeAndOrigin());\n    const selector = model._openGLRenderer.getSelector();\n    cellBO.getProgram().setUniform3fArray('mapperIndex', selector ? selector.getPropColorValue() : [0.0, 0.0, 0.0]);\n    cellBO.getProgram().setUniformi('picking', selector ? selector.getCurrentPass() + 1 : 0);\n  };\n  publicAPI.setLightingShaderParameters = (cellBO, ren, actor) => {\n    // for unlit and headlight there are no lighting parameters\n    const lastLightComplexity = model.lastBoundBO.getReferenceByName('lastLightComplexity');\n    if (lastLightComplexity < 2) {\n      return;\n    }\n    const program = cellBO.getProgram();\n\n    // bind some light settings\n    let numberOfLights = 0;\n    const lights = ren.getLightsByReference();\n    for (let index = 0; index < lights.length; ++index) {\n      const light = lights[index];\n      const status = light.getSwitch();\n      if (status > 0.0) {\n        const dColor = light.getColorByReference();\n        const intensity = light.getIntensity();\n        model.lightColor[0] = dColor[0] * intensity;\n        model.lightColor[1] = dColor[1] * intensity;\n        model.lightColor[2] = dColor[2] * intensity;\n        // get required info from light\n        const ld = light.getDirection();\n        const transform = ren.getActiveCamera().getViewMatrix();\n        const newLightDirection = [...ld];\n        if (light.lightTypeIsSceneLight()) {\n          newLightDirection[0] = transform[0] * ld[0] + transform[1] * ld[1] + transform[2] * ld[2];\n          newLightDirection[1] = transform[4] * ld[0] + transform[5] * ld[1] + transform[6] * ld[2];\n          newLightDirection[2] = transform[8] * ld[0] + transform[9] * ld[1] + transform[10] * ld[2];\n          normalize(newLightDirection);\n        }\n        model.lightDirection[0] = newLightDirection[0];\n        model.lightDirection[1] = newLightDirection[1];\n        model.lightDirection[2] = newLightDirection[2];\n        normalize(model.lightDirection);\n        program.setUniform3fArray(`lightColor${numberOfLights}`, model.lightColor);\n        program.setUniform3fArray(`lightDirectionVC${numberOfLights}`, model.lightDirection);\n        numberOfLights++;\n      }\n    }\n\n    // we are done unless we have positional lights\n    if (lastLightComplexity < 3) {\n      return;\n    }\n\n    // for lightkit case there are some parameters to set\n    const cam = ren.getActiveCamera();\n    const viewTF = cam.getViewMatrix();\n    mat4.transpose(viewTF, viewTF);\n    numberOfLights = 0;\n    for (let index = 0; index < lights.length; ++index) {\n      const light = lights[index];\n      const status = light.getSwitch();\n      if (status > 0.0) {\n        const lp = light.getTransformedPosition();\n        const np = new Float64Array(3);\n        vec3.transformMat4(np, lp, viewTF);\n        program.setUniform3fArray(`lightAttenuation${numberOfLights}`, light.getAttenuationValuesByReference());\n        program.setUniformi(`lightPositional${numberOfLights}`, light.getPositional());\n        program.setUniformf(`lightExponent${numberOfLights}`, light.getExponent());\n        program.setUniformf(`lightConeAngle${numberOfLights}`, light.getConeAngle());\n        program.setUniform3fArray(`lightPositionVC${numberOfLights}`, [np[0], np[1], np[2]]);\n        numberOfLights++;\n      }\n    }\n  };\n  function safeMatrixMultiply(matrixArray, matrixType, tmpMat) {\n    matrixType.identity(tmpMat);\n    return matrixArray.reduce((res, matrix, index) => {\n      if (index === 0) {\n        return matrix ? matrixType.copy(res, matrix) : matrixType.identity(res);\n      }\n      return matrix ? matrixType.multiply(res, res, matrix) : res;\n    }, tmpMat);\n  }\n  publicAPI.setCameraShaderParameters = (cellBO, ren, actor) => {\n    const program = cellBO.getProgram();\n\n    // [WMVP]C == {world, model, view, projection} coordinates\n    // E.g., WCPC == world to projection coordinate transformation\n    const keyMats = model.openGLCamera.getKeyMatrices(ren);\n    const cam = ren.getActiveCamera();\n    const camm = model.openGLCamera.getKeyMatrixTime().getMTime();\n    const progm = program.getLastCameraMTime();\n    const shiftScaleEnabled = cellBO.getCABO().getCoordShiftAndScaleEnabled();\n    const inverseShiftScaleMatrix = shiftScaleEnabled ? cellBO.getCABO().getInverseShiftAndScaleMatrix() : null;\n    const actorIsIdentity = actor.getIsIdentity();\n    const actMats = actorIsIdentity ? {\n      mcwc: null,\n      normalMatrix: null\n    } : model.openGLActor.getKeyMatrices();\n    if (actor.getCoordinateSystem() === CoordinateSystem.DISPLAY) {\n      const size = model._openGLRenderer.getTiledSizeAndOrigin();\n      mat4.identity(model.tmpMat4);\n      model.tmpMat4[0] = 2.0 / size.usize;\n      model.tmpMat4[12] = -1.0;\n      model.tmpMat4[5] = 2.0 / size.vsize;\n      model.tmpMat4[13] = -1.0;\n      mat4.multiply(model.tmpMat4, model.tmpMat4, inverseShiftScaleMatrix);\n      program.setUniformMatrix('MCPCMatrix', model.tmpMat4);\n    } else {\n      program.setUniformMatrix('MCPCMatrix', safeMatrixMultiply([keyMats.wcpc, actMats.mcwc, inverseShiftScaleMatrix], mat4, model.tmpMat4));\n    }\n    if (program.isUniformUsed('MCVCMatrix')) {\n      program.setUniformMatrix('MCVCMatrix', safeMatrixMultiply([keyMats.wcvc, actMats.mcwc, inverseShiftScaleMatrix], mat4, model.tmpMat4));\n    }\n    if (program.isUniformUsed('normalMatrix')) {\n      program.setUniformMatrix3x3('normalMatrix', safeMatrixMultiply([keyMats.normalMatrix, actMats.normalMatrix], mat3, model.tmpMat3));\n    }\n    if (progm !== camm) {\n      if (program.isUniformUsed('cameraParallel')) {\n        program.setUniformi('cameraParallel', cam.getParallelProjection());\n      }\n      program.setLastCameraMTime(camm);\n    }\n    if (!actorIsIdentity) {\n      // reset the cam mtime as actor modified the shader values\n      program.setLastCameraMTime(0);\n    }\n  };\n  publicAPI.setPropertyShaderParameters = (cellBO, ren, actor) => {\n    const program = cellBO.getProgram();\n    let ppty = actor.getProperty();\n    let opacity = ppty.getOpacity();\n    let aColor = model.drawingEdges ? ppty.getEdgeColorByReference() : ppty.getAmbientColorByReference();\n    let dColor = model.drawingEdges ? ppty.getEdgeColorByReference() : ppty.getDiffuseColorByReference();\n    let aIntensity = model.drawingEdges ? 1.0 : ppty.getAmbient();\n    let dIntensity = model.drawingEdges ? 0.0 : ppty.getDiffuse();\n    let sIntensity = model.drawingEdges ? 0.0 : ppty.getSpecular();\n    const specularPower = ppty.getSpecularPower();\n    program.setUniformf('opacityUniform', opacity);\n    program.setUniform3fArray('ambientColorUniform', aColor);\n    program.setUniform3fArray('diffuseColorUniform', dColor);\n    program.setUniformf('ambient', aIntensity);\n    program.setUniformf('diffuse', dIntensity);\n\n    // we are done unless we have lighting\n    const lastLightComplexity = model.lastBoundBO.getReferenceByName('lastLightComplexity');\n    if (lastLightComplexity < 1) {\n      return;\n    }\n    let sColor = ppty.getSpecularColorByReference();\n    program.setUniform3fArray('specularColorUniform', sColor);\n    program.setUniformf('specularPowerUniform', specularPower);\n    program.setUniformf('specular', sIntensity);\n\n    // now set the backface properties if we have them\n    if (program.isUniformUsed('ambientIntensityBF')) {\n      ppty = actor.getBackfaceProperty();\n      opacity = ppty.getOpacity();\n      aColor = ppty.getAmbientColor();\n      aIntensity = ppty.getAmbient();\n      dColor = ppty.getDiffuseColor();\n      dIntensity = ppty.getDiffuse();\n      sColor = ppty.getSpecularColor();\n      sIntensity = ppty.getSpecular();\n      program.setUniformf('ambientIntensityBF', aIntensity);\n      program.setUniformf('diffuseIntensityBF', dIntensity);\n      program.setUniformf('opacityUniformBF', opacity);\n      program.setUniform3fArray('ambientColorUniformBF', aColor);\n      program.setUniform3fArray('diffuseColorUniformBF', dColor);\n\n      // we are done unless we have lighting\n      if (lastLightComplexity < 1) {\n        return;\n      }\n      program.setUniformf('specularIntensityBF', sIntensity);\n      program.setUniform3fArray('specularColorUniformBF', sColor);\n      program.setUniformf('specularPowerUniformBF', specularPower);\n    }\n  };\n  publicAPI.updateMaximumPointCellIds = (ren, actor) => {\n    const selector = model._openGLRenderer.getSelector();\n    if (!selector) {\n      return;\n    }\n    if (model.selectionWebGLIdsToVTKIds?.points?.length) {\n      const length = model.selectionWebGLIdsToVTKIds.points.length;\n      selector.setMaximumPointId(length - 1);\n    }\n    if (model.selectionWebGLIdsToVTKIds?.cells?.length) {\n      const length = model.selectionWebGLIdsToVTKIds.cells.length;\n      selector.setMaximumCellId(length - 1);\n    }\n    const fieldAssociation = selector.getFieldAssociation();\n    if (fieldAssociation === FieldAssociations.FIELD_ASSOCIATION_POINTS) {\n      model.pointPicking = true;\n    }\n  };\n  publicAPI.renderPieceStart = (ren, actor) => {\n    model.primitiveIDOffset = 0;\n    model.vertexIDOffset = 0;\n    const picking = getPickState(model._openGLRenderer);\n    if (model.lastSelectionState !== picking) {\n      model.selectionStateChanged.modified();\n      model.lastSelectionState = picking;\n    }\n    if (model._openGLRenderer.getSelector()) {\n      switch (picking) {\n        default:\n          model._openGLRenderer.getSelector().renderProp(actor);\n      }\n    }\n\n    // make sure the BOs are up to date\n    publicAPI.updateBufferObjects(ren, actor);\n\n    // If we are coloring by texture, then load the texture map.\n    // Use Map as indicator, because texture hangs around.\n    if (model.renderable.getColorTextureMap()) {\n      model.internalColorTexture.activate();\n    }\n\n    // Bind the OpenGL, this is shared between the different primitive/cell types.\n    model.lastBoundBO = null;\n  };\n  publicAPI.renderPieceDraw = (ren, actor) => {\n    const representation = actor.getProperty().getRepresentation();\n    const drawSurfaceWithEdges = actor.getProperty().getEdgeVisibility() && representation === Representation.SURFACE;\n    const selector = model._openGLRenderer.getSelector();\n    // If we are picking points, we need to tell it to the helper\n    const pointPicking = selector && selector.getFieldAssociation() === FieldAssociations.FIELD_ASSOCIATION_POINTS && (model.lastSelectionState === PassTypes.ID_LOW24 || model.lastSelectionState === PassTypes.ID_HIGH24);\n\n    // for every primitive type\n    for (let i = primTypes.Start; i < primTypes.End; i++) {\n      model.primitives[i].setPointPicking(pointPicking);\n      const cabo = model.primitives[i].getCABO();\n      if (cabo.getElementCount()) {\n        // are we drawing edges\n        model.drawingEdges = drawSurfaceWithEdges && (i === primTypes.TrisEdges || i === primTypes.TriStripsEdges);\n        // don't draw edges when rendering depth or rendering for picking\n        if (!model.drawingEdges || !(model.renderDepth || model.lastSelectionState >= 0)) {\n          model.lastBoundBO = model.primitives[i];\n          model.primitiveIDOffset += model.primitives[i].drawArrays(ren, actor, representation, publicAPI);\n          model.vertexIDOffset += model.primitives[i].getCABO().getElementCount();\n        }\n      }\n    }\n  };\n  publicAPI.renderPieceFinish = (ren, actor) => {\n    if (model.LastBoundBO) {\n      model.LastBoundBO.getVAO().release();\n    }\n    if (model.renderable.getColorTextureMap()) {\n      model.internalColorTexture.deactivate();\n    }\n  };\n  publicAPI.renderPiece = (ren, actor) => {\n    // Make sure that we have been properly initialized.\n    // if (ren.getRenderWindow().checkAbortStatus()) {\n    //   return;\n    // }\n\n    publicAPI.invokeEvent(StartEvent);\n    if (!model.renderable.getStatic()) {\n      model.renderable.update();\n    }\n    model.currentInput = model.renderable.getInputData();\n    publicAPI.invokeEvent(EndEvent);\n    if (!model.currentInput) {\n      vtkErrorMacro('No input!');\n      return;\n    }\n\n    // if there are no points then we are done\n    if (!model.currentInput.getPoints || !model.currentInput.getPoints().getNumberOfValues()) {\n      return;\n    }\n\n    // apply faceCulling\n    const gl = model.context;\n    const backfaceCulling = actor.getProperty().getBackfaceCulling();\n    const frontfaceCulling = actor.getProperty().getFrontfaceCulling();\n    if (!backfaceCulling && !frontfaceCulling) {\n      model._openGLRenderWindow.disableCullFace();\n    } else if (frontfaceCulling) {\n      model._openGLRenderWindow.enableCullFace();\n      gl.cullFace(gl.FRONT);\n    } else {\n      model._openGLRenderWindow.enableCullFace();\n      gl.cullFace(gl.BACK);\n    }\n    publicAPI.renderPieceStart(ren, actor);\n    publicAPI.renderPieceDraw(ren, actor);\n    publicAPI.renderPieceFinish(ren, actor);\n  };\n  publicAPI.updateBufferObjects = (ren, actor) => {\n    // Rebuild buffers if needed\n    if (publicAPI.getNeedToRebuildBufferObjects(ren, actor)) {\n      publicAPI.buildBufferObjects(ren, actor);\n    }\n    // Always call this function as the selector can change\n    publicAPI.updateMaximumPointCellIds();\n  };\n  publicAPI.getNeedToRebuildBufferObjects = (ren, actor) => {\n    // first do a coarse check\n    // Note that the actor's mtime includes it's properties mtime\n    const vmtime = model.VBOBuildTime.getMTime();\n    if (vmtime < publicAPI.getMTime() || vmtime < model.renderable.getMTime() || vmtime < actor.getMTime() || vmtime < model.currentInput.getMTime()) {\n      return true;\n    }\n    return false;\n  };\n  publicAPI.buildBufferObjects = (ren, actor) => {\n    const poly = model.currentInput;\n    if (poly === null) {\n      return;\n    }\n    model.renderable.mapScalars(poly, 1.0);\n    const c = model.renderable.getColorMapColors();\n    model.haveCellScalars = false;\n    const scalarMode = model.renderable.getScalarMode();\n    if (model.renderable.getScalarVisibility()) {\n      // We must figure out how the scalars should be mapped to the polydata.\n      if ((scalarMode === ScalarMode.USE_CELL_DATA || scalarMode === ScalarMode.USE_CELL_FIELD_DATA || scalarMode === ScalarMode.USE_FIELD_DATA || !poly.getPointData().getScalars()) && scalarMode !== ScalarMode.USE_POINT_FIELD_DATA && c) {\n        model.haveCellScalars = true;\n      }\n    }\n\n    // Do we have normals?\n    let n = actor.getProperty().getInterpolation() !== Shading.FLAT ? poly.getPointData().getNormals() : null;\n    if (n === null && poly.getCellData().getNormals()) {\n      model.haveCellNormals = true;\n      n = poly.getCellData().getNormals();\n    }\n\n    // rebuild the VBO if the data has changed we create a string for the VBO what\n    // can change the VBO? points normals tcoords colors so what can change those?\n    // the input data is clearly one as it can change all four items tcoords may\n    // haveTextures or not colors may change based on quite a few mapping\n    // parameters in the mapper\n\n    const representation = actor.getProperty().getRepresentation();\n    let tcoords = poly.getPointData().getTCoords();\n    if (!model.openGLActor.getActiveTextures()) {\n      tcoords = null;\n    }\n\n    // Flag to check if tcoords are per cell instead of per point\n    let useTCoordsPerCell = false;\n    // handle color mapping via texture\n    if (model.renderable.getColorCoordinates()) {\n      tcoords = model.renderable.getColorCoordinates();\n      useTCoordsPerCell = model.renderable.getAreScalarsMappedFromCells();\n      if (!model.internalColorTexture) {\n        model.internalColorTexture = vtkOpenGLTexture.newInstance({\n          resizable: true\n        });\n      }\n      const tex = model.internalColorTexture;\n      // the following 4 lines allow for NPOT textures\n      tex.setMinificationFilter(Filter.NEAREST);\n      tex.setMagnificationFilter(Filter.NEAREST);\n      tex.setWrapS(Wrap.CLAMP_TO_EDGE);\n      tex.setWrapT(Wrap.CLAMP_TO_EDGE);\n      tex.setOpenGLRenderWindow(model._openGLRenderWindow);\n      const input = model.renderable.getColorTextureMap();\n      const ext = input.getExtent();\n      const inScalars = input.getPointData().getScalars();\n      tex.create2DFromRaw({\n        width: ext[1] - ext[0] + 1,\n        height: ext[3] - ext[2] + 1,\n        numComps: inScalars.getNumberOfComponents(),\n        dataType: inScalars.getDataType(),\n        data: inScalars.getData()\n      });\n      tex.activate();\n      tex.sendParameters();\n      tex.deactivate();\n    }\n    const toString = `${poly.getMTime()}A${representation}B${poly.getMTime()}` + `C${n ? n.getMTime() : 1}D${c ? c.getMTime() : 1}` + `E${actor.getProperty().getEdgeVisibility()}` + `F${tcoords ? tcoords.getMTime() : 1}`;\n    if (model.VBOBuildString !== toString) {\n      // Build the VBOs\n      const points = poly.getPoints();\n      const options = {\n        points,\n        normals: n,\n        tcoords,\n        colors: c,\n        cellOffset: 0,\n        vertexOffset: 0,\n        // Used to keep track of vertex ids across primitives for selection\n        useTCoordsPerCell,\n        haveCellScalars: model.haveCellScalars,\n        haveCellNormals: model.haveCellNormals,\n        customAttributes: model.renderable.getCustomShaderAttributes().map(arrayName => poly.getPointData().getArrayByName(arrayName))\n      };\n      if (model.renderable.getPopulateSelectionSettings()) {\n        model.selectionWebGLIdsToVTKIds = {\n          points: null,\n          cells: null\n        };\n      }\n      const primitives = [{\n        inRep: 'verts',\n        cells: poly.getVerts()\n      }, {\n        inRep: 'lines',\n        cells: poly.getLines()\n      }, {\n        inRep: 'polys',\n        cells: poly.getPolys()\n      }, {\n        inRep: 'strips',\n        cells: poly.getStrips()\n      }, {\n        inRep: 'polys',\n        cells: poly.getPolys()\n      }, {\n        inRep: 'strips',\n        cells: poly.getStrips()\n      }];\n      const drawSurfaceWithEdges = actor.getProperty().getEdgeVisibility() && representation === Representation.SURFACE;\n      for (let i = primTypes.Start; i < primTypes.End; i++) {\n        if (i !== primTypes.TrisEdges && i !== primTypes.TriStripsEdges) {\n          options.cellOffset += model.primitives[i].getCABO().createVBO(primitives[i].cells, primitives[i].inRep, representation, options, model.selectionWebGLIdsToVTKIds);\n          options.vertexOffset += model.primitives[i].getCABO().getElementCount();\n        } else {\n          // if we have edge visibility build the edge VBOs\n          if (drawSurfaceWithEdges) {\n            // VBOs for edges in \"surface with edges\" are the last to be built,\n            // they are not used when picking with a hardware selector so they\n            // don't need selectionWebGLIdsToVTKIds and don't update cellOffset and vertexOffset\n            model.primitives[i].getCABO().createVBO(primitives[i].cells, primitives[i].inRep, Representation.WIREFRAME, {\n              ...options,\n              tcoords: null,\n              colors: null,\n              haveCellScalars: false,\n              haveCellNormals: false\n            });\n          } else {\n            // otherwise free them\n            model.primitives[i].releaseGraphicsResources();\n          }\n        }\n      }\n      if (model.renderable.getPopulateSelectionSettings()) {\n        model.renderable.setSelectionWebGLIdsToVTKIds(model.selectionWebGLIdsToVTKIds);\n      }\n      model.VBOBuildString = toString;\n    }\n    model.VBOBuildTime.modified();\n  };\n  publicAPI.getAllocatedGPUMemoryInBytes = () => {\n    let memUsed = 0;\n    model.primitives.forEach(prim => {\n      memUsed += prim.getAllocatedGPUMemoryInBytes();\n    });\n    // Return in MB\n    return memUsed;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  context: null,\n  VBOBuildTime: 0,\n  VBOBuildString: null,\n  primitives: null,\n  primTypes: null,\n  shaderRebuildString: null,\n  tmpMat4: null,\n  ambientColor: [],\n  // used internally\n  diffuseColor: [],\n  // used internally\n  specularColor: [],\n  // used internally\n  lightColor: [],\n  // used internally\n  lightDirection: [],\n  // used internally\n  lastHaveSeenDepthRequest: false,\n  haveSeenDepthRequest: false,\n  lastSelectionState: PassTypes.MIN_KNOWN_PASS - 1,\n  selectionStateChanged: null,\n  selectionWebGLIdsToVTKIds: null,\n  pointPicking: false\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  vtkReplacementShaderMapper.implementReplaceShaderCoincidentOffset(publicAPI, model, initialValues);\n  vtkReplacementShaderMapper.implementBuildShadersWithReplacements(publicAPI, model, initialValues);\n  model.primitives = [];\n  model.primTypes = primTypes;\n  model.tmpMat3 = mat3.identity(new Float64Array(9));\n  model.tmpMat4 = mat4.identity(new Float64Array(16));\n  for (let i = primTypes.Start; i < primTypes.End; i++) {\n    model.primitives[i] = vtkHelper.newInstance();\n    model.primitives[i].setPrimitiveType(i);\n    model.primitives[i].set({\n      lastLightComplexity: 0,\n      lastLightCount: 0,\n      lastSelectionPass: false\n    }, true);\n  }\n\n  // Build VTK API\n  setGet(publicAPI, model, ['context']);\n  model.VBOBuildTime = {};\n  obj(model.VBOBuildTime, {\n    mtime: 0\n  });\n  model.selectionStateChanged = {};\n  obj(model.selectionStateChanged, {\n    mtime: 0\n  });\n\n  // Object methods\n  vtkOpenGLPolyDataMapper(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkOpenGLPolyDataMapper');\n\n// ----------------------------------------------------------------------------\n\nvar vtkOpenGLPolyDataMapper$1 = {\n  newInstance,\n  extend\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkMapper', newInstance);\n\nexport { vtkOpenGLPolyDataMapper$1 as default, extend, newInstance };\n", "import { n as newInstance$1, c as macro } from '../../macros2.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\n// import { mat4, vec3 }     from 'gl-matrix';\nconst {\n  vtkDebugMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLPixelSpaceCallbackMapper methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLPixelSpaceCallbackMapper(publicAPI, model) {\n  model.classHierarchy.push('vtkOpenGLPixelSpaceCallbackMapper');\n  publicAPI.opaquePass = (prepass, renderPass) => {\n    model._openGLRenderer = publicAPI.getFirstAncestorOfType('vtkOpenGLRenderer');\n    model._openGLRenderWindow = model._openGLRenderer.getLastAncestorOfType('vtkOpenGLRenderWindow');\n    const aspectRatio = model._openGLRenderer.getAspectRatio();\n    const camera = model._openGLRenderer ? model._openGLRenderer.getRenderable().getActiveCamera() : null;\n    const tsize = model._openGLRenderer.getTiledSizeAndOrigin();\n    let texels = null;\n    if (model.renderable.getUseZValues()) {\n      const zbt = renderPass.getZBufferTexture();\n      const width = Math.floor(zbt.getWidth());\n      const height = Math.floor(zbt.getHeight());\n      const gl = model._openGLRenderWindow.getContext();\n      zbt.bind();\n\n      // Here we need to use vtkFramebuffer to save current settings (bindings/buffers)\n      const fb = renderPass.getFramebuffer();\n      if (!fb) {\n        vtkDebugMacro('No framebuffer to save/restore');\n      } else {\n        // save framebuffer settings\n        fb.saveCurrentBindingsAndBuffers();\n      }\n      const framebuffer = gl.createFramebuffer();\n      gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, zbt.getHandle(), 0);\n      if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n        texels = new Uint8Array(width * height * 4);\n        gl.viewport(0, 0, width, height);\n        gl.readPixels(0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, texels);\n      }\n\n      // Now we need to restore framebuffer bindings/buffers\n      if (fb) {\n        fb.restorePreviousBindingsAndBuffers();\n      }\n      gl.deleteFramebuffer(framebuffer);\n    }\n    model.renderable.invokeCallback(model.renderable.getInputData(), camera, aspectRatio, tsize, texels);\n  };\n  publicAPI.queryPass = (prepass, renderPass) => {\n    if (prepass) {\n      if (model.renderable.getUseZValues()) {\n        renderPass.requestDepth();\n      }\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n\n  // Object methods\n  vtkOpenGLPixelSpaceCallbackMapper(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkOpenGLPixelSpaceCallbackMapper');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPixelSpaceCallbackMapper = {\n  newInstance,\n  extend\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkPixelSpaceCallbackMapper', newInstance);\n\nexport { vtkPixelSpaceCallbackMapper as default, extend, newInstance };\n", "var vtkPolyData2DFS = \"//VTK::System::Dec\\n\\n/*=========================================================================\\n\\n  Program:   Visualization Toolkit\\n  Module:    vtkPolyData2DFS.glsl\\n\\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\\n  All rights reserved.\\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\\n\\n     This software is distributed WITHOUT ANY WARRANTY; without even\\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\\n     PURPOSE.  See the above copyright notice for more information.\\n\\n=========================================================================*/\\n\\nuniform int PrimitiveIDOffset;\\n\\n// Texture coordinates\\n//VTK::TCoord::Dec\\n\\n// Scalar coloring\\n//VTK::Color::Dec\\n\\n// Depth Peeling\\n//VTK::DepthPeeling::Dec\\n\\n// picking support\\n//VTK::Picking::Dec\\n\\n// the output of this shader\\n//VTK::Output::Dec\\n\\n// Apple Bug\\n//VTK::PrimID::Dec\\n\\nvoid main()\\n{\\n  // Apple Bug\\n  //VTK::PrimID::Impl\\n\\n  //VTK::Color::Impl\\n  //VTK::TCoord::Impl\\n\\n  //VTK::DepthPeeling::Impl\\n  //VTK::Picking::Impl\\n\\n  if (gl_FragData[0].a <= 0.0)\\n    {\\n    discard;\\n    }\\n}\\n\";\n\nexport { vtkPolyData2DFS as v };\n", "var vtkPolyData2DVS = \"//VTK::System::Dec\\n\\n/*=========================================================================\\n\\n  Program:   Visualization Toolkit\\n  Module:    vtkPolyData2DVS.glsl\\n\\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\\n  All rights reserved.\\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\\n\\n     This software is distributed WITHOUT ANY WARRANTY; without even\\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\\n     PURPOSE.  See the above copyright notice for more information.\\n\\n=========================================================================*/\\n\\n// all variables that represent positions or directions have a suffix\\n// indicating the coordinate system they are in. The possible values are\\n// MC - Model Coordinates\\n// WC - WC world coordinates\\n// VC - View Coordinates\\n// DC - Display Coordinates\\n\\nin vec4 vertexWC;\\n\\n// frag position in VC\\n//VTK::PositionVC::Dec\\n\\n// material property values\\n//VTK::Color::Dec\\n\\n// Texture coordinates\\n//VTK::TCoord::Dec\\n\\n// Apple Bug\\n//VTK::PrimID::Dec\\n\\nuniform mat4 WCVCMatrix;  // World to view matrix\\n\\nvoid main()\\n{\\n  // Apple Bug\\n  //VTK::PrimID::Impl\\n\\n  gl_Position = WCVCMatrix*vertexWC;\\n\\n  //VTK::TCoord::Impl\\n\\n  //VTK::Color::Impl\\n\\n  //VTK::PositionVC::Impl\\n}\\n\";\n\nexport { vtkPolyData2DVS as v };\n", "const DisplayLocation = {\n  BACKGROUND: 0,\n  FOREGROUND: 1\n};\nvar Constants = {\n  DisplayLocation\n};\n\nexport { DisplayLocation, Constants as default };\n", "import { mat4 } from 'gl-matrix';\nimport { n as newInstance$1, e as setGet, o as obj, c as macro } from '../../macros2.js';\nimport vtkHelper from './Helper.js';\nimport vtkPoints from '../../Common/Core/Points.js';\nimport { v as vtkPolyData2DFS } from './glsl/vtkPolyData2DFS.glsl.js';\nimport { v as vtkPolyData2DVS } from './glsl/vtkPolyData2DVS.glsl.js';\nimport vtkReplacementShaderMapper from './ReplacementShaderMapper.js';\nimport vtkShaderProgram from './ShaderProgram.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport vtkOpenGLTexture from './Texture.js';\nimport { R as round } from '../../Common/Core/Math/index.js';\nimport { DisplayLocation } from '../Core/Property2D/Constants.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\n// import { mat3, mat4, vec3 } from 'gl-matrix';\nconst {\n  primTypes\n} = vtkHelper;\nconst {\n  Filter,\n  Wrap\n} = vtkOpenGLTexture;\nconst {\n  vtkErrorMacro\n} = macro;\nconst StartEvent = {\n  type: 'StartEvent'\n};\nconst EndEvent = {\n  type: 'EndEvent'\n};\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLPolyDataMapper2D methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLPolyDataMapper2D(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLPolyDataMapper2D');\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      model.openGLActor2D = publicAPI.getFirstAncestorOfType('vtkOpenGLActor2D');\n      model._openGLRenderer = model.openGLActor2D.getFirstAncestorOfType('vtkOpenGLRenderer');\n      model._openGLRenderWindow = model._openGLRenderer.getLastAncestorOfType('vtkOpenGLRenderWindow');\n      model.openGLCamera = model._openGLRenderer.getViewNodeFor(model._openGLRenderer.getRenderable().getActiveCamera(), model.openGLCamera);\n    }\n  };\n  publicAPI.overlayPass = prepass => {\n    if (prepass) {\n      publicAPI.render();\n    }\n  };\n  publicAPI.getShaderTemplate = (shaders, ren, actor) => {\n    shaders.Vertex = vtkPolyData2DVS;\n    shaders.Fragment = vtkPolyData2DFS;\n    shaders.Geometry = '';\n  };\n  publicAPI.render = () => {\n    const ctx = model._openGLRenderWindow.getContext();\n    if (model.context !== ctx) {\n      model.context = ctx;\n      for (let i = primTypes.Start; i < primTypes.End; i++) {\n        model.primitives[i].setOpenGLRenderWindow(model._openGLRenderWindow);\n      }\n    }\n    const actor = model.openGLActor2D.getRenderable();\n    const ren = model._openGLRenderer.getRenderable();\n    publicAPI.renderPiece(ren, actor);\n  };\n  publicAPI.renderPiece = (ren, actor) => {\n    publicAPI.invokeEvent(StartEvent);\n    if (!model.renderable.getStatic()) {\n      model.renderable.update();\n    }\n    model.currentInput = model.renderable.getInputData();\n    publicAPI.invokeEvent(EndEvent);\n    if (!model.currentInput) {\n      vtkErrorMacro('No input!');\n      return;\n    }\n\n    // if there are no points then we are done\n    if (!model.currentInput.getPoints || !model.currentInput.getPoints().getNumberOfValues()) {\n      return;\n    }\n\n    // cull back face to avoid double drawing\n    const gl = model.context;\n    model._openGLRenderWindow.enableCullFace();\n    gl.cullFace(gl.BACK);\n    publicAPI.renderPieceStart(ren, actor);\n    publicAPI.renderPieceDraw(ren, actor);\n    publicAPI.renderPieceFinish(ren, actor);\n  };\n  publicAPI.renderPieceStart = (ren, actor) => {\n    model.primitiveIDOffset = 0;\n    if (model._openGLRenderer.getSelector()) {\n      switch (model._openGLRenderer.getSelector().getCurrentPass()) {\n        default:\n          model._openGLRenderer.getSelector().renderProp(actor);\n      }\n    }\n\n    // If we are coloring by texture, then load the texture map.\n    // Use Map as indicator, because texture hangs around.\n    if (model.renderable.getColorTextureMap()) {\n      model.internalColorTexture.activate();\n    }\n\n    // make sure the BOs are up to date\n    publicAPI.updateBufferObjects(ren, actor);\n\n    // Bind the OpenGL, this is shared between the different primitive/cell types.\n    model.lastBoundBO = null;\n  };\n  publicAPI.getNeedToRebuildShaders = (cellBO, ren, actor) => {\n    // has something changed that would require us to recreate the shader?\n    // candidates are\n    // property modified (representation interpolation and lighting)\n    // input modified\n    // light complexity changed\n    if (cellBO.getShaderSourceTime().getMTime() < model.renderable.getMTime() || cellBO.getShaderSourceTime().getMTime() < model.currentInput.getMTime()) {\n      return true;\n    }\n    return false;\n  };\n  publicAPI.updateBufferObjects = (ren, actor) => {\n    // Rebuild buffers if needed\n    if (publicAPI.getNeedToRebuildBufferObjects(ren, actor)) {\n      publicAPI.buildBufferObjects(ren, actor);\n    }\n  };\n  publicAPI.getNeedToRebuildBufferObjects = (ren, actor) => {\n    // first do a coarse check\n    // Note that the actor's mtime includes it's properties mtime\n    const vmtime = model.VBOBuildTime.getMTime();\n    if (vmtime < publicAPI.getMTime() || vmtime < model._openGLRenderWindow.getMTime() || vmtime < model.renderable.getMTime() || vmtime < actor.getMTime() || vmtime < model.currentInput.getMTime() || model.renderable.getTransformCoordinate() && vmtime < ren.getMTime()) {\n      return true;\n    }\n    return false;\n  };\n  publicAPI.buildBufferObjects = (ren, actor) => {\n    const poly = model.currentInput;\n    if (poly === null) {\n      return;\n    }\n    model.renderable.mapScalars(poly, actor.getProperty().getOpacity());\n    const c = model.renderable.getColorMapColors();\n    const representation = actor.getProperty().getRepresentation();\n    let tcoords = poly.getPointData().getTCoords();\n    if (!model.openGLActor2D.getActiveTextures()) {\n      tcoords = null;\n    }\n\n    // Flag to check if tcoords are per cell instead of per point\n    let useTCoordsPerCell = false;\n    // handle color mapping via texture\n    if (model.renderable.getColorCoordinates()) {\n      tcoords = model.renderable.getColorCoordinates();\n      useTCoordsPerCell = model.renderable.getAreScalarsMappedFromCells();\n      if (!model.internalColorTexture) {\n        model.internalColorTexture = vtkOpenGLTexture.newInstance({\n          resizable: true\n        });\n      }\n      const tex = model.internalColorTexture;\n      // the following 4 lines allow for NPOT textures\n      tex.setMinificationFilter(Filter.NEAREST);\n      tex.setMagnificationFilter(Filter.NEAREST);\n      tex.setWrapS(Wrap.CLAMP_TO_EDGE);\n      tex.setWrapT(Wrap.CLAMP_TO_EDGE);\n      tex.setOpenGLRenderWindow(model._openGLRenderWindow);\n      const input = model.renderable.getColorTextureMap();\n      const ext = input.getExtent();\n      const inScalars = input.getPointData().getScalars();\n      tex.create2DFromRaw({\n        width: ext[1] - ext[0] + 1,\n        height: ext[3] - ext[2] + 1,\n        numComps: inScalars.getNumberOfComponents(),\n        dataType: inScalars.getDataType(),\n        data: inScalars.getData()\n      });\n      tex.activate();\n      tex.sendParameters();\n      tex.deactivate();\n    }\n    const transformCoordinate = model.renderable.getTransformCoordinate();\n    const view = ren.getRenderWindow().getViews()[0];\n    const vsize = view.getViewportSize(ren);\n    const toString = `${poly.getMTime()}A${representation}B${poly.getMTime()}` + `C${c ? c.getMTime() : 1}` + `D${tcoords ? tcoords.getMTime() : 1}` + `E${transformCoordinate ? ren.getMTime() : 1}` + `F${vsize}`;\n    if (model.VBOBuildString !== toString) {\n      // Build the VBOs\n      let points = poly.getPoints();\n      if (transformCoordinate) {\n        const p = vtkPoints.newInstance();\n        const numPts = points.getNumberOfPoints();\n        p.setNumberOfPoints(numPts);\n        const point = [];\n        for (let i = 0; i < numPts; ++i) {\n          points.getPoint(i, point);\n          transformCoordinate.setValue(point);\n          const v = transformCoordinate.getComputedDoubleViewportValue(ren);\n          p.setPoint(i, v[0], v[1], 0.0);\n        }\n        points = p;\n      }\n      const options = {\n        points,\n        tcoords,\n        colors: c,\n        cellOffset: 0,\n        useTCoordsPerCell,\n        haveCellScalars: model.renderable.getAreScalarsMappedFromCells(),\n        customAttributes: model.renderable.getCustomShaderAttributes().map(arrayName => poly.getPointData().getArrayByName(arrayName))\n      };\n      options.cellOffset += model.primitives[primTypes.Points].getCABO().createVBO(poly.getVerts(), 'verts', representation, options);\n      options.cellOffset += model.primitives[primTypes.Lines].getCABO().createVBO(poly.getLines(), 'lines', representation, options);\n      options.cellOffset += model.primitives[primTypes.Tris].getCABO().createVBO(poly.getPolys(), 'polys', representation, options);\n      options.cellOffset += model.primitives[primTypes.TriStrips].getCABO().createVBO(poly.getStrips(), 'strips', representation, options);\n      model.VBOBuildTime.modified();\n      model.VBOBuildString = toString;\n    }\n  };\n  publicAPI.renderPieceDraw = (ren, actor) => {\n    const representation = actor.getProperty().getRepresentation();\n    const gl = model.context;\n    gl.depthMask(true);\n\n    // for every primitive type\n    for (let i = primTypes.Start; i < primTypes.End; i++) {\n      // if there are entries\n      const cabo = model.primitives[i].getCABO();\n      if (cabo.getElementCount()) {\n        model.lastBoundBO = model.primitives[i];\n        model.primitiveIDOffset += model.primitives[i].drawArrays(ren, actor, representation, publicAPI);\n      }\n    }\n  };\n  publicAPI.renderPieceFinish = (ren, actor) => {\n    if (model.lastBoundBO) {\n      model.lastBoundBO.getVAO().release();\n    }\n    if (model.renderable.getColorTextureMap()) {\n      model.internalColorTexture.deactivate();\n    }\n  };\n  publicAPI.replaceShaderValues = (shaders, ren, actor) => {\n    publicAPI.replaceShaderColor(shaders, ren, actor);\n    publicAPI.replaceShaderTCoord(shaders, ren, actor);\n    publicAPI.replaceShaderPicking(shaders, ren, actor);\n    publicAPI.replaceShaderPositionVC(shaders, ren, actor);\n  };\n  publicAPI.replaceShaderColor = (shaders, ren, actor) => {\n    let VSSource = shaders.Vertex;\n    let GSSource = shaders.Geometry;\n    let FSSource = shaders.Fragment;\n\n    // create the color property declarations\n    // these are always defined\n    let colorDec = ['uniform vec3 diffuseColorUniform;', 'uniform float opacityUniform;'];\n\n    // now handle the more complex fragment shader implementation\n    let colorImpl = ['vec3 diffuseColor = diffuseColorUniform;', 'float opacity = opacityUniform;'];\n\n    // add scalar vertex colors\n    if (model.lastBoundBO.getCABO().getColorComponents() !== 0) {\n      colorDec = colorDec.concat(['varying vec4 vertexColorVSOutput;']);\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::Color::Dec', ['attribute vec4 scalarColor;', 'varying vec4 vertexColorVSOutput;']).result;\n      VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::Color::Impl', ['vertexColorVSOutput =  scalarColor;']).result;\n      GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::Color::Dec', ['in vec4 vertexColorVSOutput[];', 'out vec4 vertexColorGSOutput;']).result;\n      GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::Color::Impl', ['vertexColorGSOutput = vertexColorVSOutput[i];']).result;\n      FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Color::Impl', colorImpl.concat(['  diffuseColor = vertexColorVSOutput.rgb;', '  opacity = opacity*vertexColorVSOutput.a;'])).result;\n    } else if (model.renderable.getAreScalarsMappedFromCells()) {\n      colorImpl = colorImpl.concat(['  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);', '  diffuseColor = texColor.rgb;', '  opacity = opacity*texColor.a;']);\n    }\n    colorImpl = colorImpl.concat(['gl_FragData[0] = vec4(diffuseColor, opacity);']);\n    FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Color::Dec', colorDec).result;\n    FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Color::Impl', colorImpl).result;\n    shaders.Vertex = VSSource;\n    shaders.Geometry = GSSource;\n    shaders.Fragment = FSSource;\n  };\n  publicAPI.replaceShaderTCoord = (shaders, ren, actor) => {\n    if (model.lastBoundBO.getCABO().getTCoordOffset()) {\n      let VSSource = shaders.Vertex;\n      let GSSource = shaders.Geometry;\n      let FSSource = shaders.Fragment;\n      const tcdim = model.lastBoundBO.getCABO().getTCoordComponents();\n      if (tcdim === 1) {\n        VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::TCoord::Dec', ['in float tcoordMC;', 'out float tcoordVCVSOutput;']).result;\n        VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::TCoord::Impl', ['tcoordVCVSOutput = tcoordMC;']).result;\n        GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::TCoord::Dec', ['in float tcoordVCVSOutput[];\\n', 'out float tcoordVCGSOutput;']).result;\n        GSSource = vtkShaderProgram.substitute(GSSource, ['//VTK::TCoord::Impl', 'tcoordVCGSOutput = tcoordVCVSOutput[i];']).result;\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::TCoord::Dec', ['in float tcoordVCVSOutput;', 'uniform sampler2D texture1;']).result;\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::TCoord::Impl', ['gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));']).result;\n      } else if (tcdim === 2) {\n        VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::TCoord::Dec', ['in vec2 tcoordMC;', 'out vec2 tcoordVCVSOutput;']).result;\n        VSSource = vtkShaderProgram.substitute(VSSource, '//VTK::TCoord::Impl', ['tcoordVCVSOutput = tcoordMC;']).result;\n        GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::TCoord::Dec', ['in vec2 tcoordVCVSOutput[];\\n', 'out vec2 tcoordVCGSOutput;']).result;\n        GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::TCoord::Impl', ['tcoordVCGSOutput = tcoordVCVSOutput[i];']).result;\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::TCoord::Dec', ['in vec2 tcoordVCVSOutput;', 'uniform sampler2D texture1;']).result;\n        FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::TCoord::Impl', ['gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);']).result;\n      }\n      if (model.renderable.getAreScalarsMappedFromCells()) {\n        GSSource = vtkShaderProgram.substitute(GSSource, '//VTK::PrimID::Impl', ['gl_PrimitiveID = gl_PrimitiveIDIn;']).result;\n      }\n      shaders.Vertex = VSSource;\n      shaders.Geometry = GSSource;\n      shaders.Fragment = FSSource;\n    }\n  };\n  publicAPI.replaceShaderPicking = (shaders, ren, actor) => {\n    let FSSource = shaders.Fragment;\n    FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Picking::Dec', ['uniform vec3 mapperIndex;', 'uniform int picking;']).result;\n    FSSource = vtkShaderProgram.substitute(FSSource, '//VTK::Picking::Impl', '  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];').result;\n    shaders.Fragment = FSSource;\n  };\n  publicAPI.replaceShaderPositionVC = (shaders, ren, actor) => {\n    // replace common shader code\n    model.lastBoundBO.replaceShaderPositionVC(shaders, ren, actor);\n  };\n  publicAPI.invokeShaderCallbacks = (cellBO, ren, actor) => {\n    const listCallbacks = model.renderable.getViewSpecificProperties().ShadersCallbacks;\n    if (listCallbacks) {\n      listCallbacks.forEach(object => {\n        object.callback(object.userData, cellBO, ren, actor);\n      });\n    }\n  };\n  publicAPI.setMapperShaderParameters = (cellBO, ren, actor) => {\n    // Now to update the VAO too, if necessary.\n    if (cellBO.getProgram().isUniformUsed('PrimitiveIDOffset')) {\n      cellBO.getProgram().setUniformi('PrimitiveIDOffset', model.primitiveIDOffset);\n    }\n    if (cellBO.getProgram().isAttributeUsed('vertexWC')) {\n      if (!cellBO.getVAO().addAttributeArray(cellBO.getProgram(), cellBO.getCABO(), 'vertexWC', cellBO.getCABO().getVertexOffset(), cellBO.getCABO().getStride(), model.context.FLOAT, 3, false)) {\n        vtkErrorMacro('Error setting vertexWC in shader VAO.');\n      }\n    }\n    if (cellBO.getCABO().getElementCount() && (model.VBOBuildTime.getMTime() > cellBO.getAttributeUpdateTime().getMTime() || cellBO.getShaderSourceTime().getMTime() > cellBO.getAttributeUpdateTime().getMTime())) {\n      model.renderable.getCustomShaderAttributes().forEach((attrName, idx) => {\n        if (cellBO.getProgram().isAttributeUsed(`${attrName}MC`)) {\n          if (!cellBO.getVAO().addAttributeArray(cellBO.getProgram(), cellBO.getCABO(), `${attrName}MC`, cellBO.getCABO().getCustomData()[idx].offset, cellBO.getCABO().getStride(), model.context.FLOAT, cellBO.getCABO().getCustomData()[idx].components, false)) {\n            vtkErrorMacro(`Error setting ${attrName}MC in shader VAO.`);\n          }\n        }\n      });\n      if (cellBO.getProgram().isAttributeUsed('tcoordMC') && cellBO.getCABO().getTCoordOffset()) {\n        if (!cellBO.getVAO().addAttributeArray(cellBO.getProgram(), cellBO.getCABO(), 'tcoordMC', cellBO.getCABO().getTCoordOffset(), cellBO.getCABO().getStride(), model.context.FLOAT, cellBO.getCABO().getTCoordComponents(), false)) {\n          vtkErrorMacro('Error setting tcoordMC in shader VAO.');\n        }\n      } else {\n        cellBO.getVAO().removeAttributeArray('tcoordMC');\n      }\n      if (cellBO.getProgram().isAttributeUsed('scalarColor') && cellBO.getCABO().getColorComponents()) {\n        if (!cellBO.getVAO().addAttributeArray(cellBO.getProgram(), cellBO.getCABO().getColorBO(), 'scalarColor', cellBO.getCABO().getColorOffset(), cellBO.getCABO().getColorBOStride(), model.context.UNSIGNED_BYTE, 4, true)) {\n          vtkErrorMacro('Error setting scalarColor in shader VAO.');\n        }\n      } else {\n        cellBO.getVAO().removeAttributeArray('scalarColor');\n      }\n      if (model.internalColorTexture && cellBO.getProgram().isUniformUsed('texture1')) {\n        const texUnit = model.internalColorTexture.getTextureUnit();\n        if (texUnit > -1) {\n          cellBO.getProgram().setUniformi('texture1', model.internalColorTexture.getTextureUnit());\n        }\n      }\n      const tus = model.openGLActor2D.getActiveTextures();\n      if (tus) {\n        for (let index = 0; index < tus.length; ++index) {\n          const tex = tus[index];\n          const texUnit = tex.getTextureUnit();\n          const tname = `texture${texUnit + 1}`;\n          if (cellBO.getProgram().isUniformUsed(tname)) {\n            cellBO.getProgram().setUniformi(tname, texUnit);\n          }\n        }\n      }\n\n      // handle wide lines\n      cellBO.setMapperShaderParameters(ren, actor, model._openGLRenderer.getTiledSizeAndOrigin());\n      const selector = model._openGLRenderer.getSelector();\n      cellBO.getProgram().setUniform3fArray('mapperIndex', selector ? selector.getPropColorValue() : [0.0, 0.0, 0.0]);\n      cellBO.getProgram().setUniformi('picking', selector ? selector.getCurrentPass() + 1 : 0);\n    }\n  };\n  publicAPI.setPropertyShaderParameters = (cellBO, ren, actor) => {\n    const c = model.renderable.getColorMapColors();\n    if (!c || c.getNumberOfComponents() === 0) {\n      const program = cellBO.getProgram();\n      const ppty = actor.getProperty();\n      const opacity = ppty.getOpacity();\n      program.setUniformf('opacityUniform', opacity);\n      const dColor = ppty.getColor();\n      program.setUniform3fArray('diffuseColorUniform', dColor);\n    }\n  };\n  publicAPI.setLightingShaderParameters = (cellBO, ren, actor) => {\n    // no-op\n  };\n  function safeMatrixMultiply(matrixArray, matrixType, tmpMat) {\n    matrixType.identity(tmpMat);\n    return matrixArray.reduce((res, matrix, index) => {\n      if (index === 0) {\n        return matrix ? matrixType.copy(res, matrix) : matrixType.identity(res);\n      }\n      return matrix ? matrixType.multiply(res, res, matrix) : res;\n    }, tmpMat);\n  }\n  publicAPI.setCameraShaderParameters = (cellBO, ren, actor) => {\n    const program = cellBO.getProgram();\n    const shiftScaleEnabled = cellBO.getCABO().getCoordShiftAndScaleEnabled();\n    const inverseShiftScaleMatrix = shiftScaleEnabled ? cellBO.getCABO().getInverseShiftAndScaleMatrix() : null;\n\n    // Get the position of the actor\n    const view = ren.getRenderWindow().getViews()[0];\n    const size = view.getViewportSize(ren);\n    const vport = ren.getViewport();\n    const actorPos = actor.getActualPositionCoordinate().getComputedDoubleViewportValue(ren);\n\n    // Get the window info\n    // Assume tile viewport is 0 1 based on vtkOpenGLRenderer\n    const tileViewport = [0.0, 0.0, 1.0, 1.0];\n    const visVP = [0.0, 0.0, 1.0, 1.0];\n    visVP[0] = vport[0] >= tileViewport[0] ? vport[0] : tileViewport[0];\n    visVP[1] = vport[1] >= tileViewport[1] ? vport[1] : tileViewport[1];\n    visVP[2] = vport[2] <= tileViewport[2] ? vport[2] : tileViewport[2];\n    visVP[3] = vport[3] <= tileViewport[3] ? vport[3] : tileViewport[3];\n    if (visVP[0] >= visVP[2]) {\n      return;\n    }\n    if (visVP[1] >= visVP[3]) {\n      return;\n    }\n    size[0] = round(size[0] * (visVP[2] - visVP[0]) / (vport[2] - vport[0]));\n    size[1] = round(size[1] * (visVP[3] - visVP[1]) / (vport[3] - vport[1]));\n    const winSize = model._openGLRenderer.getParent().getSize();\n    const xoff = round(actorPos[0] - (visVP[0] - vport[0]) * winSize[0]);\n    const yoff = round(actorPos[1] - (visVP[1] - vport[1]) * winSize[1]);\n\n    // set ortho projection\n    const left = -xoff;\n    let right = -xoff + size[0];\n    const bottom = -yoff;\n    let top = -yoff + size[1];\n\n    // it's an error to call glOrtho with\n    // either left==right or top==bottom\n    if (left === right) {\n      right = left + 1.0;\n    }\n    if (bottom === top) {\n      top = bottom + 1.0;\n    }\n\n    // compute the combined ModelView matrix and send it down to save time in the shader\n    const tmpMat4 = mat4.identity(new Float64Array(16));\n    tmpMat4[0] = 2.0 / (right - left);\n    tmpMat4[1 * 4 + 1] = 2.0 / (top - bottom);\n    tmpMat4[0 * 4 + 3] = -1.0 * (right + left) / (right - left);\n    tmpMat4[1 * 4 + 3] = -1.0 * (top + bottom) / (top - bottom);\n    tmpMat4[2 * 4 + 2] = 0.0;\n    tmpMat4[2 * 4 + 3] = actor.getProperty().getDisplayLocation() === DisplayLocation.FOREGROUND ? -1.0 : 1.0;\n    tmpMat4[3 * 4 + 3] = 1.0;\n    mat4.transpose(tmpMat4, tmpMat4);\n    program.setUniformMatrix('WCVCMatrix', safeMatrixMultiply([tmpMat4, inverseShiftScaleMatrix], mat4, model.tmpMat4));\n  };\n  publicAPI.getAllocatedGPUMemoryInBytes = () => {\n    let memUsed = 0;\n    model.primitives.forEach(prim => {\n      memUsed += prim.getAllocatedGPUMemoryInBytes();\n    });\n    // Return in MB\n    return memUsed;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  context: null,\n  VBOBuildTime: 0,\n  VBOBuildString: null,\n  primitives: null,\n  primTypes: null,\n  shaderRebuildString: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  vtkReplacementShaderMapper.implementReplaceShaderCoincidentOffset(publicAPI, model, initialValues);\n  vtkReplacementShaderMapper.implementBuildShadersWithReplacements(publicAPI, model, initialValues);\n  model.primitives = [];\n  model.primTypes = primTypes;\n  model.tmpMat4 = mat4.identity(new Float64Array(16));\n  for (let i = primTypes.Start; i < primTypes.End; i++) {\n    model.primitives[i] = vtkHelper.newInstance();\n    model.primitives[i].setPrimitiveType(i);\n    model.primitives[i].set({\n      lastLightComplexity: 0,\n      lastLightCount: 0,\n      lastSelectionPass: false\n    }, true);\n  }\n\n  // Build VTK API\n  setGet(publicAPI, model, ['context']);\n  model.VBOBuildTime = {};\n  obj(model.VBOBuildTime, {\n    mtime: 0\n  });\n\n  // Object methods\n  vtkOpenGLPolyDataMapper2D(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkOpenGLPolyDataMapper2D');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPolyDataMapper2D = {\n  newInstance,\n  extend\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkMapper2D', newInstance);\n\nexport { vtkPolyDataMapper2D as default, extend, newInstance };\n", "import { n as newInstance$1, g as get, e as setGet, i as moveToProtected, c as macro } from '../../macros2.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\nconst {\n  vtkDebugMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLRenderer methods\n// ----------------------------------------------------------------------------\n/* eslint-disable no-bitwise */\n\nfunction vtkOpenGLRenderer(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLRenderer');\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      if (!model.renderable) {\n        return;\n      }\n      publicAPI.updateLights();\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNode(model.renderable.getActiveCamera());\n      publicAPI.addMissingNodes(model.renderable.getViewPropsWithNestedProps(), true);\n      publicAPI.removeUnusedNodes();\n    }\n  };\n  publicAPI.updateLights = () => {\n    let count = 0;\n    const lights = model.renderable.getLightsByReference();\n    for (let index = 0; index < lights.length; ++index) {\n      if (lights[index].getSwitch() > 0.0) {\n        count++;\n      }\n    }\n    if (!count) {\n      vtkDebugMacro('No lights are on, creating one.');\n      model.renderable.createLight();\n    }\n    return count;\n  };\n  publicAPI.zBufferPass = prepass => {\n    if (prepass) {\n      let clearMask = 0;\n      const gl = model.context;\n      if (!model.renderable.getTransparent()) {\n        model.context.clearColor(1.0, 0.0, 0.0, 1.0);\n        clearMask |= gl.COLOR_BUFFER_BIT;\n      }\n      if (!model.renderable.getPreserveDepthBuffer()) {\n        gl.clearDepth(1.0);\n        clearMask |= gl.DEPTH_BUFFER_BIT;\n        model.context.depthMask(true);\n      }\n      const ts = publicAPI.getTiledSizeAndOrigin();\n      gl.enable(gl.SCISSOR_TEST);\n      gl.scissor(ts.lowerLeftU, ts.lowerLeftV, ts.usize, ts.vsize);\n      gl.viewport(ts.lowerLeftU, ts.lowerLeftV, ts.usize, ts.vsize);\n      gl.colorMask(true, true, true, true);\n      if (clearMask) {\n        gl.clear(clearMask);\n      }\n      gl.enable(gl.DEPTH_TEST);\n    }\n  };\n  publicAPI.opaqueZBufferPass = prepass => publicAPI.zBufferPass(prepass);\n\n  // Renders myself\n  publicAPI.cameraPass = prepass => {\n    if (prepass) {\n      publicAPI.clear();\n    }\n  };\n  publicAPI.getAspectRatio = () => {\n    const size = model._parent.getSizeByReference();\n    const viewport = model.renderable.getViewportByReference();\n    return size[0] * (viewport[2] - viewport[0]) / ((viewport[3] - viewport[1]) * size[1]);\n  };\n  publicAPI.getTiledSizeAndOrigin = () => {\n    const vport = model.renderable.getViewportByReference();\n\n    // if there is no window assume 0 1\n    const tileViewPort = [0.0, 0.0, 1.0, 1.0];\n\n    // find the lower left corner of the viewport, taking into account the\n    // lower left boundary of this tile\n    const vpu = vport[0] - tileViewPort[0];\n    const vpv = vport[1] - tileViewPort[1];\n\n    // store the result as a pixel value\n    const ndvp = model._parent.normalizedDisplayToDisplay(vpu, vpv);\n    const lowerLeftU = Math.round(ndvp[0]);\n    const lowerLeftV = Math.round(ndvp[1]);\n\n    // find the upper right corner of the viewport, taking into account the\n    // lower left boundary of this tile\n    const vpu2 = vport[2] - tileViewPort[0];\n    const vpv2 = vport[3] - tileViewPort[1];\n    const ndvp2 = model._parent.normalizedDisplayToDisplay(vpu2, vpv2);\n\n    // now compute the size of the intersection of the viewport with the\n    // current tile\n    let usize = Math.round(ndvp2[0]) - lowerLeftU;\n    let vsize = Math.round(ndvp2[1]) - lowerLeftV;\n    if (usize < 0) {\n      usize = 0;\n    }\n    if (vsize < 0) {\n      vsize = 0;\n    }\n    return {\n      usize,\n      vsize,\n      lowerLeftU,\n      lowerLeftV\n    };\n  };\n  publicAPI.clear = () => {\n    let clearMask = 0;\n    const gl = model.context;\n    if (!model.renderable.getTransparent()) {\n      const background = model.renderable.getBackgroundByReference();\n      // renderable ensures that background has 4 entries.\n      gl.clearColor(background[0], background[1], background[2], background[3]);\n      clearMask |= gl.COLOR_BUFFER_BIT;\n    }\n    if (!model.renderable.getPreserveDepthBuffer()) {\n      gl.clearDepth(1.0);\n      clearMask |= gl.DEPTH_BUFFER_BIT;\n      gl.depthMask(true);\n    }\n    gl.colorMask(true, true, true, true);\n    const ts = publicAPI.getTiledSizeAndOrigin();\n    gl.enable(gl.SCISSOR_TEST);\n    gl.scissor(ts.lowerLeftU, ts.lowerLeftV, ts.usize, ts.vsize);\n    gl.viewport(ts.lowerLeftU, ts.lowerLeftV, ts.usize, ts.vsize);\n    if (clearMask) {\n      gl.clear(clearMask);\n    }\n    gl.enable(gl.DEPTH_TEST);\n    /* eslint-enable no-bitwise */\n  };\n\n  publicAPI.releaseGraphicsResources = () => {\n    if (model.selector !== null) {\n      model.selector.releaseGraphicsResources();\n    }\n    // Releasing resources means that the next render should re-create resources\n    if (model.renderable) {\n      model.renderable.getViewProps().forEach(prop => {\n        prop.modified();\n      });\n    }\n  };\n  publicAPI.setOpenGLRenderWindow = rw => {\n    if (model._openGLRenderWindow === rw) {\n      return;\n    }\n    publicAPI.releaseGraphicsResources();\n    model._openGLRenderWindow = rw;\n    model.context = null;\n    if (rw) {\n      model.context = model._openGLRenderWindow.getContext();\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  context: null,\n  _openGLRenderWindow: null,\n  selector: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n\n  // Build VTK API\n  get(publicAPI, model, ['shaderCache']);\n  setGet(publicAPI, model, ['selector']);\n  moveToProtected(publicAPI, model, ['openGLRenderWindow']);\n\n  // Object methods\n  vtkOpenGLRenderer(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkOpenGLRenderer');\n\n// ----------------------------------------------------------------------------\n\nvar vtkRenderer = {\n  newInstance,\n  extend\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkRenderer', newInstance);\n\nexport { vtkRenderer as default, extend, newInstance };\n", "const Orientation = {\n  HORIZONTAL: 'horizontal',\n  VERTICAL: 'vertical',\n  AUTO: 'auto'\n};\nvar Constants = {\n  Orientation\n};\n\nexport { Orientation, Constants as default };\n", "import * as d3 from 'd3-scale';\nimport { T as nearestPowerOfTwo } from '../../Common/Core/Math/index.js';\nimport { m as macro } from '../../macros2.js';\nimport vtkActor from './Actor.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport vtkScalarsToColors from '../../Common/Core/ScalarsToColors.js';\nimport vtkMapper from './Mapper.js';\nimport vtkPolyData from '../../Common/DataModel/PolyData.js';\nimport vtkTexture from './Texture.js';\nimport Constants from './ScalarBarActor/Constants.js';\n\nconst {\n  VectorMode\n} = vtkScalarsToColors;\nconst {\n  Orientation\n} = Constants;\n\n// ----------------------------------------------------------------------------\n// vtkScalarBarActor\n//\n// Note log scales are currently not supported\n//\n// Developer note: This class is broken into the main class and a helper\n// class. The main class holds view independent properties (those properties\n// that do not change as the view's resolution/aspect ratio change). The\n// helper class is instantiated one per view and holds properties that can\n// depend on view specific values such as resolution. The helper class code\n// could have been left to the View specific implementation (such as\n// vtkWebGPUScalarBarActor) but is instead placed here to it can be shared by\n// multiple rendering backends.\n//\n// ----------------------------------------------------------------------------\n\nfunction applyTextStyle(ctx, style, defaultFontSize) {\n  ctx.strokeStyle = style.strokeColor;\n  ctx.lineWidth = style.strokeSize;\n  ctx.fillStyle = style.fontColor;\n  const fontSize = style.fontSize ?? defaultFontSize;\n  ctx.font = `${style.fontStyle} ${fontSize}px ${style.fontFamily}`;\n}\n\n// ----------------------------------------------------------------------------\n// Default autoLayout function\n// ----------------------------------------------------------------------------\n\n// compute good values to use based on window size etc a bunch of heuristics\n// here with hand tuned constants These values worked for me but really this\n// method could be redically changed. The basic gist is\n// 1) compute a resonable font size\n// 2) render the text atlas using those font sizes\n// 3) pick horizontal or vertical bsed on window size\n// 4) based on the size of the title and tick labels rendered\n//    compute the box size and position such that\n//    the text will all fit nicely and the bar will be a resonable size\n// 5) compute the bar segments based on the above settings\n//\n// Note that this function can and should read values from the\n// ScalarBarActor but should only write values to the view dependent helper\n// instance that is provided as those values are the ones that will be used\n// for rendering.\n//\nfunction defaultAutoLayout(publicAPI, model) {\n  return helper => {\n    // we don't do a linear scale, the proportions for\n    // a 700 pixel window differ from a 1400\n    const lastSize = helper.getLastSize();\n    const xAxisAdjust = (lastSize[0] / 700) ** 0.8;\n    const yAxisAdjust = (lastSize[1] / 700) ** 0.8;\n    const minAdjust = Math.min(xAxisAdjust, yAxisAdjust);\n    const axisTextStyle = helper.getAxisTextStyle();\n    const tickTextStyle = helper.getTickTextStyle();\n    Object.assign(axisTextStyle, model.axisTextStyle);\n    Object.assign(tickTextStyle, model.tickTextStyle);\n\n    // compute a reasonable font size first, but only if user hasn't explicitly set it\n    if (axisTextStyle.fontSize === undefined) {\n      axisTextStyle.fontSize = Math.max(24 * minAdjust, 12);\n    }\n    if (tickTextStyle.fontSize === undefined) {\n      if (helper.getLastAspectRatio() > 1.0) {\n        tickTextStyle.fontSize = Math.max(20 * minAdjust, 10);\n      } else {\n        tickTextStyle.fontSize = Math.max(16 * minAdjust, 10);\n      }\n    }\n\n    // rebuild the text atlas\n    const textSizes = helper.updateTextureAtlas();\n\n    // now compute the boxSize and pixel offsets, different algorithm\n    // for horizonal versus vertical\n    helper.setTopTitle(false);\n    const boxSize = helper.getBoxSizeByReference();\n\n    // Determine orientation: user-forced, or auto based on aspect ratio\n    let isVertical = false;\n    if (model.orientation === Orientation.VERTICAL) {\n      isVertical = true;\n    } else if (model.orientation === Orientation.HORIZONTAL) {\n      isVertical = false;\n    } else {\n      // auto: use aspect ratio (original behavior)\n      isVertical = helper.getLastAspectRatio() > 1.0;\n    }\n\n    // if vertical\n    if (isVertical) {\n      helper.setTickLabelPixelOffset(0.3 * tickTextStyle.fontSize);\n\n      // if the title will fit within the width of the bar then that looks\n      // nicer to put it at the top (helper.topTitle), otherwise rotate it\n      // and place it sideways\n      if (textSizes.titleWidth <= textSizes.tickWidth + helper.getTickLabelPixelOffset() + 0.8 * tickTextStyle.fontSize) {\n        helper.setTopTitle(true);\n        helper.setAxisTitlePixelOffset(0.2 * tickTextStyle.fontSize);\n        boxSize[0] = 2.0 * (textSizes.tickWidth + helper.getTickLabelPixelOffset() + 0.8 * tickTextStyle.fontSize) / lastSize[0];\n        helper.setBoxPosition([0.98 - boxSize[0], -0.92]);\n      } else {\n        helper.setAxisTitlePixelOffset(0.2 * tickTextStyle.fontSize);\n        boxSize[0] = 2.0 * (textSizes.titleHeight + helper.getAxisTitlePixelOffset() + textSizes.tickWidth + helper.getTickLabelPixelOffset() + 0.8 * tickTextStyle.fontSize) / lastSize[0];\n        helper.setBoxPosition([0.99 - boxSize[0], -0.92]);\n      }\n      boxSize[1] = Math.max(1.2, Math.min(1.84 / yAxisAdjust, 1.84));\n    } else {\n      // horizontal\n      helper.setAxisTitlePixelOffset(1.2 * tickTextStyle.fontSize);\n      helper.setTickLabelPixelOffset(0.1 * tickTextStyle.fontSize);\n      const titleHeight =\n      // total offset from top of bar (includes ticks)\n      2.0 * (0.8 * tickTextStyle.fontSize + textSizes.titleHeight + helper.getAxisTitlePixelOffset()) / lastSize[1];\n      const tickWidth = 2.0 * textSizes.tickWidth / lastSize[0];\n      boxSize[0] = Math.min(1.9, Math.max(1.4, 1.4 * tickWidth * (helper.getTicks().length + 3)));\n      boxSize[1] = titleHeight;\n      helper.setBoxPosition([-0.5 * boxSize[0], -0.97]);\n    }\n\n    // recomute bar segments based on positioning\n    helper.recomputeBarSegments(textSizes);\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Default generateTicks function\n// ----------------------------------------------------------------------------\n\n// This function returns the default function used to generate vtkScalarBarActor ticks.\n// The default function makes use of d3.scaleLinear() to generate 5 tick marks between\n// the minimum and maximum values of the scalar bar. Customize this behavior by passing\n// a function to vtkScalarBarActor.newInstance({ generateTicks: customGenerateTicks })\n// or by calling scalarBarActor.setGenerateTicks(customGenerateTicks).\nfunction defaultGenerateTicks(publicApi, model) {\n  return helper => {\n    const lastTickBounds = helper.getLastTickBounds();\n    const scale = d3.scaleLinear().domain([lastTickBounds[0], lastTickBounds[1]]);\n    const ticks = scale.ticks(5);\n    const format = scale.tickFormat(5);\n    helper.setTicks(ticks);\n    helper.setTickStrings(ticks.map(format));\n  };\n}\n\n// many properties of this actor depend on the API specific view The main\n// dependency being the resolution as that drives what font sizes to use.\n// Bacause of this we need to do some of the calculations in a API specific\n// subclass. But... we don't want a lot of duplicated code between WebGL and\n// WebGPU for example so we have this helper class, that is designed to be\n// fairly API independent so that API specific views can call this to do\n// most of the work.\nfunction vtkScalarBarActorHelper(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkScalarBarActorHelper');\n  publicAPI.setRenderable = renderable => {\n    if (model.renderable === renderable) {\n      return;\n    }\n    model.renderable = renderable;\n    model.barActor.setProperty(renderable.getProperty());\n    model.barActor.setParentProp(renderable);\n    model.barActor.setCoordinateSystemToDisplay();\n    model.tmActor.setProperty(renderable.getProperty());\n    model.tmActor.setParentProp(renderable);\n    model.tmActor.setCoordinateSystemToDisplay();\n    model.generateTicks = renderable.generateTicks;\n    model.axisTextStyle = {\n      ...renderable.getAxisTextStyle()\n    };\n    model.tickTextStyle = {\n      ...renderable.getTickTextStyle()\n    };\n    publicAPI.modified();\n  };\n  publicAPI.updateAPISpecificData = (size, camera, renderWindow) => {\n    // has the size changed?\n    if (model.lastSize[0] !== size[0] || model.lastSize[1] !== size[1]) {\n      model.lastSize[0] = size[0];\n      model.lastSize[1] = size[1];\n      model.lastAspectRatio = size[0] / size[1];\n      model.forceUpdate = true;\n    }\n    const scalarsToColors = model.renderable.getScalarsToColors();\n    if (!scalarsToColors || !model.renderable.getVisibility()) {\n      return;\n    }\n\n    // make sure the lut is assigned to our mapper\n    model.barMapper.setLookupTable(scalarsToColors);\n\n    // camera should be the same for all views\n    model.camera = camera;\n    model.renderWindow = renderWindow;\n\n    // did something significant change? If so rebuild a lot of things\n    if (model.forceUpdate || Math.max(scalarsToColors.getMTime(), publicAPI.getMTime(), model.renderable.getMTime()) > model.lastRebuildTime.getMTime()) {\n      const range = scalarsToColors.getMappingRange();\n      model.lastTickBounds = [...range];\n\n      // compute tick marks for axes (update for log scale)\n      model.renderable.getGenerateTicks()(publicAPI);\n      if (model.renderable.getAutomated()) {\n        model.renderable.getAutoLayout()(publicAPI);\n      } else {\n        // copy values from renderable\n        model.axisTextStyle = {\n          ...model.renderable.getAxisTextStyle()\n        };\n        model.tickTextStyle = {\n          ...model.renderable.getTickTextStyle()\n        };\n        model.barPosition = [...model.renderable.getBarPosition()];\n        model.barSize = [...model.renderable.getBarSize()];\n        model.boxPosition = [...model.renderable.getBoxPosition()];\n        model.boxSize = [...model.renderable.getBoxSize()];\n        model.axisTitlePixelOffset = model.renderable.getAxisTitlePixelOffset();\n        model.tickLabelPixelOffset = model.renderable.getTickLabelPixelOffset();\n\n        // rebuild the texture only when force or changed bounds, face\n        // visibility changes do to change the atlas\n        const textSizes = publicAPI.updateTextureAtlas();\n\n        // recompute bar segments based on positioning\n        publicAPI.recomputeBarSegments(textSizes);\n      }\n      publicAPI.updatePolyDataForLabels();\n      publicAPI.updatePolyDataForBarSegments();\n      model.lastRebuildTime.modified();\n      model.forceUpdate = false;\n    }\n  };\n\n  // create the texture map atlas that contains the rendering of\n  // all the text strings. Only needs to be called when the text strings\n  // have changed (labels and ticks)\n  publicAPI.updateTextureAtlas = () => {\n    // set the text properties\n    model.tmContext.textBaseline = 'bottom';\n    model.tmContext.textAlign = 'left';\n\n    // return some factors about the text atlas\n    const results = {};\n\n    // first the axislabel\n    const newTmAtlas = new Map();\n    let maxWidth = 0;\n    let totalHeight = 1; // start one pixel in so we have a border\n    applyTextStyle(model.tmContext, model.axisTextStyle, 18);\n    let metrics = model.tmContext.measureText(model.renderable.getAxisLabel());\n    let entry = {\n      height: metrics.actualBoundingBoxAscent + 2,\n      startingHeight: totalHeight,\n      width: metrics.width + 2,\n      textStyle: model.axisTextStyle\n    };\n    newTmAtlas.set(model.renderable.getAxisLabel(), entry);\n    totalHeight += entry.height;\n    maxWidth = entry.width;\n    results.titleWidth = entry.width;\n    results.titleHeight = entry.height;\n\n    // and the ticks, NaN Below and Above\n    results.tickWidth = 0;\n    results.tickHeight = 0;\n    applyTextStyle(model.tmContext, model.tickTextStyle, 14);\n    const strings = [...publicAPI.getTickStrings(), 'NaN', 'Below', 'Above'];\n    for (let t = 0; t < strings.length; t++) {\n      if (!newTmAtlas.has(strings[t])) {\n        metrics = model.tmContext.measureText(strings[t]);\n        entry = {\n          height: metrics.actualBoundingBoxAscent + 2,\n          startingHeight: totalHeight,\n          width: metrics.width + 2,\n          textStyle: model.tickTextStyle\n        };\n        newTmAtlas.set(strings[t], entry);\n        totalHeight += entry.height;\n        if (maxWidth < entry.width) {\n          maxWidth = entry.width;\n        }\n        if (results.tickWidth < entry.width) {\n          results.tickWidth = entry.width;\n        }\n        if (results.tickHeight < entry.height) {\n          results.tickHeight = entry.height;\n        }\n      }\n    }\n\n    // always use power of two to avoid interpolation\n    // in cases where PO2 is required\n    maxWidth = nearestPowerOfTwo(maxWidth);\n    totalHeight = nearestPowerOfTwo(totalHeight);\n\n    // set the tcoord values\n    newTmAtlas.forEach(value => {\n      value.tcoords = [0.0, (totalHeight - value.startingHeight - value.height) / totalHeight, value.width / maxWidth, (totalHeight - value.startingHeight - value.height) / totalHeight, value.width / maxWidth, (totalHeight - value.startingHeight) / totalHeight, 0.0, (totalHeight - value.startingHeight) / totalHeight];\n    });\n\n    // make sure we have power of two dimensions\n    model.tmCanvas.width = maxWidth;\n    model.tmCanvas.height = totalHeight;\n    model.tmContext.textBaseline = 'bottom';\n    model.tmContext.textAlign = 'left';\n    model.tmContext.clearRect(0, 0, maxWidth, totalHeight);\n\n    // draw the text onto the texture\n    newTmAtlas.forEach((value, key) => {\n      const defaultSize = value.textStyle === model.axisTextStyle ? 18 : 14;\n      applyTextStyle(model.tmContext, value.textStyle, defaultSize);\n      model.tmContext.fillText(key, 1, value.startingHeight + value.height - 1);\n    });\n    model.tmTexture.setCanvas(model.tmCanvas);\n    // mark as modified since the canvas typically doesn't change\n    model.tmTexture.modified();\n    model._tmAtlas = newTmAtlas;\n    return results;\n  };\n  publicAPI.computeBarSize = textSizes => {\n    // compute orientation\n    model.vertical = model.boxSize[1] > model.boxSize[0];\n    const tickHeight = 2.0 * textSizes.tickHeight / model.lastSize[1];\n    const segSize = [1, 1];\n\n    // horizontal and vertical have different astetics so adjust based on\n    // orientation\n    if (model.vertical) {\n      const tickWidth = 2.0 * (textSizes.tickWidth + model.tickLabelPixelOffset) / model.lastSize[0];\n      if (model.topTitle) {\n        const titleHeight = 2.0 * (textSizes.titleHeight + model.axisTitlePixelOffset) / model.lastSize[1];\n        model.barSize[0] = model.boxSize[0] - tickWidth;\n        model.barSize[1] = model.boxSize[1] - titleHeight;\n      } else {\n        // rotated title so width is based off height\n        const titleWidth = 2.0 * (textSizes.titleHeight + model.axisTitlePixelOffset) / model.lastSize[0];\n        model.barSize[0] = model.boxSize[0] - titleWidth - tickWidth;\n        model.barSize[1] = model.boxSize[1];\n      }\n      model.barPosition[0] = model.boxPosition[0] + tickWidth;\n      model.barPosition[1] = model.boxPosition[1];\n      segSize[1] = tickHeight;\n    } else {\n      const tickWidth = (2.0 * textSizes.tickWidth - 8) / model.lastSize[0];\n      const titleHeight = 2.0 * (textSizes.titleHeight + model.axisTitlePixelOffset) / model.lastSize[1];\n      model.barSize[0] = model.boxSize[0];\n      model.barPosition[0] = model.boxPosition[0];\n      model.barSize[1] = model.boxSize[1] - titleHeight;\n      model.barPosition[1] = model.boxPosition[1];\n      segSize[0] = tickWidth;\n    }\n    return segSize;\n  };\n\n  // based on all the settins compute a barSegments array\n  // containing the segments of the scalar bar\n  // each segment contains\n  //   corners[4][2]\n  //   title - e.g. NaN, Above, ticks\n  //   scalars - the normalized scalars values to use for that segment\n  //\n  // Note that the bar consumes the space in the box that remains after\n  // leaving room for the text labels\n  publicAPI.recomputeBarSegments = textSizes => {\n    // first compute the barSize/Position\n    const segSize = publicAPI.computeBarSize(textSizes);\n    model.barSegments = [];\n    const startPos = [0.0, 0.0];\n\n    // horizontal and vertical have different astetics so adjust based on\n    // orientation\n    const barAxis = model.vertical ? 1 : 0;\n    const segSpace = model.vertical ? 0.01 : 0.02;\n    function pushSeg(title, scalars) {\n      model.barSegments.push({\n        corners: [[...startPos], [startPos[0] + segSize[0], startPos[1]], [startPos[0] + segSize[0], startPos[1] + segSize[1]], [startPos[0], startPos[1] + segSize[1]]],\n        scalars,\n        title\n      });\n      startPos[barAxis] += segSize[barAxis] + segSpace;\n    }\n    if (model.renderable.getDrawNanAnnotation() && model.renderable.getScalarsToColors().getNanColor()) {\n      pushSeg('NaN', [NaN, NaN, NaN, NaN]);\n    }\n    if (model.renderable.getDrawBelowRangeSwatch() && model.renderable.getScalarsToColors().getUseBelowRangeColor?.()) {\n      pushSeg('Below', [-0.1, -0.1, -0.1, -0.1]);\n    }\n    const haveAbove = model.renderable.getScalarsToColors().getUseAboveRangeColor?.();\n\n    // extra space around the ticks section\n    startPos[barAxis] += segSpace;\n    const oldSegSize = segSize[barAxis];\n    segSize[barAxis] = haveAbove ? 1.0 - 2.0 * segSpace - segSize[barAxis] - startPos[barAxis] : 1.0 - segSpace - startPos[barAxis];\n    pushSeg('ticks', model.vertical ? [0, 0, 0.995, 0.995] : [0, 0.995, 0.995, 0]);\n    if (model.renderable.getDrawAboveRangeSwatch() && haveAbove) {\n      segSize[barAxis] = oldSegSize;\n      startPos[barAxis] += segSpace;\n      pushSeg('Above', [1.1, 1.1, 1.1, 1.1]);\n    }\n  };\n\n  // called by updatePolyDataForLabels\n  // modifies class constants tmp2v3\n  const tmp2v3 = new Float64Array(3);\n\n  // anchor point = pos\n  // H alignment = left, middle, right\n  // V alignment = bottom, middle, top\n  // Text Orientation = horizontal, vertical\n  // orientation\n  publicAPI.createPolyDataForOneLabel = (text, pos, alignment, orientation, offset, results) => {\n    const value = model._tmAtlas.get(text);\n    if (!value) {\n      return;\n    }\n    // have to find the four corners of the texture polygon for this label\n    let ptIdx = results.ptIdx;\n    let cellIdx = results.cellIdx;\n\n    // get achor point in pixels\n    tmp2v3[0] = (0.5 * pos[0] + 0.5) * model.lastSize[0];\n    tmp2v3[1] = (0.5 * pos[1] + 0.5) * model.lastSize[1];\n    tmp2v3[2] = pos[2];\n    tmp2v3[0] += offset[0];\n    tmp2v3[1] += offset[1];\n\n    // get text size in display pixels\n    const textSize = [];\n    const textAxes = orientation === 'vertical' ? [1, 0] : [0, 1];\n    if (orientation === 'vertical') {\n      textSize[0] = value.width;\n      textSize[1] = -value.height;\n      // update anchor point based on alignment\n      if (alignment[0] === 'middle') {\n        tmp2v3[1] -= value.width / 2.0;\n      } else if (alignment[0] === 'right') {\n        tmp2v3[1] -= value.width;\n      }\n      if (alignment[1] === 'middle') {\n        tmp2v3[0] += value.height / 2.0;\n      } else if (alignment[1] === 'top') {\n        tmp2v3[0] += value.height;\n      }\n    } else {\n      textSize[0] = value.width;\n      textSize[1] = value.height;\n      // update anchor point based on alignment\n      if (alignment[0] === 'middle') {\n        tmp2v3[0] -= value.width / 2.0;\n      } else if (alignment[0] === 'right') {\n        tmp2v3[0] -= value.width;\n      }\n      if (alignment[1] === 'middle') {\n        tmp2v3[1] -= value.height / 2.0;\n      } else if (alignment[1] === 'top') {\n        tmp2v3[1] -= value.height;\n      }\n    }\n    results.points[ptIdx * 3] = tmp2v3[0];\n    results.points[ptIdx * 3 + 1] = tmp2v3[1];\n    results.points[ptIdx * 3 + 2] = tmp2v3[2];\n    results.tcoords[ptIdx * 2] = value.tcoords[0];\n    results.tcoords[ptIdx * 2 + 1] = value.tcoords[1];\n    ptIdx++;\n    tmp2v3[textAxes[0]] += textSize[0];\n    results.points[ptIdx * 3] = tmp2v3[0];\n    results.points[ptIdx * 3 + 1] = tmp2v3[1];\n    results.points[ptIdx * 3 + 2] = tmp2v3[2];\n    results.tcoords[ptIdx * 2] = value.tcoords[2];\n    results.tcoords[ptIdx * 2 + 1] = value.tcoords[3];\n    ptIdx++;\n    tmp2v3[textAxes[1]] += textSize[1];\n    results.points[ptIdx * 3] = tmp2v3[0];\n    results.points[ptIdx * 3 + 1] = tmp2v3[1];\n    results.points[ptIdx * 3 + 2] = tmp2v3[2];\n    results.tcoords[ptIdx * 2] = value.tcoords[4];\n    results.tcoords[ptIdx * 2 + 1] = value.tcoords[5];\n    ptIdx++;\n    tmp2v3[textAxes[0]] -= textSize[0];\n    results.points[ptIdx * 3] = tmp2v3[0];\n    results.points[ptIdx * 3 + 1] = tmp2v3[1];\n    results.points[ptIdx * 3 + 2] = tmp2v3[2];\n    results.tcoords[ptIdx * 2] = value.tcoords[6];\n    results.tcoords[ptIdx * 2 + 1] = value.tcoords[7];\n    ptIdx++;\n\n    // add the two triangles to represent the quad\n    results.polys[cellIdx * 4] = 3;\n    results.polys[cellIdx * 4 + 1] = ptIdx - 4;\n    results.polys[cellIdx * 4 + 2] = ptIdx - 3;\n    results.polys[cellIdx * 4 + 3] = ptIdx - 2;\n    cellIdx++;\n    results.polys[cellIdx * 4] = 3;\n    results.polys[cellIdx * 4 + 1] = ptIdx - 4;\n    results.polys[cellIdx * 4 + 2] = ptIdx - 2;\n    results.polys[cellIdx * 4 + 3] = ptIdx - 1;\n    results.ptIdx += 4;\n    results.cellIdx += 2;\n  };\n\n  // update the polydata associated with drawing the text labels\n  // specifically the quads used for each label and their associated tcoords\n  // etc. This changes every time the camera viewpoint changes\n  const tmpv3 = new Float64Array(3);\n  publicAPI.updatePolyDataForLabels = () => {\n    // update the polydata\n    const numLabels = publicAPI.getTickStrings().length + model.barSegments.length;\n    const numPts = numLabels * 4;\n    const numTris = numLabels * 2;\n    const points = new Float64Array(numPts * 3);\n    const polys = new Uint16Array(numTris * 4);\n    const tcoords = new Float32Array(numPts * 2);\n    const results = {\n      ptIdx: 0,\n      cellIdx: 0,\n      polys,\n      points,\n      tcoords\n    };\n\n    // compute the direction vector\n    const offsetAxis = model.vertical ? 0 : 1;\n    const spacedAxis = model.vertical ? 1 : 0;\n    tmpv3[2] = -0.99; // near plane\n\n    // draw the title\n    const alignment = model.vertical ? ['right', 'middle'] : ['middle', 'bottom'];\n    let dir = [0, 1];\n    const tickOffsets = [0, 0];\n    if (model.vertical) {\n      tickOffsets[0] = -model.tickLabelPixelOffset;\n      if (model.topTitle) {\n        tmpv3[0] = model.boxPosition[0] + 0.5 * model.boxSize[0];\n        tmpv3[1] = model.barPosition[1] + model.barSize[1];\n\n        // write the axis label\n        publicAPI.createPolyDataForOneLabel(model.renderable.getAxisLabel(), tmpv3, ['middle', 'bottom'], 'horizontal', [0, model.axisTitlePixelOffset], results);\n      } else {\n        tmpv3[0] = model.barPosition[0] + model.barSize[0];\n        tmpv3[1] = model.barPosition[1] + 0.5 * model.barSize[1];\n\n        // write the axis label\n        publicAPI.createPolyDataForOneLabel(model.renderable.getAxisLabel(), tmpv3, ['middle', 'top'], 'vertical', [model.axisTitlePixelOffset, 0], results);\n      }\n      dir = [-1, 0];\n    } else {\n      tickOffsets[1] = model.tickLabelPixelOffset;\n      tmpv3[0] = model.barPosition[0] + 0.5 * model.barSize[0];\n      tmpv3[1] = model.barPosition[1] + model.barSize[1];\n      publicAPI.createPolyDataForOneLabel(model.renderable.getAxisLabel(), tmpv3, ['middle', 'bottom'], 'horizontal', [0, model.axisTitlePixelOffset], results);\n    }\n    tmpv3[offsetAxis] = model.barPosition[offsetAxis] + (0.5 * dir[offsetAxis] + 0.5) * model.barSize[offsetAxis];\n    tmpv3[spacedAxis] = model.barPosition[spacedAxis] + model.barSize[spacedAxis] * 0.5;\n\n    // draw bar segment labels\n    let tickSeg = null;\n    for (let i = 0; i < model.barSegments.length; i++) {\n      const seg = model.barSegments[i];\n      if (seg.title === 'ticks') {\n        // handle ticks below\n        tickSeg = seg;\n      } else {\n        tmpv3[spacedAxis] = model.barPosition[spacedAxis] + 0.5 * model.barSize[spacedAxis] * (seg.corners[2][spacedAxis] + seg.corners[0][spacedAxis]);\n        publicAPI.createPolyDataForOneLabel(seg.title, tmpv3, alignment, 'horizontal', tickOffsets, results);\n      }\n    }\n\n    // write the tick labels\n    const tickSegmentStart = model.barPosition[spacedAxis] + model.barSize[spacedAxis] * tickSeg.corners[0][spacedAxis];\n    const tickSegmentSize = model.barSize[spacedAxis] * (tickSeg.corners[2][spacedAxis] - tickSeg.corners[0][spacedAxis]);\n    const ticks = publicAPI.getTicks();\n    const tickStrings = publicAPI.getTickStrings();\n    const tickPositions = publicAPI.getTickPositions();\n    for (let t = 0; t < ticks.length; t++) {\n      // If tickPositions is not set, use a normalized position\n      const tickPos = tickPositions ? tickPositions[t] : (ticks[t] - model.lastTickBounds[0]) / (model.lastTickBounds[1] - model.lastTickBounds[0]);\n      tmpv3[spacedAxis] = tickSegmentStart + tickSegmentSize * tickPos;\n      publicAPI.createPolyDataForOneLabel(tickStrings[t], tmpv3, alignment, 'horizontal', tickOffsets, results);\n    }\n    const tcoordDA = vtkDataArray.newInstance({\n      numberOfComponents: 2,\n      values: tcoords,\n      name: 'TextureCoordinates'\n    });\n    model.tmPolyData.getPointData().setTCoords(tcoordDA);\n    model.tmPolyData.getPoints().setData(points, 3);\n    model.tmPolyData.getPoints().modified();\n    model.tmPolyData.getPolys().setData(polys, 1);\n    model.tmPolyData.getPolys().modified();\n    model.tmPolyData.modified();\n  };\n  publicAPI.updatePolyDataForBarSegments = () => {\n    const scalarsToColors = model.renderable.getScalarsToColors();\n    let numberOfExtraColors = 0;\n    if (model.renderable.getDrawNanAnnotation() && scalarsToColors.getNanColor()) {\n      numberOfExtraColors += 1;\n    }\n    if (model.renderable.getDrawBelowRangeSwatch() && scalarsToColors.getUseBelowRangeColor?.()) {\n      numberOfExtraColors += 1;\n    }\n    if (model.renderable.getDrawAboveRangeSwatch() && scalarsToColors.getUseAboveRangeColor?.()) {\n      numberOfExtraColors += 1;\n    }\n    const numPts = 4 * (1 + numberOfExtraColors);\n    const numQuads = numPts;\n\n    // handle vector component mode\n    let numComps = 1;\n    if (scalarsToColors.getVectorMode() === VectorMode.COMPONENT) {\n      numComps = scalarsToColors.getVectorComponent() + 1;\n    }\n\n    // create the colored bars\n    const points = new Float64Array(numPts * 3);\n    const cells = new Uint16Array(numQuads * 5);\n    const scalars = new Float32Array(numPts * numComps);\n    let ptIdx = 0;\n    let cellIdx = 0;\n    for (let i = 0; i < model.barSegments.length; i++) {\n      const seg = model.barSegments[i];\n      for (let e = 0; e < 4; e++) {\n        tmpv3[0] = model.barPosition[0] + seg.corners[e][0] * model.barSize[0];\n        tmpv3[1] = model.barPosition[1] + seg.corners[e][1] * model.barSize[1];\n        points[ptIdx * 3] = (0.5 * tmpv3[0] + 0.5) * model.lastSize[0];\n        points[ptIdx * 3 + 1] = (0.5 * tmpv3[1] + 0.5) * model.lastSize[1];\n        points[ptIdx * 3 + 2] = tmpv3[2];\n        for (let nc = 0; nc < numComps; nc++) {\n          scalars[ptIdx * numComps + nc] = model.lastTickBounds[0] + seg.scalars[e] * (model.lastTickBounds[1] - model.lastTickBounds[0]);\n        }\n        ptIdx++;\n      }\n      cells[cellIdx * 5] = 4;\n      cells[cellIdx * 5 + 1] = ptIdx - 4;\n      cells[cellIdx * 5 + 2] = ptIdx - 3;\n      cells[cellIdx * 5 + 3] = ptIdx - 2;\n      cells[cellIdx * 5 + 4] = ptIdx - 1;\n      cellIdx++;\n    }\n    const scalarsDA = vtkDataArray.newInstance({\n      numberOfComponents: numComps,\n      values: scalars,\n      name: 'Scalars'\n    });\n    model.polyData.getPointData().setScalars(scalarsDA);\n    model.polyData.getPoints().setData(points, 3);\n    model.polyData.getPoints().modified();\n    model.polyData.getPolys().setData(cells, 1);\n    model.polyData.getPolys().modified();\n    model.polyData.modified();\n  };\n}\nconst newScalarBarActorHelper = macro.newInstance(function (publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    renderable: null\n  };\n  Object.assign(model, {}, initialValues);\n\n  // Inheritance\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['axisTitlePixelOffset', 'tickLabelPixelOffset', 'renderable', 'topTitle', 'ticks', 'tickStrings', 'tickPositions']);\n  macro.get(publicAPI, model, ['lastSize', 'lastAspectRatio', 'lastTickBounds', 'axisTextStyle', 'tickTextStyle', 'barActor', 'tmActor']);\n  macro.getArray(publicAPI, model, ['boxPosition', 'boxSize']);\n  macro.setArray(publicAPI, model, ['boxPosition', 'boxSize'], 2);\n  model.forceUpdate = false;\n  model.lastRebuildTime = {};\n  macro.obj(model.lastRebuildTime, {\n    mtime: 0\n  });\n  model.lastSize = [-1, -1];\n  model.tmCanvas = document.createElement('canvas');\n  model.tmContext = model.tmCanvas.getContext('2d');\n  model._tmAtlas = new Map();\n  model.barMapper = vtkMapper.newInstance();\n  model.barMapper.setInterpolateScalarsBeforeMapping(true);\n  model.barMapper.setUseLookupTableScalarRange(true);\n  model.polyData = vtkPolyData.newInstance();\n  model.barMapper.setInputData(model.polyData);\n  model.barActor = vtkActor.newInstance();\n  model.barActor.setMapper(model.barMapper);\n\n  // for texture atlas\n  model.tmPolyData = vtkPolyData.newInstance();\n  model.tmMapper = vtkMapper.newInstance();\n  model.tmMapper.setInputData(model.tmPolyData);\n  model.tmTexture = vtkTexture.newInstance({\n    resizable: true\n  });\n  model.tmTexture.setInterpolate(false);\n  model.tmActor = vtkActor.newInstance({\n    parentProp: publicAPI\n  });\n  model.tmActor.setMapper(model.tmMapper);\n  model.tmActor.addTexture(model.tmTexture);\n  model.barPosition = [0, 0];\n  model.barSize = [0, 0];\n  model.boxPosition = [0.88, -0.92];\n  model.boxSize = [0.1, 1.1];\n\n  // internal variables\n  model.lastTickBounds = [];\n  vtkScalarBarActorHelper(publicAPI, model);\n}, 'vtkScalarBarActorHelper');\n\n//\n// Now we define the public class that the application sets view independent\n// properties on. This class is fairly small as it mainly just holds\n// properties setter and getters leaving all calculations to the helper\n// class.\n//\nfunction vtkScalarBarActor(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkScalarBarActor');\n  publicAPI.setTickTextStyle = tickStyle => {\n    model.tickTextStyle = {\n      ...model.tickTextStyle,\n      ...tickStyle\n    };\n    publicAPI.modified();\n  };\n  publicAPI.setAxisTextStyle = axisStyle => {\n    model.axisTextStyle = {\n      ...model.axisTextStyle,\n      ...axisStyle\n    };\n    publicAPI.modified();\n  };\n  publicAPI.setOrientationToHorizontal = () => publicAPI.setOrientation(Orientation.HORIZONTAL);\n  publicAPI.setOrientationToVertical = () => publicAPI.setOrientation(Orientation.VERTICAL);\n  publicAPI.resetAutoLayoutToDefault = () => {\n    publicAPI.setAutoLayout(defaultAutoLayout(publicAPI, model));\n  };\n  publicAPI.resetGenerateTicksToDefault = () => {\n    publicAPI.setGenerateTicks(defaultGenerateTicks());\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nfunction defaultValues(initialValues) {\n  return {\n    automated: true,\n    autoLayout: null,\n    axisLabel: 'Scalar Value',\n    barPosition: [0, 0],\n    barSize: [0, 0],\n    boxPosition: [0.88, -0.92],\n    boxSize: [0.1, 1.1],\n    scalarToColors: null,\n    axisTitlePixelOffset: 36.0,\n    axisTextStyle: {\n      fontColor: 'white',\n      fontStyle: 'normal',\n      fontSize: undefined,\n      fontFamily: 'serif'\n    },\n    tickLabelPixelOffset: 14.0,\n    tickTextStyle: {\n      fontColor: 'white',\n      fontStyle: 'normal',\n      fontSize: undefined,\n      fontFamily: 'serif'\n    },\n    generateTicks: null,\n    drawNanAnnotation: true,\n    drawBelowRangeSwatch: true,\n    drawAboveRangeSwatch: true,\n    orientation: null,\n    ...initialValues\n  };\n}\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, defaultValues(initialValues));\n  if (!model.autoLayout) model.autoLayout = defaultAutoLayout(publicAPI, model);\n  if (!model.generateTicks) model.generateTicks = defaultGenerateTicks();\n\n  // Inheritance\n  vtkActor.extend(publicAPI, model, initialValues);\n  publicAPI.getProperty().setDiffuse(0.0);\n  publicAPI.getProperty().setAmbient(1.0);\n  macro.setGet(publicAPI, model, ['automated', 'autoLayout', 'axisTitlePixelOffset', 'axisLabel', 'scalarsToColors', 'tickLabelPixelOffset', 'generateTicks', 'drawNanAnnotation', 'drawBelowRangeSwatch', 'drawAboveRangeSwatch', 'orientation']);\n  macro.get(publicAPI, model, ['axisTextStyle', 'tickTextStyle']);\n  macro.getArray(publicAPI, model, ['barPosition', 'barSize', 'boxPosition', 'boxSize']);\n  macro.setArray(publicAPI, model, ['barPosition', 'barSize', 'boxPosition', 'boxSize'], 2);\n\n  // Object methods\n  vtkScalarBarActor(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkScalarBarActor');\n\n// ----------------------------------------------------------------------------\n\nvar vtkScalarBarActor$1 = {\n  newInstance,\n  extend,\n  newScalarBarActorHelper,\n  ...Constants\n};\n\nexport { vtkScalarBarActor$1 as default, extend, newInstance };\n", "import { n as newInstance$1 } from '../../macros2.js';\nimport vtkScalarBarActor from '../Core/ScalarBarActor.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLScalarBarActor methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLScalarBarActor(publicAPI, model) {\n  model.classHierarchy.push('vtkOpenGLScalarBarActor');\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      model._openGLRenderer = publicAPI.getFirstAncestorOfType('vtkOpenGLRenderer');\n      model._openGLRenderWindow = model._openGLRenderer.getParent();\n      if (!model.scalarBarActorHelper.getRenderable()) {\n        model.scalarBarActorHelper.setRenderable(model.renderable);\n      }\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNode(model.scalarBarActorHelper.getBarActor());\n      publicAPI.addMissingNode(model.scalarBarActorHelper.getTmActor());\n      publicAPI.removeUnusedNodes();\n    }\n  };\n  publicAPI.opaquePass = (prepass, renderPass) => {\n    if (prepass) {\n      const camera = model._openGLRenderer ? model._openGLRenderer.getRenderable().getActiveCamera() : null;\n      const tsize = model._openGLRenderer.getTiledSizeAndOrigin();\n      model.scalarBarActorHelper.updateAPISpecificData([tsize.usize, tsize.vsize], camera, model._openGLRenderWindow.getRenderable());\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.scalarBarActorHelper = vtkScalarBarActor.newScalarBarActorHelper();\n\n  // Object methods\n  vtkOpenGLScalarBarActor(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkOpenGLScalarBarActor');\n\n// ----------------------------------------------------------------------------\n\nvar index = {\n  newInstance,\n  extend\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkScalarBarActor', newInstance);\n\nexport { index as default, extend, newInstance };\n", "import { mat3, mat4 } from 'gl-matrix';\nimport { n as newInstance$1, o as obj, e as setGet, g as get, c as macro } from '../../macros2.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport vtkHelper from './Helper.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport vtkOpenGLTexture from './Texture.js';\nimport { Representation } from '../Core/Property/Constants.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLSkybox methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLSkybox(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLSkybox');\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      model._openGLRenderer = publicAPI.getFirstAncestorOfType('vtkOpenGLRenderer');\n      model._openGLRenderWindow = model._openGLRenderer.getParent();\n      model.context = model._openGLRenderWindow.getContext();\n      model.tris.setOpenGLRenderWindow(model._openGLRenderWindow);\n      model.openGLTexture.setOpenGLRenderWindow(model._openGLRenderWindow);\n      const ren = model._openGLRenderer.getRenderable();\n      model.openGLCamera = model._openGLRenderer.getViewNodeFor(ren.getActiveCamera(), model.openGLCamera);\n    }\n  };\n  publicAPI.queryPass = (prepass, renderPass) => {\n    if (prepass) {\n      if (!model.renderable || !model.renderable.getVisibility()) {\n        return;\n      }\n      renderPass.incrementOpaqueActorCount();\n    }\n  };\n  publicAPI.opaquePass = (prepass, renderPass) => {\n    if (prepass && !model._openGLRenderer.getSelector()) {\n      publicAPI.updateBufferObjects();\n      model.context.depthMask(true);\n      model._openGLRenderWindow.getShaderCache().readyShaderProgram(model.tris.getProgram());\n      model.openGLTexture.render(model._openGLRenderWindow);\n      const texUnit = model.openGLTexture.getTextureUnit();\n      model.tris.getProgram().setUniformi('sbtexture', texUnit);\n      const ren = model._openGLRenderer.getRenderable();\n      const keyMats = model.openGLCamera.getKeyMatrices(ren);\n      const imat = new Float64Array(16);\n      mat4.invert(imat, keyMats.wcpc);\n      model.tris.getProgram().setUniformMatrix('IMCPCMatrix', imat);\n      if (model.lastFormat === 'box') {\n        const camPos = ren.getActiveCamera().getPosition();\n        model.tris.getProgram().setUniform3f('camPos', camPos[0], camPos[1], camPos[2]);\n      }\n      model.tris.getVAO().bind();\n\n      // draw polygons\n      model.context.drawArrays(model.context.TRIANGLES, 0, model.tris.getCABO().getElementCount());\n      model.tris.getVAO().release();\n      model.openGLTexture.deactivate();\n    }\n  };\n  publicAPI.updateBufferObjects = () => {\n    // build the VBO if needed, only happens once\n    if (!model.tris.getCABO().getElementCount()) {\n      const ptsArray = new Float32Array(12);\n      for (let i = 0; i < 4; i++) {\n        ptsArray[i * 3] = i % 2 * 2 - 1.0;\n        ptsArray[i * 3 + 1] = i > 1 ? 1.0 : -1.0;\n        ptsArray[i * 3 + 2] = 1.0;\n      }\n      const points = vtkDataArray.newInstance({\n        numberOfComponents: 3,\n        values: ptsArray\n      });\n      points.setName('points');\n      const cellArray = new Uint16Array(8);\n      cellArray[0] = 3;\n      cellArray[1] = 0;\n      cellArray[2] = 1;\n      cellArray[3] = 3;\n      cellArray[4] = 3;\n      cellArray[5] = 0;\n      cellArray[6] = 3;\n      cellArray[7] = 2;\n      const cells = vtkDataArray.newInstance({\n        numberOfComponents: 1,\n        values: cellArray\n      });\n      model.tris.getCABO().createVBO(cells, 'polys', Representation.SURFACE, {\n        points,\n        cellOffset: 0\n      });\n    }\n\n    // update the program?\n    if (model.renderable.getFormat() !== model.lastFormat) {\n      model.lastFormat = model.renderable.getFormat();\n      if (model.lastFormat === 'box') {\n        // we invert Y below because opengl is messed up!\n        // Cube Maps have been specified to follow the RenderMan\n        // specification (for whatever reason), and RenderMan\n        // assumes the images' origin being in the upper left,\n        // contrary to the usual OpenGL behaviour of having the\n        // image origin in the lower left. That's why things get\n        // swapped in the Y direction. It totally breaks with the usual\n        // OpenGL semantics and doesn't make sense at all.\n        // But now we're stuck with it.  From\n        // https://stackoverflow.com/questions/11685608/convention-of-faces-in-opengl-cubemapping\n        //\n        model.tris.setProgram(model._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec3 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = wpos.xyz/wpos.w;\n             }`, `//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec3 TexCoords;\n             uniform samplerCube sbtexture;\n             uniform vec3 camPos;\n             void main () {\n               // skybox looks from inside out\n               // which means we have to adjust\n               // our tcoords. Otherwise text would\n               // be flipped\n               vec3 tc = normalize(TexCoords - camPos);\n               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))\n               {\n                 tc = vec3(1.0, 1.0, -1.0) * tc;\n               }\n               else\n               {\n                 tc = vec3(-1.0, 1.0, 1.0) * tc;\n               }\n               gl_FragData[0] = textureCube(sbtexture, tc);\n             }`, ''));\n      }\n      if (model.lastFormat === 'background') {\n        // maps the texture to the window\n        model.tris.setProgram(model._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec2 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;\n             }`, `//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec2 TexCoords;\n             uniform sampler2D sbtexture;\n             void main () {\n               gl_FragData[0] = texture2D(sbtexture, TexCoords);\n             }`, ''));\n      }\n      model.tris.getShaderSourceTime().modified();\n      model.tris.getVAO().bind();\n      if (!model.tris.getVAO().addAttributeArray(model.tris.getProgram(), model.tris.getCABO(), 'vertexMC', model.tris.getCABO().getVertexOffset(), model.tris.getCABO().getStride(), model.context.FLOAT, 3, model.context.FALSE)) {\n        vtkErrorMacro('Error setting vertexMC in shader VAO.');\n      }\n    }\n\n    // set/update the texture map if needed\n    const tmaps = model.renderable.getTextures();\n    if (!tmaps.length) {\n      vtkErrorMacro('vtkSkybox requires a texture map');\n    }\n    if (model.openGLTexture.getRenderable() !== tmaps[0]) {\n      model.openGLTexture.releaseGraphicsResources(model._openGLRenderWindow);\n      model.openGLTexture.setRenderable(tmaps[0]);\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  context: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.openGLTexture = vtkOpenGLTexture.newInstance();\n  model.tris = vtkHelper.newInstance();\n  model.keyMatrixTime = {};\n  obj(model.keyMatrixTime, {\n    mtime: 0\n  });\n  model.keyMatrices = {\n    normalMatrix: mat3.identity(new Float64Array(9)),\n    mcwc: mat4.identity(new Float64Array(16))\n  };\n\n  // Build VTK API\n  setGet(publicAPI, model, ['context']);\n  get(publicAPI, model, ['activeTextures']);\n\n  // Object methods\n  vtkOpenGLSkybox(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkSkybox = {\n  newInstance,\n  extend\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkSkybox', newInstance);\n\nexport { vtkSkybox as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkViewNodeFactory from '../SceneGraph/ViewNodeFactory.js';\n\nconst CLASS_MAPPING = Object.create(null);\nfunction registerOverride(className, fn) {\n  CLASS_MAPPING[className] = fn;\n}\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUViewNodeFactory methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUViewNodeFactory(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUViewNodeFactory');\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Static class mapping shared across instances\n  model.overrides = CLASS_MAPPING;\n\n  // Inheritance\n  vtkViewNodeFactory.extend(publicAPI, model, initialValues);\n\n  // Object methods\n  vtkWebGPUViewNodeFactory(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUViewNodeFactory');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUViewNodeFactory$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUViewNodeFactory$1 as default, extend, newInstance, registerOverride };\n", "import { mat4 } from 'gl-matrix';\nimport { m as macro } from '../../macros2.js';\nimport vtkProp from '../Core/Prop.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\nconst {\n  CoordinateSystem\n} = vtkProp;\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUActor methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUActor(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUActor');\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      model.WebGPURenderer = publicAPI.getFirstAncestorOfType('vtkWebGPURenderer');\n      model.WebGPURenderWindow = model.WebGPURenderer.getFirstAncestorOfType('vtkWebGPURenderWindow');\n      if (model.propID === undefined) {\n        model.propID = model.WebGPURenderWindow.getUniquePropID();\n      }\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNode(model.renderable.getMapper());\n      publicAPI.removeUnusedNodes();\n    }\n  };\n\n  // we draw textures, then mapper, then post pass textures\n  publicAPI.traverseOpaquePass = renderPass => {\n    if (!model.renderable || !model.renderable.getNestedVisibility() || !model.renderable.getIsOpaque() || model.WebGPURenderer.getSelector() && !model.renderable.getNestedPickable()) {\n      return;\n    }\n    publicAPI.apply(renderPass, true);\n    if (model.children[0]) {\n      model.children[0].traverse(renderPass);\n    }\n    publicAPI.apply(renderPass, false);\n  };\n\n  // we draw textures, then mapper, then post pass textures\n  publicAPI.traverseTranslucentPass = renderPass => {\n    if (!model.renderable || !model.renderable.getNestedVisibility() || model.renderable.getIsOpaque() || model.WebGPURenderer.getSelector() && !model.renderable.getNestedPickable()) {\n      return;\n    }\n    publicAPI.apply(renderPass, true);\n    if (model.children[0]) {\n      model.children[0].traverse(renderPass);\n    }\n    publicAPI.apply(renderPass, false);\n  };\n  publicAPI.queryPass = (prepass, renderPass) => {\n    if (prepass) {\n      if (!model.renderable || !model.renderable.getVisibility()) {\n        return;\n      }\n      if (model.renderable.getIsOpaque()) {\n        renderPass.incrementOpaqueActorCount();\n      } else {\n        renderPass.incrementTranslucentActorCount();\n      }\n    }\n  };\n  publicAPI.getBufferShift = wgpuRen => {\n    publicAPI.getKeyMatrices(wgpuRen);\n    return model.bufferShift;\n  };\n  publicAPI.getKeyMatrices = wgpuRen => {\n    // has the actor or stabilization center changed?\n    if (Math.max(model.renderable.getMTime(), wgpuRen.getStabilizedTime()) > model.keyMatricesTime.getMTime()) {\n      model.renderable.computeMatrix();\n      const mcwc = model.renderable.getMatrix();\n\n      // compute the net shift, only apply stabilized coords with world coordinates\n      model.bufferShift[0] = mcwc[3];\n      model.bufferShift[1] = mcwc[7];\n      model.bufferShift[2] = mcwc[11];\n      const center = wgpuRen.getStabilizedCenterByReference();\n      if (model.renderable.getCoordinateSystem() === CoordinateSystem.WORLD) {\n        model.bufferShift[0] -= center[0];\n        model.bufferShift[1] -= center[1];\n        model.bufferShift[2] -= center[2];\n      }\n      mat4.transpose(model.keyMatrices.bcwc, mcwc);\n      if (model.renderable.getIsIdentity()) {\n        mat4.identity(model.keyMatrices.normalMatrix);\n      } else {\n        // we use bcwc BEFORE the translate below (just to get transposed mcvc)\n        mat4.copy(model.keyMatrices.normalMatrix, model.keyMatrices.bcwc);\n        // zero out translation\n        model.keyMatrices.normalMatrix[3] = 0.0;\n        model.keyMatrices.normalMatrix[7] = 0.0;\n        model.keyMatrices.normalMatrix[11] = 0.0;\n        mat4.invert(model.keyMatrices.normalMatrix, model.keyMatrices.normalMatrix);\n        mat4.transpose(model.keyMatrices.normalMatrix, model.keyMatrices.normalMatrix);\n      }\n\n      // only need the buffer shift to get to world\n      mat4.translate(model.keyMatrices.bcwc, model.keyMatrices.bcwc, [-model.bufferShift[0], -model.bufferShift[1], -model.bufferShift[2]]);\n\n      // to get to stabilized we also need the center\n      if (model.renderable.getCoordinateSystem() === CoordinateSystem.WORLD) {\n        mat4.translate(model.keyMatrices.bcsc, model.keyMatrices.bcwc, [-center[0], -center[1], -center[2]]);\n      } else {\n        mat4.copy(model.keyMatrices.bcsc, model.keyMatrices.bcwc);\n      }\n      model.keyMatricesTime.modified();\n    }\n    return model.keyMatrices;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  keyMatricesTime: null,\n  keyMatrices: null,\n  propID: undefined,\n  bufferShift: undefined\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.keyMatricesTime = {};\n  macro.obj(model.keyMatricesTime, {\n    mtime: 0\n  });\n  model.keyMatrices = {\n    normalMatrix: new Float64Array(16),\n    bcwc: new Float64Array(16),\n    bcsc: new Float64Array(16)\n  };\n  macro.get(publicAPI, model, ['propID', 'keyMatricesTime']);\n  model.bufferShift = [0, 0, 0, 0];\n\n  // Object methods\n  vtkWebGPUActor(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar index = {\n  newInstance,\n  extend\n};\n\n// Register ourself to WebGPU backend if imported\nregisterOverride('vtkActor', newInstance);\n\nexport { index as default, extend, newInstance };\n", "import { mat4 } from 'gl-matrix';\nimport { m as macro } from '../../macros2.js';\nimport vtkProp from '../Core/Prop.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\nconst {\n  CoordinateSystem\n} = vtkProp;\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUActor methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUActor2D(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUActor2D');\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      model.WebGPURenderer = publicAPI.getFirstAncestorOfType('vtkWebGPURenderer');\n      model.WebGPURenderWindow = model.WebGPURenderer.getFirstAncestorOfType('vtkWebGPURenderWindow');\n      if (model.propID === undefined) {\n        model.propID = model.WebGPURenderWindow.getUniquePropID();\n      }\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNode(model.renderable.getMapper());\n      publicAPI.removeUnusedNodes();\n    }\n  };\n\n  // we draw textures, then mapper, then post pass textures\n  publicAPI.traverseOpaquePass = renderPass => {\n    if (!model.renderable || !model.renderable.getNestedVisibility() || !model.renderable.getIsOpaque() || model.WebGPURenderer.getSelector() && !model.renderable.getNestedPickable()) {\n      return;\n    }\n    publicAPI.apply(renderPass, true);\n    if (model.children[0]) {\n      model.children[0].traverse(renderPass);\n    }\n    publicAPI.apply(renderPass, false);\n  };\n\n  // we draw textures, then mapper, then post pass textures\n  publicAPI.traverseTranslucentPass = renderPass => {\n    if (!model.renderable || !model.renderable.getNestedVisibility() || model.renderable.getIsOpaque() || model.WebGPURenderer.getSelector() && !model.renderable.getNestedPickable()) {\n      return;\n    }\n    publicAPI.apply(renderPass, true);\n    if (model.children[0]) {\n      model.children[0].traverse(renderPass);\n    }\n    publicAPI.apply(renderPass, false);\n  };\n  publicAPI.queryPass = (prepass, renderPass) => {\n    if (prepass) {\n      if (!model.renderable || !model.renderable.getVisibility()) {\n        return;\n      }\n      if (model.renderable.getIsOpaque()) {\n        renderPass.incrementOpaqueActorCount();\n      } else {\n        renderPass.incrementTranslucentActorCount();\n      }\n    }\n  };\n  publicAPI.getBufferShift = wgpuRen => {\n    publicAPI.getKeyMatrices(wgpuRen);\n    return model.bufferShift;\n  };\n  publicAPI.getKeyMatrices = wgpuRen => {\n    // has the actor or stabilization center changed?\n    if (Math.max(model.renderable.getMTime(), wgpuRen.getStabilizedTime()) > model.keyMatricesTime.getMTime()) {\n      // compute the net shift, only apply stabilized coords with world coordinates\n      model.bufferShift[0] = 0.0;\n      model.bufferShift[1] = 0.0;\n      model.bufferShift[2] = 0.0;\n      const center = wgpuRen.getStabilizedCenterByReference();\n      if (model.renderable.getCoordinateSystem() === CoordinateSystem.WORLD) {\n        model.bufferShift[0] -= center[0];\n        model.bufferShift[1] -= center[1];\n        model.bufferShift[2] -= center[2];\n      }\n      mat4.identity(model.keyMatrices.bcwc);\n      mat4.identity(model.keyMatrices.normalMatrix);\n\n      // only meed the buffer shift to get to world\n      mat4.translate(model.keyMatrices.bcwc, model.keyMatrices.bcwc, [-model.bufferShift[0], -model.bufferShift[1], -model.bufferShift[2]]);\n\n      // to get to stabilized we also need the center\n      if (model.renderable.getCoordinateSystem() === CoordinateSystem.WORLD) {\n        mat4.translate(model.keyMatrices.bcsc, model.keyMatrices.bcwc, [-center[0], -center[1], -center[2]]);\n      } else {\n        mat4.copy(model.keyMatrices.bcsc, model.keyMatrices.bcwc);\n      }\n      model.keyMatricesTime.modified();\n    }\n    return model.keyMatrices;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  keyMatricesTime: null,\n  keyMatrices: null,\n  propID: undefined,\n  bufferShift: undefined\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.keyMatricesTime = {};\n  macro.obj(model.keyMatricesTime, {\n    mtime: 0\n  });\n  model.keyMatrices = {\n    normalMatrix: new Float64Array(16),\n    bcwc: new Float64Array(16),\n    bcsc: new Float64Array(16)\n  };\n  macro.get(publicAPI, model, ['propID', 'keyMatricesTime']);\n  model.bufferShift = [0, 0, 0, 0];\n\n  // Object methods\n  vtkWebGPUActor2D(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar index = {\n  newInstance,\n  extend\n};\n\n// Register ourself to WebGPU backend if imported\nregisterOverride('vtkActor2D', newInstance);\n\nexport { index as default, extend, newInstance };\n", "import { mat4 } from 'gl-matrix';\nimport { m as macro } from '../../macros2.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUCamera methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUCamera(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUCamera');\n  publicAPI.getProjectionMatrix = (outMat, aspect, cRange, windowCenter) => {\n    mat4.identity(outMat);\n    if (model.renderable.getParallelProjection()) {\n      // set up a rectangular parallelipiped\n      const parallelScale = model.renderable.getParallelScale();\n      const width = parallelScale * aspect;\n      const height = parallelScale;\n      const xmin = (windowCenter[0] - 1.0) * width;\n      const xmax = (windowCenter[0] + 1.0) * width;\n      const ymin = (windowCenter[1] - 1.0) * height;\n      const ymax = (windowCenter[1] + 1.0) * height;\n      const xr = 1.0 / (xmax - xmin);\n      const yr = 1.0 / (ymax - ymin);\n      outMat[0] = 2.0 * xr;\n      outMat[5] = 2.0 * yr;\n      outMat[10] = 1.0 / (cRange[1] - cRange[0]);\n      outMat[12] = (xmax + xmin) * xr;\n      outMat[13] = (ymax + ymin) * yr;\n      outMat[14] = cRange[1] / (cRange[1] - cRange[0]);\n    } else {\n      const tmp = Math.tan(Math.PI * model.renderable.getViewAngle() / 360.0);\n      let width;\n      let height;\n      if (model.renderable.getUseHorizontalViewAngle() === true) {\n        width = cRange[0] * tmp;\n        height = cRange[0] * tmp / aspect;\n      } else {\n        width = cRange[0] * tmp * aspect;\n        height = cRange[0] * tmp;\n      }\n      const xmin = (windowCenter[0] - 1.0) * width;\n      const xmax = (windowCenter[0] + 1.0) * width;\n      const ymin = (windowCenter[1] - 1.0) * height;\n      const ymax = (windowCenter[1] + 1.0) * height;\n      outMat[0] = 2.0 * cRange[0] / (xmax - xmin);\n      outMat[5] = 2.0 * cRange[0] / (ymax - ymin);\n      outMat[12] = (xmin + xmax) / (xmax - xmin);\n      outMat[13] = (ymin + ymax) / (ymax - ymin);\n      outMat[10] = 0.0;\n      outMat[14] = cRange[0];\n      outMat[11] = -1.0;\n      outMat[15] = 0.0;\n    }\n  };\n  publicAPI.convertToOpenGLDepth = val => {\n    if (model.renderable.getParallelProjection()) {\n      return 1.0 - val;\n    }\n    const cRange = model.renderable.getClippingRangeByReference();\n    let zval = -cRange[0] / val;\n    zval = (cRange[0] + cRange[1]) / (cRange[1] - cRange[0]) + 2.0 * cRange[0] * cRange[1] / (zval * (cRange[1] - cRange[0]));\n    return 0.5 * zval + 0.5;\n  };\n  publicAPI.getKeyMatrices = webGPURenderer => {\n    // has the camera changed?\n    const ren = webGPURenderer.getRenderable();\n    const webGPURenderWindow = webGPURenderer.getParent();\n    if (Math.max(webGPURenderWindow.getMTime(), publicAPI.getMTime(), ren.getMTime(), model.renderable.getMTime(), webGPURenderer.getStabilizedTime()) > model.keyMatrixTime.getMTime()) {\n      const wcvc = model.renderable.getViewMatrix();\n      mat4.copy(model.keyMatrices.normalMatrix, wcvc);\n      // zero out translation\n      model.keyMatrices.normalMatrix[3] = 0.0;\n      model.keyMatrices.normalMatrix[7] = 0.0;\n      model.keyMatrices.normalMatrix[11] = 0.0;\n      mat4.invert(model.keyMatrices.normalMatrix, model.keyMatrices.normalMatrix);\n      mat4.transpose(model.keyMatrices.wcvc, wcvc);\n      const center = webGPURenderer.getStabilizedCenterByReference();\n      mat4.translate(model.keyMatrices.scvc, model.keyMatrices.wcvc, center);\n      const aspectRatio = webGPURenderer.getAspectRatio();\n      const cRange = model.renderable.getClippingRangeByReference();\n      publicAPI.getProjectionMatrix(model.keyMatrices.vcpc, aspectRatio, cRange, model.renderable.getWindowCenterByReference());\n      mat4.multiply(model.keyMatrices.scpc, model.keyMatrices.vcpc, model.keyMatrices.scvc);\n      mat4.invert(model.keyMatrices.pcsc, model.keyMatrices.scpc);\n      model.keyMatrixTime.modified();\n    }\n    return model.keyMatrices;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  keyMatrixTime: null,\n  keyMatrices: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.keyMatrixTime = {};\n  macro.obj(model.keyMatrixTime);\n\n  // values always get set by the get method\n  model.keyMatrices = {\n    normalMatrix: new Float64Array(16),\n    vcpc: new Float64Array(16),\n    pcsc: new Float64Array(16),\n    wcvc: new Float64Array(16),\n    scpc: new Float64Array(16),\n    scvc: new Float64Array(16)\n  };\n\n  // Build VTK API\n  macro.setGet(publicAPI, model, ['keyMatrixTime']);\n\n  // Object methods\n  vtkWebGPUCamera(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar index = {\n  newInstance,\n  extend\n};\n\n// Register ourself to WebGPU backend if imported\nregisterOverride('vtkCamera', newInstance);\n\nexport { index as default, extend, newInstance };\n", "import { n as newInstance$1 } from '../../macros2.js';\nimport vtkCubeAxesActor from '../Core/CubeAxesActor.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUCubeAxesActor methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUCubeAxesActor(publicAPI, model) {\n  model.classHierarchy.push('vtkWebGPUCubeAxesActor');\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      model.WebGPURenderer = publicAPI.getFirstAncestorOfType('vtkWebGPURenderer');\n      model.WebGPURenderWindow = model.WebGPURenderer.getParent();\n      if (!model.CubeAxesActorHelper.getRenderable()) {\n        model.CubeAxesActorHelper.setRenderable(model.renderable);\n      }\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNode(model.CubeAxesActorHelper.getTmActor());\n      publicAPI.addMissingNode(model.renderable.getGridActor());\n      publicAPI.removeUnusedNodes();\n    }\n  };\n  publicAPI.opaquePass = (prepass, renderPass) => {\n    if (prepass) {\n      const camera = model.WebGPURenderer ? model.WebGPURenderer.getRenderable().getActiveCamera() : null;\n      const tsize = model.WebGPURenderer.getTiledSizeAndOrigin();\n      model.CubeAxesActorHelper.updateAPISpecificData([tsize.usize, tsize.vsize], camera, model.WebGPURenderWindow.getRenderable());\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.CubeAxesActorHelper = vtkCubeAxesActor.newCubeAxesActorHelper();\n\n  // Object methods\n  vtkWebGPUCubeAxesActor(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkWebGPUCubeAxesActor');\n\n// ----------------------------------------------------------------------------\n\nvar index = {\n  newInstance,\n  extend\n};\n\n// Register ourself to WebGPU backend if imported\nregisterOverride('vtkCubeAxesActor', newInstance);\n\nexport { index as default, extend, newInstance };\n", "const BufferUsage = {\n  Verts: 0,\n  Lines: 1,\n  Triangles: 2,\n  Strips: 3,\n  LinesFromStrips: 4,\n  LinesFromTriangles: 5,\n  Points: 6,\n  UniformArray: 7,\n  PointArray: 8,\n  NormalsFromPoints: 9,\n  Texture: 10,\n  RawVertex: 11,\n  Storage: 12,\n  Index: 13\n};\nconst PrimitiveTypes = {\n  Start: 0,\n  Points: 0,\n  Lines: 1,\n  Triangles: 2,\n  TriangleStrips: 3,\n  TriangleEdges: 4,\n  TriangleStripEdges: 5,\n  End: 6\n};\nvar Constants = {\n  BufferUsage,\n  PrimitiveTypes\n};\n\nexport { BufferUsage, PrimitiveTypes, Constants as default };\n", "import { m as macro } from '../../macros2.js';\nimport Constants from './BufferManager/Constants.js';\n\n// methods we forward to the handle\nconst forwarded = ['getMappedRange', 'mapAsync', 'unmap'];\nfunction bufferSubData(device, destBuffer, destOffset, srcArrayBuffer) {\n  const byteCount = srcArrayBuffer.byteLength;\n  const srcBuffer = device.createBuffer({\n    size: byteCount,\n    /* eslint-disable no-undef */\n    usage: GPUBufferUsage.COPY_SRC,\n    /* eslint-enable no-undef */\n    mappedAtCreation: true\n  });\n  const arrayBuffer = srcBuffer.getMappedRange(0, byteCount);\n  new Uint8Array(arrayBuffer).set(new Uint8Array(srcArrayBuffer)); // memcpy\n  srcBuffer.unmap();\n  const encoder = device.createCommandEncoder();\n  encoder.copyBufferToBuffer(srcBuffer, 0, destBuffer, destOffset, byteCount);\n  const commandBuffer = encoder.finish();\n  const queue = device.queue;\n  queue.submit([commandBuffer]);\n  srcBuffer.destroy();\n}\n// ----------------------------------------------------------------------------\n// vtkWebGPUBufferManager methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUBuffer(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUBuffer');\n  publicAPI.create = (sizeInBytes, usage) => {\n    model.handle = model.device.getHandle().createBuffer({\n      size: sizeInBytes,\n      usage,\n      label: model.label\n    });\n    model.sizeInBytes = sizeInBytes;\n    model.usage = usage;\n  };\n  publicAPI.write = data => {\n    bufferSubData(model.device.getHandle(), model.handle, 0, data.buffer);\n  };\n  publicAPI.createAndWrite = (data, usage) => {\n    const paddedSize = Math.ceil(data.byteLength / 4) * 4;\n    model.handle = model.device.getHandle().createBuffer({\n      size: paddedSize,\n      usage,\n      mappedAtCreation: true,\n      label: model.label\n    });\n    model.sizeInBytes = paddedSize;\n    model.usage = usage;\n    new Uint8Array(model.handle.getMappedRange()).set(new Uint8Array(data.buffer)); // memcpy\n    model.handle.unmap();\n  };\n\n  // simple forwarders\n  for (let i = 0; i < forwarded.length; i++) {\n    publicAPI[forwarded[i]] = function () {\n      return model.handle[forwarded[i]](...arguments);\n    };\n  }\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  device: null,\n  handle: null,\n  sizeInBytes: 0,\n  strideInBytes: 0,\n  arrayInformation: null,\n  usage: null,\n  label: null,\n  sourceTime: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['handle', 'sizeInBytes', 'usage']);\n  macro.setGet(publicAPI, model, ['strideInBytes', 'device', 'arrayInformation', 'label', 'sourceTime']);\n  vtkWebGPUBuffer(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUBuffer$1 = {\n  newInstance,\n  extend,\n  ...Constants\n};\n\nexport { vtkWebGPUBuffer$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport Constants from './BufferManager/Constants.js';\nimport vtkProperty from '../Core/Property.js';\nimport vtkWebGPUBuffer from './Buffer.js';\n\nconst {\n  Representation\n} = vtkProperty;\nconst {\n  PrimitiveTypes\n} = Constants;\n\n// Simulate a small map of pointId to flatId for a cell. The original code\n// used a map and was 2.6x slower (4.7 to 1.9 seconds). Using two fixed\n// length arrays with a count is so much faster even with the required for\n// loops and if statements. This only works as we know the usage is\n// restricted to clear(), set() get() and has() so the count is always\n// incrmenting except for clear where it goes back to 0. Performance\n// improvement is probably due to this appoach not hitting the heap but wow\n// it is so much faster. Code that adds to these vectors checks against 9 to\n// make sure there is room. Switching to test against vec.length -1 results\n// in a small performance hit, so if you change 10, search for 9 in this\n// small class and change those as well.\nclass _LimitedMap {\n  constructor() {\n    this.keys = new Uint32Array(10);\n    this.values = new Uint32Array(10);\n    this.count = 0;\n  }\n  clear() {\n    this.count = 0;\n  }\n  has(key) {\n    for (let i = 0; i < this.count; i++) {\n      if (this.keys[i] === key) {\n        return true;\n      }\n    }\n    return undefined;\n  }\n  get(key) {\n    for (let i = 0; i < this.count; i++) {\n      if (this.keys[i] === key) {\n        return this.values[i];\n      }\n    }\n    return undefined;\n  }\n  set(key, value) {\n    if (this.count < 9) {\n      this.keys[this.count] = key;\n      this.values[this.count++] = value;\n    }\n  }\n}\nfunction getPrimitiveName(primType) {\n  switch (primType) {\n    case PrimitiveTypes.Points:\n      return 'points';\n    case PrimitiveTypes.Lines:\n      return 'lines';\n    case PrimitiveTypes.Triangles:\n    case PrimitiveTypes.TriangleEdges:\n      return 'polys';\n    case PrimitiveTypes.TriangleStripEdges:\n    case PrimitiveTypes.TriangleStrips:\n      return 'strips';\n    default:\n      return '';\n  }\n}\nfunction _getOrAddFlatId(state, ptId, cellId) {\n  let flatId = state.pointIdToFlatId[ptId];\n  if (flatId < 0) {\n    flatId = state.flatId;\n    state.pointIdToFlatId[ptId] = flatId;\n    state.flatIdToPointId[state.flatId] = ptId;\n    state.flatIdToCellId[state.flatId] = cellId;\n    state.flatId++;\n  }\n  return flatId;\n}\nfunction fillCell(ptIds, cellId, state) {\n  const numPtIds = ptIds.length;\n  // are any points already marked for this cell? If so use that as the provoking point\n  for (let ptIdx = 0; ptIdx < numPtIds; ptIdx++) {\n    let ptId = ptIds[ptIdx];\n    if (state.cellProvokedMap.has(ptId)) {\n      state.ibo[state.iboId++] = state.cellProvokedMap.get(ptId);\n\n      // insert remaining ptIds (they do not need to provoke)\n      for (let ptIdx2 = ptIdx + 1; ptIdx2 < ptIdx + numPtIds; ptIdx2++) {\n        ptId = ptIds[ptIdx2 % numPtIds];\n        const flatId = _getOrAddFlatId(state, ptId, cellId);\n        // add to ibo\n        state.ibo[state.iboId++] = flatId;\n      }\n      // all done now\n      return;\n    }\n  }\n\n  // else have any of the points not been used yet? (not in provokedPointIds)\n  for (let ptIdx = 0; ptIdx < numPtIds; ptIdx++) {\n    let ptId = ptIds[ptIdx];\n    if (!state.provokedPointIds[ptId]) {\n      let flatId = _getOrAddFlatId(state, ptId, cellId);\n      // mark provoking and add to ibo\n      state.provokedPointIds[ptId] = 1;\n      state.cellProvokedMap.set(ptId, flatId);\n      // when provoking always set the cellId as an original non-provoking value\n      // will have been stored and we need to overwrite that\n      state.flatIdToCellId[flatId] = cellId;\n      state.ibo[state.iboId++] = flatId;\n\n      // insert remaining ptIds (they do not need to provoke)\n      for (let ptIdx2 = ptIdx + 1; ptIdx2 < ptIdx + numPtIds; ptIdx2++) {\n        ptId = ptIds[ptIdx2 % numPtIds];\n        flatId = _getOrAddFlatId(state, ptId, cellId);\n        // add to ibo\n        state.ibo[state.iboId++] = flatId;\n      }\n      // all done now\n      return;\n    }\n  }\n\n  // if we got here then none of the ptIds could be used to provoke\n  // so just duplicate the first one\n  let ptId = ptIds[0];\n  let flatId = state.flatId;\n  state.cellProvokedMap.set(ptId, flatId);\n  state.flatIdToPointId[state.flatId] = ptId;\n  state.flatIdToCellId[state.flatId] = cellId;\n  state.flatId++;\n\n  // add to ibo\n  state.ibo[state.iboId++] = flatId;\n\n  // insert remaining ptIds (they do not need to provoke)\n  for (let ptIdx2 = 1; ptIdx2 < numPtIds; ptIdx2++) {\n    ptId = ptIds[ptIdx2];\n    flatId = _getOrAddFlatId(state, ptId, cellId);\n    // add to ibo\n    state.ibo[state.iboId++] = flatId;\n  }\n}\nfunction countCell(ptIds, cellId, state) {\n  const numPtIds = ptIds.length;\n  state.iboSize += numPtIds;\n\n  // are any points already marked for this cell? If so use that as the provoking point\n  for (let ptIdx = 0; ptIdx < numPtIds; ptIdx++) {\n    const ptId = ptIds[ptIdx];\n    if (state.cellProvokedMap.has(ptId)) {\n      return;\n    }\n  }\n\n  // else have any of the points not been used yet? (not in provokedPointIds)\n  for (let ptIdx = 0; ptIdx < numPtIds; ptIdx++) {\n    const ptId = ptIds[ptIdx];\n    if (!state.provokedPointIds[ptId]) {\n      state.provokedPointIds[ptId] = 1;\n      state.cellProvokedMap.set(ptId, 1);\n      return;\n    }\n  }\n  // if we got here then none of the ptIds could be used to provoke\n  state.cellProvokedMap.set(ptIds[0], 1);\n  state.extraPoints++;\n}\nlet processCell;\nconst _single = new Uint32Array(1);\nconst _double = new Uint32Array(2);\nconst _triple = new Uint32Array(3);\nconst _indexCellBuilders = {\n  // easy, every input point becomes an output point\n  anythingToPoints(numPoints, cellPts, offset, cellId, state) {\n    for (let i = 0; i < numPoints; ++i) {\n      _single[0] = cellPts[offset + i];\n      processCell(_single, cellId, state);\n    }\n  },\n  linesToWireframe(numPoints, cellPts, offset, cellId, state) {\n    // for lines we add a bunch of segments\n    for (let i = 0; i < numPoints - 1; ++i) {\n      _double[0] = cellPts[offset + i];\n      _double[1] = cellPts[offset + i + 1];\n      processCell(_double, cellId, state);\n    }\n  },\n  polysToWireframe(numPoints, cellPts, offset, cellId, state) {\n    // for polys we add a bunch of segments and close it\n    if (numPoints > 2) {\n      for (let i = 0; i < numPoints; ++i) {\n        _double[0] = cellPts[offset + i];\n        _double[1] = cellPts[offset + (i + 1) % numPoints];\n        processCell(_double, cellId, state);\n      }\n    }\n  },\n  stripsToWireframe(numPoints, cellPts, offset, cellId, state) {\n    if (numPoints > 2) {\n      // for strips we add a bunch of segments and close it\n      for (let i = 0; i < numPoints - 1; ++i) {\n        _double[0] = cellPts[offset + i];\n        _double[1] = cellPts[offset + i + 1];\n        processCell(_double, cellId, state);\n      }\n      for (let i = 0; i < numPoints - 2; i++) {\n        _double[0] = cellPts[offset + i];\n        _double[1] = cellPts[offset + i + 2];\n        processCell(_double, cellId, state);\n      }\n    }\n  },\n  polysToSurface(npts, cellPts, offset, cellId, state) {\n    for (let i = 0; i < npts - 2; i++) {\n      _triple[0] = cellPts[offset];\n      _triple[1] = cellPts[offset + i + 1];\n      _triple[2] = cellPts[offset + i + 2];\n      processCell(_triple, cellId, state);\n    }\n  },\n  stripsToSurface(npts, cellPts, offset, cellId, state) {\n    for (let i = 0; i < npts - 2; i++) {\n      _triple[0] = cellPts[offset + i];\n      _triple[1] = cellPts[offset + i + 1 + i % 2];\n      _triple[2] = cellPts[offset + i + 1 + (i + 1) % 2];\n      processCell(_triple, cellId, state);\n    }\n  }\n};\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUIndexBufferManager methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUIndexBuffer(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUIndexBuffer');\n  publicAPI.buildIndexBuffer = req => {\n    const cellArray = req.cells;\n    const primitiveType = req.primitiveType;\n    const representation = req.representation;\n    const cellOffset = req.cellOffset;\n    const array = cellArray.getData();\n    const cellArraySize = array.length;\n    const inRepName = getPrimitiveName(primitiveType);\n    const numPts = req.numberOfPoints;\n    const state = {\n      provokedPointIds: new Uint8Array(numPts),\n      // size is good\n      extraPoints: 0,\n      iboSize: 0,\n      flatId: 0,\n      iboId: 0,\n      cellProvokedMap: new _LimitedMap()\n    };\n    let func = null;\n    if (representation === Representation.POINTS || primitiveType === PrimitiveTypes.Points) {\n      func = _indexCellBuilders.anythingToPoints;\n    } else if (representation === Representation.WIREFRAME || primitiveType === PrimitiveTypes.Lines) {\n      func = _indexCellBuilders[`${inRepName}ToWireframe`];\n    } else {\n      func = _indexCellBuilders[`${inRepName}ToSurface`];\n    }\n\n    // first we count how many extra provoking points we need\n    processCell = countCell;\n    let cellId = cellOffset || 0;\n    for (let cellArrayIndex = 0; cellArrayIndex < cellArraySize;) {\n      state.cellProvokedMap.clear();\n      func(array[cellArrayIndex], array, cellArrayIndex + 1, cellId, state);\n      cellArrayIndex += array[cellArrayIndex] + 1;\n      cellId++;\n    }\n\n    // then we allocate the remaining structures\n    // (we pick the best size to save space and transfer costs)\n    if (numPts <= 0xffff) {\n      state.flatIdToPointId = new Uint16Array(numPts + state.extraPoints);\n    } else {\n      state.flatIdToPointId = new Uint32Array(numPts + state.extraPoints);\n    }\n    if (numPts + state.extraPoints < 0x8fff) {\n      state.pointIdToFlatId = new Int16Array(numPts);\n    } else {\n      state.pointIdToFlatId = new Int32Array(numPts);\n    }\n    if (numPts + state.extraPoints <= 0xffff) {\n      state.ibo = new Uint16Array(state.iboSize);\n      req.format = 'uint16';\n    } else {\n      state.ibo = new Uint32Array(state.iboSize);\n      req.format = 'uint32';\n    }\n    if (cellId <= 0xffff) {\n      state.flatIdToCellId = new Uint16Array(numPts + state.extraPoints);\n    } else {\n      state.flatIdToCellId = new Uint32Array(numPts + state.extraPoints);\n    }\n    state.pointIdToFlatId.fill(-1);\n    state.provokedPointIds.fill(0);\n\n    // and fill them in\n    processCell = fillCell;\n    cellId = cellOffset || 0;\n    for (let cellArrayIndex = 0; cellArrayIndex < cellArraySize;) {\n      state.cellProvokedMap.clear();\n      func(array[cellArrayIndex], array, cellArrayIndex + 1, cellId, state);\n      cellArrayIndex += array[cellArrayIndex] + 1;\n      cellId++;\n    }\n    delete state.provokedPointIds;\n    delete state.pointIdToFlatId;\n\n    // store the results we need\n    req.nativeArray = state.ibo;\n    model.flatIdToPointId = state.flatIdToPointId;\n    model.flatIdToCellId = state.flatIdToCellId;\n    model.flatSize = state.flatId;\n    model.indexCount = state.iboId;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  flatIdToPointId: null,\n  flatIdToCellId: null,\n  flatSize: 0,\n  indexCount: 0\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkWebGPUBuffer.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['flatIdToPointId', 'flatIdToCellId', 'flatSize', 'indexCount']);\n  vtkWebGPUIndexBuffer(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUIndexBuffer$1 = {\n  newInstance,\n  extend,\n  ...Constants\n};\n\nexport { vtkWebGPUIndexBuffer$1 as default, extend, newInstance };\n", "import { n as newInstance$1, o as obj, e as setGet, c as macro, a as newTypedArray } from '../../macros2.js';\nimport { j as cross, l as normalize } from '../../Common/Core/Math/index.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport vtkWebGPUBuffer from './Buffer.js';\nimport vtkWebGPUIndexBuffer from './IndexBuffer.js';\nimport vtkWebGPUTypes from './Types.js';\nimport Constants from './BufferManager/Constants.js';\n\nconst {\n  BufferUsage\n} = Constants;\nconst {\n  vtkErrorMacro\n} = macro;\nconst {\n  VtkDataTypes\n} = vtkDataArray;\n\n// the webgpu constants all show up as undefined\n/* eslint-disable no-undef */\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {};\nfunction _getFormatForDataArray(dataArray) {\n  let format;\n  switch (dataArray.getDataType()) {\n    case VtkDataTypes.UNSIGNED_CHAR:\n      format = 'uint8';\n      break;\n    case VtkDataTypes.FLOAT:\n      format = 'float32';\n      break;\n    case VtkDataTypes.UNSIGNED_INT:\n      format = 'uint32';\n      break;\n    case VtkDataTypes.INT:\n      format = 'sint32';\n      break;\n    case VtkDataTypes.DOUBLE:\n      format = 'float32';\n      break;\n    case VtkDataTypes.UNSIGNED_SHORT:\n      format = 'uint16';\n      break;\n    case VtkDataTypes.SHORT:\n      format = 'sin16';\n      break;\n    default:\n      format = 'float32';\n      break;\n  }\n  switch (dataArray.getNumberOfComponents()) {\n    case 2:\n      format += 'x2';\n      break;\n    case 3:\n      // only 32bit types support x3\n      if (!format.includes('32')) {\n        vtkErrorMacro(`unsupported x3 type for ${format}`);\n      }\n      format += 'x3';\n      break;\n    case 4:\n      format += 'x4';\n      break;\n  }\n  return format;\n}\nfunction packArray(indexBuffer, inArrayData, numComp, outputType, options) {\n  const result = {};\n  const flatSize = indexBuffer.getFlatSize();\n  if (!flatSize) {\n    return result;\n  }\n\n  // setup shift and scale\n  let shift = [0.0, 0.0, 0.0, 0.0];\n  if (options.shift) {\n    if (options.shift.length) {\n      shift = options.shift;\n    } else {\n      shift.fill(options.shift);\n    }\n  }\n  let scale = [1.0, 1.0, 1.0, 1.0];\n  if (options.scale) {\n    if (options.scale.length) {\n      scale = options.scale;\n    } else {\n      scale.fill(options.scale);\n    }\n  }\n  const packExtra = Object.prototype.hasOwnProperty.call(options, 'packExtra') ? options.packExtra : false;\n  let addAPoint;\n  let vboidx = 0;\n  const stride = numComp + (packExtra ? 1 : 0);\n  const packedVBO = newTypedArray(outputType, flatSize * stride);\n\n  // pick the right function based on point versus cell data\n  let flatIdMap = indexBuffer.getFlatIdToPointId();\n  if (options.cellData) {\n    flatIdMap = indexBuffer.getFlatIdToCellId();\n  }\n\n  // add data based on number of components\n  if (numComp === 1) {\n    addAPoint = function addAPointFunc(i) {\n      packedVBO[vboidx++] = scale[0] * inArrayData[i] + shift[0];\n    };\n  } else if (numComp === 2) {\n    addAPoint = function addAPointFunc(i) {\n      packedVBO[vboidx++] = scale[0] * inArrayData[i] + shift[0];\n      packedVBO[vboidx++] = scale[1] * inArrayData[i + 1] + shift[1];\n    };\n  } else if (numComp === 3 && !packExtra) {\n    addAPoint = function addAPointFunc(i) {\n      packedVBO[vboidx++] = scale[0] * inArrayData[i] + shift[0];\n      packedVBO[vboidx++] = scale[1] * inArrayData[i + 1] + shift[1];\n      packedVBO[vboidx++] = scale[2] * inArrayData[i + 2] + shift[2];\n    };\n  } else if (numComp === 3 && packExtra) {\n    addAPoint = function addAPointFunc(i) {\n      packedVBO[vboidx++] = scale[0] * inArrayData[i] + shift[0];\n      packedVBO[vboidx++] = scale[1] * inArrayData[i + 1] + shift[1];\n      packedVBO[vboidx++] = scale[2] * inArrayData[i + 2] + shift[2];\n      packedVBO[vboidx++] = scale[3] * 1.0 + shift[3];\n    };\n  } else if (numComp === 4) {\n    addAPoint = function addAPointFunc(i) {\n      packedVBO[vboidx++] = scale[0] * inArrayData[i] + shift[0];\n      packedVBO[vboidx++] = scale[1] * inArrayData[i + 1] + shift[1];\n      packedVBO[vboidx++] = scale[2] * inArrayData[i + 2] + shift[2];\n      packedVBO[vboidx++] = scale[3] * inArrayData[i + 3] + shift[3];\n    };\n  }\n\n  // for each entry in the flat array process it\n  for (let index = 0; index < flatSize; index++) {\n    const inArrayId = numComp * flatIdMap[index];\n    addAPoint(inArrayId);\n  }\n  result.nativeArray = packedVBO;\n  return result;\n}\nfunction getNormal(pointData, i0, i1, i2) {\n  const v1 = [pointData[i2 * 3] - pointData[i1 * 3], pointData[i2 * 3 + 1] - pointData[i1 * 3 + 1], pointData[i2 * 3 + 2] - pointData[i1 * 3 + 2]];\n  const v2 = [pointData[i0 * 3] - pointData[i1 * 3], pointData[i0 * 3 + 1] - pointData[i1 * 3 + 1], pointData[i0 * 3 + 2] - pointData[i1 * 3 + 2]];\n  const result = [];\n  cross(v1, v2, result);\n  normalize(result);\n  return result;\n}\nfunction generateNormals(cellArray, pointArray) {\n  const pointData = pointArray.getData();\n  const cellArrayData = cellArray.getData();\n  if (!cellArrayData || !pointData) {\n    return null;\n  }\n\n  // return a cellArray of normals\n  const packedVBO = new Int8Array(cellArray.getNumberOfCells() * 4);\n  const size = cellArrayData.length;\n  let vboidx = 0;\n  for (let index = 0; index < size;) {\n    const normal = getNormal(pointData, cellArrayData[index + 1], cellArrayData[index + 2], cellArrayData[index + 3]);\n    packedVBO[vboidx++] = 127 * normal[0];\n    packedVBO[vboidx++] = 127 * normal[1];\n    packedVBO[vboidx++] = 127 * normal[2];\n    packedVBO[vboidx++] = 127;\n    index += cellArrayData[index] + 1;\n  }\n  return packedVBO;\n}\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUBufferManager methods\n// ----------------------------------------------------------------------------\nfunction vtkWebGPUBufferManager(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUBufferManager');\n  function _createBuffer(req) {\n    // if a dataArray is provided set the nativeArray\n    if (req.dataArray && !req.nativeArray) {\n      req.nativeArray = req.dataArray.getData();\n    }\n    let buffer;\n    let gpuUsage;\n\n    // handle index buffers\n    if (req.usage === BufferUsage.Index) {\n      // todo change to FlattenedIndex to be more clear\n      buffer = vtkWebGPUIndexBuffer.newInstance({\n        label: req.label\n      });\n      buffer.setDevice(model.device);\n      /* eslint-disable no-bitwise */\n      gpuUsage = GPUBufferUsage.INDEX | GPUBufferUsage.COPY_DST;\n      /* eslint-enable no-bitwise */\n      buffer.buildIndexBuffer(req);\n      buffer.createAndWrite(req.nativeArray, gpuUsage);\n      buffer.setArrayInformation([{\n        format: req.format\n      }]);\n    }\n\n    // create one if not done already\n    if (!buffer) {\n      buffer = vtkWebGPUBuffer.newInstance({\n        label: req.label\n      });\n      buffer.setDevice(model.device);\n    }\n\n    // handle uniform buffers\n    if (req.usage === BufferUsage.UniformArray) {\n      /* eslint-disable no-bitwise */\n      gpuUsage = GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST;\n      /* eslint-enable no-bitwise */\n      buffer.createAndWrite(req.nativeArray, gpuUsage);\n    }\n\n    // handle storage buffers\n    if (req.usage === BufferUsage.Storage) {\n      /* eslint-disable no-bitwise */\n      gpuUsage = GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST;\n      /* eslint-enable no-bitwise */\n      buffer.createAndWrite(req.nativeArray, gpuUsage);\n    }\n\n    // handle textures\n    if (req.usage === BufferUsage.Texture) {\n      /* eslint-disable no-bitwise */\n      gpuUsage = GPUBufferUsage.COPY_SRC;\n      /* eslint-enable no-bitwise */\n      buffer.createAndWrite(req.nativeArray, gpuUsage);\n    }\n\n    // all of the below types that have gpuUsage = VERTEX require format\n    // to be provided.\n\n    // handle point data\n    if (req.usage === BufferUsage.PointArray) {\n      gpuUsage = GPUBufferUsage.VERTEX;\n      const arrayType = vtkWebGPUTypes.getNativeTypeFromBufferFormat(req.format);\n      const result = packArray(req.indexBuffer, req.dataArray.getData(), req.dataArray.getNumberOfComponents(), arrayType, {\n        packExtra: req.packExtra,\n        shift: req.shift,\n        scale: req.scale,\n        cellData: req.cellData,\n        cellOffset: req.cellOffset\n      });\n      buffer.createAndWrite(result.nativeArray, gpuUsage);\n      buffer.setStrideInBytes(vtkWebGPUTypes.getByteStrideFromBufferFormat(req.format));\n      buffer.setArrayInformation([{\n        offset: 0,\n        format: req.format,\n        interpolation: req.cellData ? 'flat' : 'perspective'\n      }]);\n    }\n\n    // handle normals from points, snorm8x4\n    if (req.usage === BufferUsage.NormalsFromPoints) {\n      gpuUsage = GPUBufferUsage.VERTEX;\n      const arrayType = vtkWebGPUTypes.getNativeTypeFromBufferFormat(req.format);\n      const normals = generateNormals(req.cells, req.dataArray);\n      const result = packArray(req.indexBuffer, normals, 4, arrayType, {\n        cellData: true\n      });\n      buffer.createAndWrite(result.nativeArray, gpuUsage);\n      buffer.setStrideInBytes(vtkWebGPUTypes.getByteStrideFromBufferFormat(req.format));\n      buffer.setArrayInformation([{\n        offset: 0,\n        format: req.format,\n        interpolation: 'flat'\n      }]);\n    }\n    if (req.usage === BufferUsage.RawVertex) {\n      gpuUsage = GPUBufferUsage.VERTEX;\n      buffer.createAndWrite(req.nativeArray, gpuUsage);\n      buffer.setStrideInBytes(vtkWebGPUTypes.getByteStrideFromBufferFormat(req.format));\n      buffer.setArrayInformation([{\n        offset: 0,\n        format: req.format\n      }]);\n    }\n    buffer.setSourceTime(req.time);\n    return buffer;\n  }\n\n  // is the buffer already present?\n  publicAPI.hasBuffer = hash => model.device.hasCachedObject(hash);\n  publicAPI.getBuffer = req => {\n    // if we have a source the get/create/cache the buffer\n    if (req.hash) {\n      return model.device.getCachedObject(req.hash, _createBuffer, req);\n    }\n    return _createBuffer(req);\n  };\n  publicAPI.getBufferForPointArray = (dataArray, indexBuffer) => {\n    const format = _getFormatForDataArray(dataArray);\n    const buffRequest = {\n      hash: `${dataArray.getMTime()}I${indexBuffer.getMTime()}${format}`,\n      usage: BufferUsage.PointArray,\n      format,\n      dataArray,\n      indexBuffer\n    };\n    return publicAPI.getBuffer(buffRequest);\n  };\n  publicAPI.getFullScreenQuadBuffer = () => {\n    if (model.fullScreenQuadBuffer) {\n      return model.fullScreenQuadBuffer;\n    }\n    model.fullScreenQuadBuffer = vtkWebGPUBuffer.newInstance();\n    model.fullScreenQuadBuffer.setDevice(model.device);\n\n    // prettier-ignore\n    const array = new Float32Array([-1.0, -1.0, 0.0, 1.0, -1.0, 0.0, 1.0, 1.0, 0.0, -1.0, -1.0, 0.0, 1.0, 1.0, 0.0, -1.0, 1.0, 0.0]);\n    model.fullScreenQuadBuffer.createAndWrite(array, GPUBufferUsage.VERTEX);\n    model.fullScreenQuadBuffer.setStrideInBytes(12);\n    model.fullScreenQuadBuffer.setArrayInformation([{\n      offset: 0,\n      format: 'float32x3'\n    }]);\n    return model.fullScreenQuadBuffer;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  device: null,\n  fullScreenQuadBuffer: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  obj(publicAPI, model);\n  setGet(publicAPI, model, ['device']);\n  vtkWebGPUBufferManager(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUBufferManager$1 = {\n  newInstance,\n  extend,\n  ...STATIC,\n  ...Constants\n};\n\nexport { STATIC, vtkWebGPUBufferManager$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport Constants from './Property2D/Constants.js';\nimport { Representation } from './Property/Constants.js';\n\nconst {\n  DisplayLocation\n} = Constants;\n\n// ----------------------------------------------------------------------------\n// vtkProperty2D methods\n// ----------------------------------------------------------------------------\n\nfunction vtkProperty2D(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkProperty2D');\n  publicAPI.setDisplayLocationToBackground = () => publicAPI.setDisplayLocation(DisplayLocation.BACKGROUND);\n  publicAPI.setDisplayLocationToForeground = () => publicAPI.setDisplayLocation(DisplayLocation.FOREGROUND);\n  publicAPI.setRepresentationToWireframe = () => publicAPI.setRepresentation(Representation.WIREFRAME);\n  publicAPI.setRepresentationToSurface = () => publicAPI.setRepresentation(Representation.SURFACE);\n  publicAPI.setRepresentationToPoints = () => publicAPI.setRepresentation(Representation.POINTS);\n  publicAPI.getRepresentationAsString = () => macro.enumToString(Representation, model.representation);\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\nconst DEFAULT_VALUES = {\n  color: [1, 1, 1],\n  opacity: 1,\n  pointSize: 1,\n  lineWidth: 1,\n  representation: Representation.SURFACE,\n  displayLocation: DisplayLocation.FOREGROUND\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['opacity', 'lineWidth', 'pointSize', 'displayLocation', 'representation']);\n  macro.setGetArray(publicAPI, model, ['color'], 3);\n\n  // Object methods\n  vtkProperty2D(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkProperty2D');\n\n// ----------------------------------------------------------------------------\n\nvar vtkProperty2D$1 = {\n  newInstance,\n  extend,\n  ...Constants\n};\n\nexport { vtkProperty2D$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUShaderModule methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUShaderModule(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUShaderModule');\n  publicAPI.initialize = (device, shaderDesc) => {\n    model.device = device;\n    // console.log(shaderDesc.getCode());\n    model.handle = model.device.getHandle().createShaderModule({\n      code: shaderDesc.getCode()\n    });\n  };\n\n  // publicAPI.setLastCameraMTime = (mtime) => {\n  //   model.lastCameraMTime = mtime;\n  // };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  device: null,\n  handle: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['lastCameraMTime']);\n  macro.setGet(publicAPI, model, ['device', 'handle']);\n\n  // Object methods\n  vtkWebGPUShaderModule(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUShaderModule');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUShaderModule$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUShaderModule$1 as default };\n", "import { m as macro } from '../../macros2.js';\nimport vtkWebGPUShaderModule from './ShaderModule.js';\n\n// perform in place string substitutions, indicate if a substitution was done\n// this is useful for building up shader strings which typically involve\n// lots of string substitutions. Return true if a substitution was done.\nfunction substitute(source, search, replace) {\n  let all = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  const replaceStr = Array.isArray(replace) ? replace.join('\\n') : replace;\n  let replaced = false;\n  if (source.search(search) !== -1) {\n    replaced = true;\n  }\n  let gflag = '';\n  if (all) {\n    gflag = 'g';\n  }\n  const regex = new RegExp(search, gflag);\n  const resultstr = source.replace(regex, replaceStr);\n  return {\n    replace: replaced,\n    result: resultstr\n  };\n}\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUShaderCache methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUShaderCache(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUShaderCache');\n  publicAPI.getShaderModule = shaderDesc => {\n    // has it already been created?\n    const sType = shaderDesc.getType();\n    const sHash = shaderDesc.getHash();\n    const keys = model._shaderModules.keys();\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      if (key.getHash() === sHash && key.getType() === sType) {\n        return model._shaderModules.get(key);\n      }\n    }\n\n    // console.log(JSON.stringify(shaderDesc));\n\n    const sm = vtkWebGPUShaderModule.newInstance();\n    sm.initialize(model.device, shaderDesc);\n    model._shaderModules.set(shaderDesc, sm);\n    return sm;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  shaderModules: null,\n  device: null,\n  window: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Internal objects\n  model._shaderModules = new Map();\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['device', 'window']);\n\n  // Object methods\n  vtkWebGPUShaderCache(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUShaderCache');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUShaderCache$1 = {\n  newInstance,\n  extend,\n  substitute\n};\n\nexport { vtkWebGPUShaderCache$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkWebGPUBufferManager from './BufferManager.js';\nimport vtkWebGPUTypes from './Types.js';\n\nconst {\n  BufferUsage\n} = vtkWebGPUBufferManager;\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUUniformBuffer methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUUniformBuffer(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUUniformBuffer');\n  publicAPI.addEntry = (name, type) => {\n    if (model._bufferEntryNames.has(name)) {\n      vtkErrorMacro(`entry named ${name} already exists`);\n      return;\n    }\n    model.sortDirty = true;\n    model._bufferEntryNames.set(name, model.bufferEntries.length);\n    model.bufferEntries.push({\n      name,\n      type,\n      sizeInBytes: vtkWebGPUTypes.getByteStrideFromShaderFormat(type),\n      offset: -1,\n      nativeType: vtkWebGPUTypes.getNativeTypeFromShaderFormat(type),\n      packed: false\n    });\n  };\n\n  // UBOs have layout rules in terms of how memory is aligned so we\n  // have to be careful how we order the entries. For example a vec4<f32>\n  // must be aligned on a 16 byte offset, etc. See\n  // https://gpuweb.github.io/gpuweb/wgsl/#memory-layouts\n  // for more details. Right now you can create a situation that would fail\n  // in the future we could add dummy spacer entries where needed to\n  // handle alignment issues\n  publicAPI.sortBufferEntries = () => {\n    if (!model.sortDirty) {\n      return;\n    }\n    let currOffset = 0;\n    const newEntries = [];\n\n    // compute the max alignment, this is required as WebGPU defines a UBO to have\n    // a size that is a multiple of the maxAlignment\n    let maxAlignment = 4;\n    for (let i = 0; i < model.bufferEntries.length; i++) {\n      const entry = model.bufferEntries[i];\n      if (entry.sizeInBytes % 16 === 0) {\n        maxAlignment = Math.max(16, maxAlignment);\n      }\n      if (entry.sizeInBytes % 8 === 0) {\n        maxAlignment = Math.max(8, maxAlignment);\n      }\n    }\n\n    // pack anything whose size is a multiple of 16 bytes first\n    // this includes a couple types that don't require 16 byte alignment\n    // such as mat2x2<f32> but that is OK\n    for (let i = 0; i < model.bufferEntries.length; i++) {\n      const entry = model.bufferEntries[i];\n      if (entry.packed === false && entry.sizeInBytes % 16 === 0) {\n        entry.packed = true;\n        entry.offset = currOffset;\n        newEntries.push(entry);\n        currOffset += entry.sizeInBytes;\n      }\n    }\n\n    // now it gets tough, we have the following common types (f32, i32, u32)\n    // - vec2<f32> 8 byte size, 8 byte alignment\n    // - vec3<f32> 12 byte size, 16 byte alignment\n    // - f32 4 byte size, 4 byte alignment\n\n    // try adding 12 byte, 4 byte pairs\n    for (let i = 0; i < model.bufferEntries.length; i++) {\n      const entry = model.bufferEntries[i];\n      if (entry.packed === false && entry.sizeInBytes === 12) {\n        for (let i2 = 0; i2 < model.bufferEntries.length; i2++) {\n          const entry2 = model.bufferEntries[i2];\n          if (entry2.packed === false && entry2.sizeInBytes === 4) {\n            entry.packed = true;\n            entry.offset = currOffset;\n            newEntries.push(entry);\n            currOffset += entry.sizeInBytes;\n            entry2.packed = true;\n            entry2.offset = currOffset;\n            newEntries.push(entry2);\n            currOffset += entry2.sizeInBytes;\n            break;\n          }\n        }\n      }\n    }\n\n    // try adding 8 byte, 8 byte pairs\n    for (let i = 0; i < model.bufferEntries.length; i++) {\n      const entry = model.bufferEntries[i];\n      if (!entry.packed && entry.sizeInBytes % 8 === 0) {\n        for (let i2 = i + 1; i2 < model.bufferEntries.length; i2++) {\n          const entry2 = model.bufferEntries[i2];\n          if (!entry2.packed && entry2.sizeInBytes % 8 === 0) {\n            entry.packed = true;\n            entry.offset = currOffset;\n            newEntries.push(entry);\n            currOffset += entry.sizeInBytes;\n            entry2.packed = true;\n            entry2.offset = currOffset;\n            newEntries.push(entry2);\n            currOffset += entry2.sizeInBytes;\n            break;\n          }\n        }\n      }\n    }\n\n    // try adding 8 byte, 4 byte 4 byte triplets\n    for (let i = 0; i < model.bufferEntries.length; i++) {\n      const entry = model.bufferEntries[i];\n      if (!entry.packed && entry.sizeInBytes % 8 === 0) {\n        let found = false;\n        for (let i2 = 0; !found && i2 < model.bufferEntries.length; i2++) {\n          const entry2 = model.bufferEntries[i2];\n          if (!entry2.packed && entry2.sizeInBytes === 4) {\n            for (let i3 = i2 + 1; i3 < model.bufferEntries.length; i3++) {\n              const entry3 = model.bufferEntries[i3];\n              if (!entry3.packed && entry3.sizeInBytes === 4) {\n                entry.packed = true;\n                entry.offset = currOffset;\n                newEntries.push(entry);\n                currOffset += entry.sizeInBytes;\n                entry2.packed = true;\n                entry2.offset = currOffset;\n                newEntries.push(entry2);\n                currOffset += entry2.sizeInBytes;\n                entry3.packed = true;\n                entry3.offset = currOffset;\n                newEntries.push(entry3);\n                currOffset += entry3.sizeInBytes;\n                found = true;\n                break;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // Add anything remaining that is larger than 4 bytes and hope we get lucky.\n    // Likely if there is more than one item added here it will result\n    // in a failed UBO\n    for (let i = 0; i < model.bufferEntries.length; i++) {\n      const entry = model.bufferEntries[i];\n      if (!entry.packed && entry.sizeInBytes > 4) {\n        entry.packed = true;\n        entry.offset = currOffset;\n        newEntries.push(entry);\n        currOffset += entry.sizeInBytes;\n      }\n    }\n\n    // finally add remaining 4 byte items\n    for (let i = 0; i < model.bufferEntries.length; i++) {\n      const entry = model.bufferEntries[i];\n      if (!entry.packed) {\n        entry.packed = true;\n        entry.offset = currOffset;\n        newEntries.push(entry);\n        currOffset += entry.sizeInBytes;\n      }\n    }\n\n    // update entries and entryNames\n    model.bufferEntries = newEntries;\n    model._bufferEntryNames.clear();\n    for (let i = 0; i < model.bufferEntries.length; i++) {\n      model._bufferEntryNames.set(model.bufferEntries[i].name, i);\n    }\n    model.sizeInBytes = currOffset;\n    model.sizeInBytes = maxAlignment * Math.ceil(model.sizeInBytes / maxAlignment);\n    model.sortDirty = false;\n  };\n  publicAPI.sendIfNeeded = device => {\n    if (!model.UBO) {\n      const req = {\n        nativeArray: model.Float32Array,\n        usage: BufferUsage.UniformArray,\n        label: model.label\n      };\n      model.UBO = device.getBufferManager().getBuffer(req);\n      model.bindGroupTime.modified();\n      model.sendDirty = false;\n    }\n\n    // send data down if needed\n    if (model.sendDirty) {\n      device.getHandle().queue.writeBuffer(model.UBO.getHandle(), 0, model.arrayBuffer, 0, model.sizeInBytes);\n      model.sendDirty = false;\n    }\n\n    // always updated as mappers depend on this time\n    // it is more of a sentIfNeededTime\n    model.sendTime.modified();\n  };\n  publicAPI.createView = type => {\n    if (type in model === false) {\n      if (!model.arrayBuffer) {\n        model.arrayBuffer = new ArrayBuffer(model.sizeInBytes);\n      }\n      model[type] = macro.newTypedArray(type, model.arrayBuffer);\n    }\n  };\n  publicAPI.setValue = (name, val) => {\n    publicAPI.sortBufferEntries();\n    const idx = model._bufferEntryNames.get(name);\n    if (idx === undefined) {\n      vtkErrorMacro(`entry named ${name} not found in UBO`);\n      return;\n    }\n    const entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    const view = model[entry.nativeType];\n    if (entry.lastValue !== val) {\n      view[entry.offset / view.BYTES_PER_ELEMENT] = val;\n      model.sendDirty = true;\n    }\n    entry.lastValue = val;\n  };\n  publicAPI.setArray = (name, arr) => {\n    publicAPI.sortBufferEntries();\n    const idx = model._bufferEntryNames.get(name);\n    if (idx === undefined) {\n      vtkErrorMacro(`entry named ${name} not found in UBO`);\n      return;\n    }\n    const entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    const view = model[entry.nativeType];\n    let changed = false;\n    for (let i = 0; i < arr.length; i++) {\n      if (!entry.lastValue || entry.lastValue[i] !== arr[i]) {\n        view[entry.offset / view.BYTES_PER_ELEMENT + i] = arr[i];\n        changed = true;\n      }\n    }\n    if (changed) {\n      model.sendDirty = true;\n      entry.lastValue = [...arr];\n    }\n  };\n  publicAPI.getBindGroupEntry = () => {\n    const foo = {\n      resource: {\n        buffer: model.UBO.getHandle()\n      }\n    };\n    return foo;\n  };\n  publicAPI.getSendTime = () => model.sendTime.getMTime();\n  publicAPI.getShaderCode = (binding, group) => {\n    // sort the entries\n    publicAPI.sortBufferEntries();\n    const lines = [`struct ${model.label}Struct\\n{`];\n    for (let i = 0; i < model.bufferEntries.length; i++) {\n      const entry = model.bufferEntries[i];\n      lines.push(`  ${entry.name}: ${entry.type},`);\n    }\n    lines.push(`};\\n@binding(${binding}) @group(${group}) var<uniform> ${model.label}: ${model.label}Struct;`);\n    return lines.join('\\n');\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  bufferEntries: null,\n  bufferEntryNames: null,\n  sizeInBytes: 0,\n  label: null,\n  bindGroupLayoutEntry: null,\n  bindGroupEntry: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n\n  // Internal objects\n  model._bufferEntryNames = new Map();\n  model.bufferEntries = [];\n\n  // default UBO desc\n  model.bindGroupLayoutEntry = model.bindGroupLayoutEntry || {\n    buffer: {\n      type: 'uniform'\n    }\n  };\n  model.sendTime = {};\n  macro.obj(model.sendTime, {\n    mtime: 0\n  });\n  model.bindGroupTime = {};\n  macro.obj(model.bindGroupTime, {\n    mtime: 0\n  });\n  model.sendDirty = true;\n  model.sortDirty = true;\n  macro.get(publicAPI, model, ['binding', 'bindGroupTime']);\n  macro.setGet(publicAPI, model, ['bindGroupLayoutEntry', 'device', 'label', 'sizeInBytes']);\n\n  // Object methods\n  vtkWebGPUUniformBuffer(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUUniformBuffer');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUUniformBuffer$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUUniformBuffer$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUBindGroup methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUBindGroup(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUBindGroup');\n  publicAPI.setBindables = bindables => {\n    // is there a difference between the old and new list?\n    if (model.bindables.length === bindables.length) {\n      let allMatch = true;\n      for (let i = 0; i < model.bindables.length; i++) {\n        if (model.bindables[i] !== bindables[i]) {\n          allMatch = false;\n        }\n      }\n      if (allMatch) {\n        return;\n      }\n    }\n\n    // there is a difference\n    model.bindables = bindables;\n    publicAPI.modified();\n  };\n  publicAPI.getBindGroupLayout = device => {\n    const entries = [];\n    for (let i = 0; i < model.bindables.length; i++) {\n      const entry = model.bindables[i].getBindGroupLayoutEntry();\n      entry.binding = i;\n      entries.push(entry);\n    }\n    return device.getBindGroupLayout({\n      entries\n    });\n  };\n  publicAPI.getBindGroup = device => {\n    // check mtime\n    let mtime = publicAPI.getMTime();\n    for (let i = 0; i < model.bindables.length; i++) {\n      const tm = model.bindables[i].getBindGroupTime().getMTime();\n      mtime = tm > mtime ? tm : mtime;\n    }\n    if (mtime < model.bindGroupTime.getMTime()) {\n      return model.bindGroup;\n    }\n    const entries = [];\n    for (let i = 0; i < model.bindables.length; i++) {\n      const entry = model.bindables[i].getBindGroupEntry();\n      entry.binding = i;\n      entries.push(entry);\n    }\n    model.bindGroup = device.getHandle().createBindGroup({\n      layout: publicAPI.getBindGroupLayout(device),\n      entries,\n      label: model.label\n    });\n    model.bindGroupTime.modified();\n    return model.bindGroup;\n  };\n  publicAPI.getShaderCode = pipeline => {\n    const lines = [];\n    const bgroup = pipeline.getBindGroupLayoutCount(model.label);\n    for (let i = 0; i < model.bindables.length; i++) {\n      lines.push(model.bindables[i].getShaderCode(i, bgroup));\n    }\n    return lines.join('\\n');\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  device: null,\n  handle: null,\n  label: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  model.bindables = [];\n  model.bindGroupTime = {};\n  macro.obj(model.bindGroupTime, {\n    mtime: 0\n  });\n  macro.get(publicAPI, model, ['bindGroupTime', 'handle', 'sizeInBytes', 'usage']);\n  macro.setGet(publicAPI, model, ['label', 'device', 'arrayInformation']);\n  vtkWebGPUBindGroup(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUBindGroup$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUBindGroup$1 as default, extend, newInstance };\n", "import { n as newInstance$1, o as obj, g as get, e as setGet } from '../../macros2.js';\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUPipeline methods\n// ----------------------------------------------------------------------------\nfunction vtkWebGPUPipeline(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUPipeline');\n  publicAPI.getShaderDescriptions = () => model.shaderDescriptions;\n  publicAPI.initialize = (device, hash) => {\n    // start with the renderencoder settings\n    model.pipelineDescription = model.renderEncoder.getPipelineSettings();\n    model.pipelineDescription.primitive.topology = model.topology;\n    model.pipelineDescription.vertex = model.vertexState;\n    model.pipelineDescription.label = hash;\n\n    // add in bind group layouts\n    const bindGroupLayouts = [];\n    for (let i = 0; i < model.layouts.length; i++) {\n      bindGroupLayouts.push(model.layouts[i].layout);\n    }\n    model.pipelineLayout = device.getHandle().createPipelineLayout({\n      bindGroupLayouts\n    });\n    model.pipelineDescription.layout = model.pipelineLayout;\n    for (let i = 0; i < model.shaderDescriptions.length; i++) {\n      const sd = model.shaderDescriptions[i];\n      const sm = device.getShaderModule(sd);\n      if (sd.getType() === 'vertex') {\n        model.pipelineDescription.vertex.module = sm.getHandle();\n        model.pipelineDescription.vertex.entryPoint = 'main';\n      }\n      if (sd.getType() === 'fragment') {\n        model.pipelineDescription.fragment.module = sm.getHandle();\n        model.pipelineDescription.fragment.entryPoint = 'main';\n      }\n    }\n    model.handle = device.getHandle().createRenderPipeline(model.pipelineDescription);\n  };\n  publicAPI.getShaderDescription = stype => {\n    for (let i = 0; i < model.shaderDescriptions.length; i++) {\n      if (model.shaderDescriptions[i].getType() === stype) return model.shaderDescriptions[i];\n    }\n    return null;\n  };\n  publicAPI.addBindGroupLayout = bindGroup => {\n    if (!bindGroup) {\n      return;\n    }\n    model.layouts.push({\n      layout: bindGroup.getBindGroupLayout(model.device),\n      label: bindGroup.getLabel()\n    });\n  };\n  publicAPI.getBindGroupLayout = idx => model.layouts[idx].layout;\n  publicAPI.getBindGroupLayoutCount = llabel => {\n    for (let i = 0; i < model.layouts.length; i++) {\n      if (model.layouts[i].label === llabel) {\n        return i;\n      }\n    }\n    return 0;\n  };\n  publicAPI.bindVertexInput = (renderEncoder, vInput) => {\n    vInput.bindBuffers(renderEncoder);\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\nconst DEFAULT_VALUES = {\n  handle: null,\n  layouts: null,\n  renderEncoder: null,\n  shaderDescriptions: null,\n  vertexState: null,\n  topology: null,\n  pipelineDescription: null\n};\n\n// ----------------------------------------------------------------------------\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  obj(publicAPI, model);\n  model.layouts = [];\n  model.shaderDescriptions = [];\n  get(publicAPI, model, ['handle', 'pipelineDescription']);\n  setGet(publicAPI, model, ['device', 'renderEncoder', 'topology', 'vertexState']);\n\n  // For more macro methods, see \"Sources/macros.js\"\n  // Object specific methods\n  vtkWebGPUPipeline(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\nconst newInstance = newInstance$1(extend, 'vtkWebGPUPipeline');\n\n// ----------------------------------------------------------------------------\nvar vtkWebGPUPipeline$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUPipeline$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkWebGPUShaderCache from './ShaderCache.js';\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUShaderDescription methods\n// ----------------------------------------------------------------------------\n\n// shader description\n\nfunction vtkWebGPUShaderDescription(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUShaderDescription');\n  publicAPI.hasOutput = name => model.outputNames.includes(name);\n  publicAPI.addOutput = function (type, name) {\n    let interpolation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n    model.outputTypes.push(type);\n    model.outputNames.push(name);\n    model.outputInterpolations.push(interpolation);\n  };\n  publicAPI.addBuiltinOutput = (type, name) => {\n    model.builtinOutputTypes.push(type);\n    model.builtinOutputNames.push(name);\n  };\n  publicAPI.addBuiltinInput = (type, name) => {\n    model.builtinInputTypes.push(type);\n    model.builtinInputNames.push(name);\n  };\n\n  // perform shader replacements for the input and outputs\n  // of this shader. That includes vertex inputs if specified\n  publicAPI.replaceShaderCode = (priorStage, vertexInput) => {\n    const inputImpl = [];\n    let iodec = [];\n    if (vertexInput) {\n      inputImpl.push(vertexInput.getShaderCode());\n    }\n    if (priorStage || model.builtinInputNames.length) {\n      const inputStruct = [];\n      inputStruct.push(`struct ${model.type}Input\\n{`);\n      if (priorStage) {\n        const inputNames = priorStage.getOutputNamesByReference();\n        const inputTypes = priorStage.getOutputTypesByReference();\n        const inputInterpolations = priorStage.getOutputInterpolationsByReference();\n        for (let i = 0; i < inputNames.length; i++) {\n          if (inputInterpolations[i] !== undefined) {\n            inputStruct.push(`  @location(${i}) @interpolate(${inputInterpolations[i]}) ${inputNames[i]} : ${inputTypes[i]},`);\n          } else {\n            inputStruct.push(`  @location(${i}) ${inputNames[i]} : ${inputTypes[i]},`);\n          }\n        }\n      }\n      for (let i = 0; i < model.builtinInputNames.length; i++) {\n        inputStruct.push(`  ${model.builtinInputNames[i]} : ${model.builtinInputTypes[i]},`);\n      }\n      if (inputStruct.length > 1) {\n        inputStruct.push('};');\n        iodec = inputStruct;\n        inputImpl[inputImpl.length - 1] += ',';\n        inputImpl.push(`input: ${model.type}Input`);\n      }\n    }\n    if (inputImpl.length) {\n      model.code = vtkWebGPUShaderCache.substitute(model.code, '//VTK::IOStructs::Input', inputImpl).result;\n    }\n    if (model.outputNames.length + model.builtinOutputNames.length) {\n      const outputStruct = [`struct ${model.type}Output\\n{`];\n      for (let i = 0; i < model.outputNames.length; i++) {\n        if (model.outputInterpolations[i] !== undefined) {\n          outputStruct.push(`  @location(${i}) @interpolate(${model.outputInterpolations[i]}) ${model.outputNames[i]} : ${model.outputTypes[i]},`);\n        } else {\n          outputStruct.push(`  @location(${i}) ${model.outputNames[i]} : ${model.outputTypes[i]},`);\n        }\n      }\n      for (let i = 0; i < model.builtinOutputNames.length; i++) {\n        outputStruct.push(`  ${model.builtinOutputNames[i]} : ${model.builtinOutputTypes[i]},`);\n      }\n      outputStruct.push('};');\n      iodec = iodec.concat(outputStruct);\n      model.code = vtkWebGPUShaderCache.substitute(model.code, '//VTK::IOStructs::Output', [`-> ${model.type}Output`]).result;\n    }\n    model.code = vtkWebGPUShaderCache.substitute(model.code, '//VTK::IOStructs::Dec', iodec).result;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  type: null,\n  // 'vertex' or 'fragment'\n  hash: null,\n  code: null,\n  outputNames: null,\n  outputTypes: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  model.outputNames = [];\n  model.outputTypes = [];\n  model.outputInterpolations = [];\n  model.builtinOutputNames = [];\n  model.builtinOutputTypes = [];\n  model.builtinInputNames = [];\n  model.builtinInputTypes = [];\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['type', 'hash', 'code']);\n  macro.getArray(publicAPI, model, ['outputTypes', 'outputNames', 'outputInterpolations']);\n\n  // Object methods\n  vtkWebGPUShaderDescription(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUShaderDescription');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUShaderDescription$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUShaderDescription$1 as default, extend, newInstance };\n", "import { n as newInstance$1, o as obj, e as setGet } from '../../macros2.js';\nimport vtkWebGPUTypes from './Types.js';\n\nfunction arraysEqual(a, b) {\n  if (a === b) return true;\n  if (a == null || b == null) return false;\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; ++i) {\n    if (!b.includes(a[i])) return false;\n  }\n  return true;\n}\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUVertexInput methods\n// ----------------------------------------------------------------------------\nfunction vtkWebGPUVertexInput(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUVertexInput');\n  publicAPI.addBuffer = function (buffer, inames) {\n    let stepMode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'vertex';\n    let names = inames;\n    if (!Array.isArray(names)) {\n      names = [names];\n    }\n    // only add if it is a new setting\n    for (let i = 0; i < model.inputs.length; i++) {\n      if (arraysEqual(model.inputs[i].names, names)) {\n        if (model.inputs[i].buffer === buffer) {\n          return;\n        }\n        model.inputs[i].buffer = buffer;\n        return;\n      }\n    }\n\n    // when adding a new entry, make sure we sort the array\n    // as the order is important to the shader and must always\n    // be the same, so alphabetical is an easy option\n    model.inputs.push({\n      buffer,\n      stepMode,\n      names\n    });\n    model.inputs = model.inputs.sort((v1, v2) => {\n      if (v1.names[0] < v2.names[0]) {\n        return -1;\n      }\n      if (v1.names[0] > v2.names[0]) {\n        return 1;\n      }\n      return 0;\n    });\n  };\n  publicAPI.removeBufferIfPresent = name => {\n    for (let i = 0; i < model.inputs.length; i++) {\n      if (model.inputs[i].names.includes(name)) {\n        model.inputs.splice(i, 1);\n      }\n    }\n  };\n  publicAPI.getBuffer = name => {\n    for (let i = 0; i < model.inputs.length; i++) {\n      if (model.inputs[i].names.includes(name)) {\n        return model.inputs[i].buffer;\n      }\n    }\n    return null;\n  };\n  publicAPI.hasAttribute = name => {\n    for (let i = 0; i < model.inputs.length; i++) {\n      if (model.inputs[i].names.includes(name)) {\n        return true;\n      }\n    }\n    return false;\n  };\n  publicAPI.getAttributeTime = name => {\n    for (let i = 0; i < model.inputs.length; i++) {\n      if (model.inputs[i].names.includes(name)) {\n        return model.inputs[i].buffer.getSourceTime();\n      }\n    }\n    return 0;\n  };\n  publicAPI.getShaderCode = () => {\n    let result = '';\n    let nameCount = 0;\n    for (let i = 0; i < model.inputs.length; i++) {\n      for (let nm = 0; nm < model.inputs[i].names.length; nm++) {\n        const arrayInfo = model.inputs[i].buffer.getArrayInformation()[nm];\n        const type = vtkWebGPUTypes.getShaderTypeFromBufferFormat(arrayInfo.format);\n        if (nameCount > 0) {\n          result += ',\\n';\n        }\n        result = `${result}  @location(${nameCount}) ${model.inputs[i].names[nm]} : ${type}`;\n        nameCount++;\n      }\n    }\n    return result;\n  };\n  publicAPI.getVertexInputInformation = () => {\n    const info = {};\n    if (model.inputs.length) {\n      const vertexBuffers = [];\n      let nameCount = 0;\n      for (let i = 0; i < model.inputs.length; i++) {\n        const buf = model.inputs[i].buffer;\n        const buffer = {\n          arrayStride: buf.getStrideInBytes(),\n          stepMode: model.inputs[i].stepMode,\n          attributes: []\n        };\n        const arrayInfo = buf.getArrayInformation();\n        for (let nm = 0; nm < model.inputs[i].names.length; nm++) {\n          buffer.attributes.push({\n            shaderLocation: nameCount,\n            offset: arrayInfo[nm].offset,\n            format: arrayInfo[nm].format\n          });\n          nameCount++;\n        }\n        vertexBuffers.push(buffer);\n      }\n      info.buffers = vertexBuffers;\n    }\n    return info;\n  };\n  publicAPI.bindBuffers = renderEncoder => {\n    for (let i = 0; i < model.inputs.length; i++) {\n      renderEncoder.setVertexBuffer(i, model.inputs[i].buffer.getHandle());\n    }\n    if (model.indexBuffer) {\n      renderEncoder.setIndexBuffer(model.indexBuffer.getHandle(), model.indexBuffer.getArrayInformation()[0].format);\n    }\n  };\n  publicAPI.getReady = () => {};\n  publicAPI.releaseGraphicsResources = () => {\n    if (model.created) {\n      model.inputs = [];\n      model.bindingDescriptions = [];\n      model.attributeDescriptions = [];\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\nconst DEFAULT_VALUES = {\n  inputs: null,\n  bindingDescriptions: false,\n  attributeDescriptions: null,\n  indexBuffer: null\n};\n\n// ----------------------------------------------------------------------------\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  obj(publicAPI, model);\n  model.bindingDescriptions = [];\n  model.attributeDescriptions = [];\n  model.inputs = [];\n  setGet(publicAPI, model, ['created', 'device', 'handle', 'indexBuffer']);\n\n  // For more macro methods, see \"Sources/macros.js\"\n  // Object specific methods\n  vtkWebGPUVertexInput(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\nconst newInstance = newInstance$1(extend, 'vtkWebGPUVertexInput');\n\n// ----------------------------------------------------------------------------\nvar vtkWebGPUVertexInput$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUVertexInput$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport vtkWebGPUBindGroup from './BindGroup.js';\nimport vtkWebGPUPipeline from './Pipeline.js';\nimport vtkWebGPUShaderCache from './ShaderCache.js';\nimport vtkWebGPUShaderDescription from './ShaderDescription.js';\nimport vtkWebGPUVertexInput from './VertexInput.js';\n\nconst vtkWebGPUSimpleMapperVS = `\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@vertex\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : vertexOutput;\n\n  // var vertex: vec4<f32> = vertexBC;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  //VTK::Position::Impl\n\n  return output;\n}\n`;\nconst vtkWebGPUSimpleMapperFS = `\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  // var computedColor:vec4<f32> = vec4<f32>(1.0,0.5,0.5,1.0);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n`;\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUSimpleMapper methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUSimpleMapper(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUSimpleMapper');\n  publicAPI.generateShaderDescriptions = (hash, pipeline, vertexInput) => {\n    // create the shader descriptions\n    const vDesc = vtkWebGPUShaderDescription.newInstance({\n      type: 'vertex',\n      hash,\n      code: model.vertexShaderTemplate\n    });\n    const fDesc = vtkWebGPUShaderDescription.newInstance({\n      type: 'fragment',\n      hash,\n      code: model.fragmentShaderTemplate\n    });\n\n    // add them to the pipeline\n    const sdrs = pipeline.getShaderDescriptions();\n    sdrs.push(vDesc);\n    sdrs.push(fDesc);\n\n    // look for replacements to invoke\n    const scode = model.vertexShaderTemplate + model.fragmentShaderTemplate;\n    // eslint-disable-next-line prefer-regex-literals\n    const re = new RegExp('//VTK::[^:]*::', 'g');\n    const unique = scode.match(re).filter((v, i, a) => a.indexOf(v) === i);\n    const fnames = unique.map(v => `replaceShader${v.substring(7, v.length - 2)}`);\n\n    // now invoke shader replacement functions\n    for (let i = 0; i < fnames.length; i++) {\n      const fname = fnames[i];\n      if (fname !== 'replaceShaderIOStructs' && model.shaderReplacements.has(fname)) {\n        model.shaderReplacements.get(fname)(hash, pipeline, vertexInput);\n      }\n    }\n\n    // always replace the IOStructs last as other replacement funcs may\n    // add inputs or outputs\n    publicAPI.replaceShaderIOStructs(hash, pipeline, vertexInput);\n\n    // console.log(vDesc.getCode());\n    // console.log(fDesc.getCode());\n  };\n\n  publicAPI.replaceShaderIOStructs = (hash, pipeline, vertexInput) => {\n    const vDesc = pipeline.getShaderDescription('vertex');\n    vDesc.replaceShaderCode(null, vertexInput);\n    const fDesc = pipeline.getShaderDescription('fragment');\n    fDesc.replaceShaderCode(vDesc);\n  };\n  publicAPI.replaceShaderRenderEncoder = (hash, pipeline, vertexInput) => {\n    model.renderEncoder.replaceShaderCode(pipeline);\n  };\n  model.shaderReplacements.set('replaceShaderRenderEncoder', publicAPI.replaceShaderRenderEncoder);\n  publicAPI.replaceShaderRenderer = (hash, pipeline, vertexInput) => {\n    if (!model.WebGPURenderer) {\n      return;\n    }\n    const ubocode = model.WebGPURenderer.getBindGroup().getShaderCode(pipeline);\n    const vDesc = pipeline.getShaderDescription('vertex');\n    let code = vDesc.getCode();\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::Renderer::Dec', [ubocode]).result;\n    vDesc.setCode(code);\n    const fDesc = pipeline.getShaderDescription('fragment');\n    code = fDesc.getCode();\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::Renderer::Dec', [ubocode]).result;\n    fDesc.setCode(code);\n  };\n  model.shaderReplacements.set('replaceShaderRenderer', publicAPI.replaceShaderRenderer);\n  publicAPI.replaceShaderMapper = (hash, pipeline, vertexInput) => {\n    const ubocode = model.bindGroup.getShaderCode(pipeline);\n    const vDesc = pipeline.getShaderDescription('vertex');\n    let code = vDesc.getCode();\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::Mapper::Dec', [ubocode]).result;\n    vDesc.setCode(code);\n    const fDesc = pipeline.getShaderDescription('fragment');\n    fDesc.addBuiltinInput('bool', '@builtin(front_facing) frontFacing');\n    code = fDesc.getCode();\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::Mapper::Dec', [ubocode]).result;\n    fDesc.setCode(code);\n  };\n  model.shaderReplacements.set('replaceShaderMapper', publicAPI.replaceShaderMapper);\n  publicAPI.replaceShaderPosition = (hash, pipeline, vertexInput) => {\n    const vDesc = pipeline.getShaderDescription('vertex');\n    vDesc.addBuiltinOutput('vec4<f32>', '@builtin(position) Position');\n    let code = vDesc.getCode();\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::Position::Impl', ['    output.Position = rendererUBO.SCPCMatrix*vertexBC;']).result;\n    vDesc.setCode(code);\n  };\n  model.shaderReplacements.set('replaceShaderPosition', publicAPI.replaceShaderPosition);\n  publicAPI.replaceShaderTCoord = (hash, pipeline, vertexInput) => {\n    const vDesc = pipeline.getShaderDescription('vertex');\n    vDesc.addOutput('vec2<f32>', 'tcoordVS');\n  };\n  model.shaderReplacements.set('replaceShaderTCoord', publicAPI.replaceShaderTCoord);\n  publicAPI.addTextureView = view => {\n    // is it already there?\n    if (model.textureViews.includes(view)) {\n      return;\n    }\n    model.textureViews.push(view);\n  };\n\n  // do everything required for this mapper to be rerady to draw\n  // but do not bind or do the actual draw commands as the pipeline\n  // is not neccessarily bound yet\n  publicAPI.prepareToDraw = renderEncoder => {\n    model.renderEncoder = renderEncoder;\n\n    // do anything needed to get our input data up to date\n    publicAPI.updateInput();\n\n    // make sure buffers are created and up to date\n    publicAPI.updateBuffers();\n\n    // update bindings and bind groups/layouts\n    // does not acutally bind them, that is done in draw(...)\n    publicAPI.updateBindings();\n\n    // update the pipeline, includes computing the hash, and if needed\n    // creating the pipeline, shader code etc\n    publicAPI.updatePipeline();\n  };\n  publicAPI.updateInput = () => {};\n  publicAPI.updateBuffers = () => {};\n  publicAPI.updateBindings = () => {\n    // bindings can change without a pipeline change\n    // as long as their layout remains the same.\n    // That is why this is done even when the pipeline\n    // hash doesn't change.\n    model.bindGroup.setBindables(publicAPI.getBindables());\n  };\n  publicAPI.computePipelineHash = () => {};\n  publicAPI.registerDrawCallback = encoder => {\n    encoder.registerDrawCallback(model.pipeline, publicAPI.draw);\n  };\n  publicAPI.prepareAndDraw = encoder => {\n    publicAPI.prepareToDraw(encoder);\n    encoder.setPipeline(model.pipeline);\n    publicAPI.draw(encoder);\n  };\n\n  // do the rest of the calls required to draw this mapper\n  // at this point the command encouder and pipeline are\n  // created and bound\n  publicAPI.draw = renderEncoder => {\n    const pipeline = renderEncoder.getBoundPipeline();\n\n    // bind the mapper bind group\n    renderEncoder.activateBindGroup(model.bindGroup);\n    if (model.WebGPURenderer) {\n      model.WebGPURenderer.bindUBO(renderEncoder);\n    }\n\n    // bind the vertex input\n    pipeline.bindVertexInput(renderEncoder, model.vertexInput);\n    const indexBuffer = model.vertexInput.getIndexBuffer();\n    if (indexBuffer) {\n      renderEncoder.drawIndexed(indexBuffer.getIndexCount(), model.numberOfInstances, 0, 0, 0);\n    } else {\n      renderEncoder.draw(model.numberOfVertices, model.numberOfInstances, 0, 0);\n    }\n  };\n  publicAPI.getBindables = () => {\n    const bindables = [...model.additionalBindables];\n    if (model.UBO) {\n      bindables.push(model.UBO);\n    }\n    if (model.SSBO) {\n      bindables.push(model.SSBO);\n    }\n\n    // add texture BindGroupLayouts\n    for (let t = 0; t < model.textureViews.length; t++) {\n      bindables.push(model.textureViews[t]);\n      const samp = model.textureViews[t].getSampler();\n      if (samp) {\n        bindables.push(samp);\n      }\n    }\n    return bindables;\n  };\n  publicAPI.updatePipeline = () => {\n    publicAPI.computePipelineHash();\n    model.pipeline = model.device.getPipeline(model.pipelineHash);\n\n    // build the pipeline if needed\n    if (!model.pipeline) {\n      model.pipeline = vtkWebGPUPipeline.newInstance();\n      model.pipeline.setDevice(model.device);\n      if (model.WebGPURenderer) {\n        model.pipeline.addBindGroupLayout(model.WebGPURenderer.getBindGroup());\n      }\n      model.pipeline.addBindGroupLayout(model.bindGroup);\n      publicAPI.generateShaderDescriptions(model.pipelineHash, model.pipeline, model.vertexInput);\n      model.pipeline.setTopology(model.topology);\n      model.pipeline.setRenderEncoder(model.renderEncoder);\n      model.pipeline.setVertexState(model.vertexInput.getVertexInputInformation());\n      model.device.createPipeline(model.pipelineHash, model.pipeline);\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  additionalBindables: undefined,\n  bindGroup: null,\n  device: null,\n  fragmentShaderTemplate: null,\n  numberOfInstances: 1,\n  numberOfVertices: 0,\n  pipelineHash: null,\n  shaderReplacements: null,\n  SSBO: null,\n  textureViews: null,\n  topology: 'triangle-list',\n  UBO: null,\n  vertexShaderTemplate: null,\n  WebGPURenderer: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.textureViews = [];\n  model.vertexInput = vtkWebGPUVertexInput.newInstance();\n  model.bindGroup = vtkWebGPUBindGroup.newInstance({\n    label: 'mapperBG'\n  });\n  model.additionalBindables = [];\n  model.fragmentShaderTemplate = model.fragmentShaderTemplate || vtkWebGPUSimpleMapperFS;\n  model.vertexShaderTemplate = model.vertexShaderTemplate || vtkWebGPUSimpleMapperVS;\n  model.shaderReplacements = new Map();\n\n  // Build VTK API\n  macro.get(publicAPI, model, ['pipeline', 'vertexInput']);\n  macro.setGet(publicAPI, model, ['additionalBindables', 'device', 'fragmentShaderTemplate', 'interpolate', 'numberOfInstances', 'numberOfVertices', 'pipelineHash', 'shaderReplacements', 'SSBO', 'textureViews', 'topology', 'UBO', 'vertexShaderTemplate', 'WebGPURenderer']);\n\n  // Object methods\n  vtkWebGPUSimpleMapper(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUSimpleMapper');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUSimpleMapper$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUSimpleMapper$1 as default, extend, newInstance };\n", "import { mat3, mat4 } from 'gl-matrix';\nimport { n as newInstance$1, e as setGet } from '../../macros2.js';\nimport vtkMapper from '../Core/Mapper.js';\nimport vtkProp from '../Core/Prop.js';\nimport vtkProperty from '../Core/Property.js';\nimport vtkProperty2D from '../Core/Property2D.js';\nimport vtkTexture from '../Core/Texture.js';\nimport vtkWebGPUBufferManager from './BufferManager.js';\nimport vtkWebGPUShaderCache from './ShaderCache.js';\nimport vtkWebGPUUniformBuffer from './UniformBuffer.js';\nimport vtkWebGPUSimpleMapper from './SimpleMapper.js';\nimport vtkWebGPUTypes from './Types.js';\n\nconst {\n  BufferUsage,\n  PrimitiveTypes\n} = vtkWebGPUBufferManager;\nconst {\n  Representation\n} = vtkProperty;\nconst {\n  ScalarMode\n} = vtkMapper;\nconst {\n  CoordinateSystem\n} = vtkProp;\nconst {\n  DisplayLocation\n} = vtkProperty2D;\nconst vtkWebGPUPolyDataVS = `\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@vertex\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : vertexOutput;\n\n  var vertex: vec4<f32> = vertexBC;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  //VTK::Position::Impl\n\n  return output;\n}\n`;\nconst vtkWebGPUPolyDataFS = `\nstruct PBRData {\n  diffuse: vec3<f32>,\n  specular: vec3<f32>,\n}\n\nstruct Material {\n  ior: f32,\n  roughness: f32,\n  metallic: f32,\n  base: vec3<f32>,\n};\n\nstruct DirectionalLight {\n  direction: vec3<f32>,\n  color: vec3<f32>,\n};\n\nstruct PointLight {\n  position: vec3<f32>,\n  color: vec3<f32>,\n};\n\nstruct SpotLight {\n  position: vec3<f32>,\n  direction: vec3<f32>,\n  cones: vec2<f32>,\n  color: vec3<f32>,\n};\n\nconst pi: f32 = 3.14159265359;\n\n// Dot product with the max already in it\nfn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {\n  return max(0.0, dot(a, b));\n}\n// Dot product with a max in it that does not allow for negative values\n// Physically based rendering is accurate as long as normals are accurate,\n// however this is pretty often not the case. In order to prevent negative\n// values from ruining light calculations and creating zones of zero light,\n// this remapping is used, which smoothly clamps the dot product between\n// zero and one while still maintaining a good amount of accuracy.\nfn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {\n  var d: f32 = max(0.0, dot(a, b));\n  d = pow((d + 1.0) / 2.0, 2.6);\n  return d;\n}\n\n// Lambertian diffuse model\nfn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {\n  var NdotL: f32 = mdot(N, L);\n  NdotL = pow(NdotL, 1.5);\n  return (base/pi)*NdotL;\n}\n\n// Yasuhiro Fujii improvement on the Oren-Nayar model\n// https://mimosa-pudica.net/improved-oren-nayar.html\n// p is surface color, o is roughness\nfn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {\n  var invpi: f32 = 0.31830988618; // 1/pi\n\n  var o2 = o*o;\n  var NdotL: f32 = mdot(N, L);\n  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the \"seams\" between lights better\n\n  var NdotV: f32 = mdot(N, V);\n  var LdotV: f32 = mdot(L, V);\n\n  var s: f32 = LdotV - NdotL*NdotV;\n  var t: f32 = mix(1.0, max(NdotL, NdotV), step(0.0, s)); // Mix with step is the equivalent of an if statement\n  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));\n  A = invpi*(1 - A);\n  var B: f32 = 0.45*(o2 / (o2 + 0.09));\n  B = invpi*B;\n\n  return p*NdotL*(A + B*(s/t));\n}\n\n// Fresnel portion of BRDF (IOR only, simplified)\nfn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {\n  var NdotV: f32 = mdot(V, N);\n  var F0: f32 = (pow((ior - 1.0), 2.0) + k*k) / (pow((ior + 1.0), 2.0) + k*k); // This takes into account the roughness, which the other one does not\n  return F0 + (1.0 - F0) * pow((1.0-NdotV), 5.0);\n}\n\n// Fresnel portion of BRDF (Color ior, better)\nfn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {\n  var NdotV: f32 = mdot(V, N);\n  return F0 + (1.0 - F0) * pow((1-NdotV), 5.0);\n}\n\n// Normal portion of BRDF\n// https://learnopengl.com/PBR/Theory\n// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2\nfn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {\n  var a2: f32 = a*a;\n  var NdotH = mdot(N, H);\n  var NdotH2 = NdotH*NdotH;\n\n  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;\n\n  return a2 / max((pi*denom*denom), 0.000001);\n}\n\n// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent\nfn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {\n  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;\n\n  var ggx1: f32 = trGGX(N + Op*s, H, a);\n  var ggx2: f32 = trGGX(N - Op*s, H, a);\n  return (0.5 * ggx1 + 0.5 * ggx2);\n}\n\n// Geometry portion of BRDF\nfn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {\n  var NdotX = cdot(N, X);\n  return NdotX / max(0.000001, (NdotX*(1.0-k) + k));\n}\n\nfn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {\n  var ggx1: f32 = min(1.0, schlickGGX(N, V, k));\n  var ggx2: f32 = min(1.0, schlickGGX(N, L, k));\n  return ggx1*ggx2;\n}\n\n// BRDF Combination\nfn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {\n  var num: f32 = D*F*G;\n  var denom: f32 = 4*cdot(V, N)*cdot(L, N);\n\n  return num / max(denom, 0.000001);\n}\n\n// Different lighting calculations for different light sources\nfn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, mat: Material, light: DirectionalLight) -> PBRData {\n  var L: vec3<f32> = normalize(light.direction); // Light Vector\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n\n  var alpha = mat.roughness * mat.roughness;\n  var k: f32 = alpha * alpha / 2.0;\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L); // Fresnel term is replaced with 1 because it is added later\n  var incoming: vec3<f32> = light.color;\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5);\n\n  var specular: vec3<f32> = brdf * incoming * angle;\n  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate\n  // control property for the diffuse vs specular roughness\n  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);\n  // Stores the specular and diffuse separately to allow for finer post processing\n  var out = PBRData(diffuse, specular);\n\n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\nfn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: PointLight) -> PBRData {\n  var L: vec3<f32> = normalize(light.position - fragPos);\n  var H: vec3<f32> = normalize(L + V);\n  var dist = distance(light.position, fragPos);\n\n  var alpha = mat.roughness * mat.roughness;\n  var k: f32 = alpha * alpha / 2.0;\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  var F: f32 = schlickFresnelIOR(V, N, mat.ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);\n  var incoming: vec3<f32> = light.color * (1.0 / (dist * dist));\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly \"seams\" between light sources\n\n  var specular: vec3<f32> = brdf * incoming * angle;\n  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);\n  // Stores the specular and diffuse separately to allow for finer post processing\n  // Could also be done (propably more properly) with a struct\n  var out = PBRData(diffuse, specular);\n\n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights\nfn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: SpotLight) -> PBRData {\n  var L: vec3<f32> = normalize(light.position - fragPos);\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n  var dist = distance(light.position, fragPos);\n\n  var alpha = mat.roughness * mat.roughness;\n  var k: f32 = alpha * alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);\n\n  var theta: f32 = mdot(normalize(light.direction), L);\n  var epsilon: f32 = light.cones.x - light.cones.y;\n  var intensity: f32 = (theta - light.cones.y) / epsilon;\n  intensity = clamp(intensity, 0.0, 1.0);\n  intensity /= dist * dist;\n\n  var incoming: vec3<f32> = light.color * intensity;\n\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly \"seams\" between light sources\n\n  var specular: vec3<f32> = brdf * incoming * angle;\n  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);\n\n  // Stores the specular and diffuse separately to allow for finer post processing\n  // Could also be done (propably more properly) with a struct\n  var out = PBRData(diffuse, specular);\n\n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// Environment mapping stuff\n// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point\nfn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {\n  var tau: f32 = 6.28318530718;\n  var out: vec2<f32> = vec2<f32>(0.0);\n\n  out.x = atan2(dir.z, dir.x) / tau;\n  out.x += 0.5;\n\n  var phix: f32 = length(vec2(dir.x, dir.z));\n  out.y = atan2(dir.y, phix) / pi + 0.5;\n\n  return out;\n}\n\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::TCoord::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n//VTK::Select::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  // Temporary ambient, diffuse, and opacity\n  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;\n  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;\n  var opacity: f32 = mapperUBO.Opacity;\n  var ior: f32 = mapperUBO.BaseIOR;\n\n  // This should be declared somewhere else\n  var _diffuseMap: vec4<f32> = vec4<f32>(1.0);\n  var _roughnessMap: vec4<f32> = vec4<f32>(1.0);\n  var _metallicMap: vec4<f32> = vec4<f32>(1.0);\n  var _normalMap: vec4<f32> = vec4<f32>(0.0, 0.0, 1.0, 0.0); // normal map was setting off the normal vector detection in fragment\n  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1.);\n  var _emissionMap: vec4<f32> = vec4<f32>(0.);\n\n  //VTK::Color::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Normal::Impl\n\n  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);\n\n  //VTK::Light::Impl\n\n  //VTK::Select::Impl\n\n  // Use texture alpha for transparency\n  computedColor.a = mapperUBO.Opacity * _diffuseMap.a;\n  if (computedColor.a == 0.0) { discard; };\n\n  //VTK::Position::Impl\n\n  //VTK::RenderEncoder::Impl\n\n  return output;\n}\n`;\nfunction isEdges(hash) {\n  // edge pipelines have \"edge\" in them\n  return hash.indexOf('edge') >= 0;\n}\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUCellArrayMapper methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUCellArrayMapper(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUCellArrayMapper');\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      if (model.is2D) {\n        model.WebGPUActor = publicAPI.getFirstAncestorOfType('vtkWebGPUActor2D');\n        model.forceZValue = true;\n      } else {\n        model.WebGPUActor = publicAPI.getFirstAncestorOfType('vtkWebGPUActor');\n        model.forceZValue = false;\n      }\n      model.coordinateSystem = model.WebGPUActor.getRenderable().getCoordinateSystem();\n      model.useRendererMatrix = model.coordinateSystem !== CoordinateSystem.DISPLAY;\n      model.WebGPURenderer = model.WebGPUActor.getFirstAncestorOfType('vtkWebGPURenderer');\n      model.WebGPURenderWindow = model.WebGPURenderer.getParent();\n      model.device = model.WebGPURenderWindow.getDevice();\n    }\n  };\n\n  // Renders myself\n  publicAPI.translucentPass = prepass => {\n    if (prepass) {\n      publicAPI.prepareToDraw(model.WebGPURenderer.getRenderEncoder());\n      model.renderEncoder.registerDrawCallback(model.pipeline, publicAPI.draw);\n    }\n  };\n  publicAPI.opaquePass = prepass => {\n    if (prepass) {\n      publicAPI.prepareToDraw(model.WebGPURenderer.getRenderEncoder());\n      model.renderEncoder.registerDrawCallback(model.pipeline, publicAPI.draw);\n    }\n  };\n  publicAPI.updateUBO = () => {\n    const actor = model.WebGPUActor.getRenderable();\n    const ppty = actor.getProperty();\n    const utime = model.UBO.getSendTime();\n    if (publicAPI.getMTime() <= utime && ppty.getMTime() <= utime && model.renderable.getMTime() <= utime) {\n      return;\n    }\n\n    // --- Matrix Updates ---\n    const keyMats = model.WebGPUActor.getKeyMatrices(model.WebGPURenderer);\n    model.UBO.setArray('BCWCMatrix', keyMats.bcwc);\n    model.UBO.setArray('BCSCMatrix', keyMats.bcsc);\n    model.UBO.setArray('MCWCNormals', keyMats.normalMatrix);\n\n    // --- 2D or 3D ---\n    if (model.is2D) {\n      const displayLoc = ppty.getDisplayLocation?.() ?? DisplayLocation.BACKGROUND;\n      model.UBO.setValue('ZValue', displayLoc === DisplayLocation.FOREGROUND ? 1.0 : 0.0);\n      const aColor = ppty.getColorByReference();\n      model.UBO.setValue('AmbientIntensity', 1.0);\n      model.UBO.setArray('DiffuseColor', [...aColor, 1.0]);\n      model.UBO.setValue('DiffuseIntensity', 0.0);\n      model.UBO.setValue('SpecularIntensity', 0.0);\n    } else {\n      // Base Colors\n      model.UBO.setValue('AmbientIntensity', ppty.getAmbient());\n      model.UBO.setArray('AmbientColor', [...ppty.getAmbientColorByReference(), 1.0]);\n      model.UBO.setValue('DiffuseIntensity', ppty.getDiffuse());\n      model.UBO.setArray('DiffuseColor', [...ppty.getDiffuseColorByReference(), 1.0]);\n      // Roughness\n      model.UBO.setValue('Roughness', ppty.getRoughness());\n      model.UBO.setValue('BaseIOR', ppty.getBaseIOR());\n      // Metallic\n      model.UBO.setValue('Metallic', ppty.getMetallic());\n      // Normal\n      model.UBO.setValue('NormalStrength', ppty.getNormalStrength());\n      // Emission\n      model.UBO.setValue('Emission', ppty.getEmission());\n      // Specular\n      model.UBO.setValue('SpecularIntensity', ppty.getSpecular());\n      if (ppty.getSpecularColorByReference()) {\n        model.UBO.setArray('SpecularColor', [...ppty.getSpecularColorByReference(), 1.0]);\n      }\n    }\n\n    // --- Edge and Misc ---\n    const edgeColor = ppty.getEdgeColorByReference?.();\n    if (edgeColor) model.UBO.setArray('EdgeColor', [...edgeColor, 1.0]);\n    model.UBO.setValue('LineWidth', ppty.getLineWidth());\n    model.UBO.setValue('Opacity', ppty.getOpacity());\n    model.UBO.setValue('PropID', model.WebGPUActor.getPropID());\n\n    // Only send if needed\n    model.UBO.sendIfNeeded(model.WebGPURenderWindow.getDevice());\n  };\n  publicAPI.haveWideLines = () => {\n    const actor = model.WebGPUActor.getRenderable();\n    const representation = actor.getProperty().getRepresentation();\n    if (actor.getProperty().getLineWidth() <= 1.0) {\n      return false;\n    }\n    if (model.primitiveType === PrimitiveTypes.Verts) {\n      return false;\n    }\n    if (model.primitiveType === PrimitiveTypes.Triangles || model.primitiveType === PrimitiveTypes.TriangleStrips) {\n      return representation === Representation.WIREFRAME;\n    }\n    return true;\n  };\n  publicAPI.replaceShaderPosition = (hash, pipeline, vertexInput) => {\n    const vDesc = pipeline.getShaderDescription('vertex');\n    vDesc.addBuiltinOutput('vec4<f32>', '@builtin(position) Position');\n    if (!vDesc.hasOutput('vertexVC')) vDesc.addOutput('vec4<f32>', 'vertexVC');\n    let code = vDesc.getCode();\n    if (model.useRendererMatrix) {\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::Position::Impl', ['    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;', '    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);', '//VTK::Position::Impl']).result;\n      if (model.forceZValue) {\n        code = vtkWebGPUShaderCache.substitute(code, '//VTK::Position::Impl', ['pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);', 'pCoord.z = mapperUBO.ZValue;', '//VTK::Position::Impl']).result;\n      }\n    } else {\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::Position::Impl', ['    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;', '    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;', '    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;', '    pCoord.z = 0.5 - 0.5 * pCoord.z;', '//VTK::Position::Impl']).result;\n      if (model.forceZValue) {\n        code = vtkWebGPUShaderCache.substitute(code, '//VTK::Position::Impl', ['    pCoord.z = mapperUBO.ZValue;', '//VTK::Position::Impl']).result;\n      }\n    }\n    if (publicAPI.haveWideLines()) {\n      vDesc.addBuiltinInput('u32', '@builtin(instance_index) instanceIndex');\n      // widen the edge\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::Position::Impl', ['    var tmpPos: vec4<f32> = pCoord;', '    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);', '    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;', '    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;', '    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;', '    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;', '    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);',\n      // could become a setting\n      '    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);', '//VTK::Position::Impl']).result;\n    }\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::Position::Impl', ['    output.Position = pCoord;']).result;\n    vDesc.setCode(code);\n  };\n  model.shaderReplacements.set('replaceShaderPosition', publicAPI.replaceShaderPosition);\n  publicAPI.replaceShaderNormal = (hash, pipeline, vertexInput) => {\n    const normalBuffer = vertexInput.getBuffer('normalMC');\n    const actor = model.WebGPUActor.getRenderable();\n    if (normalBuffer) {\n      const vDesc = pipeline.getShaderDescription('vertex');\n      if (!vDesc.hasOutput('normalVC')) {\n        vDesc.addOutput('vec3<f32>', 'normalVC', normalBuffer.getArrayInformation()[0].interpolation);\n      }\n      if (!vDesc.hasOutput('tangentVC')) {\n        vDesc.addOutput('vec3<f32>', 'tangentVC', normalBuffer.getArrayInformation()[0].interpolation);\n      }\n      if (!vDesc.hasOutput('bitangentVC')) {\n        vDesc.addOutput('vec3<f32>', 'bitangentVC', normalBuffer.getArrayInformation()[0].interpolation);\n      }\n      let code = vDesc.getCode();\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::Normal::Impl', ['  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);',\n      // This is just an approximation, but it happens to work extremely well\n      // It only works well for normals that are head on and not super angled though\n      // Definitely needs to be replaced\n      '  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));', '  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));', '  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));', '  output.tangentVC = normalize(tangent);', '  output.bitangentVC = normalize(cross(output.normalVC, tangent));']).result;\n      vDesc.setCode(code);\n      const fDesc = pipeline.getShaderDescription('fragment');\n      code = fDesc.getCode();\n      if (actor.getProperty().getNormalTexture()) {\n        code = vtkWebGPUShaderCache.substitute(code, '//VTK::Normal::Impl', ['  var normal: vec3<f32> = input.normalVC;', '  if (!input.frontFacing) { normal = -normal; }', '  var tangent: vec3<f32> = input.tangentVC;', '  var bitangent: vec3<f32> = input.bitangentVC;', '  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(', '    tangent.x, bitangent.x, normal.x,', '    tangent.y, bitangent.y, normal.y,', '    tangent.z, bitangent.z, normal.z,', '  );', '  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);', '  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);', '  normal = normalize(normal);']).result;\n      } else {\n        code = vtkWebGPUShaderCache.substitute(code, '//VTK::Normal::Impl', ['  var normal: vec3<f32> = input.normalVC;', '  if (!input.frontFacing) { normal = -normal; }', '  normal = normalize(normal);']).result;\n      }\n      fDesc.setCode(code);\n    }\n  };\n  model.shaderReplacements.set('replaceShaderNormal', publicAPI.replaceShaderNormal);\n\n  // we only apply lighting when there is a \"var normal\" declaration in the\n  // fragment shader code. That is the lighting trigger.\n  publicAPI.replaceShaderLight = (hash, pipeline, vertexInput) => {\n    if (hash.includes('sel')) return;\n    const vDesc = pipeline.getShaderDescription('vertex');\n    if (!vDesc.hasOutput('vertexVC')) vDesc.addOutput('vec4<f32>', 'vertexVC');\n    const renderer = model.WebGPURenderer.getRenderable();\n    const fDesc = pipeline.getShaderDescription('fragment');\n    let code = fDesc.getCode();\n\n    // Code that runs if the fragment shader includes normals\n    if (code.includes('var normal:') && model.useRendererMatrix && !isEdges(hash) && !model.is2D && !hash.includes('sel')) {\n      const lightingCode = [\n      // Vectors needed for light calculations\n      '  let fragPos = vec3<f32>(input.vertexVC.xyz);', '  let V = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector',\n      // Values needed for light calculations\n      '  let baseColor = _diffuseMap.rgb * diffuseColor.rgb;', '  let roughness = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);',\n      // Need to have a different way of sampling greyscale values aside from .r\n      '  let metallic = mapperUBO.Metallic * _metallicMap.r;', '  let alpha = roughness * roughness;', '  let k = alpha * alpha / 2.0;',\n      // Split diffuse and specular components\n      '  var diffuse = vec3<f32>(0.);', '  var specular = vec3<f32>(0.);', '  let emission = _emissionMap.rgb * mapperUBO.Emission;', '', '  // Material struct', '  let mat = Material(ior, roughness, metallic, baseColor);', '',\n      // Summing diffuse and specular components of directional lights\n      '  {', '    var i = 0;', '    loop {', '      if (!(i < rendererUBO.LightCount)) { break; }', '      switch (i32(rendererLightSSBO.values[i].LightData.x)) {', '         // Point Light', '         case 0 {', '           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;', '           let pos = (rendererLightSSBO.values[i].LightPos).xyz;', '           let pointLight = PointLight(pos, color);', '           let result = calcPointLight(normal, V, fragPos, mat, pointLight);', '           diffuse += max(vec3<f32>(0), result.diffuse);', '           specular += max(vec3<f32>(0), result.specular);', '          }', '         // Directional light', '         case 1 {', '           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);', '           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;', '           let dirLight = DirectionalLight(dir, color);', '           let result = calcDirectionalLight(normal, V, mat, dirLight); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color', '           diffuse += max(vec3<f32>(0), result.diffuse);', '           specular += max(vec3<f32>(0), result.specular);', '         }', '         // Spot Light', '         case 2 {', '           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;', '           let pos = (rendererLightSSBO.values[i].LightPos).xyz;', '           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);', '           let cones = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);', '           let spotLight = SpotLight(pos, dir, cones, color);', '           let result = calcSpotLight(normal, V, fragPos, mat, spotLight);', '           diffuse += max(vec3<f32>(0), result.diffuse);', '           specular += max(vec3<f32>(0), result.specular);', '         }', '         default { continue; }', '       }', '      continuing { i++; }', '    }', '  }',\n      // Final variables for combining specular and diffuse\n      '  let fresnel = min(1.0, schlickFresnelIOR(V, normal, ior, k)); // Fresnel', '  // This could be controlled with its own variable (that isnt base color) for better artistic control', '  let fresnelMetallic = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account', '  let kS = min(vec3<f32>(1.0), mix(vec3<f32>(fresnel), fresnelMetallic, metallic));', '  let kD = (1.0 - kS) * (1.0 - metallic);', '  let PBR = mapperUBO.DiffuseIntensity * kD * diffuse + kS * specular;', '  computedColor = vec4<f32>(PBR + emission, mapperUBO.Opacity);'];\n      if (renderer.getEnvironmentTexture()?.getImageLoaded()) {\n        lightingCode.push('  // To get diffuse IBL, the texture is sampled with normals in worldspace', '  let diffuseIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;', '  let diffuseCoords = vecToRectCoord(diffuseIBLCoords);', '  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors', '  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment', '  let VreflN = normalize(reflect(-V, normal));', '  let reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;', '  let specularCoords = vecToRectCoord(reflectionIBLCoords);', '  let diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);',\n        // Level multiplier should be set by UBO\n        '  let level = roughness * rendererUBO.MaxEnvironmentMipLevel;', '  let specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);',\n        // Manual mip smoothing since not all formats support smooth level sampling\n        '  let specularIBLContribution = specularIBL.rgb * rendererUBO.BackgroundSpecularStrength;', '  computedColor += vec4<f32>(specularIBLContribution * kS, 0);', '  let diffuseIBLContribution = diffuseIBL.rgb * rendererUBO.BackgroundDiffuseStrength;', '  computedColor += vec4<f32>(diffuseIBLContribution * baseColor * _ambientOcclusionMap.rgb * kD, 0);');\n      }\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::Light::Impl', lightingCode).result;\n      fDesc.setCode(code);\n      // If theres no normals, just set the specular color to be flat\n    } else {\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::Light::Impl', ['  let diffuse = diffuseColor.rgb;', '  let specular = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;', '  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);']).result;\n      fDesc.setCode(code);\n    }\n  };\n  model.shaderReplacements.set('replaceShaderLight', publicAPI.replaceShaderLight);\n  publicAPI.replaceShaderColor = (hash, pipeline, vertexInput) => {\n    // By default, set the colors to be flat\n    if (isEdges(hash)) {\n      const fDesc = pipeline.getShaderDescription('fragment');\n      let code = fDesc.getCode();\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::Color::Impl', ['ambientColor = mapperUBO.EdgeColor;', 'diffuseColor = mapperUBO.EdgeColor;']).result;\n      fDesc.setCode(code);\n      return;\n    }\n\n    // If there's no vertex color buffer return the shader as is\n    const colorBuffer = vertexInput.getBuffer('colorVI');\n    if (!colorBuffer) return;\n\n    // Modifies the vertex shader to include the vertex colors and interpolation in the outputs\n    const vDesc = pipeline.getShaderDescription('vertex');\n    vDesc.addOutput('vec4<f32>', 'color', colorBuffer.getArrayInformation()[0].interpolation);\n    let code = vDesc.getCode();\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::Color::Impl', ['  output.color = colorVI;']).result;\n    vDesc.setCode(code);\n\n    // Sets the fragment shader to accept the color inputs from the vertex shader\n    const fDesc = pipeline.getShaderDescription('fragment');\n    code = fDesc.getCode();\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::Color::Impl', ['ambientColor = input.color;', 'diffuseColor = input.color;', 'opacity = mapperUBO.Opacity * input.color.a;']).result;\n    fDesc.setCode(code);\n  };\n  model.shaderReplacements.set('replaceShaderColor', publicAPI.replaceShaderColor);\n  publicAPI.replaceShaderTCoord = (hash, pipeline, vertexInput) => {\n    if (!vertexInput.hasAttribute('tcoord')) return;\n    const vDesc = pipeline.getShaderDescription('vertex');\n    const tcoords = vertexInput.getBuffer('tcoord');\n    const numComp = vtkWebGPUTypes.getNumberOfComponentsFromBufferFormat(tcoords.getArrayInformation()[0].format);\n    let code = vDesc.getCode();\n    vDesc.addOutput(`vec${numComp}<f32>`, 'tcoordVS');\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::TCoord::Impl', ['  output.tcoordVS = tcoord;']).result;\n    vDesc.setCode(code);\n    const fDesc = pipeline.getShaderDescription('fragment');\n    code = fDesc.getCode();\n    const actor = model.WebGPUActor.getRenderable();\n    const property = actor.getProperty();\n    const checkDims = texture => {\n      if (!texture) return false;\n      const dims = texture.getDimensionality();\n      return dims === numComp;\n    };\n    const usedTextures = [];\n    const diffuseTexture = property.getDiffuseTexture?.();\n    if (diffuseTexture?.getImageLoaded() || actor.getTextures()[0] || model.colorTexture) {\n      if (\n      // Chained or statements here are questionable\n      checkDims(diffuseTexture) || checkDims(actor.getTextures()[0]) || checkDims(model.colorTexture)) {\n        usedTextures.push('_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);');\n      }\n    }\n    const ormTexture = property.getORMTexture?.();\n    const rmTexture = property.getRMTexture?.();\n    const roughnessTexture = property.getRoughnessTexture?.();\n    const metallicTexture = property.getMetallicTexture?.();\n    const ambientOcclusionTexture = property.getAmbientOcclusionTexture?.();\n    const emissionTexture = property.getEmissionTexture?.();\n    const normalTexture = property.getNormalTexture?.();\n\n    // ORM texture support: if present, sample R/G/B for AO/Roughness/Metallic\n    if (ormTexture?.getImageLoaded()) {\n      if (checkDims(ormTexture)) {\n        usedTextures.push('_ambientOcclusionMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).rrra;', '_roughnessMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).ggga;', '_metallicMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).bbba;');\n      }\n    } else if (rmTexture?.getImageLoaded()) {\n      if (checkDims(rmTexture)) {\n        usedTextures.push('_roughnessMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).ggga;', '_metallicMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).bbba;');\n      }\n    } else {\n      if (roughnessTexture?.getImageLoaded()) {\n        if (checkDims(roughnessTexture)) {\n          usedTextures.push('_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS).ggga;');\n        }\n      }\n      if (metallicTexture?.getImageLoaded()) {\n        if (checkDims(metallicTexture)) {\n          usedTextures.push('_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS).bbba;');\n        }\n      }\n      if (ambientOcclusionTexture?.getImageLoaded()) {\n        if (checkDims(ambientOcclusionTexture)) {\n          usedTextures.push('_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS).rrra;');\n        }\n      }\n    }\n    if (emissionTexture?.getImageLoaded()) {\n      if (checkDims(emissionTexture)) {\n        usedTextures.push('_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);');\n      }\n    }\n    if (normalTexture?.getImageLoaded()) {\n      if (checkDims(normalTexture)) {\n        usedTextures.push('_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);');\n      }\n    }\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::TCoord::Impl', usedTextures).result;\n    fDesc.setCode(code);\n  };\n  model.shaderReplacements.set('replaceShaderTCoord', publicAPI.replaceShaderTCoord);\n  publicAPI.replaceShaderSelect = (hash, pipeline, vertexInput) => {\n    if (hash.includes('sel')) {\n      const fDesc = pipeline.getShaderDescription('fragment');\n      let code = fDesc.getCode();\n      // by default there are no composites, so just 0\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::Select::Impl', ['  var compositeID: u32 = 0u;']).result;\n      fDesc.setCode(code);\n    }\n  };\n  model.shaderReplacements.set('replaceShaderSelect', publicAPI.replaceShaderSelect);\n  publicAPI.getUsage = (rep, i) => {\n    if (rep === Representation.POINTS || i === PrimitiveTypes.Points) {\n      return BufferUsage.Verts;\n    }\n    if (i === PrimitiveTypes.Lines) {\n      return BufferUsage.Lines;\n    }\n    if (rep === Representation.WIREFRAME) {\n      if (i === PrimitiveTypes.Triangles) {\n        return BufferUsage.LinesFromTriangles;\n      }\n      return BufferUsage.LinesFromStrips;\n    }\n    if (i === PrimitiveTypes.Triangles) {\n      return BufferUsage.Triangles;\n    }\n    if (i === PrimitiveTypes.TriangleStrips) {\n      return BufferUsage.Strips;\n    }\n    if (i === PrimitiveTypes.TriangleEdges) {\n      return BufferUsage.LinesFromTriangles;\n    }\n\n    // only strip edges left which are lines\n    return BufferUsage.LinesFromStrips;\n  };\n  publicAPI.getHashFromUsage = usage => `pt${usage}`;\n  publicAPI.getTopologyFromUsage = usage => {\n    switch (usage) {\n      case BufferUsage.Triangles:\n        return 'triangle-list';\n      case BufferUsage.Verts:\n        return 'point-list';\n      case BufferUsage.Lines:\n      default:\n        return 'line-list';\n    }\n  };\n\n  // TODO: calculate tangents\n  publicAPI.buildVertexInput = () => {\n    const pd = model.currentInput;\n    const cells = model.cellArray;\n    const primType = model.primitiveType;\n    const actor = model.WebGPUActor.getRenderable();\n    let representation = actor.getProperty().getRepresentation();\n    const device = model.WebGPURenderWindow.getDevice();\n    let edges = false;\n    if (primType === PrimitiveTypes.TriangleEdges) {\n      edges = true;\n      representation = Representation.WIREFRAME;\n    }\n    const vertexInput = model.vertexInput;\n    const points = pd.getPoints();\n\n    // --- Index Buffer ---\n    let indexBuffer = null;\n    if (cells) {\n      indexBuffer = device.getBufferManager().getBuffer({\n        hash: `R${representation}P${primType}${cells.getMTime()}`,\n        usage: BufferUsage.Index,\n        cells,\n        numberOfPoints: points.getNumberOfPoints(),\n        primitiveType: primType,\n        representation\n      });\n      vertexInput.setIndexBuffer(indexBuffer);\n    } else {\n      vertexInput.setIndexBuffer(null);\n    }\n\n    // hash = all things that can change the values on the buffer\n    // since mtimes are unique we can use\n    // - indexBuffer mtime - because cells drive how we pack\n    // - relevant dataArray mtime - the source data\n    // - shift - not currently captured\n    // - scale - not currently captured\n    // - format\n    // - usage\n    // - packExtra - covered by format\n    // --- Points Buffer ---\n    if (points) {\n      const shift = model.WebGPUActor.getBufferShift(model.WebGPURenderer);\n      vertexInput.addBuffer(device.getBufferManager().getBuffer({\n        hash: `${points.getMTime()}I${indexBuffer?.getMTime?.() ?? 0}${shift.join()}float32x4`,\n        usage: BufferUsage.PointArray,\n        format: 'float32x4',\n        dataArray: points,\n        indexBuffer,\n        shift,\n        packExtra: true\n      }), ['vertexBC']);\n    } else {\n      vertexInput.removeBufferIfPresent('vertexBC');\n    }\n\n    // --- Normals ---\n    const usage = publicAPI.getUsage(representation, primType);\n    model._usesCellNormals = false;\n    if (!model.is2D && (\n    // no lighting on Property2D\n    usage === BufferUsage.Triangles || usage === BufferUsage.Strips)) {\n      const normals = pd.getPointData().getNormals();\n      // https://vtk.org/doc/nightly/html/classvtkPolyDataTangents.html\n      // Need to find some way of using precomputed tangents (or computing new ones)\n      const buffRequest = {\n        format: 'snorm8x4',\n        indexBuffer,\n        packExtra: true,\n        shift: 0,\n        scale: 127\n      };\n      if (normals) {\n        buffRequest.hash = `${normals.getMTime()}I${indexBuffer.getMTime()}snorm8x4`;\n        buffRequest.dataArray = normals;\n        buffRequest.usage = BufferUsage.PointArray;\n        vertexInput.addBuffer(device.getBufferManager().getBuffer(buffRequest), ['normalMC']);\n      } else if (primType === PrimitiveTypes.Triangles) {\n        model._usesCellNormals = true;\n        buffRequest.hash = `PFN${points.getMTime()}I${indexBuffer.getMTime()}snorm8x4`;\n        buffRequest.dataArray = points;\n        buffRequest.cells = cells;\n        buffRequest.usage = BufferUsage.NormalsFromPoints;\n        vertexInput.addBuffer(device.getBufferManager().getBuffer(buffRequest), ['normalMC']);\n      } else {\n        vertexInput.removeBufferIfPresent('normalMC');\n      }\n    } else {\n      vertexInput.removeBufferIfPresent('normalMC');\n    }\n\n    // --- Colors ---\n    let haveColors = false;\n    if (model.renderable.getScalarVisibility()) {\n      const c = model.renderable.getColorMapColors();\n      if (c && !edges) {\n        const scalarMode = model.renderable.getScalarMode();\n        // We must figure out how the scalars should be mapped to the polydata.\n        const haveCellScalars = (scalarMode === ScalarMode.USE_CELL_DATA || scalarMode === ScalarMode.USE_CELL_FIELD_DATA || scalarMode === ScalarMode.USE_FIELD_DATA || !pd.getPointData().getScalars()) && scalarMode !== ScalarMode.USE_POINT_FIELD_DATA && c;\n        vertexInput.addBuffer(device.getBufferManager().getBuffer({\n          usage: BufferUsage.PointArray,\n          format: 'unorm8x4',\n          hash: `${haveCellScalars}${c.getMTime()}I${indexBuffer.getMTime()}unorm8x4`,\n          dataArray: c,\n          indexBuffer,\n          cellData: haveCellScalars,\n          cellOffset: 0\n        }), ['colorVI']);\n        haveColors = true;\n      }\n    }\n    if (!haveColors) vertexInput.removeBufferIfPresent('colorVI');\n\n    // --- Texture Coordinates ---\n    let tcoords = null;\n    if (model.renderable.getInterpolateScalarsBeforeMapping?.() && model.renderable.getColorCoordinates()) {\n      tcoords = model.renderable.getColorCoordinates();\n    } else {\n      tcoords = pd.getPointData().getTCoords();\n    }\n    if (tcoords && !edges) {\n      vertexInput.addBuffer(device.getBufferManager().getBufferForPointArray(tcoords, vertexInput.getIndexBuffer()), ['tcoord']);\n    } else {\n      vertexInput.removeBufferIfPresent('tcoord');\n    }\n  };\n  publicAPI.updateTextures = () => {\n    // Track textures in-use and new\n    const usedTextures = [];\n    const newTextures = [];\n\n    // Add scalar color texture if available\n    const idata = model.renderable.getColorTextureMap?.();\n    if (idata && !model.colorTexture) {\n      model.colorTexture = vtkTexture.newInstance({\n        label: 'polyDataColor'\n      });\n    }\n    if (idata) {\n      model.colorTexture.setInputData(idata);\n      newTextures.push(['DiffuseTexture', model.colorTexture]);\n    }\n    const actor = model.WebGPUActor.getRenderable();\n    const renderer = model.WebGPURenderer.getRenderable();\n    const textures = [['DiffuseTexture', actor.getProperty().getDiffuseTexture?.()], ['DiffuseTexture', actor.getTextures()[0]], ['DiffuseTexture', model.colorTexture], ['ORMTexture', actor.getProperty().getORMTexture?.()], ['RMTexture', actor.getProperty().getRMTexture?.()], ['RoughnessTexture', actor.getProperty().getRoughnessTexture?.()], ['MetallicTexture', actor.getProperty().getMetallicTexture?.()], ['NormalTexture', actor.getProperty().getNormalTexture?.()], ['AmbientOcclusionTexture', actor.getProperty().getAmbientOcclusionTexture?.()], ['EmissionTexture', actor.getProperty().getEmissionTexture?.()], ['EnvironmentTexture', renderer.getEnvironmentTexture?.()]];\n    textures.forEach(_ref => {\n      let [name, tex] = _ref;\n      if (!tex) return;\n      if (tex.getInputData() || tex.getJsImageData() || tex.getCanvas() || tex.getImageBitmap()) {\n        newTextures.push([name, tex]);\n      }\n      if (tex.getImage() && tex.getImageLoaded()) {\n        newTextures.push([name, tex]);\n      }\n    });\n\n    // Add textures to manager only if not present\n    newTextures.forEach(_ref2 => {\n      let [textureName, srcTexture] = _ref2;\n      const newTex = model.device.getTextureManager().getTextureForVTKTexture(srcTexture, textureName);\n      if (!newTex.getReady()) return;\n      let found = false;\n      for (let t = 0; t < model.textures.length; ++t) {\n        if (model.textures[t] === newTex) {\n          found = true;\n          usedTextures[t] = true;\n          break;\n        }\n      }\n      if (!found) {\n        usedTextures[model.textures.length] = true;\n        const tview = newTex.createView(textureName);\n        model.textures.push(newTex);\n        model.textureViews.push(tview);\n\n        // Sampler setup\n        const interpolate = srcTexture.getInterpolate() ? 'linear' : 'nearest';\n        let addressMode = null;\n        if (srcTexture.getEdgeClamp() && srcTexture.getRepeat()) addressMode = 'mirror-repeat';else if (srcTexture.getEdgeClamp()) addressMode = 'clamp-to-edge';else if (srcTexture.getRepeat()) addressMode = 'repeat';\n\n        // Handle environment texture separately\n        let options = {\n          addressModeU: addressMode,\n          addressModeV: addressMode,\n          addressModeW: addressMode,\n          minFilter: interpolate,\n          magFilter: interpolate\n        };\n        if (textureName === 'EnvironmentTexture') {\n          options = {\n            addressModeU: 'repeat',\n            addressModeV: 'clamp-to-edge',\n            addressModeW: 'repeat',\n            minFilter: interpolate,\n            magFilter: interpolate,\n            mipmapFilter: 'linear'\n          };\n        }\n        tview.addSampler(model.device, options);\n      }\n    });\n\n    // remove unused textures\n    for (let i = model.textures.length - 1; i >= 0; i--) {\n      if (!usedTextures[i]) {\n        model.textures.splice(i, 1);\n        model.textureViews.splice(i, 1);\n      }\n    }\n  };\n\n  // compute a unique hash for a pipeline, this needs to be unique enough to\n  // capture any pipeline code changes (which includes shader changes)\n  // or vertex input changes/ bind groups/ etc\n  publicAPI.computePipelineHash = () => {\n    let pipelineHash = `pd${model.useRendererMatrix ? 'r' : ''}${model.forceZValue ? 'z' : ''}`;\n    if (model.primitiveType === PrimitiveTypes.TriangleEdges || model.primitiveType === PrimitiveTypes.TriangleStripEdges) {\n      pipelineHash += 'edge';\n    } else {\n      if (model.vertexInput.hasAttribute(`normalMC`)) {\n        pipelineHash += `n`;\n      }\n      if (model.vertexInput.hasAttribute(`colorVI`)) {\n        pipelineHash += `c`;\n      }\n      if (model.vertexInput.hasAttribute(`tcoord`)) {\n        const tcoords = model.vertexInput.getBuffer('tcoord');\n        const numComp = vtkWebGPUTypes.getNumberOfComponentsFromBufferFormat(tcoords.getArrayInformation()[0].format);\n        pipelineHash += `t${numComp}`;\n      }\n      if (model.textures.length) {\n        pipelineHash += `tx${model.textures.length}`;\n      }\n    }\n    if (model._usesCellNormals) {\n      pipelineHash += `cn`;\n    }\n    if (model.SSBO) {\n      pipelineHash += `ssbo`;\n    }\n    const uhash = publicAPI.getHashFromUsage(model.usage);\n    pipelineHash += uhash;\n    pipelineHash += model.renderEncoder.getPipelineHash();\n    model.pipelineHash = pipelineHash;\n  };\n  publicAPI.updateBuffers = () => {\n    // handle textures if not edges\n    if (model.primitiveType !== PrimitiveTypes.TriangleEdges && model.primitiveType !== PrimitiveTypes.TriangleStripEdges) {\n      publicAPI.updateTextures();\n    }\n    const actor = model.WebGPUActor.getRenderable();\n    const rep = actor.getProperty().getRepresentation();\n\n    // handle per primitive type\n    model.usage = publicAPI.getUsage(rep, model.primitiveType);\n    publicAPI.buildVertexInput();\n    const vbo = model.vertexInput.getBuffer('vertexBC');\n    publicAPI.setNumberOfVertices(vbo.getSizeInBytes() / vbo.getStrideInBytes());\n    publicAPI.setTopology(publicAPI.getTopologyFromUsage(model.usage));\n    publicAPI.updateUBO();\n    if (publicAPI.haveWideLines()) {\n      const ppty = actor.getProperty();\n      publicAPI.setNumberOfInstances(Math.ceil(ppty.getLineWidth() * 2.0));\n    } else {\n      publicAPI.setNumberOfInstances(1);\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  is2D: false,\n  cellArray: null,\n  currentInput: null,\n  cellOffset: 0,\n  primitiveType: 0,\n  colorTexture: null,\n  renderEncoder: null,\n  textures: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initiaLalues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initiaLalues);\n\n  // Inheritance\n  vtkWebGPUSimpleMapper.extend(publicAPI, model, initiaLalues);\n  model.fragmentShaderTemplate = vtkWebGPUPolyDataFS;\n  model.vertexShaderTemplate = vtkWebGPUPolyDataVS;\n  model._tmpMat3 = mat3.identity(new Float64Array(9));\n  model._tmpMat4 = mat4.identity(new Float64Array(16));\n\n  // UBO\n  model.UBO = vtkWebGPUUniformBuffer.newInstance({\n    label: 'mapperUBO'\n  });\n  model.UBO.addEntry('BCWCMatrix', 'mat4x4<f32>');\n  model.UBO.addEntry('BCSCMatrix', 'mat4x4<f32>');\n  model.UBO.addEntry('MCWCNormals', 'mat4x4<f32>');\n  model.UBO.addEntry('AmbientColor', 'vec4<f32>');\n  model.UBO.addEntry('DiffuseColor', 'vec4<f32>');\n  model.UBO.addEntry('EdgeColor', 'vec4<f32>');\n  model.UBO.addEntry('SpecularColor', 'vec4<f32>');\n  model.UBO.addEntry('AmbientIntensity', 'f32');\n  model.UBO.addEntry('DiffuseIntensity', 'f32');\n  model.UBO.addEntry('Roughness', 'f32');\n  model.UBO.addEntry('Metallic', 'f32');\n  model.UBO.addEntry('Ambient', 'f32');\n  model.UBO.addEntry('Normal', 'f32');\n  model.UBO.addEntry('Emission', 'f32');\n  model.UBO.addEntry('NormalStrength', 'f32');\n  model.UBO.addEntry('BaseIOR', 'f32');\n  model.UBO.addEntry('SpecularIntensity', 'f32');\n  model.UBO.addEntry('LineWidth', 'f32');\n  model.UBO.addEntry('Opacity', 'f32');\n  model.UBO.addEntry('ZValue', 'f32');\n  model.UBO.addEntry('PropID', 'u32');\n  model.UBO.addEntry('ClipNear', 'f32');\n  model.UBO.addEntry('ClipFar', 'f32');\n  model.UBO.addEntry('Time', 'u32');\n\n  // Build VTK API\n  setGet(publicAPI, model, ['cellArray', 'currentInput', 'cellOffset', 'is2D', 'primitiveType', 'renderEncoder']);\n  model.textures = [];\n\n  // Object methods\n  vtkWebGPUCellArrayMapper(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkWebGPUCellArrayMapper');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUCellArrayMapper$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUCellArrayMapper$1 as default, extend, newInstance };\n", "import { n as newInstance$1, r as vtkErrorMacro } from '../../macros2.js';\nimport vtkWebGPUBufferManager from './BufferManager.js';\nimport vtkWebGPUCellArrayMapper from './CellArrayMapper.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\nconst {\n  PrimitiveTypes\n} = vtkWebGPUBufferManager;\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUPolyDataMapper methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUPolyDataMapper(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUPolyDataMapper');\n  publicAPI.createCellArrayMapper = () => vtkWebGPUCellArrayMapper.newInstance();\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      model.WebGPUActor = publicAPI.getFirstAncestorOfType('vtkWebGPUActor');\n      if (!model.renderable.getStatic()) {\n        model.renderable.update();\n      }\n      const poly = model.renderable.getInputData();\n      model.renderable.mapScalars(poly, 1.0);\n      publicAPI.updateCellArrayMappers(poly);\n    }\n  };\n  publicAPI.updateCellArrayMappers = poly => {\n    if (!poly) {\n      vtkErrorMacro('No input!');\n      return;\n    }\n    const prims = [poly.getVerts(), poly.getLines(), poly.getPolys(), poly.getStrips()];\n\n    // we instantiate a cell array mapper for each cellArray that has cells\n    // and they handle the rendering of that cell array\n    const cellMappers = [];\n    let cellOffset = 0;\n    // Handle all primitive types including strips\n    for (let i = PrimitiveTypes.Points; i <= PrimitiveTypes.TriangleStrips; i++) {\n      if (prims[i].getNumberOfValues() > 0) {\n        if (!model.primitives[i]) {\n          model.primitives[i] = publicAPI.createCellArrayMapper();\n        }\n        const cellMapper = model.primitives[i];\n        cellMapper.setCellArray(prims[i]);\n        cellMapper.setCurrentInput(poly);\n        cellMapper.setCellOffset(cellOffset);\n        cellMapper.setPrimitiveType(i);\n        cellMapper.setRenderable(model.renderable);\n        cellOffset += prims[i].getNumberOfCells();\n        cellMappers.push(cellMapper);\n      } else {\n        model.primitives[i] = null;\n      }\n    }\n\n    // Handle edge visibility for both triangles and triangle strips\n    if (model.WebGPUActor.getRenderable().getProperty().getEdgeVisibility()) {\n      // Handle triangle edges\n      if (prims[PrimitiveTypes.Triangles].getNumberOfValues() > 0) {\n        const i = PrimitiveTypes.TriangleEdges;\n        if (!model.primitives[i]) {\n          model.primitives[i] = publicAPI.createCellArrayMapper();\n        }\n        const cellMapper = model.primitives[i];\n        cellMapper.setCellArray(prims[PrimitiveTypes.Triangles]);\n        cellMapper.setCurrentInput(poly);\n        cellMapper.setCellOffset(model.primitives[PrimitiveTypes.Triangles].getCellOffset());\n        cellMapper.setPrimitiveType(i);\n        cellMapper.setRenderable(model.renderable);\n        cellMappers.push(cellMapper);\n      } else {\n        model.primitives[PrimitiveTypes.TriangleEdges] = null;\n      }\n\n      // Handle triangle strip edges\n      if (prims[PrimitiveTypes.TriangleStrips].getNumberOfValues() > 0) {\n        const i = PrimitiveTypes.TriangleStripEdges;\n        if (!model.primitives[i]) {\n          model.primitives[i] = publicAPI.createCellArrayMapper();\n        }\n        const cellMapper = model.primitives[i];\n        cellMapper.setCellArray(prims[PrimitiveTypes.TriangleStrips]);\n        cellMapper.setCurrentInput(poly);\n        cellMapper.setCellOffset(model.primitives[PrimitiveTypes.TriangleStrips].getCellOffset());\n        cellMapper.setPrimitiveType(i);\n        cellMapper.setRenderable(model.renderable);\n        cellMappers.push(cellMapper);\n      } else {\n        model.primitives[PrimitiveTypes.TriangleStripEdges] = null;\n      }\n    }\n    publicAPI.prepareNodes();\n    publicAPI.addMissingChildren(cellMappers);\n    publicAPI.removeUnusedNodes();\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  primitives: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.primitives = [];\n\n  // Object methods\n  vtkWebGPUPolyDataMapper(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkWebGPUPolyDataMapper');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUPolyDataMapper$1 = {\n  newInstance,\n  extend\n};\n\n// Register ourself to WebGPU backend if imported\nregisterOverride('vtkMapper', newInstance);\n\nexport { vtkWebGPUPolyDataMapper$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUPixelSpaceCallbackMapper methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUPixelSpaceCallbackMapper(publicAPI, model) {\n  model.classHierarchy.push('vtkWebGPUPixelSpaceCallbackMapper');\n  publicAPI.opaquePass = (prepass, renderPass) => {\n    model.WebGPURenderer = publicAPI.getFirstAncestorOfType('vtkWebGPURenderer');\n    model.WebGPURenderWindow = model.WebGPURenderer.getParent();\n    const aspectRatio = model.WebGPURenderer.getAspectRatio();\n    const camera = model.WebGPURenderer ? model.WebGPURenderer.getRenderable().getActiveCamera() : null;\n    const tsize = model.WebGPURenderer.getTiledSizeAndOrigin();\n    const texels = null;\n    if (model.renderable.getUseZValues()) ;\n    model.renderable.invokeCallback(model.renderable.getInputData(), camera, aspectRatio, tsize, texels);\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n\n  // Object methods\n  vtkWebGPUPixelSpaceCallbackMapper(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUPixelSpaceCallbackMapper');\n\n// ----------------------------------------------------------------------------\n\nvar index = {\n  newInstance,\n  extend\n};\n\n// Register ourself to WebGPU backend if imported\nregisterOverride('vtkPixelSpaceCallbackMapper', newInstance);\n\nexport { index as default, extend, newInstance };\n", "import { n as newInstance$1 } from '../../macros2.js';\nimport vtkWebGPUBufferManager from './BufferManager.js';\nimport vtkWebGPUCellArrayMapper from './CellArrayMapper.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\nconst {\n  PrimitiveTypes\n} = vtkWebGPUBufferManager;\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUPolyDataMapper methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUPolyDataMapper2D(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUPolyDataMapper2D');\n  publicAPI.createCellArrayMapper = () => vtkWebGPUCellArrayMapper.newInstance();\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      model.WebGPUActor = publicAPI.getFirstAncestorOfType('vtkWebGPUActor2D');\n      if (!model.renderable.getStatic()) {\n        model.renderable.update();\n      }\n      const poly = model.renderable.getInputData();\n      model.renderable.mapScalars(poly, 1.0);\n      publicAPI.updateCellArrayMappers(poly);\n    }\n  };\n  publicAPI.updateCellArrayMappers = poly => {\n    const prims = [poly.getVerts(), poly.getLines(), poly.getPolys(), poly.getStrips()];\n\n    // we instantiate a cell array mapper for each cellArray that has cells\n    // and they handle the rendering of that cell array\n    const cellMappers = [];\n    let cellOffset = 0;\n    for (let i = PrimitiveTypes.Points; i <= PrimitiveTypes.Triangles; i++) {\n      if (prims[i].getNumberOfValues() > 0) {\n        if (!model.primitives[i]) {\n          model.primitives[i] = publicAPI.createCellArrayMapper();\n        }\n        const cellMapper = model.primitives[i];\n        cellMapper.setCellArray(prims[i]);\n        cellMapper.setCurrentInput(poly);\n        cellMapper.setCellOffset(cellOffset);\n        cellMapper.setPrimitiveType(i);\n        cellMapper.setRenderable(model.renderable);\n        cellMapper.setIs2D(true);\n        cellOffset += prims[i].getNumberOfCells();\n        cellMappers.push(cellMapper);\n      } else {\n        model.primitives[i] = null;\n      }\n    }\n    publicAPI.prepareNodes();\n    publicAPI.addMissingChildren(cellMappers);\n    publicAPI.removeUnusedNodes();\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nfunction defaultValues(initialValues) {\n  return {\n    primitives: [],\n    ...initialValues\n  };\n}\n\n// ----------------------------------------------------------------------------\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, defaultValues(initialValues));\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.primitives = [];\n\n  // Object methods\n  vtkWebGPUPolyDataMapper2D(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkWebGPUPolyDataMapper2D');\n\n// ----------------------------------------------------------------------------\n\nvar index = {\n  newInstance,\n  extend\n};\n\n// Register ourself to WebGPU backend if imported\nregisterOverride('vtkMapper2D', newInstance);\n\nexport { index as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkWebGPUShaderCache from './ShaderCache.js';\nimport vtkWebGPUSimpleMapper from './SimpleMapper.js';\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUFullScreenQuad methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUFullScreenQuad(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUFullScreenQuad');\n  publicAPI.replaceShaderPosition = (hash, pipeline, vertexInput) => {\n    const vDesc = pipeline.getShaderDescription('vertex');\n    vDesc.addBuiltinOutput('vec4<f32>', '@builtin(position) Position');\n    vDesc.addOutput('vec4<f32>', 'vertexVC');\n    let code = vDesc.getCode();\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::Position::Impl', ['output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);', 'output.Position = vec4<f32>(vertexBC, 1.0);', 'output.vertexVC = vec4<f32>(vertexBC, 1);']).result;\n    vDesc.setCode(code);\n  };\n  model.shaderReplacements.set('replaceShaderPosition', publicAPI.replaceShaderPosition);\n  publicAPI.updateBuffers = () => {\n    const buff = model.device.getBufferManager().getFullScreenQuadBuffer();\n    model.vertexInput.addBuffer(buff, ['vertexBC']);\n    model.numberOfVertices = 6;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkWebGPUSimpleMapper.extend(publicAPI, model, initialValues);\n\n  // Object methods\n  vtkWebGPUFullScreenQuad(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUFullScreenQuad');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUFullScreenQuad$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUFullScreenQuad$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkWebGPUBufferManager from './BufferManager.js';\nimport vtkWebGPUTypes from './Types.js';\n\nconst {\n  BufferUsage\n} = vtkWebGPUBufferManager;\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUStorageBuffer - similar to the UniformBuffer class\n// but YOU are responsible for layout issues and alignment.\n// The order you add entries is the order they will be layed out\n// in memory. But you must follow layout rules.\n// ----------------------------------------------------------------------------\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUStorageBuffer methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUStorageBuffer(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUStorageBuffer');\n  publicAPI.addEntry = (name, type) => {\n    if (model._bufferEntryNames.has(name)) {\n      vtkErrorMacro(`entry named ${name} already exists`);\n      return;\n    }\n    model._bufferEntryNames.set(name, model.bufferEntries.length);\n    const sizeInBytes = vtkWebGPUTypes.getByteStrideFromShaderFormat(type);\n    model.bufferEntries.push({\n      name,\n      type,\n      sizeInBytes,\n      offset: model.sizeInBytes,\n      nativeType: vtkWebGPUTypes.getNativeTypeFromShaderFormat(type)\n    });\n    model.sizeInBytes += sizeInBytes;\n  };\n  publicAPI.send = device => {\n    if (!model._buffer) {\n      const req = {\n        nativeArray: model.Float32Array,\n        usage: BufferUsage.Storage,\n        label: model.label\n      };\n      model._buffer = device.getBufferManager().getBuffer(req);\n      model.bindGroupTime.modified();\n      model._sendTime.modified();\n      return;\n    }\n    device.getHandle().queue.writeBuffer(model._buffer.getHandle(), 0, model.arrayBuffer, 0, model.sizeInBytes * model.numberOfInstances);\n    model._sendTime.modified();\n  };\n  publicAPI.createView = type => {\n    if (type in model === false) {\n      if (!model.arrayBuffer) {\n        model.arrayBuffer = new ArrayBuffer(model.sizeInBytes * model.numberOfInstances);\n      }\n      model[type] = macro.newTypedArray(type, model.arrayBuffer);\n    }\n  };\n  publicAPI.setValue = (name, instance, val) => {\n    const idx = model._bufferEntryNames.get(name);\n    if (idx === undefined) {\n      vtkErrorMacro(`entry named ${name} not found in UBO`);\n      return;\n    }\n    const entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    const view = model[entry.nativeType];\n    view[(entry.offset + instance * model.sizeInBytes) / view.BYTES_PER_ELEMENT] = val;\n  };\n  publicAPI.setArray = (name, instance, arr) => {\n    const idx = model._bufferEntryNames.get(name);\n    if (idx === undefined) {\n      vtkErrorMacro(`entry named ${name} not found in UBO`);\n      return;\n    }\n    const entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    const view = model[entry.nativeType];\n    const ioffset = (entry.offset + instance * model.sizeInBytes) / view.BYTES_PER_ELEMENT;\n    for (let i = 0; i < arr.length; i++) {\n      view[ioffset + i] = arr[i];\n    }\n  };\n  publicAPI.setAllInstancesFromArray = (name, arr) => {\n    const idx = model._bufferEntryNames.get(name);\n    if (idx === undefined) {\n      vtkErrorMacro(`entry named ${name} not found in UBO`);\n      return;\n    }\n    const entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    const view = model[entry.nativeType];\n    const numComponents = arr.length / model.numberOfInstances;\n    for (let inst = 0; inst < model.numberOfInstances; inst++) {\n      const ioffset = (entry.offset + inst * model.sizeInBytes) / view.BYTES_PER_ELEMENT;\n      for (let i = 0; i < numComponents; i++) {\n        view[ioffset + i] = arr[inst * numComponents + i];\n      }\n    }\n  };\n  publicAPI.setAllInstancesFromArrayColorToFloat = (name, arr) => {\n    const idx = model._bufferEntryNames.get(name);\n    if (idx === undefined) {\n      vtkErrorMacro(`entry named ${name} not found in UBO`);\n      return;\n    }\n    const entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    const view = model[entry.nativeType];\n    const numComponents = arr.length / model.numberOfInstances;\n    for (let inst = 0; inst < model.numberOfInstances; inst++) {\n      const ioffset = (entry.offset + inst * model.sizeInBytes) / view.BYTES_PER_ELEMENT;\n      for (let i = 0; i < numComponents; i++) {\n        view[ioffset + i] = arr[inst * numComponents + i] / 255.0;\n      }\n    }\n  };\n  publicAPI.setAllInstancesFromArray3x3To4x4 = (name, arr) => {\n    const idx = model._bufferEntryNames.get(name);\n    if (idx === undefined) {\n      vtkErrorMacro(`entry named ${name} not found in UBO`);\n      return;\n    }\n    const entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    const view = model[entry.nativeType];\n    const numComponents = 9;\n    for (let inst = 0; inst < model.numberOfInstances; inst++) {\n      const ioffset = (entry.offset + inst * model.sizeInBytes) / view.BYTES_PER_ELEMENT;\n      for (let j = 0; j < 3; j++) {\n        for (let i = 0; i < 3; i++) {\n          view[ioffset + j * 4 + i] = arr[inst * numComponents + j * 3 + i];\n        }\n      }\n    }\n  };\n  publicAPI.getSendTime = () => model._sendTime.getMTime();\n  publicAPI.getShaderCode = (binding, group) => {\n    const lines = [`struct ${model.label}StructEntry\\n{`];\n    for (let i = 0; i < model.bufferEntries.length; i++) {\n      const entry = model.bufferEntries[i];\n      lines.push(`  ${entry.name}: ${entry.type},`);\n    }\n    lines.push(`\n};\nstruct ${model.label}Struct\n{\n  values: array<${model.label}StructEntry>,\n};\n@binding(${binding}) @group(${group}) var<storage, read> ${model.label}: ${model.label}Struct;\n`);\n    return lines.join('\\n');\n  };\n  publicAPI.getBindGroupEntry = () => {\n    const foo = {\n      resource: {\n        buffer: model._buffer.getHandle()\n      }\n    };\n    return foo;\n  };\n  publicAPI.clearData = () => {\n    model.numberOfInstances = 0;\n    model.sizeInBytes = 0;\n    model.bufferEntries = [];\n    model._bufferEntryNames = new Map();\n    model._buffer = null;\n    delete model.arrayBuffer;\n    delete model.Float32Array;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  bufferEntries: null,\n  bufferEntryNames: null,\n  sizeInBytes: 0,\n  label: null,\n  numberOfInstances: 1\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n\n  // Internal objects\n  model._bufferEntryNames = new Map();\n  model.bufferEntries = [];\n  model._sendTime = {};\n  macro.obj(model._sendTime, {\n    mtime: 0\n  });\n  model.bindGroupTime = {};\n  macro.obj(model.bindGroupTime, {\n    mtime: 0\n  });\n\n  // default SSBO desc\n  model.bindGroupLayoutEntry = model.bindGroupLayoutEntry || {\n    buffer: {\n      type: 'read-only-storage'\n    }\n  };\n  macro.get(publicAPI, model, ['bindGroupTime']);\n  macro.setGet(publicAPI, model, ['device', 'bindGroupLayoutEntry', 'label', 'numberOfInstances', 'sizeInBytes']);\n\n  // Object methods\n  vtkWebGPUStorageBuffer(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUStorageBuffer');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUStorageBuffer$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUStorageBuffer$1 as default, extend, newInstance };\n", "import { mat4, vec3 } from 'gl-matrix';\nimport { n as newInstance$1, o as obj, g as get, k as getArray, e as setGet, c as macro } from '../../macros2.js';\nimport { r as radiansFromDegrees } from '../../Common/Core/Math/index.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport vtkWebGPUBindGroup from './BindGroup.js';\nimport vtkWebGPUFullScreenQuad from './FullScreenQuad.js';\nimport vtkWebGPUStorageBuffer from './StorageBuffer.js';\nimport vtkWebGPUUniformBuffer from './UniformBuffer.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\nconst {\n  vtkDebugMacro\n} = macro;\nconst clearFragColorTemplate = `\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = mapperUBO.BackgroundColor;\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n`;\nconst clearFragTextureTemplate = `\nfn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {\n  var tau: f32 = 6.28318530718;\n  var pi: f32 = 3.14159265359;\n  var out: vec2<f32> = vec2<f32>(0.0);\n\n  out.x = atan2(dir.z, dir.x) / tau;\n  out.x += 0.5;\n\n  var phix: f32 = length(vec2(dir.x, dir.z));\n  out.y = atan2(dir.y, phix) / pi + 0.5;\n\n  return out;\n}\n\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var tcoord: vec4<f32> = vec4<f32>(input.vertexVC.xy, -1, 1);\n  var V: vec4<f32> = normalize(mapperUBO.FSQMatrix * tcoord); // vec2<f32>((input.tcoordVS.x - 0.5) * 2, -(input.tcoordVS.y - 0.5) * 2);\n  // textureSampleLevel gets rid of some ugly artifacts\n  var background = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, vecToRectCoord(V.xyz), 0.0);\n  var computedColor: vec4<f32> = vec4<f32>(background.rgb, 1);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n`;\nconst _fsqClearMat4 = new Float64Array(16);\nconst _tNormalMat4 = new Float64Array(16);\n\n// Light type index gives either 0, 1, or 2 which indicates what type of light there is.\n// While technically, there are only spot and directional lights, within the CellArrayMapper\n// there is a third, positional light. It is technically just a variant of a spot light with\n// a cone angle of 90 or above, however certain calculations can be skipped if it is treated\n// separately.\n// The mappings are shown below:\n// 0 -> positional light\n// 1 -> directional light\n// 2 -> spot light\nfunction getLightTypeIndex(light) {\n  if (light.getPositional()) {\n    if (light.getConeAngle() >= 90) {\n      return 0;\n    }\n    return 2;\n  }\n  return 1;\n}\n\n// ----------------------------------------------------------------------------\n// vtkWebGPURenderer methods\n// ----------------------------------------------------------------------------\n/* eslint-disable no-bitwise */\n\nfunction vtkWebGPURenderer(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPURenderer');\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      if (!model.renderable) {\n        return;\n      }\n      model.camera = model.renderable.getActiveCamera();\n      publicAPI.updateLights();\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNode(model.camera);\n      publicAPI.addMissingNodes(model.renderable.getViewPropsWithNestedProps());\n      publicAPI.removeUnusedNodes();\n      model.webgpuCamera = publicAPI.getViewNodeFor(model.camera, model.webgpuCamera);\n      publicAPI.updateStabilizedMatrix();\n    }\n  };\n  publicAPI.updateStabilizedMatrix = () => {\n    // This method is designed to help with floating point\n    // issues when rendering datasets that push the limits of\n    // resolutions on float.\n    //\n    // One of the most common cases is when the dataset is located far\n    // away from the origin relative to the clipping range we are looking\n    // at. For that case we want to perform the floating point sensitive\n    // multiplications on the CPU in double. To this end we want the\n    // vertex rendering ops to look something like\n    //\n    // Compute shifted points and load those into the VBO\n    // pointCoordsSC = WorldToStabilizedMatrix * pointCoords;\n    //\n    // In the vertex shader do the following\n    // positionVC = StabilizedToDeviceMatrix * ModelToStabilizedMatrix*vertexIn;\n    //\n    // We use two matrices because it is expensive to change the\n    // WorldToStabilized matrix as we have to reupload all pointCoords\n    // So that matrix (MCSCMatrix) is fairly static, the Stabilized to\n    // Device matrix is the one that gets updated every time the camera\n    // changes.\n    //\n    // The basic idea is that we should translate the data so that\n    // when the center of the view frustum moves a lot\n    // we recenter it. The center of the view frustum is roughly\n    // camPos + dirOfProj*(far + near)*0.5\n    const clipRange = model.camera.getClippingRange();\n    const pos = model.camera.getPositionByReference();\n    const dop = model.camera.getDirectionOfProjectionByReference();\n    const center = [];\n    const offset = [];\n    vec3.scale(offset, dop, 0.5 * (clipRange[0] + clipRange[1]));\n    vec3.add(center, pos, offset);\n    vec3.sub(offset, center, model.stabilizedCenter);\n    const length = vec3.len(offset);\n    if (length / (clipRange[1] - clipRange[0]) > model.recenterThreshold) {\n      model.stabilizedCenter = center;\n      model.stabilizedTime.modified();\n    }\n  };\n  publicAPI.updateLights = () => {\n    let count = 0;\n    const lights = model.renderable.getLightsByReference();\n    for (let index = 0; index < lights.length; ++index) {\n      if (lights[index].getSwitch() > 0.0) {\n        count++;\n      }\n    }\n    if (!count) {\n      vtkDebugMacro('No lights are on, creating one.');\n      model.renderable.createLight();\n    }\n    return count;\n  };\n  publicAPI.updateUBO = () => {\n    // make sure the data is up to date\n    // has the camera changed?\n    const utime = model.UBO.getSendTime();\n    if (model._parent.getMTime() > utime || publicAPI.getMTime() > utime || model.camera.getMTime() > utime || model.renderable.getMTime() > utime) {\n      const keyMats = model.webgpuCamera.getKeyMatrices(publicAPI);\n      model.UBO.setArray('WCVCMatrix', keyMats.wcvc);\n      model.UBO.setArray('SCPCMatrix', keyMats.scpc);\n      model.UBO.setArray('PCSCMatrix', keyMats.pcsc);\n      model.UBO.setArray('SCVCMatrix', keyMats.scvc);\n      model.UBO.setArray('VCPCMatrix', keyMats.vcpc);\n      model.UBO.setArray('WCVCNormals', keyMats.normalMatrix);\n      model.UBO.setValue('LightCount', model.renderable.getLights().length);\n      model.UBO.setValue('MaxEnvironmentMipLevel', model.renderable.getEnvironmentTexture()?.getMipLevel());\n      model.UBO.setValue('BackgroundDiffuseStrength', model.renderable.getEnvironmentTextureDiffuseStrength());\n      model.UBO.setValue('BackgroundSpecularStrength', model.renderable.getEnvironmentTextureSpecularStrength());\n      const tsize = publicAPI.getYInvertedTiledSizeAndOrigin();\n      model.UBO.setArray('viewportSize', [tsize.usize, tsize.vsize]);\n      model.UBO.setValue('cameraParallel', model.camera.getParallelProjection());\n      const device = model._parent.getDevice();\n      model.UBO.sendIfNeeded(device);\n    }\n  };\n  publicAPI.updateSSBO = () => {\n    const lights = model.renderable.getLights();\n    const keyMats = model.webgpuCamera.getKeyMatrices(publicAPI);\n    let lightTimeString = `${model.renderable.getMTime()}`;\n    for (let i = 0; i < lights.length; i++) {\n      lightTimeString += lights[i].getMTime();\n    }\n    if (lightTimeString !== model.lightTimeString) {\n      const lightPosArray = new Float32Array(lights.length * 4);\n      const lightDirArray = new Float32Array(lights.length * 4);\n      const lightColorArray = new Float32Array(lights.length * 4);\n      const lightTypeArray = new Float32Array(lights.length * 4);\n      for (let i = 0; i < lights.length; i++) {\n        const offset = i * 4;\n\n        // Position\n        const viewCoordinatePosition = lights[i].getPosition();\n        vec3.transformMat4(viewCoordinatePosition, viewCoordinatePosition, keyMats.wcvc);\n        // viewCoordinatePosition\n        lightPosArray[offset] = viewCoordinatePosition[0];\n        lightPosArray[offset + 1] = viewCoordinatePosition[1];\n        lightPosArray[offset + 2] = viewCoordinatePosition[2];\n        lightPosArray[offset + 3] = 0;\n\n        // Rotation (All are negative to correct for -Z being forward)\n        lightDirArray[offset] = -lights[i].getDirection()[0];\n        lightDirArray[offset + 1] = -lights[i].getDirection()[1];\n        lightDirArray[offset + 2] = -lights[i].getDirection()[2];\n        lightDirArray[offset + 3] = 0;\n\n        // Color\n        lightColorArray[offset] = lights[i].getColor()[0];\n        lightColorArray[offset + 1] = lights[i].getColor()[1];\n        lightColorArray[offset + 2] = lights[i].getColor()[2];\n        lightColorArray[offset + 3] = lights[i].getIntensity() * 5; // arbitrary multiplication to fix the dullness of low value PBR lights\n\n        // Type\n        lightTypeArray[offset] = getLightTypeIndex(lights[i]); // Type\n        lightTypeArray[offset + 1] = Math.cos(radiansFromDegrees(lights[i].getConeAngle())); // Inner Phi, should probably do some check on these to make sure they dont excede limits\n        lightTypeArray[offset + 2] = Math.cos(radiansFromDegrees(lights[i].getConeAngle() + lights[i].getConeFalloff())); // Outer Phi\n        lightTypeArray[offset + 3] = 0;\n      }\n\n      // Im not sure how correct this is, but this is what the example does\n      // https://kitware.github.io/vtk-js/api/Rendering_WebGPU_VolumePassFSQ.html\n      model.SSBO.clearData();\n      model.SSBO.setNumberOfInstances(lights.length);\n      model.SSBO.addEntry('LightPos', 'vec4<f32>'); // Position\n      model.SSBO.addEntry('LightDir', 'vec4<f32>'); // Direction\n      model.SSBO.addEntry('LightColor', 'vec4<f32>'); // Color (r, g, b, intensity)\n      model.SSBO.addEntry('LightData', 'vec4<f32>'); // Other data (type, etc, etc, etc)\n\n      model.SSBO.setAllInstancesFromArray('LightPos', lightPosArray);\n      model.SSBO.setAllInstancesFromArray('LightDir', lightDirArray);\n      model.SSBO.setAllInstancesFromArray('LightColor', lightColorArray);\n      model.SSBO.setAllInstancesFromArray('LightData', lightTypeArray);\n      const device = model._parent.getDevice();\n      model.SSBO.send(device);\n    }\n    model.lightTimeString = lightTimeString;\n  };\n  publicAPI.scissorAndViewport = encoder => {\n    const tsize = publicAPI.getYInvertedTiledSizeAndOrigin();\n    encoder.getHandle().setViewport(tsize.lowerLeftU, tsize.lowerLeftV, tsize.usize, tsize.vsize, 0.0, 1.0);\n    // set scissor\n    encoder.getHandle().setScissorRect(tsize.lowerLeftU, tsize.lowerLeftV, tsize.usize, tsize.vsize);\n  };\n  publicAPI.bindUBO = renderEncoder => {\n    renderEncoder.activateBindGroup(model.bindGroup);\n  };\n\n  // Renders myself\n  publicAPI.opaquePass = prepass => {\n    if (prepass) {\n      model.renderEncoder.begin(model._parent.getCommandEncoder());\n      publicAPI.updateUBO();\n      publicAPI.updateSSBO();\n    } else {\n      publicAPI.scissorAndViewport(model.renderEncoder);\n      publicAPI.clear();\n      model.renderEncoder.end();\n    }\n  };\n  publicAPI.clear = () => {\n    if (model.renderable.getTransparent() || model.suppressClear) {\n      return;\n    }\n    const device = model._parent.getDevice();\n    // Normal Solid Color\n    if (!model.clearFSQ) {\n      model.clearFSQ = vtkWebGPUFullScreenQuad.newInstance();\n      model.clearFSQ.setDevice(device);\n      model.clearFSQ.setPipelineHash('clearfsq');\n      model.clearFSQ.setFragmentShaderTemplate(clearFragColorTemplate);\n      const ubo = vtkWebGPUUniformBuffer.newInstance({\n        label: 'mapperUBO'\n      });\n      ubo.addEntry('FSQMatrix', 'mat4x4<f32>');\n      ubo.addEntry('BackgroundColor', 'vec4<f32>');\n      model.clearFSQ.setUBO(ubo);\n      model.backgroundTex = model.renderable.getEnvironmentTexture();\n    }\n    // Textured Background\n    if (model.clearFSQ.getPipelineHash() !== 'clearfsqwithtexture' && model.renderable.getUseEnvironmentTextureAsBackground() && model.backgroundTex?.getImageLoaded()) {\n      model.clearFSQ.setFragmentShaderTemplate(clearFragTextureTemplate);\n      const ubo = vtkWebGPUUniformBuffer.newInstance({\n        label: 'mapperUBO'\n      });\n      ubo.addEntry('FSQMatrix', 'mat4x4<f32>');\n      ubo.addEntry('BackgroundColor', 'vec4<f32>');\n      model.clearFSQ.setUBO(ubo);\n      const environmentTextureHash = device.getTextureManager().getTextureForVTKTexture(model.backgroundTex, 'EnvironmentTexture');\n      if (environmentTextureHash.getReady()) {\n        const tview = environmentTextureHash.createView(`EnvironmentTexture`);\n        model.clearFSQ.setTextureViews([tview]);\n        model.backgroundTexLoaded = true;\n        const interpolate = model.backgroundTex.getInterpolate() ? 'linear' : 'nearest';\n        tview.addSampler(device, {\n          addressModeU: 'repeat',\n          addressModeV: 'clamp-to-edge',\n          addressModeW: 'repeat',\n          minFilter: interpolate,\n          magFilter: interpolate,\n          mipmapFilter: 'linear'\n        });\n      }\n      model.clearFSQ.setPipelineHash('clearfsqwithtexture');\n    } else if (model.clearFSQ.getPipelineHash() === 'clearfsqwithtexture' && !model.renderable.getUseEnvironmentTextureAsBackground()) {\n      // In case the mode is changed at runtime\n      model.clearFSQ = vtkWebGPUFullScreenQuad.newInstance();\n      model.clearFSQ.setDevice(device);\n      model.clearFSQ.setPipelineHash('clearfsq');\n      model.clearFSQ.setFragmentShaderTemplate(clearFragColorTemplate);\n      const ubo = vtkWebGPUUniformBuffer.newInstance({\n        label: 'mapperUBO'\n      });\n      ubo.addEntry('FSQMatrix', 'mat4x4<f32>');\n      ubo.addEntry('BackgroundColor', 'vec4<f32>');\n      model.clearFSQ.setUBO(ubo);\n    }\n    const keyMats = model.webgpuCamera.getKeyMatrices(publicAPI);\n    const background = model.renderable.getBackgroundByReference();\n    model.clearFSQ.getUBO().setArray('BackgroundColor', background);\n    mat4.transpose(_tNormalMat4, keyMats.normalMatrix);\n    mat4.mul(_fsqClearMat4, keyMats.scvc, keyMats.pcsc);\n    mat4.mul(_fsqClearMat4, _tNormalMat4, _fsqClearMat4);\n    model.clearFSQ.getUBO().setArray('FSQMatrix', _fsqClearMat4);\n    model.clearFSQ.getUBO().sendIfNeeded(device);\n    model.clearFSQ.prepareAndDraw(model.renderEncoder);\n  };\n  publicAPI.translucentPass = prepass => {\n    if (prepass) {\n      model.renderEncoder.begin(model._parent.getCommandEncoder());\n    } else {\n      publicAPI.scissorAndViewport(model.renderEncoder);\n      model.renderEncoder.end();\n    }\n  };\n  publicAPI.volumeDepthRangePass = prepass => {\n    if (prepass) {\n      model.renderEncoder.begin(model._parent.getCommandEncoder());\n    } else {\n      publicAPI.scissorAndViewport(model.renderEncoder);\n      model.renderEncoder.end();\n    }\n  };\n  publicAPI.getAspectRatio = () => {\n    const size = model._parent.getSizeByReference();\n    const viewport = model.renderable.getViewportByReference();\n    return size[0] * (viewport[2] - viewport[0]) / ((viewport[3] - viewport[1]) * size[1]);\n  };\n  publicAPI.convertToOpenGLDepth = val => model.webgpuCamera.convertToOpenGLDepth(val);\n  publicAPI.getYInvertedTiledSizeAndOrigin = () => {\n    const res = publicAPI.getTiledSizeAndOrigin();\n    const size = model._parent.getSizeByReference();\n    res.lowerLeftV = size[1] - res.vsize - res.lowerLeftV;\n    return res;\n  };\n  publicAPI.getTiledSizeAndOrigin = () => {\n    const vport = model.renderable.getViewportByReference();\n\n    // if there is no window assume 0 1\n    const tileViewPort = [0.0, 0.0, 1.0, 1.0];\n\n    // find the lower left corner of the viewport, taking into account the\n    // lower left boundary of this tile\n    const vpu = vport[0] - tileViewPort[0];\n    const vpv = vport[1] - tileViewPort[1];\n\n    // store the result as a pixel value\n    const ndvp = model._parent.normalizedDisplayToDisplay(vpu, vpv);\n    const lowerLeftU = Math.round(ndvp[0]);\n    const lowerLeftV = Math.round(ndvp[1]);\n\n    // find the upper right corner of the viewport, taking into account the\n    // lower left boundary of this tile\n    const vpu2 = vport[2] - tileViewPort[0];\n    const vpv2 = vport[3] - tileViewPort[1];\n    const ndvp2 = model._parent.normalizedDisplayToDisplay(vpu2, vpv2);\n\n    // now compute the size of the intersection of the viewport with the\n    // current tile\n    let usize = Math.round(ndvp2[0]) - lowerLeftU;\n    let vsize = Math.round(ndvp2[1]) - lowerLeftV;\n    if (usize < 0) {\n      usize = 0;\n    }\n    if (vsize < 0) {\n      vsize = 0;\n    }\n    return {\n      usize,\n      vsize,\n      lowerLeftU,\n      lowerLeftV\n    };\n  };\n  publicAPI.getPropFromID = id => {\n    for (let i = 0; i < model.children.length; i++) {\n      const res = model.children[i].getPropID ? model.children[i].getPropID() : -1;\n      if (res === id) {\n        return model.children[i];\n      }\n    }\n    return null;\n  };\n  publicAPI.getStabilizedTime = () => model.stabilizedTime.getMTime();\n  publicAPI.releaseGraphicsResources = () => {\n    if (model.selector !== null) {\n      model.selector.releaseGraphicsResources();\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  bindGroup: null,\n  selector: null,\n  renderEncoder: null,\n  recenterThreshold: 20.0,\n  suppressClear: false,\n  stabilizedCenter: [0.0, 0.0, 0.0]\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n\n  // UBO\n  model.UBO = vtkWebGPUUniformBuffer.newInstance({\n    label: 'rendererUBO'\n  });\n  model.UBO.addEntry('WCVCMatrix', 'mat4x4<f32>');\n  model.UBO.addEntry('SCPCMatrix', 'mat4x4<f32>');\n  model.UBO.addEntry('PCSCMatrix', 'mat4x4<f32>');\n  model.UBO.addEntry('SCVCMatrix', 'mat4x4<f32>');\n  model.UBO.addEntry('VCPCMatrix', 'mat4x4<f32>');\n  model.UBO.addEntry('WCVCNormals', 'mat4x4<f32>');\n  model.UBO.addEntry('viewportSize', 'vec2<f32>');\n  model.UBO.addEntry('LightCount', 'i32');\n  model.UBO.addEntry('MaxEnvironmentMipLevel', 'f32');\n  model.UBO.addEntry('BackgroundDiffuseStrength', 'f32');\n  model.UBO.addEntry('BackgroundSpecularStrength', 'f32');\n  model.UBO.addEntry('cameraParallel', 'u32');\n\n  // SSBO (Light data)\n  model.SSBO = vtkWebGPUStorageBuffer.newInstance({\n    label: 'rendererLightSSBO'\n  });\n  model.lightTimeString = '';\n  model.bindGroup = vtkWebGPUBindGroup.newInstance({\n    label: 'rendererBG'\n  });\n  model.bindGroup.setBindables([model.UBO, model.SSBO]);\n  model.tmpMat4 = mat4.identity(new Float64Array(16));\n  model.stabilizedTime = {};\n  obj(model.stabilizedTime, {\n    mtime: 0\n  });\n\n  // Build VTK API\n  get(publicAPI, model, ['bindGroup', 'stabilizedTime']);\n  getArray(publicAPI, model, ['stabilizedCenter']);\n  setGet(publicAPI, model, ['renderEncoder', 'selector', 'suppressClear', 'UBO']);\n\n  // Object methods\n  vtkWebGPURenderer(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkWebGPURenderer');\n\n// ----------------------------------------------------------------------------\n\nvar index = {\n  newInstance,\n  extend\n};\n\n// Register ourself to WebGPU backend if imported\nregisterOverride('vtkRenderer', newInstance);\n\nexport { index as default, extend, newInstance };\n", "import { n as newInstance$1 } from '../../macros2.js';\nimport vtkScalarBarActor from '../Core/ScalarBarActor.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUScalarBarActor methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUScalarBarActor(publicAPI, model) {\n  model.classHierarchy.push('vtkWebGPUScalarBarActor');\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      model.WebGPURenderer = publicAPI.getFirstAncestorOfType('vtkWebGPURenderer');\n      model.WebGPURenderWindow = model.WebGPURenderer.getParent();\n      if (!model.scalarBarActorHelper.getRenderable()) {\n        model.scalarBarActorHelper.setRenderable(model.renderable);\n      }\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNode(model.scalarBarActorHelper.getBarActor());\n      publicAPI.addMissingNode(model.scalarBarActorHelper.getTmActor());\n      publicAPI.removeUnusedNodes();\n    }\n  };\n  publicAPI.opaquePass = (prepass, renderPass) => {\n    if (prepass) {\n      const camera = model.WebGPURenderer ? model.WebGPURenderer.getRenderable().getActiveCamera() : null;\n      const tsize = model.WebGPURenderer.getTiledSizeAndOrigin();\n      model.scalarBarActorHelper.updateAPISpecificData([tsize.usize, tsize.vsize], camera, model.WebGPURenderWindow.getRenderable());\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.scalarBarActorHelper = vtkScalarBarActor.newScalarBarActorHelper();\n\n  // Object methods\n  vtkWebGPUScalarBarActor(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkWebGPUScalarBarActor');\n\n// ----------------------------------------------------------------------------\n\nvar index = {\n  newInstance,\n  extend\n};\n\n// Register ourself to WebGPU backend if imported\nregisterOverride('vtkScalarBarActor', newInstance);\n\nexport { index as default, extend, newInstance };\n"],
  "mappings": "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",
  "names": ["vtkErrorMacro", "index", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "vtkViewNodeFactory", "Wrap", "Filter", "VtkDataTypes", "vtkErrorMacro", "toHalf", "scale", "extent", "count", "min", "max", "DeepEqual", "outIdx", "DEFAULT_VALUES", "extend", "newInstance", "group", "DEFAULT_VALUES", "extend", "newInstance", "format", "group", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "add", "equals", "set", "subtract", "set", "add", "subtract", "scale", "equals", "add", "adjoint", "clone", "copy", "create", "determinant", "equals", "exactEquals", "frob", "fromQuat", "fromRotation", "fromScaling", "fromTranslation", "fromValues", "identity", "invert", "mul", "multiply", "multiplyScalar", "multiplyScalarAndAdd", "rotate", "scale", "set", "str", "sub", "subtract", "translate", "transpose", "create", "clone", "copy", "fromValues", "set", "identity", "transpose", "invert", "adjoint", "determinant", "multiply", "translate", "scale", "rotate", "len", "fromTranslation", "fromScaling", "fromRotation", "fromQuat", "str", "frob", "add", "subtract", "multiplyScalar", "multiplyScalarAndAdd", "exactEquals", "equals", "mul", "sub", "add", "clone", "copy", "create", "dot", "equals", "exactEquals", "fromValues", "identity", "invert", "len", "length", "lerp", "mul", "multiply", "normalize", "random", "rotateX", "rotateY", "rotateZ", "scale", "set", "sqrLen", "squaredLength", "str", "add", "clone", "copy", "create", "cross", "dot", "equals", "exactEquals", "fromValues", "mul", "multiply", "normalize", "rotateX", "rotateY", "rotateZ", "round", "scale", "set", "str", "sub", "subtract", "create", "clone", "fromValues", "copy", "set", "add", "subtract", "multiply", "round", "scale", "normalize", "len", "dot", "cross", "rotateX", "rotateY", "rotateZ", "str", "exactEquals", "equals", "sub", "mul", "count", "add", "ceil", "clone", "copy", "create", "cross", "dist", "distance", "div", "divide", "dot", "equals", "exactEquals", "floor", "forEach", "fromValues", "inverse", "len", "length", "lerp", "max", "min", "mul", "multiply", "negate", "normalize", "random", "round", "scale", "scaleAndAdd", "set", "sqrDist", "sqrLen", "squaredDistance", "squaredLength", "str", "sub", "subtract", "transformMat4", "transformQuat", "zero", "create", "clone", "fromValues", "copy", "set", "add", "subtract", "multiply", "divide", "ceil", "floor", "min", "max", "round", "scale", "scaleAndAdd", "distance", "squaredDistance", "length", "squaredLength", "negate", "inverse", "normalize", "len", "dot", "cross", "A", "B", "C", "D", "E", "lerp", "random", "transformMat4", "transformQuat", "zero", "str", "exactEquals", "equals", "sub", "mul", "div", "dist", "sqrDist", "sqrLen", "forEach", "count", "create", "identity", "dot", "multiply", "rotateX", "rotateY", "rotateZ", "scale", "random", "invert", "str", "clone", "fromValues", "copy", "set", "add", "mul", "lerp", "length", "len", "squaredLength", "sqrLen", "normalize", "exactEquals", "equals", "cross", "create", "forEach", "create", "count", "index", "DEFAULT_VALUES", "extend", "newInstance", "index", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "zero", "blur", "sum", "count", "reverse", "ticks", "random", "array", "range", "extend", "format", "extend", "min", "max", "extend", "extend", "extend", "cosh", "sinh", "t1", "t2", "t3", "color", "rgb", "zero", "i", "degrees", "identity", "identity", "translate", "rotate", "scale", "hsl", "hue", "hcl", "hue", "cubehelix", "hue", "number", "identity", "normalize", "range", "i", "copy", "piecewise", "scale", "number", "length", "map", "locale", "group", "zero", "format", "length", "formatPrefix", "value", "max", "count", "scale", "count", "linear", "copy", "t0", "t1", "count", "range", "ticks", "count", "reverse", "step", "locale", "formats", "pad", "format", "length", "locale", "defaultLocale", "DEFAULT_VALUES", "extend", "newInstance", "distance", "STATIC", "DEFAULT_VALUES", "extend", "newInstance", "equals", "max", "scale", "index", "scale3", "point", "intersection", "newInstance", "STATIC", "Constants", "CoordinateSystem", "Constants", "index", "DEFAULT_VALUES", "extend", "newInstance", "index", "degrees", "angle", "time", "DEFAULT_VALUES", "extend", "newInstance", "Representation", "Interpolation", "notImplemented", "norm", "DEFAULT_VALUES", "extend", "newInstance", "vtkActor", "time", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "extend", "vtkErrorMacro", "vtkWarningMacro", "array", "index", "DEFAULT_VALUES", "extend", "newInstance", "Constants", "AttributeTypes", "AttributeCopyOperations", "Constants", "vtkWarningMacro", "DEFAULT_VALUES", "extend", "newInstance", "Constants", "DEFAULT_VALUES", "extend", "newInstance", "Constants", "Constants", "StructuredType", "Constants", "vtkErrorMacro", "index", "array", "bin", "variance", "extent", "DEFAULT_VALUES", "extend", "newInstance", "Constants", "ScalarMappingTarget", "Scale", "VectorMode", "VtkDataTypes", "ColorMode", "Constants", "vtkErrorMacro", "vtkScalarsToColors", "rgba", "length", "sum", "count", "min", "max", "range", "DEFAULT_VALUES", "extend", "newInstance", "vtkErrorMacro", "index", "range", "length", "maxIndex", "rgba", "color", "DEFAULT_VALUES", "extend", "newInstance", "mode", "Constants", "FieldAssociations", "staticOffsetAPI", "otherStaticMethods", "ColorMode", "ScalarMode", "GetArray", "Constants", "VectorMode", "VtkDataTypes", "notImplemented", "range", "sum", "time", "DEFAULT_VALUES", "extend", "newInstance", "index", "STATIC", "defaultValues", "extend", "newInstance", "vtkErrorMacro", "point", "DEFAULT_VALUES", "extend", "newInstance", "index", "dist2", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "STATIC", "DEFAULT_VALUES", "extend", "newInstance", "Constants", "IntersectionState", "Constants", "intersection", "A", "obj", "STATIC", "intersect", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "t1", "t2", "distance", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "EPSILON", "point", "distance", "length", "STATIC", "computeNormal", "EPSILON", "DEFAULT_VALUES", "extend", "newInstance", "length", "dist2", "t1", "t2", "t12", "t22", "STATIC", "t3", "DEFAULT_VALUES", "extend", "newInstance", "point", "DEFAULT_VALUES", "extend", "newInstance", "vtkErrorMacro", "notImplemented", "STATIC", "dist2", "DEFAULT_VALUES", "extend", "newInstance", "vtkWarningMacro", "str", "index", "max", "DEFAULT_VALUES", "extend", "newInstance", "ticks", "scale", "linear", "format", "length", "defaultValues", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "newInstance", "Constants", "ObjectType", "Constants", "STATIC", "DEFAULT_VALUES", "extend", "newInstance", "range", "vtkErrorMacro", "array", "index", "DEFAULT_VALUES", "extend", "newInstance", "vtkErrorMacro", "DEFAULT_VALUES", "extend", "newInstance", "vtkErrorMacro", "index", "array", "DEFAULT_VALUES", "extend", "newInstance", "normalize", "index", "DEFAULT_VALUES", "extend", "newInstance", "mode", "DEFAULT_VALUES", "extend", "newInstance", "FieldAssociations", "primTypes", "Representation", "Shading", "ScalarMode", "Filter", "Wrap", "vtkErrorMacro", "CoordinateSystem", "mode", "index", "length", "DEFAULT_VALUES", "extend", "newInstance", "vtkDebugMacro", "DEFAULT_VALUES", "extend", "newInstance", "Constants", "primTypes", "Filter", "Wrap", "vtkErrorMacro", "StartEvent", "EndEvent", "point", "index", "DEFAULT_VALUES", "extend", "newInstance", "vtkDebugMacro", "count", "index", "DEFAULT_VALUES", "extend", "newInstance", "Constants", "VectorMode", "Orientation", "Constants", "applyTextStyle", "defaultGenerateTicks", "scale", "linear", "ticks", "format", "range", "tmp2v3", "tmpv3", "defaultValues", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "newInstance", "vtkErrorMacro", "DEFAULT_VALUES", "extend", "newInstance", "CLASS_MAPPING", "registerOverride", "DEFAULT_VALUES", "extend", "newInstance", "CoordinateSystem", "DEFAULT_VALUES", "extend", "newInstance", "registerOverride", "newInstance", "CoordinateSystem", "DEFAULT_VALUES", "extend", "newInstance", "registerOverride", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "registerOverride", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "registerOverride", "newInstance", "Constants", "DEFAULT_VALUES", "extend", "newInstance", "Constants", "Representation", "PrimitiveTypes", "Constants", "ptId", "flatId", "array", "DEFAULT_VALUES", "extend", "newInstance", "BufferUsage", "Constants", "vtkErrorMacro", "VtkDataTypes", "STATIC", "format", "scale", "index", "getNormal", "array", "DEFAULT_VALUES", "extend", "newInstance", "DisplayLocation", "Constants", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "substitute", "DEFAULT_VALUES", "extend", "newInstance", "BufferUsage", "vtkErrorMacro", "group", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "re", "DEFAULT_VALUES", "extend", "newInstance", "BufferUsage", "PrimitiveTypes", "Representation", "ScalarMode", "CoordinateSystem", "DisplayLocation", "fDesc", "code", "DEFAULT_VALUES", "extend", "newInstance", "PrimitiveTypes", "DEFAULT_VALUES", "extend", "newInstance", "registerOverride", "DEFAULT_VALUES", "extend", "newInstance", "registerOverride", "newInstance", "PrimitiveTypes", "defaultValues", "extend", "newInstance", "registerOverride", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "BufferUsage", "vtkErrorMacro", "group", "DEFAULT_VALUES", "extend", "newInstance", "vtkDebugMacro", "length", "count", "index", "DEFAULT_VALUES", "extend", "newInstance", "registerOverride", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "registerOverride", "newInstance"]
}
